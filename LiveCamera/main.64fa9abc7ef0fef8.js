(self.webpackChunkAngularLiveCameraMap=self.webpackChunkAngularLiveCameraMap||[]).push([[179],{9706:(pt,Ne,U)=>{"use strict";U.d(Ne,{aN:()=>fe});var R=function se(q,X){if(q===X)return!0;if(q&&X&&"object"==typeof q&&"object"==typeof X){if(q.constructor!==X.constructor)return!1;var ee,$,H;if(Array.isArray(q)){if((ee=q.length)!=X.length)return!1;for($=ee;0!=$--;)if(!se(q[$],X[$]))return!1;return!0}if(q.constructor===RegExp)return q.source===X.source&&q.flags===X.flags;if(q.valueOf!==Object.prototype.valueOf)return q.valueOf()===X.valueOf();if(q.toString!==Object.prototype.toString)return q.toString()===X.toString();if((ee=(H=Object.keys(q)).length)!==Object.keys(X).length)return!1;for($=ee;0!=$--;)if(!Object.prototype.hasOwnProperty.call(X,H[$]))return!1;for($=ee;0!=$--;){var Q=H[$];if(!se(q[Q],X[Q]))return!1}return!0}return q!=q&&X!=X};const D="__googleMapsScriptId";var we=(()=>{return(se=we||(we={}))[se.INITIALIZED=0]="INITIALIZED",se[se.LOADING=1]="LOADING",se[se.SUCCESS=2]="SUCCESS",se[se.FAILURE=3]="FAILURE",we;var se})();class fe{constructor({apiKey:q,authReferrerPolicy:X,channel:ee,client:$,id:H=D,language:Q,libraries:ie=[],mapIds:je,nonce:qe,region:ke,retries:Mt=3,url:De="https://maps.googleapis.com/maps/api/js",version:yt}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=q,this.authReferrerPolicy=X,this.channel=ee,this.client=$,this.id=H||D,this.language=Q,this.libraries=ie,this.mapIds=je,this.nonce=qe,this.region=ke,this.retries=Mt,this.url=De,this.version=yt,fe.instance){if(!R(this.options,fe.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(fe.instance.options)}`);return fe.instance}fe.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?we.FAILURE:this.done?we.SUCCESS:this.loading?we.LOADING:we.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let q=this.url;return q+=`?callback=${this.CALLBACK}`,this.apiKey&&(q+=`&key=${this.apiKey}`),this.channel&&(q+=`&channel=${this.channel}`),this.client&&(q+=`&client=${this.client}`),this.libraries.length>0&&(q+=`&libraries=${this.libraries.join(",")}`),this.language&&(q+=`&language=${this.language}`),this.region&&(q+=`&region=${this.region}`),this.version&&(q+=`&v=${this.version}`),this.mapIds&&(q+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(q+=`&auth_referrer_policy=${this.authReferrerPolicy}`),q}deleteScript(){const q=document.getElementById(this.id);q&&q.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((q,X)=>{this.loadCallback(ee=>{ee?X(ee.error):q(window.google)})})}loadCallback(q){this.callbacks.push(q),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const q=this.createUrl(),X=document.createElement("script");X.id=this.id,X.type="text/javascript",X.src=q,X.onerror=this.loadErrorCallback.bind(this),X.defer=!0,X.async=!0,this.nonce&&(X.nonce=this.nonce),document.head.appendChild(X)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(q){if(this.errors.push(q),this.errors.length<=this.retries){const X=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${X} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},X)}else this.onerrorEvent=q,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(q=>{q(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}},5876:(pt,Ne,U)=>{"use strict";U.d(Ne,{O:()=>q});var R=U(7629),D=U.n(R),we=U(2340),fe=U(5e3),se=U(520);let q=(()=>{class X{constructor($){this.http=$}makeNonce($=3){const H="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";let Q="";for(let ie=0;ie<$;ie++)Q+=H.charAt(Math.floor(Math.random()*H.length));return Q}fetchJson($){return(0,we.w_)(`HttpService: Fetch data from ${$}`),this.http.get($)}fetchGHJson($){(0,we.w_)(`HttpService: Fetch data from ${$}`);const H=this.makeUncacheUrl($);return this.fetchJson(H)}makeUncacheUrl($){const H=new(D())($,!0),Q=this.makeNonce();return H.query.n=Q,H.toString()}}return X.\u0275fac=function($){return new($||X)(fe.LFG(se.eN))},X.\u0275prov=fe.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})()},2340:(pt,Ne,U)=>{"use strict";U.d(Ne,{NZ:()=>R,eM:()=>we,jG:()=>se,w_:()=>D,wb:()=>q});const R={production:!0,appName:"Live Camera Map",VERSION:"0.0.30",googleMapApiKey:"AIzaSyDv6JbalvfY3TwSUGqRwIRCbXrz8EADLnw",GA_CODE:"G-4GS7H1E5RD",adsenseConfig:{adClient:"ca-pub-8552692955110453",adSlot:"6560124636",adFormat:"auto",fullWidthResponsive:!0,display:"block"},MapDefaultLocation:{lat:36.251668,lng:136.64092},ThreadParallelMax:5,DataLocationPrefix:"https://mhayashi1120.net/var/PublicLiveCamera/",DataVersionRange:"0.5.1",ThumbVersionRange:"0.5.0"};function D(...X){}function we(...X){}function se(...X){}function q(...X){console.error(...X)}},9159:(pt,Ne,U)=>{"use strict";var R=U(2313),D=U(5e3);class we{}const se="*";function q(l,e){return{type:7,name:l,definitions:e,options:{}}}function X(l,e=null){return{type:4,styles:e,timings:l}}function $(l,e=null){return{type:2,steps:l,options:e}}function H(l){return{type:6,styles:l,offset:null}}function je(l,e,t=null){return{type:1,expr:l,animation:e,options:t}}function Je(l){Promise.resolve(null).then(l)}class ze{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Je(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class le{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,s=0;const a=this.players.length;0==a?Je(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==a&&this._onFinish()}),u.onDestroy(()=>{++i==a&&this._onDestroy()}),u.onStart(()=>{++s==a&&this._onStart()})}),this.totalTime=this.players.reduce((u,h)=>Math.max(u,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const s=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(s)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function dt(l){return new D.vHH(3e3,!1)}function ft(){return"undefined"!=typeof window&&void 0!==window.document}function be(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function me(l){switch(l.length){case 0:return new ze;case 1:return l[0];default:return new le(l)}}function Ue(l,e,t,i,s=new Map,a=new Map){const u=[],h=[];let p=-1,m=null;if(i.forEach(v=>{const _=v.get("offset"),M=_==p,E=M&&m||new Map;v.forEach((A,T)=>{let I=T,k=A;if("offset"!==T)switch(I=e.normalizePropertyName(I,u),k){case"!":k=s.get(T);break;case se:k=a.get(T);break;default:k=e.normalizeStyleValue(T,I,k,u)}E.set(I,k)}),M||h.push(E),m=E,p=_}),u.length)throw function oo(l){return new D.vHH(3502,!1)}();return h}function Et(l,e,t,i){switch(e){case"start":l.onStart(()=>i(t&&sn(t,"start",l)));break;case"done":l.onDone(()=>i(t&&sn(t,"done",l)));break;case"destroy":l.onDestroy(()=>i(t&&sn(t,"destroy",l)))}}function sn(l,e,t){const i=t.totalTime,a=dn(l.element,l.triggerName,l.fromState,l.toState,e||l.phaseName,null==i?l.totalTime:i,!!t.disabled),u=l._data;return null!=u&&(a._data=u),a}function dn(l,e,t,i,s="",a=0,u){return{element:l,triggerName:e,fromState:t,toState:i,phaseName:s,totalTime:a,disabled:!!u}}function kt(l,e,t){let i=l.get(e);return i||l.set(e,i=t),i}function rn(l){const e=l.indexOf(":");return[l.substring(1,e),l.slice(e+1)]}let Vn=(l,e)=>!1,Vt=(l,e,t)=>[],Fi=null;function hn(l){const e=l.parentNode||l.host;return e===Fi?null:e}(be()||"undefined"!=typeof Element)&&(ft()?(Fi=(()=>document.documentElement)(),Vn=(l,e)=>{for(;e;){if(e===l)return!0;e=hn(e)}return!1}):Vn=(l,e)=>l.contains(e),Vt=(l,e,t)=>{if(t)return Array.from(l.querySelectorAll(e));const i=l.querySelector(e);return i?[i]:[]});let gi=null,Fr=!1;const xr=Vn,ts=Vt;let Bs=(()=>{class l{validateStyleProperty(t){return function wi(l){gi||(gi=function Br(){return"undefined"!=typeof document?document.body:null}()||{},Fr=!!gi.style&&"WebkitAppearance"in gi.style);let e=!0;return gi.style&&!function Yn(l){return"ebkit"==l.substring(1,6)}(l)&&(e=l in gi.style,!e&&Fr&&(e="Webkit"+l.charAt(0).toUpperCase()+l.slice(1)in gi.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return xr(t,i)}getParentElement(t){return hn(t)}query(t,i,s){return ts(t,i,s)}computeStyle(t,i,s){return s||""}animate(t,i,s,a,u,h=[],p){return new ze(s,a)}}return l.\u0275fac=function(t){return new(t||l)},l.\u0275prov=D.Yz7({token:l,factory:l.\u0275fac}),l})(),ps=(()=>{class l{}return l.NOOP=new Bs,l})();const Ri="ng-enter",ms="ng-leave",lr="ng-trigger",cr=".ng-trigger",Oe="ng-animating",Se=".ng-animating";function de(l){if("number"==typeof l)return l;const e=l.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:We(parseFloat(e[1]),e[2])}function We(l,e){return"s"===e?1e3*l:l}function rt(l,e,t){return l.hasOwnProperty("duration")?l:function nt(l,e,t){let s,a=0,u="";if("string"==typeof l){const h=l.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(dt()),{duration:0,delay:0,easing:""};s=We(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(a=We(parseFloat(p),h[4]));const m=h[5];m&&(u=m)}else s=l;if(!t){let h=!1,p=e.length;s<0&&(e.push(function st(){return new D.vHH(3100,!1)}()),h=!0),a<0&&(e.push(function et(){return new D.vHH(3101,!1)}()),h=!0),h&&e.splice(p,0,dt())}return{duration:s,delay:a,easing:u}}(l,e,t)}function Nt(l,e={}){return Object.keys(l).forEach(t=>{e[t]=l[t]}),e}function pn(l){const e=new Map;return Object.keys(l).forEach(t=>{e.set(t,l[t])}),e}function Wn(l,e=new Map,t){if(t)for(let[i,s]of t)e.set(i,s);for(let[i,s]of l)e.set(i,s);return e}function gs(l,e,t){return t?e+":"+t+";":""}function ei(l){let e="";for(let t=0;t<l.style.length;t++){const i=l.style.item(t);e+=gs(0,i,l.style.getPropertyValue(i))}for(const t in l.style)l.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=gs(0,ur(t),l.style[t]));l.setAttribute("style",e)}function Mi(l,e,t){l.style&&(e.forEach((i,s)=>{const a=Vr(s);t&&!t.has(s)&&t.set(s,l.style[a]),l.style[a]=i}),be()&&ei(l))}function Si(l,e){l.style&&(e.forEach((t,i)=>{const s=Vr(i);l.style[s]=""}),be()&&ei(l))}function on(l){return Array.isArray(l)?1==l.length?l[0]:$(l):l}const ns=new RegExp("{{\\s*(.+?)\\s*}}","g");function ra(l){let e=[];if("string"==typeof l){let t;for(;t=ns.exec(l);)e.push(t[1]);ns.lastIndex=0}return e}function ji(l,e,t){const i=l.toString(),s=i.replace(ns,(a,u)=>{let h=e[u];return null==h&&(t.push(function Z(l){return new D.vHH(3003,!1)}()),h=""),h.toString()});return s==i?l:s}function yi(l){const e=[];let t=l.next();for(;!t.done;)e.push(t.value),t=l.next();return e}const Lo=/-+([a-z0-9])/g;function Vr(l){return l.replace(Lo,(...e)=>e[1].toUpperCase())}function ur(l){return l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function bn(l,e,t){switch(e.type){case 7:return l.visitTrigger(e,t);case 0:return l.visitState(e,t);case 1:return l.visitTransition(e,t);case 2:return l.visitSequence(e,t);case 3:return l.visitGroup(e,t);case 4:return l.visitAnimate(e,t);case 5:return l.visitKeyframes(e,t);case 6:return l.visitStyle(e,t);case 8:return l.visitReference(e,t);case 9:return l.visitAnimateChild(e,t);case 10:return l.visitAnimateRef(e,t);case 11:return l.visitQuery(e,t);case 12:return l.visitStagger(e,t);default:throw function V(l){return new D.vHH(3004,!1)}()}}function sa(l,e){return window.getComputedStyle(l)[e]}function eu(l,e){const t=[];return"string"==typeof l?l.split(/\s*,\s*/).forEach(i=>function tu(l,e,t){if(":"==l[0]){const p=function nu(l,e){switch(l){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function Lr(l){return new D.vHH(3016,!1)}()),"* => *"}}(l,t);if("function"==typeof p)return void e.push(p);l=p}const i=l.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function di(l){return new D.vHH(3015,!1)}()),e;const s=i[1],a=i[2],u=i[3];e.push(wr(s,u));"<"==a[0]&&!("*"==s&&"*"==u)&&e.push(wr(u,s))}(i,t,e)):t.push(l),t}const Ha=new Set(["true","1"]),Vl=new Set(["false","0"]);function wr(l,e){const t=Ha.has(l)||Vl.has(l),i=Ha.has(e)||Vl.has(e);return(s,a)=>{let u="*"==l||l==s,h="*"==e||e==a;return!u&&t&&"boolean"==typeof s&&(u=s?Ha.has(l):Vl.has(l)),!h&&i&&"boolean"==typeof a&&(h=a?Ha.has(e):Vl.has(e)),u&&h}}const jh=new RegExp("s*:selfs*,?","g");function zl(l,e,t,i){return new su(l).build(e,t,i)}class su{constructor(e){this._driver=e}build(e,t,i){const s=new au(t);return this._resetContextStyleTimingState(s),bn(this,on(e),s)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,s=t.depCount=0;const a=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function _e(){return new D.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const p=h,m=p.name;m.toString().split(/\s*,\s*/).forEach(v=>{p.name=v,a.push(this.visitState(p,t))}),p.name=m}else if(1==h.type){const p=this.visitTransition(h,t);i+=p.queryCount,s+=p.depCount,u.push(p)}else t.errors.push(function He(){return new D.vHH(3007,!1)}())}),{type:7,name:e.name,states:a,transitions:u,queryCount:i,depCount:s,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(i.containsDynamicStyles){const a=new Set,u=s||{};i.styles.forEach(h=>{h instanceof Map&&h.forEach(p=>{ra(p).forEach(m=>{u.hasOwnProperty(m)||a.add(m)})})}),a.size&&(yi(a.values()),t.errors.push(function Fe(l,e){return new D.vHH(3008,!1)}()))}return{type:0,name:e.name,style:i,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=bn(this,on(e.animation),t);return{type:1,matchers:eu(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:qi(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>bn(this,i,t)),options:qi(e.options)}}visitGroup(e,t){const i=t.currentTime;let s=0;const a=e.steps.map(u=>{t.currentTime=i;const h=bn(this,u,t);return s=Math.max(s,t.currentTime),h});return t.currentTime=s,{type:3,steps:a,options:qi(e.options)}}visitAnimate(e,t){const i=function Gl(l,e){if(l.hasOwnProperty("duration"))return l;if("number"==typeof l)return is(rt(l,e).duration,0,"");const t=l;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=is(0,0,"");return a.dynamic=!0,a.strValue=t,a}const s=rt(t,e);return is(s.duration,s.delay,s.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let s,a=e.styles?e.styles:H({});if(5==a.type)s=this.visitKeyframes(a,t);else{let u=e.styles,h=!1;if(!u){h=!0;const m={};i.easing&&(m.easing=i.easing),u=H(m)}t.currentTime+=i.duration+i.delay;const p=this.visitStyle(u,t);p.isEmptyStep=h,s=p}return t.currentAnimateTimings=null,{type:4,timings:i,style:s,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],s=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of s)"string"==typeof h?h===se?i.push(h):t.errors.push(new D.vHH(3002,!1)):i.push(pn(h));let a=!1,u=null;return i.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(u=h.get("easing"),h.delete("easing")),!a))for(let p of h.values())if(p.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:i,easing:u,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let s=t.currentTime,a=t.currentTime;i&&a>0&&(a-=i.duration+i.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((h,p)=>{const m=t.collectedStyles.get(t.currentQuerySelector),v=m.get(p);let _=!0;v&&(a!=s&&a>=v.startTime&&s<=v.endTime&&(t.errors.push(function Rt(l,e,t,i,s){return new D.vHH(3010,!1)}()),_=!1),a=v.startTime),_&&m.set(p,{startTime:a,endTime:s}),t.options&&function ao(l,e,t){const i=e.params||{},s=ra(l);s.length&&s.forEach(a=>{i.hasOwnProperty(a)||t.push(function Pe(l){return new D.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Ke(){return new D.vHH(3011,!1)}()),i;let a=0;const u=[];let h=!1,p=!1,m=0;const v=e.steps.map(k=>{const B=this._makeStyleAst(k,t);let j=null!=B.offset?B.offset:function Hl(l){if("string"==typeof l)return null;let e=null;if(Array.isArray(l))l.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(l instanceof Map&&l.has("offset")){const t=l;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(B.styles),z=0;return null!=j&&(a++,z=B.offset=j),p=p||z<0||z>1,h=h||z<m,m=z,u.push(z),B});p&&t.errors.push(function Yt(){return new D.vHH(3012,!1)}()),h&&t.errors.push(function jt(){return new D.vHH(3200,!1)}());const _=e.steps.length;let M=0;a>0&&a<_?t.errors.push(function ln(){return new D.vHH(3202,!1)}()):0==a&&(M=1/(_-1));const E=_-1,A=t.currentTime,T=t.currentAnimateTimings,I=T.duration;return v.forEach((k,B)=>{const j=M>0?B==E?1:M*B:u[B],z=j*I;t.currentTime=A+T.delay+z,T.duration=z,this._validateStyleAst(k,t),k.offset=j,i.styles.push(k)}),i}visitReference(e,t){return{type:8,animation:bn(this,on(e.animation),t),options:qi(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:qi(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:qi(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[a,u]=function ou(l){const e=!!l.split(/\s*,\s*/).find(t=>":self"==t);return e&&(l=l.replace(jh,"")),l=l.replace(/@\*/g,cr).replace(/@\w+/g,t=>cr+"-"+t.slice(1)).replace(/:animating/g,Se),[l,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+a:a,kt(t.collectedStyles,t.currentQuerySelector,new Map);const h=bn(this,on(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:a,limit:s.limit||0,optional:!!s.optional,includeSelf:u,animation:h,originalSelector:e.selector,options:qi(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Kt(){return new D.vHH(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:rt(e.timings,t.errors,!0);return{type:12,animation:bn(this,on(e.animation),t),timings:i,options:null}}}class au{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function qi(l){return l?(l=Nt(l)).params&&(l.params=function qh(l){return l?Nt(l):null}(l.params)):l={},l}function is(l,e,t){return{duration:l,delay:e,easing:t}}function co(l,e,t,i,s,a,u=null,h=!1){return{type:1,element:l,keyframes:e,preStyleProps:t,postStyleProps:i,duration:s,delay:a,totalTime:s+a,easing:u,subTimeline:h}}class aa{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const _s=new RegExp(":enter","g"),ho=new RegExp(":leave","g");function Oo(l,e,t,i,s,a=new Map,u=new Map,h,p,m=[]){return(new Ga).buildKeyframes(l,e,t,i,s,a,u,h,p,m)}class Ga{buildKeyframes(e,t,i,s,a,u,h,p,m,v=[]){m=m||new aa;const _=new xs(e,t,m,s,a,v,[]);_.options=p;const M=p.delay?de(p.delay):0;_.currentTimeline.delayNextStep(M),_.currentTimeline.setStyles([u],null,_.errors,p),bn(this,i,_);const E=_.timelines.filter(A=>A.containsAnimation());if(E.length&&h.size){let A;for(let T=E.length-1;T>=0;T--){const I=E[T];if(I.element===t){A=I;break}}A&&!A.allowOnlyTimelineStyles()&&A.setStyles([h],null,_.errors,p)}return E.length?E.map(A=>A.buildKeyframes()):[co(t,[],[],[],0,M,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const s=t.createSubContext(e.options),a=t.currentTimeline.currentTime,u=this._visitSubInstructions(i,s,s.options);a!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let a=t.currentTimeline.currentTime;const u=null!=i.duration?de(i.duration):null,h=null!=i.delay?de(i.delay):null;return 0!==u&&e.forEach(p=>{const m=t.appendInstructionToTimeline(p,u,h);a=Math.max(a,m.duration+m.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),bn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let s=t;const a=e.options;if(a&&(a.params||a.delay)&&(s=t.createSubContext(a),s.transformIntoNewTimeline(),null!=a.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=Us);const u=de(a.delay);s.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>bn(this,u,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>i&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let s=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?de(e.options.delay):0;e.steps.forEach(u=>{const h=t.createSubContext(e.options);a&&h.delayNextStep(a),bn(this,u,h),s=Math.max(s,h.currentTimeline.currentTime),i.push(h.currentTimeline)}),i.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return rt(t.params?ji(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),s.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(i.duration),this.visitStyle(a,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,s=t.currentAnimateTimings;!s&&i.hasCurrentStyleProperties()&&i.forwardFrame();const a=s&&s.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(a):i.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,s=t.currentTimeline.duration,a=i.duration,h=t.createSubContext().currentTimeline;h.easing=i.easing,e.styles.forEach(p=>{h.forwardTime((p.offset||0)*a),h.setStyles(p.styles,p.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(s+a),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,s=e.options||{},a=s.delay?de(s.delay):0;a&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Us);let u=i;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=h.length;let p=null;h.forEach((m,v)=>{t.currentQueryIndex=v;const _=t.createSubContext(e.options,m);a&&_.delayNextStep(a),m===t.element&&(p=_.currentTimeline),bn(this,e.animation,_),_.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,_.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,s=t.currentTimeline,a=e.timings,u=Math.abs(a.duration),h=u*(t.currentQueryTotal-1);let p=u*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":p=h-p;break;case"full":p=i.currentStaggerTime}const v=t.currentTimeline;p&&v.delayNextStep(p);const _=v.currentTime;bn(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=s.currentTime-_+(s.startTime-i.currentTimeline.startTime)}}const Us={};class xs{constructor(e,t,i,s,a,u,h,p){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=s,this._leaveClassName=a,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Us,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new Vs(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let s=this.options;null!=i.duration&&(s.duration=de(i.duration)),null!=i.delay&&(s.delay=de(i.delay));const a=i.params;if(a){let u=s.params;u||(u=this.options.params={}),Object.keys(a).forEach(h=>{(!t||!u.hasOwnProperty(h))&&(u[h]=ji(a[h],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(s=>{i[s]=t[s]})}}return e}createSubContext(e=null,t,i){const s=t||this.element,a=new xs(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,i||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=Us,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const s={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},a=new Kh(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(a),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,s,a,u){let h=[];if(s&&h.push(this.element),e.length>0){e=(e=e.replace(_s,"."+this._enterClassName)).replace(ho,"."+this._leaveClassName);let m=this._driver.query(this.element,e,1!=i);0!==i&&(m=i<0?m.slice(m.length+i,m.length):m.slice(0,i)),h.push(...m)}return!a&&0==h.length&&u.push(function Ai(l){return new D.vHH(3014,!1)}()),h}}class Vs{constructor(e,t,i,s){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Vs(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||se),this._currentKeyframe.set(t,se);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,s){var a;t&&this._previousKeyframe.set("easing",t);const u=s&&s.params||{},h=function $l(l,e){const t=new Map;let i;return l.forEach(s=>{if("*"===s){i=i||e.keys();for(let a of i)t.set(a,se)}else Wn(s,t)}),t}(e,this._globalTimelineStyles);for(let[p,m]of h){const v=ji(m,u,i);this._pendingStyles.set(p,v),this._localTimelineStyles.has(p)||this._backFill.set(p,null!==(a=this._globalTimelineStyles.get(p))&&void 0!==a?a:se),this._updateStyle(p,v)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const s=this._styleSummary.get(i);(!s||t.time>s.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((h,p)=>{const m=Wn(h,new Map,this._backFill);m.forEach((v,_)=>{"!"===v?e.add(_):v===se&&t.add(_)}),i||m.set("offset",p/this.duration),s.push(m)});const a=e.size?yi(e.values()):[],u=t.size?yi(t.values()):[];if(i){const h=s[0],p=new Map(h);h.set("offset",0),p.set("offset",1),s=[h,p]}return co(this.element,s,a,u,this.duration,this.startTime,this.easing,!1)}}class Kh extends Vs{constructor(e,t,i,s,a,u,h=!1){super(e,t,u.delay),this.keyframes=i,this.preStyleProps=s,this.postStyleProps=a,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],u=i+t,h=t/u,p=Wn(e[0]);p.set("offset",0),a.push(p);const m=Wn(e[0]);m.set("offset",ws(h)),a.push(m);const v=e.length-1;for(let _=1;_<=v;_++){let M=Wn(e[_]);const E=M.get("offset");M.set("offset",ws((t+E*i)/u)),a.push(M)}i=u,t=0,s="",e=a}return co(this.element,e,this.preStyleProps,this.postStyleProps,i,t,s,!0)}}function ws(l,e=3){const t=Math.pow(10,e-1);return Math.round(l*t)/t}class zs{}const la=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class cu extends zs{normalizePropertyName(e,t){return Vr(e)}normalizeStyleValue(e,t,i,s){let a="";const u=i.toString().trim();if(la.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)a="px";else{const h=i.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&s.push(function oe(l,e){return new D.vHH(3005,!1)}())}return u+a}}function uu(l,e,t,i,s,a,u,h,p,m,v,_,M){return{type:0,element:l,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:a,toState:i,toStyles:u,timelines:h,queriedElements:p,preStyleProps:m,postStyleProps:v,totalTime:_,errors:M}}const ci={};class Fo{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,s){return function fo(l,e,t,i,s){return l.some(a=>a(e,t,i,s))}(this.ast.matchers,e,t,i,s)}buildStyles(e,t,i){let s=this._stateStyles.get("*");return void 0!==e&&(s=this._stateStyles.get(null==e?void 0:e.toString())||s),s?s.buildStyles(t,i):new Map}build(e,t,i,s,a,u,h,p,m,v){var _;const M=[],E=this.ast.options&&this.ast.options.params||ci,T=this.buildStyles(i,h&&h.params||ci,M),I=p&&p.params||ci,k=this.buildStyles(s,I,M),B=new Set,j=new Map,z=new Map,te="void"===s,ae={params:rr(I,E),delay:null===(_=this.ast.options)||void 0===_?void 0:_.delay},Me=v?[]:Oo(e,t,this.ast.animation,a,u,T,k,ae,m,M);let G=0;if(Me.forEach(Ce=>{G=Math.max(Ce.duration+Ce.delay,G)}),M.length)return uu(t,this._triggerName,i,s,te,T,k,[],[],j,z,G,M);Me.forEach(Ce=>{const Re=Ce.element,vt=kt(j,Re,new Set);Ce.preStyleProps.forEach(Le=>vt.add(Le));const Tt=kt(z,Re,new Set);Ce.postStyleProps.forEach(Le=>Tt.add(Le)),Re!==t&&B.add(Re)});const ye=yi(B.values());return uu(t,this._triggerName,i,s,te,T,k,Me,ye,j,z,G)}}function rr(l,e){const t=Nt(e);for(const i in l)l.hasOwnProperty(i)&&null!=l[i]&&(t[i]=l[i]);return t}class hu{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,s=Nt(this.defaultParams);return Object.keys(e).forEach(a=>{const u=e[a];null!==u&&(s[a]=u)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((u,h)=>{u&&(u=ji(u,s,t));const p=this.normalizer.normalizePropertyName(h,t);u=this.normalizer.normalizeStyleValue(h,p,u,t),i.set(p,u)})}),i}}class Hs{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(s=>{this.states.set(s.name,new hu(s.style,s.options&&s.options.params||{},i))}),K(this.states,"true","1"),K(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new Fo(e,s,this.states))}),this.fallbackTransition=function N(l,e,t){return new Fo(l,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,s){return this.transitionFactories.find(u=>u.match(e,t,i,s))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function K(l,e,t){l.has(e)?l.has(t)||l.set(t,l.get(e)):l.has(t)&&l.set(e,l.get(t))}const O=new aa;class J{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],a=zl(this._driver,t,i,[]);if(i.length)throw function Gi(l){return new D.vHH(3503,!1)}();this._animations.set(e,a)}_buildPlayer(e,t,i){const s=e.element,a=Ue(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(s,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const s=[],a=this._animations.get(e);let u;const h=new Map;if(a?(u=Oo(this._driver,t,a,Ri,ms,new Map,new Map,i,O,s),u.forEach(v=>{const _=kt(h,v.element,new Map);v.postStyleProps.forEach(M=>_.set(M,null))})):(s.push(function Nr(){return new D.vHH(3300,!1)}()),u=[]),s.length)throw function ks(l){return new D.vHH(3504,!1)}();h.forEach((v,_)=>{v.forEach((M,E)=>{v.set(E,this._driver.computeStyle(_,E,se))})});const m=me(u.map(v=>{const _=h.get(v.element);return this._buildPlayer(v,new Map,_)}));return this._playersById.set(e,m),m.onDestroy(()=>this.destroy(e)),this.players.push(m),m}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Wi(l){return new D.vHH(3301,!1)}();return t}listen(e,t,i,s){const a=dn(t,"","","");return Et(this._getPlayer(e),i,a,s),()=>{}}command(e,t,i,s){if("register"==i)return void this.register(e,s[0]);if("create"==i)return void this.create(e,t,s[0]||{});const a=this._getPlayer(e);switch(i){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const xe="ng-animate-queued",at="ng-animate-disabled",Xn=[],Ln={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Bi={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Rn="__ng_removed";class Di{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function $a(l){return null!=l?l:null}(i?e.value:e),i){const a=Nt(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(s=>{null==i[s]&&(i[s]=t[s])})}}}const hr="void",ot=new Di(hr);class En{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Wr(t,this._hostClassName)}listen(e,t,i,s){if(!this._triggers.has(t))throw function nn(l,e){return new D.vHH(3302,!1)}();if(null==i||0==i.length)throw function fi(l){return new D.vHH(3303,!1)}();if(!function dr(l){return"start"==l||"done"==l}(i))throw function fs(l,e){return new D.vHH(3400,!1)}();const a=kt(this._elementListeners,e,[]),u={name:t,phase:i,callback:s};a.push(u);const h=kt(this._engine.statesByElement,e,new Map);return h.has(t)||(Wr(e,lr),Wr(e,lr+"-"+t),h.set(t,ot)),()=>{this._engine.afterFlush(()=>{const p=a.indexOf(u);p>=0&&a.splice(p,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function $i(l){return new D.vHH(3401,!1)}();return t}trigger(e,t,i,s=!0){const a=this._getTrigger(t),u=new rs(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(Wr(e,lr),Wr(e,lr+"-"+t),this._engine.statesByElement.set(e,h=new Map));let p=h.get(t);const m=new Di(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&m.absorbOptions(p.options),h.set(t,m),p||(p=ot),m.value!==hr&&p.value===m.value){if(!function qa(l,e){const t=Object.keys(l),i=Object.keys(e);if(t.length!=i.length)return!1;for(let s=0;s<t.length;s++){const a=t[s];if(!e.hasOwnProperty(a)||l[a]!==e[a])return!1}return!0}(p.params,m.params)){const T=[],I=a.matchStyles(p.value,p.params,T),k=a.matchStyles(m.value,m.params,T);T.length?this._engine.reportError(T):this._engine.afterFlush(()=>{Si(e,I),Mi(e,k)})}return}const M=kt(this._engine.playersByElement,e,[]);M.forEach(T=>{T.namespaceId==this.id&&T.triggerName==t&&T.queued&&T.destroy()});let E=a.matchTransition(p.value,m.value,e,m.params),A=!1;if(!E){if(!s)return;E=a.fallbackTransition,A=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:E,fromState:p,toState:m,player:u,isFallbackTransition:A}),A||(Wr(e,xe),u.onStart(()=>{ja(e,xe)})),u.onDone(()=>{let T=this.players.indexOf(u);T>=0&&this.players.splice(T,1);const I=this._engine.playersByElement.get(e);if(I){let k=I.indexOf(u);k>=0&&I.splice(k,1)}}),this.players.push(u),M.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,cr,!0);i.forEach(s=>{if(s[Rn])return;const a=this._engine.fetchNamespacesByElement(s);a.size?a.forEach(u=>u.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,i,s){const a=this._engine.statesByElement.get(e),u=new Map;if(a){const h=[];if(a.forEach((p,m)=>{if(u.set(m,p.value),this._triggers.has(m)){const v=this.trigger(e,m,hr,s);v&&h.push(v)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),i&&me(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const s=new Set;t.forEach(a=>{const u=a.name;if(s.has(u))return;s.add(u);const p=this._triggers.get(u).fallbackTransition,m=i.get(u)||ot,v=new Di(hr),_=new rs(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:p,fromState:m,toState:v,player:_,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(i.totalAnimations){const a=i.players.length?i.playersByQueriedElement.get(e):[];if(a&&a.length)s=!0;else{let u=e;for(;u=u.parentNode;)if(i.statesByElement.get(u)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)i.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Rn];(!a||a===Ln)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Wr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const s=i.player;if(s.destroyed)return;const a=i.element,u=this._elementListeners.get(a);u&&u.forEach(h=>{if(h.name==i.triggerName){const p=dn(a,i.triggerName,i.fromState.value,i.toState.value);p._data=e,Et(i.player,h.phase,p,h.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(i)}),this._queue=[],t.sort((i,s)=>{const a=i.transition.ast.depCount,u=s.transition.ast.depCount;return 0==a||0==u?a-u:this._engine.driver.containsElement(i.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class Hr{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new En(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,s=this.namespacesByHostElement;if(i.length-1>=0){let u=!1,h=this.driver.getParentElement(t);for(;h;){const p=s.get(h);if(p){const m=i.indexOf(p);i.splice(m+1,0,e),u=!0;break}h=this.driver.getParentElement(h)}u||i.unshift(e)}else i.push(e);return s.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let s=this._namespaceLookup[e];s&&s.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const s=this._namespaceList.indexOf(i);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let s of i.values())if(s.namespaceId){const a=this._fetchNamespace(s.namespaceId);a&&t.add(a)}return t}trigger(e,t,i,s){if(Gr(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,i,s),!0}return!1}insertNode(e,t,i,s){if(!Gr(t))return;const a=t[Rn];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,i)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Wr(e,at)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),ja(e,at))}removeNode(e,t,i,s){if(Gr(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,s):this.markElementAsRemoved(e,t,!1,s),i){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,s)}}else this._onRemovalComplete(t,s)}markElementAsRemoved(e,t,i,s,a){this.collectedLeaveElements.push(t),t[Rn]={namespaceId:e,setForRemoval:s,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,i,s,a){return Gr(t)?this._fetchNamespace(e).listen(t,i,s,a):()=>{}}_buildInstruction(e,t,i,s,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,s,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,cr,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Se,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return me(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[Rn];if(i&&i.setForRemoval){if(e[Rn]=Ln,i.namespaceId){this.destroyInnerAnimations(e);const s=this._fetchNamespace(i.namespaceId);s&&s.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}!(null===(t=e.classList)||void 0===t)&&t.contains(at)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,s)=>this._balanceNamespaceList(i,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Wr(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let s=0;s<i.length;s++)i[s]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?me(t).onDone(()=>{i.forEach(s=>s())}):i.forEach(s=>s())}}reportError(e){throw function ii(l){return new D.vHH(3402,!1)}()}_flushAnimations(e,t){const i=new aa,s=[],a=new Map,u=[],h=new Map,p=new Map,m=new Map,v=new Set;this.disabledNodes.forEach(Te=>{v.add(Te);const Be=this.driver.query(Te,".ng-animate-queued",!0);for(let Ve=0;Ve<Be.length;Ve++)v.add(Be[Ve])});const _=this.bodyNode,M=Array.from(this.statesByElement.keys()),E=Zf(M,this.collectedEnterElements),A=new Map;let T=0;E.forEach((Te,Be)=>{const Ve=Ri+T++;A.set(Be,Ve),Te.forEach(Ie=>Wr(Ie,Ve))});const I=[],k=new Set,B=new Set;for(let Te=0;Te<this.collectedLeaveElements.length;Te++){const Be=this.collectedLeaveElements[Te],Ve=Be[Rn];Ve&&Ve.setForRemoval&&(I.push(Be),k.add(Be),Ve.hasAnimation?this.driver.query(Be,".ng-star-inserted",!0).forEach(Ie=>k.add(Ie)):B.add(Be))}const j=new Map,z=Zf(M,Array.from(k));z.forEach((Te,Be)=>{const Ve=ms+T++;j.set(Be,Ve),Te.forEach(Ie=>Wr(Ie,Ve))}),e.push(()=>{E.forEach((Te,Be)=>{const Ve=A.get(Be);Te.forEach(Ie=>ja(Ie,Ve))}),z.forEach((Te,Be)=>{const Ve=j.get(Be);Te.forEach(Ie=>ja(Ie,Ve))}),I.forEach(Te=>{this.processLeaveNode(Te)})});const te=[],ae=[];for(let Te=this._namespaceList.length-1;Te>=0;Te--)this._namespaceList[Te].drainQueuedTransitions(t).forEach(Ve=>{const Ie=Ve.player,Ye=Ve.element;if(te.push(Ie),this.collectedEnterElements.length){const cn=Ye[Rn];if(cn&&cn.setForMove){if(cn.previousTriggersValues&&cn.previousTriggersValues.has(Ve.triggerName)){const en=cn.previousTriggersValues.get(Ve.triggerName),Jt=this.statesByElement.get(Ve.element);if(Jt&&Jt.has(Ve.triggerName)){const zt=Jt.get(Ve.triggerName);zt.value=en,Jt.set(Ve.triggerName,zt)}}return void Ie.destroy()}}const Dt=!_||!this.driver.containsElement(_,Ye),mt=j.get(Ye),Pt=A.get(Ye),Ot=this._buildInstruction(Ve,i,Pt,mt,Dt);if(Ot.errors&&Ot.errors.length)return void ae.push(Ot);if(Dt)return Ie.onStart(()=>Si(Ye,Ot.fromStyles)),Ie.onDestroy(()=>Mi(Ye,Ot.toStyles)),void s.push(Ie);if(Ve.isFallbackTransition)return Ie.onStart(()=>Si(Ye,Ot.fromStyles)),Ie.onDestroy(()=>Mi(Ye,Ot.toStyles)),void s.push(Ie);const fn=[];Ot.timelines.forEach(cn=>{cn.stretchStartingKeyframe=!0,this.disabledNodes.has(cn.element)||fn.push(cn)}),Ot.timelines=fn,i.append(Ye,Ot.timelines),u.push({instruction:Ot,player:Ie,element:Ye}),Ot.queriedElements.forEach(cn=>kt(h,cn,[]).push(Ie)),Ot.preStyleProps.forEach((cn,en)=>{if(cn.size){let Jt=p.get(en);Jt||p.set(en,Jt=new Set),cn.forEach((zt,An)=>Jt.add(An))}}),Ot.postStyleProps.forEach((cn,en)=>{let Jt=m.get(en);Jt||m.set(en,Jt=new Set),cn.forEach((zt,An)=>Jt.add(An))})});if(ae.length){const Te=[];ae.forEach(Be=>{Te.push(function tr(l,e){return new D.vHH(3505,!1)}())}),te.forEach(Be=>Be.destroy()),this.reportError(Te)}const Me=new Map,G=new Map;u.forEach(Te=>{const Be=Te.element;i.has(Be)&&(G.set(Be,Be),this._beforeAnimationBuild(Te.player.namespaceId,Te.instruction,Me))}),s.forEach(Te=>{const Be=Te.element;this._getPreviousPlayers(Be,!1,Te.namespaceId,Te.triggerName,null).forEach(Ie=>{kt(Me,Be,[]).push(Ie),Ie.destroy()})});const ye=I.filter(Te=>$r(Te,p,m)),Ce=new Map;Yl(Ce,this.driver,B,m,se).forEach(Te=>{$r(Te,p,m)&&ye.push(Te)});const vt=new Map;E.forEach((Te,Be)=>{Yl(vt,this.driver,new Set(Te),p,"!")}),ye.forEach(Te=>{var Be,Ve;const Ie=Ce.get(Te),Ye=vt.get(Te);Ce.set(Te,new Map([...Array.from(null!==(Be=null==Ie?void 0:Ie.entries())&&void 0!==Be?Be:[]),...Array.from(null!==(Ve=null==Ye?void 0:Ye.entries())&&void 0!==Ve?Ve:[])]))});const Tt=[],Le=[],lt={};u.forEach(Te=>{const{element:Be,player:Ve,instruction:Ie}=Te;if(i.has(Be)){if(v.has(Be))return Ve.onDestroy(()=>Mi(Be,Ie.toStyles)),Ve.disabled=!0,Ve.overrideTotalTime(Ie.totalTime),void s.push(Ve);let Ye=lt;if(G.size>1){let mt=Be;const Pt=[];for(;mt=mt.parentNode;){const Ot=G.get(mt);if(Ot){Ye=Ot;break}Pt.push(mt)}Pt.forEach(Ot=>G.set(Ot,Ye))}const Dt=this._buildAnimation(Ve.namespaceId,Ie,Me,a,vt,Ce);if(Ve.setRealPlayer(Dt),Ye===lt)Tt.push(Ve);else{const mt=this.playersByElement.get(Ye);mt&&mt.length&&(Ve.parentPlayer=me(mt)),s.push(Ve)}}else Si(Be,Ie.fromStyles),Ve.onDestroy(()=>Mi(Be,Ie.toStyles)),Le.push(Ve),v.has(Be)&&s.push(Ve)}),Le.forEach(Te=>{const Be=a.get(Te.element);if(Be&&Be.length){const Ve=me(Be);Te.setRealPlayer(Ve)}}),s.forEach(Te=>{Te.parentPlayer?Te.syncPlayerEvents(Te.parentPlayer):Te.destroy()});for(let Te=0;Te<I.length;Te++){const Be=I[Te],Ve=Be[Rn];if(ja(Be,ms),Ve&&Ve.hasAnimation)continue;let Ie=[];if(h.size){let Dt=h.get(Be);Dt&&Dt.length&&Ie.push(...Dt);let mt=this.driver.query(Be,Se,!0);for(let Pt=0;Pt<mt.length;Pt++){let Ot=h.get(mt[Pt]);Ot&&Ot.length&&Ie.push(...Ot)}}const Ye=Ie.filter(Dt=>!Dt.destroyed);Ye.length?Kl(this,Be,Ye):this.processLeaveNode(Be)}return I.length=0,Tt.forEach(Te=>{this.players.push(Te),Te.onDone(()=>{Te.destroy();const Be=this.players.indexOf(Te);this.players.splice(Be,1)}),Te.play()}),Tt}elementContainsData(e,t){let i=!1;const s=t[Rn];return s&&s.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,s,a){let u=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(u=h)}else{const h=this.playersByElement.get(e);if(h){const p=!a||a==hr;h.forEach(m=>{m.queued||!p&&m.triggerName!=s||u.push(m)})}}return(i||s)&&(u=u.filter(h=>!(i&&i!=h.namespaceId||s&&s!=h.triggerName))),u}_beforeAnimationBuild(e,t,i){const a=t.element,u=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const m=p.element,v=m!==a,_=kt(i,m,[]);this._getPreviousPlayers(m,v,u,h,t.toState).forEach(E=>{const A=E.getRealPlayer();A.beforeDestroy&&A.beforeDestroy(),E.destroy(),_.push(E)})}Si(a,t.fromStyles)}_buildAnimation(e,t,i,s,a,u){const h=t.triggerName,p=t.element,m=[],v=new Set,_=new Set,M=t.timelines.map(A=>{const T=A.element;v.add(T);const I=T[Rn];if(I&&I.removedBeforeQueried)return new ze(A.duration,A.delay);const k=T!==p,B=function fr(l){const e=[];return bs(l,e),e}((i.get(T)||Xn).map(Me=>Me.getRealPlayer())).filter(Me=>!!Me.element&&Me.element===T),j=a.get(T),z=u.get(T),te=Ue(0,this._normalizer,0,A.keyframes,j,z),ae=this._buildPlayer(A,te,B);if(A.subTimeline&&s&&_.add(T),k){const Me=new rs(e,h,T);Me.setRealPlayer(ae),m.push(Me)}return ae});m.forEach(A=>{kt(this.playersByQueriedElement,A.element,[]).push(A),A.onDone(()=>function ui(l,e,t){let i=l.get(e);if(i){if(i.length){const s=i.indexOf(t);i.splice(s,1)}0==i.length&&l.delete(e)}return i}(this.playersByQueriedElement,A.element,A))}),v.forEach(A=>Wr(A,Oe));const E=me(M);return E.onDestroy(()=>{v.forEach(A=>ja(A,Oe)),Mi(p,t.toStyles)}),_.forEach(A=>{kt(s,A,[]).push(E)}),E}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new ze(e.duration,e.delay)}}class rs{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new ze,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(s=>Et(e,i,void 0,s))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){kt(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Gr(l){return l&&1===l.nodeType}function ql(l,e){const t=l.style.display;return l.style.display=null!=e?e:"none",t}function Yl(l,e,t,i,s){const a=[];t.forEach(p=>a.push(ql(p)));const u=[];i.forEach((p,m)=>{const v=new Map;p.forEach(_=>{const M=e.computeStyle(m,_,s);v.set(_,M),(!M||0==M.length)&&(m[Rn]=Bi,u.push(m))}),l.set(m,v)});let h=0;return t.forEach(p=>ql(p,a[h++])),u}function Zf(l,e){const t=new Map;if(l.forEach(h=>t.set(h,[])),0==e.length)return t;const s=new Set(e),a=new Map;function u(h){if(!h)return 1;let p=a.get(h);if(p)return p;const m=h.parentNode;return p=t.has(m)?m:s.has(m)?1:u(m),a.set(h,p),p}return e.forEach(h=>{const p=u(h);1!==p&&t.get(p).push(h)}),t}function Wr(l,e){var t;null===(t=l.classList)||void 0===t||t.add(e)}function ja(l,e){var t;null===(t=l.classList)||void 0===t||t.remove(e)}function Kl(l,e,t){me(t).onDone(()=>l.processLeaveNode(e))}function bs(l,e){for(let t=0;t<l.length;t++){const i=l[t];i instanceof le?bs(i.players,e):e.push(i)}}function $r(l,e,t){const i=t.get(l);if(!i)return!1;let s=e.get(l);return s?i.forEach(a=>s.add(a)):e.set(l,i),t.delete(l),!0}class jr{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(s,a)=>{},this._transitionEngine=new Hr(e,t,i),this._timelineEngine=new J(e,t,i),this._transitionEngine.onRemovalComplete=(s,a)=>this.onRemovalComplete(s,a)}registerTrigger(e,t,i,s,a){const u=e+"-"+s;let h=this._triggerCache[u];if(!h){const p=[],v=zl(this._driver,a,p,[]);if(p.length)throw function _n(l,e){return new D.vHH(3404,!1)}();h=function Wa(l,e,t){return new Hs(l,e,t)}(s,v,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(t,s,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,s){this._transitionEngine.insertNode(e,t,i,s)}onRemove(e,t,i,s){this._transitionEngine.removeNode(e,t,s||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,s){if("@"==i.charAt(0)){const[a,u]=rn(i);this._timelineEngine.command(a,t,u,s)}else this._transitionEngine.trigger(e,t,i,s)}listen(e,t,i,s,a){if("@"==i.charAt(0)){const[u,h]=rn(i);return this._timelineEngine.listen(u,t,h,a)}return this._transitionEngine.listen(e,t,i,s,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Xh=(()=>{class l{constructor(t,i,s){this._element=t,this._startStyles=i,this._endStyles=s,this._state=0;let a=l.initialStylesByElement.get(t);a||l.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Mi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Mi(this._element,this._initialStyles),this._endStyles&&(Mi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(l.initialStylesByElement.delete(this._element),this._startStyles&&(Si(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Si(this._element,this._endStyles),this._endStyles=null),Mi(this._element,this._initialStyles),this._state=3)}}return l.initialStylesByElement=new WeakMap,l})();function du(l){let e=null;return l.forEach((t,i)=>{(function Qf(l){return"display"===l||"position"===l})(i)&&(e=e||new Map,e.set(i,t))}),e}class Xl{constructor(e,t,i,s){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,s)=>{"offset"!==s&&e.set(s,this._finished?i:sa(this.element,s))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class fu{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return xr(e,t)}getParentElement(e){return hn(e)}query(e,t,i){return ts(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,s,a,u=[]){const p={duration:i,delay:s,fill:0==s?"both":"forwards"};a&&(p.easing=a);const m=new Map,v=u.filter(E=>E instanceof Xl);(function ys(l,e){return 0===l||0===e})(i,s)&&v.forEach(E=>{E.currentSnapshot.forEach((A,T)=>m.set(T,A))});let _=function Gn(l){return l.length?l[0]instanceof Map?l:l.map(e=>pn(e)):[]}(t).map(E=>Wn(E));_=function lo(l,e,t){if(t.size&&e.length){let i=e[0],s=[];if(t.forEach((a,u)=>{i.has(u)||s.push(u),i.set(u,a)}),s.length)for(let a=1;a<e.length;a++){let u=e[a];s.forEach(h=>u.set(h,sa(l,h)))}}return e}(e,_,m);const M=function Jf(l,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=du(e[0]),e.length>1&&(i=du(e[e.length-1]))):e instanceof Map&&(t=du(e)),t||i?new Xh(l,t,i):null}(e,_);return new Xl(e,_,p,M)}}var Ui=U(9808);let pu=(()=>{class l extends we{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:D.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?$(t):t;return ca(this._renderer,null,i,"register",[s]),new Zh(i,this._renderer)}}return l.\u0275fac=function(t){return new(t||l)(D.LFG(D.FYo),D.LFG(Ui.K0))},l.\u0275prov=D.Yz7({token:l,factory:l.\u0275fac}),l})();class Zh extends class fe{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Jh(this._id,e,t||{},this._renderer)}}class Jh{constructor(e,t,i,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return ca(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function ca(l,e,t,i,s){return l.setProperty(e,`@@${t}:${i}`,s)}const Ya="@.disabled";let Ka=(()=>{class l{constructor(t,i,s){this.delegate=t,this.engine=i,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(a,u)=>{const h=null==u?void 0:u.parentNode(a);h&&u.removeChild(h,a)}}createRenderer(t,i){const a=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let v=this._rendererCache.get(a);return v||(v=new mu("",a,this.engine),this._rendererCache.set(a,v)),v}const u=i.id,h=i.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const p=v=>{Array.isArray(v)?v.forEach(p):this.engine.registerTrigger(u,h,t,v.name,v)};return i.data.animation.forEach(p),new gu(this,h,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,s){t>=0&&t<this._microtaskId?this._zone.run(()=>i(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[u,h]=a;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return l.\u0275fac=function(t){return new(t||l)(D.LFG(D.FYo),D.LFG(jr),D.LFG(D.R0b))},l.\u0275prov=D.Yz7({token:l,factory:l.\u0275fac}),l})();class mu{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,s=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,s){this.delegate.setAttribute(e,t,i,s)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,s){this.delegate.setStyle(e,t,i,s)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==Ya?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class gu extends mu{constructor(e,t,i,s){super(t,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Ya?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const s=function ep(l){switch(l){case"body":return document.body;case"document":return document;case"window":return window;default:return l}}(e);let a=t.slice(1),u="";return"@"!=a.charAt(0)&&([a,u]=function tp(l){const e=l.indexOf(".");return[l.substring(0,e),l.slice(e+1)]}(a)),this.engine.listen(this.namespaceId,s,a,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,i,h)})}return this.delegate.listen(e,t,i)}}const Xa=[{provide:we,useClass:pu},{provide:zs,useFactory:function Gs(){return new cu}},{provide:jr,useClass:(()=>{class l extends jr{constructor(t,i,s,a){super(t.body,i,s)}ngOnDestroy(){this.flush()}}return l.\u0275fac=function(t){return new(t||l)(D.LFG(Ui.K0),D.LFG(ps),D.LFG(zs),D.LFG(D.z2F))},l.\u0275prov=D.Yz7({token:l,factory:l.\u0275fac}),l})()},{provide:D.FYo,useFactory:function hi(l,e,t){return new Ka(l,e,t)},deps:[R.se,jr,D.R0b]}],ha=[{provide:ps,useFactory:()=>new fu},{provide:D.QbO,useValue:"BrowserAnimations"},...Xa],yu=[{provide:ps,useClass:Bs},{provide:D.QbO,useValue:"NoopAnimations"},...Xa];let Za=(()=>{class l{static withConfig(t){return{ngModule:l,providers:t.disableAnimations?yu:ha}}}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=D.oAB({type:l}),l.\u0275inj=D.cJS({providers:ha,imports:[R.b2]}),l})();var Zl=U(520),Mr=U(3338),Dn=U(2340);let da=(()=>{class l{constructor(){(0,Dn.eM)("RoadModule.constructor()")}}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=D.oAB({type:l}),l.\u0275inj=D.cJS({imports:[Ui.ez]}),l})();var Qh=U(5861),pr=U(7441),Ja=U(2866),ed=U.n(Ja);function Jl(l){return function td(l){return"type"in l&&"root"===l.type}(l)||id(l)}function nd(l){return"type"in l&&"leaf"===l.type}function id(l){return"type"in l&&"group"===l.type}const el=new RegExp("[0-3]{1,1}","g");function ko(l,e){if(l.length<=e.length)return!1;for(let t=0;t<e.length;t++)if(l[t]!==e[t])return!1;return!0}class Yi{constructor(e){this.key=e;const t=/^([0-5])\/$/.exec(e);t?(this.segments=[t[1]],this.S2Level=0):(this.segments=function ec(l){const[e,t]=l.split("/"),i=t.match(el);if(!i)throw new Error(`Unexpectedly unmatched to key ${l}`);return[e,...i]}(e),this.S2Level=function od(l){if(0===l.length)throw new Error("Empty segment is invalid.");return 1===l.length?0:l.slice(1).join("").length}(this.segments))}static FromSegment(e){return new Yi(`${e[0]}/${e.slice(1).join("")}`)}static FromS2CellId(e){return new Yi(pr.S2.idToKey(e))}toId(){return pr.S2.keyToId(this.key)}concatSegment(e){return Yi.FromSegment(function Ms(l,e){return[...l,e]}(this.segments,e))}buildPath(){return function rp(l){return l.join("/")}(this.segments)}parentSegment(){return Yi.FromSegment(function ip(l){if(0===l.length)throw new Error("Segments is empty");return l.slice(0,l.length-1)}(this.segments))}isDescendant(e){return ko(e.segments,this.segments)}isAncestor(e){return function rd(l,e){return l.length!==e.length&&ko(e,l)}(e.segments,this.segments)}equals(e){return function Bo(l,e){if(l.length!==e.length)return!1;for(let t=0;t<l.length;t++)if(l[t]!==e[t])return!1;return!0}(e.segments,this.segments)}}const Hn=1001,jn=1003,ri=1006,sl=1009,si=1014,zo=1015,sc=1016,oc=1020,os=1023,js=1026,ac=1027,hl=3e3,Li=3001,Ho="srgb",dl="srgb-linear";class uc{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const s=this._listeners[e];if(void 0!==s){const a=s.indexOf(t);-1!==a&&s.splice(a,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const s=i.slice(0);for(let a=0,u=s.length;a<u;a++)s[a].call(this,e);e.target=null}}}const Un=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],fl=Math.PI/180,pl=180/Math.PI;function Xr(){const l=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Un[255&l]+Un[l>>8&255]+Un[l>>16&255]+Un[l>>24&255]+"-"+Un[255&e]+Un[e>>8&255]+"-"+Un[e>>16&15|64]+Un[e>>24&255]+"-"+Un[63&t|128]+Un[t>>8&255]+"-"+Un[t>>16&255]+Un[t>>24&255]+Un[255&i]+Un[i>>8&255]+Un[i>>16&255]+Un[i>>24&255]).toLowerCase()}function Ni(l,e,t){return Math.max(e,Math.min(t,l))}function Uu(l,e,t){return(1-t)*l+t*e}function zu(l){return 0==(l&l-1)&&0!==l}function bd(l){return Math.pow(2,Math.floor(Math.log(l)/Math.LN2))}class St{constructor(e=0,t=0){St.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),a=this.x-e.x,u=this.y-e.y;return this.x=a*i-u*s+e.x,this.y=a*s+u*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Er{constructor(){Er.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,s,a,u,h,p,m){const v=this.elements;return v[0]=e,v[1]=s,v[2]=h,v[3]=t,v[4]=a,v[5]=p,v[6]=i,v[7]=u,v[8]=m,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,a=this.elements,u=i[0],h=i[3],p=i[6],m=i[1],v=i[4],_=i[7],M=i[2],E=i[5],A=i[8],T=s[0],I=s[3],k=s[6],B=s[1],j=s[4],z=s[7],te=s[2],ae=s[5],Me=s[8];return a[0]=u*T+h*B+p*te,a[3]=u*I+h*j+p*ae,a[6]=u*k+h*z+p*Me,a[1]=m*T+v*B+_*te,a[4]=m*I+v*j+_*ae,a[7]=m*k+v*z+_*Me,a[2]=M*T+E*B+A*te,a[5]=M*I+E*j+A*ae,a[8]=M*k+E*z+A*Me,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],a=e[3],u=e[4],h=e[5],p=e[6],m=e[7],v=e[8];return t*u*v-t*h*m-i*a*v+i*h*p+s*a*m-s*u*p}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],a=e[3],u=e[4],h=e[5],p=e[6],m=e[7],v=e[8],_=v*u-h*m,M=h*p-v*a,E=m*a-u*p,A=t*_+i*M+s*E;if(0===A)return this.set(0,0,0,0,0,0,0,0,0);const T=1/A;return e[0]=_*T,e[1]=(s*m-v*i)*T,e[2]=(h*i-s*u)*T,e[3]=M*T,e[4]=(v*t-s*p)*T,e[5]=(s*a-h*t)*T,e[6]=E*T,e[7]=(i*p-m*t)*T,e[8]=(u*t-i*a)*T,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,a,u,h){const p=Math.cos(a),m=Math.sin(a);return this.set(i*p,i*m,-i*(p*u+m*h)+u+e,-s*m,s*p,-s*(-m*u+p*h)+h+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),s=this.elements,a=s[0],u=s[3],h=s[6],p=s[1],m=s[4],v=s[7];return s[0]=t*a+i*p,s[3]=t*u+i*m,s[6]=t*h+i*v,s[1]=-i*a+t*p,s[4]=-i*u+t*m,s[7]=-i*h+t*v,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function Hu(l){for(let e=l.length-1;e>=0;--e)if(l[e]>65535)return!0;return!1}function ba(l){return document.createElementNS("http://www.w3.org/1999/xhtml",l)}function as(l){return l<.04045?.0773993808*l:Math.pow(.9478672986*l+.0521327014,2.4)}function Gu(l){return l<.0031308?12.92*l:1.055*Math.pow(l,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Wu={[Ho]:{[dl]:as},[dl]:{[Ho]:Gu}},qs={legacyMode:!0,get workingColorSpace(){return dl},set workingColorSpace(l){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(l,e,t){if(this.legacyMode||e===t||!e||!t)return l;if(Wu[e]&&void 0!==Wu[e][t]){const i=Wu[e][t];return l.r=i(l.r),l.g=i(l.g),l.b=i(l.b),l}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(l,e){return this.convert(l,this.workingColorSpace,e)},toWorkingColorSpace:function(l,e){return this.convert(l,e,this.workingColorSpace)}},wy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},zi={r:0,g:0,b:0},mr={h:0,s:0,l:0},Md={h:0,s:0,l:0};function Cp(l,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?l+6*(e-l)*t:t<.5?e:t<2/3?l+6*(e-l)*(2/3-t):l}function Sd(l,e){return e.r=l.r,e.g=l.g,e.b=l.b,e}let Ma,qt=(()=>{class l{constructor(t,i,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===i&&void 0===s?this.set(t):this.setRGB(t,i,s)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=Ho){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,qs.toWorkingColorSpace(this,i),this}setRGB(t,i,s,a=dl){return this.r=t,this.g=i,this.b=s,qs.toWorkingColorSpace(this,a),this}setHSL(t,i,s,a=dl){if(t=function Sp(l,e){return(l%e+e)%e}(t,1),i=Ni(i,0,1),s=Ni(s,0,1),0===i)this.r=this.g=this.b=s;else{const u=s<=.5?s*(1+i):s+i-s*i,h=2*s-u;this.r=Cp(h,u,t+1/3),this.g=Cp(h,u,t),this.b=Cp(h,u,t-1/3)}return qs.toWorkingColorSpace(this,a),this}setStyle(t,i=Ho){function s(u){void 0!==u&&parseFloat(u)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let a;if(a=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let u;const p=a[2];switch(a[1]){case"rgb":case"rgba":if(u=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return this.r=Math.min(255,parseInt(u[1],10))/255,this.g=Math.min(255,parseInt(u[2],10))/255,this.b=Math.min(255,parseInt(u[3],10))/255,qs.toWorkingColorSpace(this,i),s(u[4]),this;if(u=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return this.r=Math.min(100,parseInt(u[1],10))/100,this.g=Math.min(100,parseInt(u[2],10))/100,this.b=Math.min(100,parseInt(u[3],10))/100,qs.toWorkingColorSpace(this,i),s(u[4]),this;break;case"hsl":case"hsla":if(u=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p)){const m=parseFloat(u[1])/360,v=parseInt(u[2],10)/100,_=parseInt(u[3],10)/100;return s(u[4]),this.setHSL(m,v,_,i)}}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(t)){const u=a[1],h=u.length;if(3===h)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,qs.toWorkingColorSpace(this,i),this;if(6===h)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,qs.toWorkingColorSpace(this,i),this}return t&&t.length>0?this.setColorName(t,i):this}setColorName(t,i=Ho){const s=wy[t.toLowerCase()];return void 0!==s?this.setHex(s,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=as(t.r),this.g=as(t.g),this.b=as(t.b),this}copyLinearToSRGB(t){return this.r=Gu(t.r),this.g=Gu(t.g),this.b=Gu(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ho){return qs.fromWorkingColorSpace(Sd(this,zi),t),Ni(255*zi.r,0,255)<<16^Ni(255*zi.g,0,255)<<8^Ni(255*zi.b,0,255)<<0}getHexString(t=Ho){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=dl){qs.fromWorkingColorSpace(Sd(this,zi),i);const s=zi.r,a=zi.g,u=zi.b,h=Math.max(s,a,u),p=Math.min(s,a,u);let m,v;const _=(p+h)/2;if(p===h)m=0,v=0;else{const M=h-p;switch(v=_<=.5?M/(h+p):M/(2-h-p),h){case s:m=(a-u)/M+(a<u?6:0);break;case a:m=(u-s)/M+2;break;case u:m=(s-a)/M+4}m/=6}return t.h=m,t.s=v,t.l=_,t}getRGB(t,i=dl){return qs.fromWorkingColorSpace(Sd(this,zi),i),t.r=zi.r,t.g=zi.g,t.b=zi.b,t}getStyle(t=Ho){return qs.fromWorkingColorSpace(Sd(this,zi),t),t!==Ho?`color(${t} ${zi.r} ${zi.g} ${zi.b})`:`rgb(${255*zi.r|0},${255*zi.g|0},${255*zi.b|0})`}offsetHSL(t,i,s){return this.getHSL(mr),mr.h+=t,mr.s+=i,mr.l+=s,this.setHSL(mr.h,mr.s,mr.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,s){return this.r=t.r+(i.r-t.r)*s,this.g=t.g+(i.g-t.g)*s,this.b=t.b+(i.b-t.b)*s,this}lerpHSL(t,i){this.getHSL(mr),t.getHSL(Md);const s=Uu(mr.h,Md.h,i),a=Uu(mr.s,Md.s,i),u=Uu(mr.l,Md.l,i);return this.setHSL(s,a,u),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return l.NAMES=wy,l})();class by{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Ma&&(Ma=ba("canvas")),Ma.width=e.width,Ma.height=e.height;const i=Ma.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Ma}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=ba("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),a=s.data;for(let u=0;u<a.length;u++)a[u]=255*as(a[u]/255);return i.putImageData(s,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*as(t[i]/255)):as(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class ml{constructor(e=null){this.isSource=!0,this.uuid=Xr(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(null!==s){let a;if(Array.isArray(s)){a=[];for(let u=0,h=s.length;u<h;u++)a.push(Tp(s[u].isDataTexture?s[u].image:s[u]))}else a=Tp(s);i.url=a}return t||(e.images[this.uuid]=i),i}}function Tp(l){return"undefined"!=typeof HTMLImageElement&&l instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&l instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&l instanceof ImageBitmap?by.getDataURL(l):l.data?{data:Array.from(l.data),width:l.width,height:l.height,type:l.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let My=0,gl=(()=>{class l extends uc{constructor(t=l.DEFAULT_IMAGE,i=l.DEFAULT_MAPPING,s=Hn,a=Hn,u=ri,h=1008,p=os,m=sl,v=1,_=hl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:My++}),this.uuid=Xr(),this.name="",this.source=new ml(t),this.mipmaps=[],this.mapping=i,this.wrapS=s,this.wrapT=a,this.magFilter=u,this.minFilter=h,this.anisotropy=v,this.format=p,this.internalFormat=null,this.type=m,this.offset=new St(0,0),this.repeat=new St(1,1),this.center=new St(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Er,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=_,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const s={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),i||(t.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case Hn:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case Hn:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return l.DEFAULT_IMAGE=null,l.DEFAULT_MAPPING=300,l})();class Jn{constructor(e=0,t=0,i=0,s=1){Jn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,a=this.w,u=e.elements;return this.x=u[0]*t+u[4]*i+u[8]*s+u[12]*a,this.y=u[1]*t+u[5]*i+u[9]*s+u[13]*a,this.z=u[2]*t+u[6]*i+u[10]*s+u[14]*a,this.w=u[3]*t+u[7]*i+u[11]*s+u[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,a;const p=e.elements,m=p[0],v=p[4],_=p[8],M=p[1],E=p[5],A=p[9],T=p[2],I=p[6],k=p[10];if(Math.abs(v-M)<.01&&Math.abs(_-T)<.01&&Math.abs(A-I)<.01){if(Math.abs(v+M)<.1&&Math.abs(_+T)<.1&&Math.abs(A+I)<.1&&Math.abs(m+E+k-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const j=(m+1)/2,z=(E+1)/2,te=(k+1)/2,ae=(v+M)/4,Me=(_+T)/4,G=(A+I)/4;return j>z&&j>te?j<.01?(i=0,s=.707106781,a=.707106781):(i=Math.sqrt(j),s=ae/i,a=Me/i):z>te?z<.01?(i=.707106781,s=0,a=.707106781):(s=Math.sqrt(z),i=ae/s,a=G/s):te<.01?(i=.707106781,s=.707106781,a=0):(a=Math.sqrt(te),i=Me/a,s=G/a),this.set(i,s,a,t),this}let B=Math.sqrt((I-A)*(I-A)+(_-T)*(_-T)+(M-v)*(M-v));return Math.abs(B)<.001&&(B=1),this.x=(I-A)/B,this.y=(_-T)/B,this.z=(M-v)/B,this.w=Math.acos((m+E+k-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ys extends uc{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Jn(0,0,e,t),this.scissorTest=!1,this.viewport=new Jn(0,0,e,t),this.texture=new gl({width:e,height:t,depth:1},i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:ri,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ml(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ap extends gl{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=jn,this.minFilter=jn,this.wrapR=Hn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class dc extends gl{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=jn,this.minFilter=jn,this.wrapR=Hn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Zr{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,a,u,h){let p=i[s+0],m=i[s+1],v=i[s+2],_=i[s+3];const M=a[u+0],E=a[u+1],A=a[u+2],T=a[u+3];if(0===h)return e[t+0]=p,e[t+1]=m,e[t+2]=v,void(e[t+3]=_);if(1===h)return e[t+0]=M,e[t+1]=E,e[t+2]=A,void(e[t+3]=T);if(_!==T||p!==M||m!==E||v!==A){let I=1-h;const k=p*M+m*E+v*A+_*T,B=k>=0?1:-1,j=1-k*k;if(j>Number.EPSILON){const te=Math.sqrt(j),ae=Math.atan2(te,k*B);I=Math.sin(I*ae)/te,h=Math.sin(h*ae)/te}const z=h*B;if(p=p*I+M*z,m=m*I+E*z,v=v*I+A*z,_=_*I+T*z,I===1-h){const te=1/Math.sqrt(p*p+m*m+v*v+_*_);p*=te,m*=te,v*=te,_*=te}}e[t]=p,e[t+1]=m,e[t+2]=v,e[t+3]=_}static multiplyQuaternionsFlat(e,t,i,s,a,u){const h=i[s],p=i[s+1],m=i[s+2],v=i[s+3],_=a[u],M=a[u+1],E=a[u+2],A=a[u+3];return e[t]=h*A+v*_+p*E-m*M,e[t+1]=p*A+v*M+m*_-h*E,e[t+2]=m*A+v*E+h*M-p*_,e[t+3]=v*A-h*_-p*M-m*E,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,s=e._y,a=e._z,u=e._order,h=Math.cos,p=Math.sin,m=h(i/2),v=h(s/2),_=h(a/2),M=p(i/2),E=p(s/2),A=p(a/2);switch(u){case"XYZ":this._x=M*v*_+m*E*A,this._y=m*E*_-M*v*A,this._z=m*v*A+M*E*_,this._w=m*v*_-M*E*A;break;case"YXZ":this._x=M*v*_+m*E*A,this._y=m*E*_-M*v*A,this._z=m*v*A-M*E*_,this._w=m*v*_+M*E*A;break;case"ZXY":this._x=M*v*_-m*E*A,this._y=m*E*_+M*v*A,this._z=m*v*A+M*E*_,this._w=m*v*_-M*E*A;break;case"ZYX":this._x=M*v*_-m*E*A,this._y=m*E*_+M*v*A,this._z=m*v*A-M*E*_,this._w=m*v*_+M*E*A;break;case"YZX":this._x=M*v*_+m*E*A,this._y=m*E*_+M*v*A,this._z=m*v*A-M*E*_,this._w=m*v*_-M*E*A;break;case"XZY":this._x=M*v*_-m*E*A,this._y=m*E*_-M*v*A,this._z=m*v*A+M*E*_,this._w=m*v*_+M*E*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+u)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],a=t[8],u=t[1],h=t[5],p=t[9],m=t[2],v=t[6],_=t[10],M=i+h+_;if(M>0){const E=.5/Math.sqrt(M+1);this._w=.25/E,this._x=(v-p)*E,this._y=(a-m)*E,this._z=(u-s)*E}else if(i>h&&i>_){const E=2*Math.sqrt(1+i-h-_);this._w=(v-p)/E,this._x=.25*E,this._y=(s+u)/E,this._z=(a+m)/E}else if(h>_){const E=2*Math.sqrt(1+h-i-_);this._w=(a-m)/E,this._x=(s+u)/E,this._y=.25*E,this._z=(p+v)/E}else{const E=2*Math.sqrt(1+_-i-h);this._w=(u-s)/E,this._x=(a+m)/E,this._y=(p+v)/E,this._z=.25*E}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ni(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,a=e._z,u=e._w,h=t._x,p=t._y,m=t._z,v=t._w;return this._x=i*v+u*h+s*m-a*p,this._y=s*v+u*p+a*h-i*m,this._z=a*v+u*m+i*p-s*h,this._w=u*v-i*h-s*p-a*m,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,s=this._y,a=this._z,u=this._w;let h=u*e._w+i*e._x+s*e._y+a*e._z;if(h<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,h=-h):this.copy(e),h>=1)return this._w=u,this._x=i,this._y=s,this._z=a,this;const p=1-h*h;if(p<=Number.EPSILON){const E=1-t;return this._w=E*u+t*this._w,this._x=E*i+t*this._x,this._y=E*s+t*this._y,this._z=E*a+t*this._z,this.normalize(),this._onChangeCallback(),this}const m=Math.sqrt(p),v=Math.atan2(m,h),_=Math.sin((1-t)*v)/m,M=Math.sin(t*v)/m;return this._w=u*_+this._w*M,this._x=i*_+this._x*M,this._y=s*_+this._y*M,this._z=a*_+this._z*M,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),s=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(s),i*Math.sin(a),i*Math.cos(a),t*Math.sin(s))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ue{constructor(e=0,t=0,i=0){ue.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Sy.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Sy.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6]*s,this.y=a[1]*t+a[4]*i+a[7]*s,this.z=a[2]*t+a[5]*i+a[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,a=e.elements,u=1/(a[3]*t+a[7]*i+a[11]*s+a[15]);return this.x=(a[0]*t+a[4]*i+a[8]*s+a[12])*u,this.y=(a[1]*t+a[5]*i+a[9]*s+a[13])*u,this.z=(a[2]*t+a[6]*i+a[10]*s+a[14])*u,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,a=e.x,u=e.y,h=e.z,p=e.w,m=p*t+u*s-h*i,v=p*i+h*t-a*s,_=p*s+a*i-u*t,M=-a*t-u*i-h*s;return this.x=m*p+M*-a+v*-h-_*-u,this.y=v*p+M*-u+_*-a-m*-h,this.z=_*p+M*-h+m*-u-v*-a,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*s,this.y=a[1]*t+a[5]*i+a[9]*s,this.z=a[2]*t+a[6]*i+a[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,a=e.z,u=t.x,h=t.y,p=t.z;return this.x=s*p-a*h,this.y=a*u-i*p,this.z=i*h-s*u,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Ip.copy(this).projectOnVector(e),this.sub(Ip)}reflect(e){return this.sub(Ip.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ni(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ip=new ue,Sy=new Zr;class yl{constructor(e=new ue(1/0,1/0,1/0),t=new ue(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,s=1/0,a=-1/0,u=-1/0,h=-1/0;for(let p=0,m=e.length;p<m;p+=3){const v=e[p],_=e[p+1],M=e[p+2];v<t&&(t=v),_<i&&(i=_),M<s&&(s=M),v>a&&(a=v),_>u&&(u=_),M>h&&(h=M)}return this.min.set(t,i,s),this.max.set(a,u,h),this}setFromBufferAttribute(e){let t=1/0,i=1/0,s=1/0,a=-1/0,u=-1/0,h=-1/0;for(let p=0,m=e.count;p<m;p++){const v=e.getX(p),_=e.getY(p),M=e.getZ(p);v<t&&(t=v),_<i&&(i=_),M<s&&(s=M),v>a&&(a=v),_>u&&(u=_),M>h&&(h=M)}return this.min.set(t,i,s),this.max.set(a,u,h),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=$o.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i)if(t&&null!=i.attributes&&void 0!==i.attributes.position){const a=i.attributes.position;for(let u=0,h=a.count;u<h;u++)$o.fromBufferAttribute(a,u).applyMatrix4(e.matrixWorld),this.expandByPoint($o)}else null===i.boundingBox&&i.computeBoundingBox(),Rp.copy(i.boundingBox),Rp.applyMatrix4(e.matrixWorld),this.union(Rp);const s=e.children;for(let a=0,u=s.length;a<u;a++)this.expandByObject(s[a],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,$o),$o.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ed),Pp.subVectors(this.max,Ed),fc.subVectors(e.a,Ed),Sa.subVectors(e.b,Ed),ju.subVectors(e.c,Ed),vl.subVectors(Sa,fc),yo.subVectors(ju,Sa),pc.subVectors(fc,ju);let t=[0,-vl.z,vl.y,0,-yo.z,yo.y,0,-pc.z,pc.y,vl.z,0,-vl.x,yo.z,0,-yo.x,pc.z,0,-pc.x,-vl.y,vl.x,0,-yo.y,yo.x,0,-pc.y,pc.x,0];return!(!Np(t,fc,Sa,ju,Pp)||(t=[1,0,0,0,1,0,0,0,1],!Np(t,fc,Sa,ju,Pp)))&&(Lp.crossVectors(vl,yo),t=[Lp.x,Lp.y,Lp.z],Np(t,fc,Sa,ju,Pp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return $o.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize($o).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Wo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Wo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Wo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Wo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Wo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Wo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Wo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Wo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Wo)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Wo=[new ue,new ue,new ue,new ue,new ue,new ue,new ue,new ue],$o=new ue,Rp=new yl,fc=new ue,Sa=new ue,ju=new ue,vl=new ue,yo=new ue,pc=new ue,Ed=new ue,Pp=new ue,Lp=new ue,mc=new ue;function Np(l,e,t,i,s){for(let a=0,u=l.length-3;a<=u;a+=3){mc.fromArray(l,a);const h=s.x*Math.abs(mc.x)+s.y*Math.abs(mc.y)+s.z*Math.abs(mc.z),p=e.dot(mc),m=t.dot(mc),v=i.dot(mc);if(Math.max(-Math.max(p,m,v),Math.min(p,m,v))>h)return!1}return!0}const Ey=new yl,Dd=new ue,qu=new ue,Cd=new ue;class _l{constructor(e=new ue,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):Ey.setFromPoints(e).getCenter(i);let s=0;for(let a=0,u=e.length;a<u;a++)s=Math.max(s,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Cd.subVectors(e,this.center);const t=Cd.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=.5*(i-this.radius);this.center.add(Cd.multiplyScalar(s/i)),this.radius+=s}return this}union(e){return!0===this.center.equals(e.center)?qu.set(0,0,1).multiplyScalar(e.radius):qu.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Dd.copy(e.center).add(qu)),this.expandByPoint(Dd.copy(e.center).sub(qu)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ks=new ue,Op=new ue,gc=new ue,Ds=new ue,Fp=new ue,Td=new ue,kp=new ue;class Yu{constructor(e=new ue,t=new ue(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ks)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ks.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ks.copy(this.direction).multiplyScalar(t).add(this.origin),Ks.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){Op.copy(e).add(t).multiplyScalar(.5),gc.copy(t).sub(e).normalize(),Ds.copy(this.origin).sub(Op);const a=.5*e.distanceTo(t),u=-this.direction.dot(gc),h=Ds.dot(this.direction),p=-Ds.dot(gc),m=Ds.lengthSq(),v=Math.abs(1-u*u);let _,M,E,A;if(v>0)if(_=u*p-h,M=u*h-p,A=a*v,_>=0)if(M>=-A)if(M<=A){const T=1/v;_*=T,M*=T,E=_*(_+u*M+2*h)+M*(u*_+M+2*p)+m}else M=a,_=Math.max(0,-(u*M+h)),E=-_*_+M*(M+2*p)+m;else M=-a,_=Math.max(0,-(u*M+h)),E=-_*_+M*(M+2*p)+m;else M<=-A?(_=Math.max(0,-(-u*a+h)),M=_>0?-a:Math.min(Math.max(-a,-p),a),E=-_*_+M*(M+2*p)+m):M<=A?(_=0,M=Math.min(Math.max(-a,-p),a),E=M*(M+2*p)+m):(_=Math.max(0,-(u*a+h)),M=_>0?a:Math.min(Math.max(-a,-p),a),E=-_*_+M*(M+2*p)+m);else M=u>0?-a:a,_=Math.max(0,-(u*M+h)),E=-_*_+M*(M+2*p)+m;return i&&i.copy(this.direction).multiplyScalar(_).add(this.origin),s&&s.copy(gc).multiplyScalar(M).add(Op),E}intersectSphere(e,t){Ks.subVectors(e.center,this.origin);const i=Ks.dot(this.direction),s=Ks.dot(Ks)-i*i,a=e.radius*e.radius;if(s>a)return null;const u=Math.sqrt(a-s),h=i-u,p=i+u;return h<0&&p<0?null:this.at(h<0?p:h,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,a,u,h,p;const m=1/this.direction.x,v=1/this.direction.y,_=1/this.direction.z,M=this.origin;return m>=0?(i=(e.min.x-M.x)*m,s=(e.max.x-M.x)*m):(i=(e.max.x-M.x)*m,s=(e.min.x-M.x)*m),v>=0?(a=(e.min.y-M.y)*v,u=(e.max.y-M.y)*v):(a=(e.max.y-M.y)*v,u=(e.min.y-M.y)*v),i>u||a>s||((a>i||i!=i)&&(i=a),(u<s||s!=s)&&(s=u),_>=0?(h=(e.min.z-M.z)*_,p=(e.max.z-M.z)*_):(h=(e.max.z-M.z)*_,p=(e.min.z-M.z)*_),i>p||h>s)||((h>i||i!=i)&&(i=h),(p<s||s!=s)&&(s=p),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return null!==this.intersectBox(e,Ks)}intersectTriangle(e,t,i,s,a){Fp.subVectors(t,e),Td.subVectors(i,e),kp.crossVectors(Fp,Td);let h,u=this.direction.dot(kp);if(u>0){if(s)return null;h=1}else{if(!(u<0))return null;h=-1,u=-u}Ds.subVectors(this.origin,e);const p=h*this.direction.dot(Td.crossVectors(Ds,Td));if(p<0)return null;const m=h*this.direction.dot(Fp.cross(Ds));if(m<0||p+m>u)return null;const v=-h*Ds.dot(kp);return v<0?null:this.at(v/u,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Tn{constructor(){Tn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,s,a,u,h,p,m,v,_,M,E,A,T,I){const k=this.elements;return k[0]=e,k[4]=t,k[8]=i,k[12]=s,k[1]=a,k[5]=u,k[9]=h,k[13]=p,k[2]=m,k[6]=v,k[10]=_,k[14]=M,k[3]=E,k[7]=A,k[11]=T,k[15]=I,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Tn).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/yc.setFromMatrixColumn(e,0).length(),a=1/yc.setFromMatrixColumn(e,1).length(),u=1/yc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*a,t[5]=i[5]*a,t[6]=i[6]*a,t[7]=0,t[8]=i[8]*u,t[9]=i[9]*u,t[10]=i[10]*u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,a=e.z,u=Math.cos(i),h=Math.sin(i),p=Math.cos(s),m=Math.sin(s),v=Math.cos(a),_=Math.sin(a);if("XYZ"===e.order){const M=u*v,E=u*_,A=h*v,T=h*_;t[0]=p*v,t[4]=-p*_,t[8]=m,t[1]=E+A*m,t[5]=M-T*m,t[9]=-h*p,t[2]=T-M*m,t[6]=A+E*m,t[10]=u*p}else if("YXZ"===e.order){const M=p*v,E=p*_,A=m*v,T=m*_;t[0]=M+T*h,t[4]=A*h-E,t[8]=u*m,t[1]=u*_,t[5]=u*v,t[9]=-h,t[2]=E*h-A,t[6]=T+M*h,t[10]=u*p}else if("ZXY"===e.order){const M=p*v,E=p*_,A=m*v,T=m*_;t[0]=M-T*h,t[4]=-u*_,t[8]=A+E*h,t[1]=E+A*h,t[5]=u*v,t[9]=T-M*h,t[2]=-u*m,t[6]=h,t[10]=u*p}else if("ZYX"===e.order){const M=u*v,E=u*_,A=h*v,T=h*_;t[0]=p*v,t[4]=A*m-E,t[8]=M*m+T,t[1]=p*_,t[5]=T*m+M,t[9]=E*m-A,t[2]=-m,t[6]=h*p,t[10]=u*p}else if("YZX"===e.order){const M=u*p,E=u*m,A=h*p,T=h*m;t[0]=p*v,t[4]=T-M*_,t[8]=A*_+E,t[1]=_,t[5]=u*v,t[9]=-h*v,t[2]=-m*v,t[6]=E*_+A,t[10]=M-T*_}else if("XZY"===e.order){const M=u*p,E=u*m,A=h*p,T=h*m;t[0]=p*v,t[4]=-_,t[8]=m*v,t[1]=M*_+T,t[5]=u*v,t[9]=E*_-A,t[2]=A*_-E,t[6]=h*v,t[10]=T*_+M}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(rx,e,Bp)}lookAt(e,t,i){const s=this.elements;return ls.subVectors(e,t),0===ls.lengthSq()&&(ls.z=1),ls.normalize(),Ea.crossVectors(i,ls),0===Ea.lengthSq()&&(1===Math.abs(i.z)?ls.x+=1e-4:ls.z+=1e-4,ls.normalize(),Ea.crossVectors(i,ls)),Ea.normalize(),Ad.crossVectors(ls,Ea),s[0]=Ea.x,s[4]=Ad.x,s[8]=ls.x,s[1]=Ea.y,s[5]=Ad.y,s[9]=ls.y,s[2]=Ea.z,s[6]=Ad.z,s[10]=ls.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,a=this.elements,u=i[0],h=i[4],p=i[8],m=i[12],v=i[1],_=i[5],M=i[9],E=i[13],A=i[2],T=i[6],I=i[10],k=i[14],B=i[3],j=i[7],z=i[11],te=i[15],ae=s[0],Me=s[4],G=s[8],ye=s[12],Ce=s[1],Re=s[5],vt=s[9],Tt=s[13],Le=s[2],lt=s[6],Te=s[10],Be=s[14],Ve=s[3],Ie=s[7],Ye=s[11],Dt=s[15];return a[0]=u*ae+h*Ce+p*Le+m*Ve,a[4]=u*Me+h*Re+p*lt+m*Ie,a[8]=u*G+h*vt+p*Te+m*Ye,a[12]=u*ye+h*Tt+p*Be+m*Dt,a[1]=v*ae+_*Ce+M*Le+E*Ve,a[5]=v*Me+_*Re+M*lt+E*Ie,a[9]=v*G+_*vt+M*Te+E*Ye,a[13]=v*ye+_*Tt+M*Be+E*Dt,a[2]=A*ae+T*Ce+I*Le+k*Ve,a[6]=A*Me+T*Re+I*lt+k*Ie,a[10]=A*G+T*vt+I*Te+k*Ye,a[14]=A*ye+T*Tt+I*Be+k*Dt,a[3]=B*ae+j*Ce+z*Le+te*Ve,a[7]=B*Me+j*Re+z*lt+te*Ie,a[11]=B*G+j*vt+z*Te+te*Ye,a[15]=B*ye+j*Tt+z*Be+te*Dt,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],a=e[12],u=e[1],h=e[5],p=e[9],m=e[13],v=e[2],_=e[6],M=e[10],E=e[14];return e[3]*(+a*p*_-s*m*_-a*h*M+i*m*M+s*h*E-i*p*E)+e[7]*(+t*p*E-t*m*M+a*u*M-s*u*E+s*m*v-a*p*v)+e[11]*(+t*m*_-t*h*E-a*u*_+i*u*E+a*h*v-i*m*v)+e[15]*(-s*h*v-t*p*_+t*h*M+s*u*_-i*u*M+i*p*v)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],a=e[3],u=e[4],h=e[5],p=e[6],m=e[7],v=e[8],_=e[9],M=e[10],E=e[11],A=e[12],T=e[13],I=e[14],k=e[15],B=_*I*m-T*M*m+T*p*E-h*I*E-_*p*k+h*M*k,j=A*M*m-v*I*m-A*p*E+u*I*E+v*p*k-u*M*k,z=v*T*m-A*_*m+A*h*E-u*T*E-v*h*k+u*_*k,te=A*_*p-v*T*p-A*h*M+u*T*M+v*h*I-u*_*I,ae=t*B+i*j+s*z+a*te;if(0===ae)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Me=1/ae;return e[0]=B*Me,e[1]=(T*M*a-_*I*a-T*s*E+i*I*E+_*s*k-i*M*k)*Me,e[2]=(h*I*a-T*p*a+T*s*m-i*I*m-h*s*k+i*p*k)*Me,e[3]=(_*p*a-h*M*a-_*s*m+i*M*m+h*s*E-i*p*E)*Me,e[4]=j*Me,e[5]=(v*I*a-A*M*a+A*s*E-t*I*E-v*s*k+t*M*k)*Me,e[6]=(A*p*a-u*I*a-A*s*m+t*I*m+u*s*k-t*p*k)*Me,e[7]=(u*M*a-v*p*a+v*s*m-t*M*m-u*s*E+t*p*E)*Me,e[8]=z*Me,e[9]=(A*_*a-v*T*a-A*i*E+t*T*E+v*i*k-t*_*k)*Me,e[10]=(u*T*a-A*h*a+A*i*m-t*T*m-u*i*k+t*h*k)*Me,e[11]=(v*h*a-u*_*a-v*i*m+t*_*m+u*i*E-t*h*E)*Me,e[12]=te*Me,e[13]=(v*T*s-A*_*s+A*i*M-t*T*M-v*i*I+t*_*I)*Me,e[14]=(A*h*s-u*T*s-A*i*p+t*T*p+u*i*I-t*h*I)*Me,e[15]=(u*_*s-v*h*s+v*i*p-t*_*p-u*i*M+t*h*M)*Me,this}scale(e){const t=this.elements,i=e.x,s=e.y,a=e.z;return t[0]*=i,t[4]*=s,t[8]*=a,t[1]*=i,t[5]*=s,t[9]*=a,t[2]*=i,t[6]*=s,t[10]*=a,t[3]*=i,t[7]*=s,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),a=1-i,u=e.x,h=e.y,p=e.z,m=a*u,v=a*h;return this.set(m*u+i,m*h-s*p,m*p+s*h,0,m*h+s*p,v*h+i,v*p-s*u,0,m*p-s*h,v*p+s*u,a*p*p+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,a,u){return this.set(1,i,a,0,e,1,u,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,a=t._x,u=t._y,h=t._z,p=t._w,m=a+a,v=u+u,_=h+h,M=a*m,E=a*v,A=a*_,T=u*v,I=u*_,k=h*_,B=p*m,j=p*v,z=p*_,te=i.x,ae=i.y,Me=i.z;return s[0]=(1-(T+k))*te,s[1]=(E+z)*te,s[2]=(A-j)*te,s[3]=0,s[4]=(E-z)*ae,s[5]=(1-(M+k))*ae,s[6]=(I+B)*ae,s[7]=0,s[8]=(A+j)*Me,s[9]=(I-B)*Me,s[10]=(1-(M+T))*Me,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let a=yc.set(s[0],s[1],s[2]).length();const u=yc.set(s[4],s[5],s[6]).length(),h=yc.set(s[8],s[9],s[10]).length();this.determinant()<0&&(a=-a),e.x=s[12],e.y=s[13],e.z=s[14],Xs.copy(this);const m=1/a,v=1/u,_=1/h;return Xs.elements[0]*=m,Xs.elements[1]*=m,Xs.elements[2]*=m,Xs.elements[4]*=v,Xs.elements[5]*=v,Xs.elements[6]*=v,Xs.elements[8]*=_,Xs.elements[9]*=_,Xs.elements[10]*=_,t.setFromRotationMatrix(Xs),i.x=a,i.y=u,i.z=h,this}makePerspective(e,t,i,s,a,u){const h=this.elements,m=2*a/(i-s),v=(t+e)/(t-e),_=(i+s)/(i-s),M=-(u+a)/(u-a),E=-2*u*a/(u-a);return h[0]=2*a/(t-e),h[4]=0,h[8]=v,h[12]=0,h[1]=0,h[5]=m,h[9]=_,h[13]=0,h[2]=0,h[6]=0,h[10]=M,h[14]=E,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,i,s,a,u){const h=this.elements,p=1/(t-e),m=1/(i-s),v=1/(u-a),_=(t+e)*p,M=(i+s)*m,E=(u+a)*v;return h[0]=2*p,h[4]=0,h[8]=0,h[12]=-_,h[1]=0,h[5]=2*m,h[9]=0,h[13]=-M,h[2]=0,h[6]=0,h[10]=-2*v,h[14]=-E,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const yc=new ue,Xs=new Tn,rx=new ue(0,0,0),Bp=new ue(1,1,1),Ea=new ue,Ad=new ue,ls=new ue,Up=new Tn,Dy=new Zr;let sx=(()=>{class l{constructor(t=0,i=0,s=0,a=l.DefaultOrder){this.isEuler=!0,this._x=t,this._y=i,this._z=s,this._order=a}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,s,a=this._order){return this._x=t,this._y=i,this._z=s,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,s=!0){const a=t.elements,u=a[0],h=a[4],p=a[8],m=a[1],v=a[5],_=a[9],M=a[2],E=a[6],A=a[10];switch(i){case"XYZ":this._y=Math.asin(Ni(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-_,A),this._z=Math.atan2(-h,u)):(this._x=Math.atan2(E,v),this._z=0);break;case"YXZ":this._x=Math.asin(-Ni(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(p,A),this._z=Math.atan2(m,v)):(this._y=Math.atan2(-M,u),this._z=0);break;case"ZXY":this._x=Math.asin(Ni(E,-1,1)),Math.abs(E)<.9999999?(this._y=Math.atan2(-M,A),this._z=Math.atan2(-h,v)):(this._y=0,this._z=Math.atan2(m,u));break;case"ZYX":this._y=Math.asin(-Ni(M,-1,1)),Math.abs(M)<.9999999?(this._x=Math.atan2(E,A),this._z=Math.atan2(m,u)):(this._x=0,this._z=Math.atan2(-h,v));break;case"YZX":this._z=Math.asin(Ni(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-_,v),this._y=Math.atan2(-M,u)):(this._x=0,this._y=Math.atan2(p,A));break;case"XZY":this._z=Math.asin(-Ni(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(E,v),this._y=Math.atan2(p,u)):(this._x=Math.atan2(-_,A),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===s&&this._onChangeCallback(),this}setFromQuaternion(t,i,s){return Up.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Up,i,s)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return Dy.setFromEuler(this),this.setFromQuaternion(Dy,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return l.DefaultOrder="XYZ",l.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],l})();class or{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Vp=0;const zp=new ue,Da=new Zr,pi=new Tn,Ca=new ue,xl=new ue,ox=new ue,ax=new Zr,Hp=new ue(1,0,0),Cy=new ue(0,1,0),Gp=new ue(0,0,1),lx={type:"added"},Wp={type:"removed"};let Cs=(()=>{class l extends uc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Vp++}),this.uuid=Xr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=l.DefaultUp.clone();const t=new ue,i=new sx,s=new Zr,a=new ue(1,1,1);i._onChange(function u(){s.setFromEuler(i,!1)}),s._onChange(function h(){i.setFromQuaternion(s,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Tn},normalMatrix:{value:new Er}}),this.matrix=new Tn,this.matrixWorld=new Tn,this.matrixAutoUpdate=l.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new or,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Da.setFromAxisAngle(t,i),this.quaternion.multiply(Da),this}rotateOnWorldAxis(t,i){return Da.setFromAxisAngle(t,i),this.quaternion.premultiply(Da),this}rotateX(t){return this.rotateOnAxis(Hp,t)}rotateY(t){return this.rotateOnAxis(Cy,t)}rotateZ(t){return this.rotateOnAxis(Gp,t)}translateOnAxis(t,i){return zp.copy(t).applyQuaternion(this.quaternion),this.position.add(zp.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(Hp,t)}translateY(t){return this.translateOnAxis(Cy,t)}translateZ(t){return this.translateOnAxis(Gp,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(pi.copy(this.matrixWorld).invert())}lookAt(t,i,s){t.isVector3?Ca.copy(t):Ca.set(t,i,s);const a=this.parent;this.updateWorldMatrix(!0,!1),xl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?pi.lookAt(xl,Ca,this.up):pi.lookAt(Ca,xl,this.up),this.quaternion.setFromRotationMatrix(pi),a&&(pi.extractRotation(a.matrixWorld),Da.setFromRotationMatrix(pi),this.quaternion.premultiply(Da.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(lx)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.remove(arguments[s]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(Wp)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const i=this.children[t];i.parent=null,i.dispatchEvent(Wp)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),pi.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),pi.multiply(t.parent.matrixWorld)),t.applyMatrix4(pi),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let s=0,a=this.children.length;s<a;s++){const h=this.children[s].getObjectByProperty(t,i);if(void 0!==h)return h}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xl,t,ox),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xl,ax,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].updateMatrixWorld(t)}updateWorldMatrix(t,i){const s=this.parent;if(!0===t&&null!==s&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const a=this.children;for(let u=0,h=a.length;u<h;u++)a[u].updateWorldMatrix(!1,!0)}}toJSON(t){const i=void 0===t||"string"==typeof t,s={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const a={};function u(p,m){return void 0===p[m.uuid]&&(p[m.uuid]=m.toJSON(t)),m.uuid}if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(a.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(a.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=u(t.geometries,this.geometry);const p=this.geometry.parameters;if(void 0!==p&&void 0!==p.shapes){const m=p.shapes;if(Array.isArray(m))for(let v=0,_=m.length;v<_;v++)u(t.shapes,m[v]);else u(t.shapes,m)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(u(t.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const p=[];for(let m=0,v=this.material.length;m<v;m++)p.push(u(t.materials,this.material[m]));a.material=p}else a.material=u(t.materials,this.material);if(this.children.length>0){a.children=[];for(let p=0;p<this.children.length;p++)a.children.push(this.children[p].toJSON(t).object)}if(this.animations.length>0){a.animations=[];for(let p=0;p<this.animations.length;p++)a.animations.push(u(t.animations,this.animations[p]))}if(i){const p=h(t.geometries),m=h(t.materials),v=h(t.textures),_=h(t.images),M=h(t.shapes),E=h(t.skeletons),A=h(t.animations),T=h(t.nodes);p.length>0&&(s.geometries=p),m.length>0&&(s.materials=m),v.length>0&&(s.textures=v),_.length>0&&(s.images=_),M.length>0&&(s.shapes=M),E.length>0&&(s.skeletons=E),A.length>0&&(s.animations=A),T.length>0&&(s.nodes=T)}return s.object=a,s;function h(p){const m=[];for(const v in p){const _=p[v];delete _.metadata,m.push(_)}return m}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let s=0;s<t.children.length;s++)this.add(t.children[s].clone());return this}}return l.DefaultUp=new ue(0,1,0),l.DefaultMatrixAutoUpdate=!0,l})();const Zs=new ue,jo=new ue,Id=new ue,qo=new ue,vc=new ue,Js=new ue,vo=new ue,$p=new ue,jp=new ue,Ty=new ue;class _o{constructor(e=new ue,t=new ue,i=new ue){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),Zs.subVectors(e,t),s.cross(Zs);const a=s.lengthSq();return a>0?s.multiplyScalar(1/Math.sqrt(a)):s.set(0,0,0)}static getBarycoord(e,t,i,s,a){Zs.subVectors(s,t),jo.subVectors(i,t),Id.subVectors(e,t);const u=Zs.dot(Zs),h=Zs.dot(jo),p=Zs.dot(Id),m=jo.dot(jo),v=jo.dot(Id),_=u*m-h*h;if(0===_)return a.set(-2,-1,-1);const M=1/_,E=(m*p-h*v)*M,A=(u*v-h*p)*M;return a.set(1-E-A,A,E)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,qo),qo.x>=0&&qo.y>=0&&qo.x+qo.y<=1}static getUV(e,t,i,s,a,u,h,p){return this.getBarycoord(e,t,i,s,qo),p.set(0,0),p.addScaledVector(a,qo.x),p.addScaledVector(u,qo.y),p.addScaledVector(h,qo.z),p}static isFrontFacing(e,t,i,s){return Zs.subVectors(i,t),jo.subVectors(e,t),Zs.cross(jo).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Zs.subVectors(this.c,this.b),jo.subVectors(this.a,this.b),.5*Zs.cross(jo).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return _o.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return _o.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,s,a){return _o.getUV(e,this.a,this.b,this.c,t,i,s,a)}containsPoint(e){return _o.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return _o.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,a=this.c;let u,h;vc.subVectors(s,i),Js.subVectors(a,i),$p.subVectors(e,i);const p=vc.dot($p),m=Js.dot($p);if(p<=0&&m<=0)return t.copy(i);jp.subVectors(e,s);const v=vc.dot(jp),_=Js.dot(jp);if(v>=0&&_<=v)return t.copy(s);const M=p*_-v*m;if(M<=0&&p>=0&&v<=0)return u=p/(p-v),t.copy(i).addScaledVector(vc,u);Ty.subVectors(e,a);const E=vc.dot(Ty),A=Js.dot(Ty);if(A>=0&&E<=A)return t.copy(a);const T=E*m-p*A;if(T<=0&&m>=0&&A<=0)return h=m/(m-A),t.copy(i).addScaledVector(Js,h);const I=v*A-E*_;if(I<=0&&_-v>=0&&E-A>=0)return vo.subVectors(a,s),h=(_-v)/(_-v+(E-A)),t.copy(s).addScaledVector(vo,h);const k=1/(I+T+M);return u=T*k,h=M*k,t.copy(i).addScaledVector(vc,u).addScaledVector(Js,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Ay=0;class Ku extends uc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ay++}),this.uuid=Xr(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;continue}const s=this[t];void 0!==s?s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function s(a){const u=[];for(const h in a){const p=a[h];delete p.metadata,u.push(p)}return u}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){const a=s(e.textures),u=s(e.images);a.length>0&&(i.textures=a),u.length>0&&(i.images=u)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const s=t.length;i=new Array(s);for(let a=0;a!==s;++a)i[a]=t[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class gr extends Ku{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new qt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ci=new ue,_c=new St;class Ji{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,a=this.itemSize;s<a;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let s=0,a=e.length;s<a;s++){let u=e[s];void 0===u&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),u=new qt),t[i++]=u.r,t[i++]=u.g,t[i++]=u.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let s=0,a=e.length;s<a;s++){let u=e[s];void 0===u&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),u=new St),t[i++]=u.x,t[i++]=u.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let s=0,a=e.length;s<a;s++){let u=e[s];void 0===u&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),u=new ue),t[i++]=u.x,t[i++]=u.y,t[i++]=u.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let s=0,a=e.length;s<a;s++){let u=e[s];void 0===u&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),u=new Jn),t[i++]=u.x,t[i++]=u.y,t[i++]=u.z,t[i++]=u.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)_c.fromBufferAttribute(this,t),_c.applyMatrix3(e),this.setXY(t,_c.x,_c.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Ci.fromBufferAttribute(this,t),Ci.applyMatrix3(e),this.setXYZ(t,Ci.x,Ci.y,Ci.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ci.fromBufferAttribute(this,t),Ci.applyMatrix4(e),this.setXYZ(t,Ci.x,Ci.y,Ci.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ci.fromBufferAttribute(this,t),Ci.applyNormalMatrix(e),this.setXYZ(t,Ci.x,Ci.y,Ci.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ci.fromBufferAttribute(this,t),Ci.transformDirection(e),this.setXYZ(t,Ci.x,Ci.y,Ci.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,a){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}class qp extends Ji{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Pd extends Ji{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Zt extends Ji{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Yp=0;const cs=new Tn,Kp=new Cs,Ta=new ue,us=new yl,Zu=new yl,Qi=new ue;class Nn extends uc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Yp++}),this.uuid=Xr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(Hu(e)?Pd:qp)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const a=(new Er).getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const s=this.attributes.tangent;return void 0!==s&&(s.transformDirection(e),s.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return cs.makeRotationFromQuaternion(e),this.applyMatrix4(cs),this}rotateX(e){return cs.makeRotationX(e),this.applyMatrix4(cs),this}rotateY(e){return cs.makeRotationY(e),this.applyMatrix4(cs),this}rotateZ(e){return cs.makeRotationZ(e),this.applyMatrix4(cs),this}translate(e,t,i){return cs.makeTranslation(e,t,i),this.applyMatrix4(cs),this}scale(e,t,i){return cs.makeScale(e,t,i),this.applyMatrix4(cs),this}lookAt(e){return Kp.lookAt(e),Kp.updateMatrix(),this.applyMatrix4(Kp.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ta).negate(),this.translate(Ta.x,Ta.y,Ta.z),this}setFromPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++){const a=e[i];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new Zt(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new yl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ue(-1/0,-1/0,-1/0),new ue(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++)us.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(Qi.addVectors(this.boundingBox.min,us.min),this.boundingBox.expandByPoint(Qi),Qi.addVectors(this.boundingBox.max,us.max),this.boundingBox.expandByPoint(Qi)):(this.boundingBox.expandByPoint(us.min),this.boundingBox.expandByPoint(us.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new _l);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ue,1/0);if(e){const i=this.boundingSphere.center;if(us.setFromBufferAttribute(e),t)for(let a=0,u=t.length;a<u;a++)Zu.setFromBufferAttribute(t[a]),this.morphTargetsRelative?(Qi.addVectors(us.min,Zu.min),us.expandByPoint(Qi),Qi.addVectors(us.max,Zu.max),us.expandByPoint(Qi)):(us.expandByPoint(Zu.min),us.expandByPoint(Zu.max));us.getCenter(i);let s=0;for(let a=0,u=e.count;a<u;a++)Qi.fromBufferAttribute(e,a),s=Math.max(s,i.distanceToSquared(Qi));if(t)for(let a=0,u=t.length;a<u;a++){const h=t[a],p=this.morphTargetsRelative;for(let m=0,v=h.count;m<v;m++)Qi.fromBufferAttribute(h,m),p&&(Ta.fromBufferAttribute(e,m),Qi.add(Ta)),s=Math.max(s,i.distanceToSquared(Qi))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,s=t.position.array,a=t.normal.array,u=t.uv.array,h=s.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ji(new Float32Array(4*h),4));const p=this.getAttribute("tangent").array,m=[],v=[];for(let Ce=0;Ce<h;Ce++)m[Ce]=new ue,v[Ce]=new ue;const _=new ue,M=new ue,E=new ue,A=new St,T=new St,I=new St,k=new ue,B=new ue;function j(Ce,Re,vt){_.fromArray(s,3*Ce),M.fromArray(s,3*Re),E.fromArray(s,3*vt),A.fromArray(u,2*Ce),T.fromArray(u,2*Re),I.fromArray(u,2*vt),M.sub(_),E.sub(_),T.sub(A),I.sub(A);const Tt=1/(T.x*I.y-I.x*T.y);!isFinite(Tt)||(k.copy(M).multiplyScalar(I.y).addScaledVector(E,-T.y).multiplyScalar(Tt),B.copy(E).multiplyScalar(T.x).addScaledVector(M,-I.x).multiplyScalar(Tt),m[Ce].add(k),m[Re].add(k),m[vt].add(k),v[Ce].add(B),v[Re].add(B),v[vt].add(B))}let z=this.groups;0===z.length&&(z=[{start:0,count:i.length}]);for(let Ce=0,Re=z.length;Ce<Re;++Ce){const vt=z[Ce],Tt=vt.start;for(let lt=Tt,Te=Tt+vt.count;lt<Te;lt+=3)j(i[lt+0],i[lt+1],i[lt+2])}const te=new ue,ae=new ue,Me=new ue,G=new ue;function ye(Ce){Me.fromArray(a,3*Ce),G.copy(Me);const Re=m[Ce];te.copy(Re),te.sub(Me.multiplyScalar(Me.dot(Re))).normalize(),ae.crossVectors(G,Re);const Tt=ae.dot(v[Ce])<0?-1:1;p[4*Ce]=te.x,p[4*Ce+1]=te.y,p[4*Ce+2]=te.z,p[4*Ce+3]=Tt}for(let Ce=0,Re=z.length;Ce<Re;++Ce){const vt=z[Ce],Tt=vt.start;for(let lt=Tt,Te=Tt+vt.count;lt<Te;lt+=3)ye(i[lt+0]),ye(i[lt+1]),ye(i[lt+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Ji(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let M=0,E=i.count;M<E;M++)i.setXYZ(M,0,0,0);const s=new ue,a=new ue,u=new ue,h=new ue,p=new ue,m=new ue,v=new ue,_=new ue;if(e)for(let M=0,E=e.count;M<E;M+=3){const A=e.getX(M+0),T=e.getX(M+1),I=e.getX(M+2);s.fromBufferAttribute(t,A),a.fromBufferAttribute(t,T),u.fromBufferAttribute(t,I),v.subVectors(u,a),_.subVectors(s,a),v.cross(_),h.fromBufferAttribute(i,A),p.fromBufferAttribute(i,T),m.fromBufferAttribute(i,I),h.add(v),p.add(v),m.add(v),i.setXYZ(A,h.x,h.y,h.z),i.setXYZ(T,p.x,p.y,p.z),i.setXYZ(I,m.x,m.y,m.z)}else for(let M=0,E=t.count;M<E;M+=3)s.fromBufferAttribute(t,M+0),a.fromBufferAttribute(t,M+1),u.fromBufferAttribute(t,M+2),v.subVectors(u,a),_.subVectors(s,a),v.cross(_),i.setXYZ(M+0,v.x,v.y,v.z),i.setXYZ(M+1,v.x,v.y,v.z),i.setXYZ(M+2,v.x,v.y,v.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const s in i){if(void 0===e.attributes[s])continue;const u=i[s].array,h=e.attributes[s],p=h.array,m=h.itemSize*t,v=Math.min(p.length,u.length-m);for(let _=0,M=m;_<v;_++,M++)u[M]=p[_]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Qi.fromBufferAttribute(e,t),Qi.normalize(),e.setXYZ(t,Qi.x,Qi.y,Qi.z)}toNonIndexed(){function e(h,p){const m=h.array,v=h.itemSize,_=h.normalized,M=new m.constructor(p.length*v);let E=0,A=0;for(let T=0,I=p.length;T<I;T++){E=h.isInterleavedBufferAttribute?p[T]*h.data.stride+h.offset:p[T]*v;for(let k=0;k<v;k++)M[A++]=m[E++]}return new Ji(M,v,_)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Nn,i=this.index.array,s=this.attributes;for(const h in s){const m=e(s[h],i);t.setAttribute(h,m)}const a=this.morphAttributes;for(const h in a){const p=[],m=a[h];for(let v=0,_=m.length;v<_;v++){const E=e(m[v],i);p.push(E)}t.morphAttributes[h]=p}t.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let h=0,p=u.length;h<p;h++){const m=u[h];t.addGroup(m.start,m.count,m.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const p=this.parameters;for(const m in p)void 0!==p[m]&&(e[m]=p[m]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const p in i)e.data.attributes[p]=i[p].toJSON(e.data);const s={};let a=!1;for(const p in this.morphAttributes){const m=this.morphAttributes[p],v=[];for(let _=0,M=m.length;_<M;_++)v.push(m[_].toJSON(e.data));v.length>0&&(s[p]=v,a=!0)}a&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(e.data.groups=JSON.parse(JSON.stringify(u)));const h=this.boundingSphere;return null!==h&&(e.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const s=e.attributes;for(const m in s)this.setAttribute(m,s[m].clone(t));const a=e.morphAttributes;for(const m in a){const v=[],_=a[m];for(let M=0,E=_.length;M<E;M++)v.push(_[M].clone(t));this.morphAttributes[m]=v}this.morphTargetsRelative=e.morphTargetsRelative;const u=e.groups;for(let m=0,v=u.length;m<v;m++){const _=u[m];this.addGroup(_.start,_.count,_.materialIndex)}const h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());const p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ry=new Tn,xc=new Yu,Ld=new _l,xo=new ue,Yo=new ue,wo=new ue,Xp=new ue,Zp=new ue,Nd=new ue,Ju=new ue,bo=new ue,Qu=new ue,eh=new St,Od=new St,Jp=new St,wc=new ue,Fd=new ue;class Dr extends Cs{constructor(e=new Nn,t=new gr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,u=s.length;a<u;a++){const h=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=a}}}}raycast(e,t){const i=this.geometry,s=this.material,a=this.matrixWorld;if(void 0===s||(null===i.boundingSphere&&i.computeBoundingSphere(),Ld.copy(i.boundingSphere),Ld.applyMatrix4(a),!1===e.ray.intersectsSphere(Ld))||(Ry.copy(a).invert(),xc.copy(e.ray).applyMatrix4(Ry),null!==i.boundingBox&&!1===xc.intersectsBox(i.boundingBox)))return;let u;const h=i.index,p=i.attributes.position,m=i.morphAttributes.position,v=i.morphTargetsRelative,_=i.attributes.uv,M=i.attributes.uv2,E=i.groups,A=i.drawRange;if(null!==h)if(Array.isArray(s))for(let T=0,I=E.length;T<I;T++){const k=E[T],B=s[k.materialIndex];for(let te=Math.max(k.start,A.start),ae=Math.min(h.count,Math.min(k.start+k.count,A.start+A.count));te<ae;te+=3){const Me=h.getX(te),G=h.getX(te+1),ye=h.getX(te+2);u=th(this,B,e,xc,p,m,v,_,M,Me,G,ye),u&&(u.faceIndex=Math.floor(te/3),u.face.materialIndex=k.materialIndex,t.push(u))}}else for(let k=Math.max(0,A.start),B=Math.min(h.count,A.start+A.count);k<B;k+=3){const j=h.getX(k),z=h.getX(k+1),te=h.getX(k+2);u=th(this,s,e,xc,p,m,v,_,M,j,z,te),u&&(u.faceIndex=Math.floor(k/3),t.push(u))}else if(void 0!==p)if(Array.isArray(s))for(let T=0,I=E.length;T<I;T++){const k=E[T],B=s[k.materialIndex];for(let te=Math.max(k.start,A.start),ae=Math.min(p.count,Math.min(k.start+k.count,A.start+A.count));te<ae;te+=3)u=th(this,B,e,xc,p,m,v,_,M,te,te+1,te+2),u&&(u.faceIndex=Math.floor(te/3),u.face.materialIndex=k.materialIndex,t.push(u))}else for(let k=Math.max(0,A.start),B=Math.min(p.count,A.start+A.count);k<B;k+=3)u=th(this,s,e,xc,p,m,v,_,M,k,k+1,k+2),u&&(u.faceIndex=Math.floor(k/3),t.push(u))}}function th(l,e,t,i,s,a,u,h,p,m,v,_){xo.fromBufferAttribute(s,m),Yo.fromBufferAttribute(s,v),wo.fromBufferAttribute(s,_);const M=l.morphTargetInfluences;if(a&&M){Ju.set(0,0,0),bo.set(0,0,0),Qu.set(0,0,0);for(let A=0,T=a.length;A<T;A++){const I=M[A],k=a[A];0!==I&&(Xp.fromBufferAttribute(k,m),Zp.fromBufferAttribute(k,v),Nd.fromBufferAttribute(k,_),u?(Ju.addScaledVector(Xp,I),bo.addScaledVector(Zp,I),Qu.addScaledVector(Nd,I)):(Ju.addScaledVector(Xp.sub(xo),I),bo.addScaledVector(Zp.sub(Yo),I),Qu.addScaledVector(Nd.sub(wo),I)))}xo.add(Ju),Yo.add(bo),wo.add(Qu)}l.isSkinnedMesh&&(l.boneTransform(m,xo),l.boneTransform(v,Yo),l.boneTransform(_,wo));const E=function Py(l,e,t,i,s,a,u,h){let p;if(p=1===e.side?i.intersectTriangle(u,a,s,!0,h):i.intersectTriangle(s,a,u,2!==e.side,h),null===p)return null;Fd.copy(h),Fd.applyMatrix4(l.matrixWorld);const m=t.ray.origin.distanceTo(Fd);return m<t.near||m>t.far?null:{distance:m,point:Fd.clone(),object:l}}(l,e,t,i,xo,Yo,wo,wc);if(E){h&&(eh.fromBufferAttribute(h,m),Od.fromBufferAttribute(h,v),Jp.fromBufferAttribute(h,_),E.uv=_o.getUV(wc,xo,Yo,wo,eh,Od,Jp,new St)),p&&(eh.fromBufferAttribute(p,m),Od.fromBufferAttribute(p,v),Jp.fromBufferAttribute(p,_),E.uv2=_o.getUV(wc,xo,Yo,wo,eh,Od,Jp,new St));const A={a:m,b:v,c:_,normal:new ue,materialIndex:0};_o.getNormal(xo,Yo,wo,A.normal),E.face=A}return E}class Mo extends Nn{constructor(e=1,t=1,i=1,s=1,a=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:a,depthSegments:u};const h=this;s=Math.floor(s),a=Math.floor(a),u=Math.floor(u);const p=[],m=[],v=[],_=[];let M=0,E=0;function A(T,I,k,B,j,z,te,ae,Me,G,ye){const Ce=z/Me,Re=te/G,vt=z/2,Tt=te/2,Le=ae/2,lt=Me+1,Te=G+1;let Be=0,Ve=0;const Ie=new ue;for(let Ye=0;Ye<Te;Ye++){const Dt=Ye*Re-Tt;for(let mt=0;mt<lt;mt++)Ie[T]=(mt*Ce-vt)*B,Ie[I]=Dt*j,Ie[k]=Le,m.push(Ie.x,Ie.y,Ie.z),Ie[T]=0,Ie[I]=0,Ie[k]=ae>0?1:-1,v.push(Ie.x,Ie.y,Ie.z),_.push(mt/Me),_.push(1-Ye/G),Be+=1}for(let Ye=0;Ye<G;Ye++)for(let Dt=0;Dt<Me;Dt++){const Pt=M+Dt+lt*(Ye+1),Ot=M+(Dt+1)+lt*(Ye+1),fn=M+(Dt+1)+lt*Ye;p.push(M+Dt+lt*Ye,Pt,fn),p.push(Pt,Ot,fn),Ve+=6}h.addGroup(E,Ve,ye),E+=Ve,M+=Be}A("z","y","x",-1,-1,i,t,e,u,a,0),A("z","y","x",1,-1,i,t,-e,u,a,1),A("x","z","y",1,1,e,i,t,s,u,2),A("x","z","y",1,-1,e,i,-t,s,u,3),A("x","y","z",1,-1,e,t,i,s,a,4),A("x","y","z",-1,-1,e,t,-i,s,a,5),this.setIndex(p),this.setAttribute("position",new Zt(m,3)),this.setAttribute("normal",new Zt(v,3)),this.setAttribute("uv",new Zt(_,2))}static fromJSON(e){return new Mo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function wl(l){const e={};for(const t in l){e[t]={};for(const i in l[t]){const s=l[t][i];e[t][i]=s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.clone():Array.isArray(s)?s.slice():s}}return e}function Ki(l){const e={};for(let t=0;t<l.length;t++){const i=wl(l[t]);for(const s in i)e[s]=i[s]}return e}const Ly={clone:wl,merge:Ki};class So extends Ku{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=wl(e.uniforms),this.uniformsGroups=function kd(l){const e=[];for(let t=0;t<l.length;t++)e.push(l[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const u=this.uniforms[s].value;t.uniforms[s]=u&&u.isTexture?{type:"t",value:u.toJSON(e).uuid}:u&&u.isColor?{type:"c",value:u.getHex()}:u&&u.isVector2?{type:"v2",value:u.toArray()}:u&&u.isVector3?{type:"v3",value:u.toArray()}:u&&u.isVector4?{type:"v4",value:u.toArray()}:u&&u.isMatrix3?{type:"m3",value:u.toArray()}:u&&u.isMatrix4?{type:"m4",value:u.toArray()}:{value:u}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const s in this.extensions)!0===this.extensions[s]&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class bl extends Cs{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Tn,this.projectionMatrix=new Tn,this.projectionMatrixInverse=new Tn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class yr extends bl{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*pl*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*fl*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*pl*Math.atan(Math.tan(.5*fl*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,s,a,u){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=a,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*fl*this.fov)/this.zoom,i=2*t,s=this.aspect*i,a=-.5*s;const u=this.view;if(null!==this.view&&this.view.enabled){const p=u.fullWidth,m=u.fullHeight;a+=u.offsetX*s/p,t-=u.offsetY*i/m,s*=u.width/p,i*=u.height/m}const h=this.filmOffset;0!==h&&(a+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+s,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class hx extends Cs{constructor(e,t,i){if(super(),this.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=i;const s=new yr(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new ue(1,0,0)),this.add(s);const a=new yr(90,1,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new ue(-1,0,0)),this.add(a);const u=new yr(90,1,e,t);u.layers=this.layers,u.up.set(0,0,1),u.lookAt(new ue(0,1,0)),this.add(u);const h=new yr(90,1,e,t);h.layers=this.layers,h.up.set(0,0,-1),h.lookAt(new ue(0,-1,0)),this.add(h);const p=new yr(90,1,e,t);p.layers=this.layers,p.up.set(0,-1,0),p.lookAt(new ue(0,0,1)),this.add(p);const m=new yr(90,1,e,t);m.layers=this.layers,m.up.set(0,-1,0),m.lookAt(new ue(0,0,-1)),this.add(m)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[s,a,u,h,p,m]=this.children,v=e.getRenderTarget(),_=e.toneMapping,M=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const E=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,s),e.setRenderTarget(i,1),e.render(t,a),e.setRenderTarget(i,2),e.render(t,u),e.setRenderTarget(i,3),e.render(t,h),e.setRenderTarget(i,4),e.render(t,p),i.texture.generateMipmaps=E,e.setRenderTarget(i,5),e.render(t,m),e.setRenderTarget(v),e.toneMapping=_,e.xr.enabled=M,i.texture.needsPMREMUpdate=!0}}class nh extends gl{constructor(e,t,i,s,a,u,h,p,m,v){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,s,a,u,h,p,m,v),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class em extends Ys{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new nh([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:ri}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new Mo(5,5,5),a=new So({name:"CubemapFromEquirect",uniforms:wl(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});a.uniforms.tEquirect.value=t;const u=new Dr(s,a),h=t.minFilter;return 1008===t.minFilter&&(t.minFilter=ri),new hx(1,10,this).update(e,u),t.minFilter=h,u.geometry.dispose(),u.material.dispose(),this}clear(e,t,i,s){const a=e.getRenderTarget();for(let u=0;u<6;u++)e.setRenderTarget(this,u),e.clear(t,i,s);e.setRenderTarget(a)}}const Bd=new ue,UM=new ue,Oy=new Er;class Sl{constructor(e=new ue(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=Bd.subVectors(i,t).cross(UM.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(Bd),s=this.normal.dot(i);if(0===s)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/s;return a<0||a>1?null:t.copy(i).multiplyScalar(a).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Oy.getNormalMatrix(e),s=this.coplanarPoint(Bd).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const El=new _l,Ud=new ue;class tm{constructor(e=new Sl,t=new Sl,i=new Sl,s=new Sl,a=new Sl,u=new Sl){this.planes=[e,t,i,s,a,u]}set(e,t,i,s,a,u){const h=this.planes;return h[0].copy(e),h[1].copy(t),h[2].copy(i),h[3].copy(s),h[4].copy(a),h[5].copy(u),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,s=i[0],a=i[1],u=i[2],h=i[3],p=i[4],m=i[5],v=i[6],_=i[7],M=i[8],E=i[9],A=i[10],T=i[11],I=i[12],k=i[13],B=i[14],j=i[15];return t[0].setComponents(h-s,_-p,T-M,j-I).normalize(),t[1].setComponents(h+s,_+p,T+M,j+I).normalize(),t[2].setComponents(h+a,_+m,T+E,j+k).normalize(),t[3].setComponents(h-a,_-m,T-E,j-k).normalize(),t[4].setComponents(h-u,_-v,T-A,j-B).normalize(),t[5].setComponents(h+u,_+v,T+A,j+B).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),El.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(El)}intersectsSprite(e){return El.center.set(0,0,0),El.radius=.7071067811865476,El.applyMatrix4(e.matrixWorld),this.intersectsSphere(El)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(Ud.x=s.normal.x>0?e.max.x:e.min.x,Ud.y=s.normal.y>0?e.max.y:e.min.y,Ud.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(Ud)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Ts(){let l=null,e=!1,t=null,i=null;function s(a,u){t(a,u),i=l.requestAnimationFrame(s)}return{start:function(){!0!==e&&null!==t&&(i=l.requestAnimationFrame(s),e=!0)},stop:function(){l.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){l=a}}}function dx(l,e){const t=e.isWebGL2,i=new WeakMap;return{get:function u(m){return m.isInterleavedBufferAttribute&&(m=m.data),i.get(m)},remove:function h(m){m.isInterleavedBufferAttribute&&(m=m.data);const v=i.get(m);v&&(l.deleteBuffer(v.buffer),i.delete(m))},update:function p(m,v){if(m.isGLBufferAttribute){const M=i.get(m);return void((!M||M.version<m.version)&&i.set(m,{buffer:m.buffer,type:m.type,bytesPerElement:m.elementSize,version:m.version}))}m.isInterleavedBufferAttribute&&(m=m.data);const _=i.get(m);void 0===_?i.set(m,function s(m,v){const _=m.array,M=m.usage,E=l.createBuffer();let A;if(l.bindBuffer(v,E),l.bufferData(v,_,M),m.onUploadCallback(),_ instanceof Float32Array)A=5126;else if(_ instanceof Uint16Array)if(m.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");A=5131}else A=5123;else if(_ instanceof Int16Array)A=5122;else if(_ instanceof Uint32Array)A=5125;else if(_ instanceof Int32Array)A=5124;else if(_ instanceof Int8Array)A=5120;else if(_ instanceof Uint8Array)A=5121;else{if(!(_ instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+_);A=5121}return{buffer:E,type:A,bytesPerElement:_.BYTES_PER_ELEMENT,version:m.version}}(m,v)):_.version<m.version&&(function a(m,v,_){const M=v.array,E=v.updateRange;l.bindBuffer(_,m),-1===E.count?l.bufferSubData(_,0,M):(t?l.bufferSubData(_,E.offset*M.BYTES_PER_ELEMENT,M,E.offset,E.count):l.bufferSubData(_,E.offset*M.BYTES_PER_ELEMENT,M.subarray(E.offset,E.offset+E.count)),E.count=-1)}(_.buffer,m,v),_.version=m.version)}}}class Mc extends Nn{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const a=e/2,u=t/2,h=Math.floor(i),p=Math.floor(s),m=h+1,v=p+1,_=e/h,M=t/p,E=[],A=[],T=[],I=[];for(let k=0;k<v;k++){const B=k*M-u;for(let j=0;j<m;j++)A.push(j*_-a,-B,0),T.push(0,0,1),I.push(j/h),I.push(1-k/p)}for(let k=0;k<p;k++)for(let B=0;B<h;B++){const z=B+m*(k+1),te=B+1+m*(k+1),ae=B+1+m*k;E.push(B+m*k,z,ae),E.push(z,te,ae)}this.setIndex(E),this.setAttribute("position",new Zt(A,3)),this.setAttribute("normal",new Zt(T,3)),this.setAttribute("uv",new Zt(I,2))}static fromJSON(e){return new Mc(e.width,e.height,e.widthSegments,e.heightSegments)}}const Fn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Gt={common:{diffuse:{value:new qt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Er},uv2Transform:{value:new Er},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new St(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new qt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Er}},sprite:{diffuse:{value:new qt(16777215)},opacity:{value:1},center:{value:new St(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Er}}},Is={basic:{uniforms:Ki([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.fog]),vertexShader:Fn.meshbasic_vert,fragmentShader:Fn.meshbasic_frag},lambert:{uniforms:Ki([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.fog,Gt.lights,{emissive:{value:new qt(0)}}]),vertexShader:Fn.meshlambert_vert,fragmentShader:Fn.meshlambert_frag},phong:{uniforms:Ki([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.fog,Gt.lights,{emissive:{value:new qt(0)},specular:{value:new qt(1118481)},shininess:{value:30}}]),vertexShader:Fn.meshphong_vert,fragmentShader:Fn.meshphong_frag},standard:{uniforms:Ki([Gt.common,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.roughnessmap,Gt.metalnessmap,Gt.fog,Gt.lights,{emissive:{value:new qt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Fn.meshphysical_vert,fragmentShader:Fn.meshphysical_frag},toon:{uniforms:Ki([Gt.common,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.gradientmap,Gt.fog,Gt.lights,{emissive:{value:new qt(0)}}]),vertexShader:Fn.meshtoon_vert,fragmentShader:Fn.meshtoon_frag},matcap:{uniforms:Ki([Gt.common,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.fog,{matcap:{value:null}}]),vertexShader:Fn.meshmatcap_vert,fragmentShader:Fn.meshmatcap_frag},points:{uniforms:Ki([Gt.points,Gt.fog]),vertexShader:Fn.points_vert,fragmentShader:Fn.points_frag},dashed:{uniforms:Ki([Gt.common,Gt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Fn.linedashed_vert,fragmentShader:Fn.linedashed_frag},depth:{uniforms:Ki([Gt.common,Gt.displacementmap]),vertexShader:Fn.depth_vert,fragmentShader:Fn.depth_frag},normal:{uniforms:Ki([Gt.common,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,{opacity:{value:1}}]),vertexShader:Fn.meshnormal_vert,fragmentShader:Fn.meshnormal_frag},sprite:{uniforms:Ki([Gt.sprite,Gt.fog]),vertexShader:Fn.sprite_vert,fragmentShader:Fn.sprite_frag},background:{uniforms:{uvTransform:{value:new Er},t2D:{value:null}},vertexShader:Fn.background_vert,fragmentShader:Fn.background_frag},cube:{uniforms:Ki([Gt.envmap,{opacity:{value:1}}]),vertexShader:Fn.cube_vert,fragmentShader:Fn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Fn.equirect_vert,fragmentShader:Fn.equirect_frag},distanceRGBA:{uniforms:Ki([Gt.common,Gt.displacementmap,{referencePosition:{value:new ue},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Fn.distanceRGBA_vert,fragmentShader:Fn.distanceRGBA_frag},shadow:{uniforms:Ki([Gt.lights,Gt.fog,{color:{value:new qt(0)},opacity:{value:1}}]),vertexShader:Fn.shadow_vert,fragmentShader:Fn.shadow_frag}};function d0(l,e,t,i,s,a){const u=new qt(0);let p,m,h=!0===s?0:1,v=null,_=0,M=null;function A(T,I){t.buffers.color.setClear(T.r,T.g,T.b,I,a)}return{getClearColor:function(){return u},setClearColor:function(T,I=1){u.set(T),h=I,A(u,h)},getClearAlpha:function(){return h},setClearAlpha:function(T){h=T,A(u,h)},render:function E(T,I){let k=!1,B=!0===I.isScene?I.background:null;B&&B.isTexture&&(B=e.get(B));const j=l.xr,z=j.getSession&&j.getSession();z&&"additive"===z.environmentBlendMode&&(B=null),null===B?A(u,h):B&&B.isColor&&(A(B,1),k=!0),(l.autoClear||k)&&l.clear(l.autoClearColor,l.autoClearDepth,l.autoClearStencil),B&&(B.isCubeTexture||306===B.mapping)?(void 0===m&&(m=new Dr(new Mo(1,1,1),new So({name:"BackgroundCubeMaterial",uniforms:wl(Is.cube.uniforms),vertexShader:Is.cube.vertexShader,fragmentShader:Is.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(te,ae,Me){this.matrixWorld.copyPosition(Me.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(m)),m.material.uniforms.envMap.value=B,m.material.uniforms.flipEnvMap.value=B.isCubeTexture&&!1===B.isRenderTargetTexture?-1:1,(v!==B||_!==B.version||M!==l.toneMapping)&&(m.material.needsUpdate=!0,v=B,_=B.version,M=l.toneMapping),m.layers.enableAll(),T.unshift(m,m.geometry,m.material,0,0,null)):B&&B.isTexture&&(void 0===p&&(p=new Dr(new Mc(2,2),new So({name:"BackgroundMaterial",uniforms:wl(Is.background.uniforms),vertexShader:Is.background.vertexShader,fragmentShader:Is.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(p)),p.material.uniforms.t2D.value=B,!0===B.matrixAutoUpdate&&B.updateMatrix(),p.material.uniforms.uvTransform.value.copy(B.matrix),(v!==B||_!==B.version||M!==l.toneMapping)&&(p.material.needsUpdate=!0,v=B,_=B.version,M=l.toneMapping),p.layers.enableAll(),T.unshift(p,p.geometry,p.material,0,0,null))}}}function nw(l,e,t,i){const s=l.getParameter(34921),a=i.isWebGL2?null:e.get("OES_vertex_array_object"),u=i.isWebGL2||null!==a,h={},p=I(null);let m=p,v=!1;function E(Le){return i.isWebGL2?l.bindVertexArray(Le):a.bindVertexArrayOES(Le)}function A(Le){return i.isWebGL2?l.deleteVertexArray(Le):a.deleteVertexArrayOES(Le)}function I(Le){const lt=[],Te=[],Be=[];for(let Ve=0;Ve<s;Ve++)lt[Ve]=0,Te[Ve]=0,Be[Ve]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:lt,enabledAttributes:Te,attributeDivisors:Be,object:Le,attributes:{},index:null}}function j(){const Le=m.newAttributes;for(let lt=0,Te=Le.length;lt<Te;lt++)Le[lt]=0}function z(Le){te(Le,0)}function te(Le,lt){const Be=m.enabledAttributes,Ve=m.attributeDivisors;m.newAttributes[Le]=1,0===Be[Le]&&(l.enableVertexAttribArray(Le),Be[Le]=1),Ve[Le]!==lt&&((i.isWebGL2?l:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Le,lt),Ve[Le]=lt)}function ae(){const Le=m.newAttributes,lt=m.enabledAttributes;for(let Te=0,Be=lt.length;Te<Be;Te++)lt[Te]!==Le[Te]&&(l.disableVertexAttribArray(Te),lt[Te]=0)}function Me(Le,lt,Te,Be,Ve,Ie){!0!==i.isWebGL2||5124!==Te&&5125!==Te?l.vertexAttribPointer(Le,lt,Te,Be,Ve,Ie):l.vertexAttribIPointer(Le,lt,Te,Ve,Ie)}function vt(){Tt(),v=!0,m!==p&&(m=p,E(m.object))}function Tt(){p.geometry=null,p.program=null,p.wireframe=!1}return{setup:function _(Le,lt,Te,Be,Ve){let Ie=!1;if(u){const Ye=function T(Le,lt,Te){const Be=!0===Te.wireframe;let Ve=h[Le.id];void 0===Ve&&(Ve={},h[Le.id]=Ve);let Ie=Ve[lt.id];void 0===Ie&&(Ie={},Ve[lt.id]=Ie);let Ye=Ie[Be];return void 0===Ye&&(Ye=I(function M(){return i.isWebGL2?l.createVertexArray():a.createVertexArrayOES()}()),Ie[Be]=Ye),Ye}(Be,Te,lt);m!==Ye&&(m=Ye,E(m.object)),Ie=function k(Le,lt,Te,Be){const Ve=m.attributes,Ie=lt.attributes;let Ye=0;const Dt=Te.getAttributes();for(const mt in Dt)if(Dt[mt].location>=0){const Ot=Ve[mt];let fn=Ie[mt];if(void 0===fn&&("instanceMatrix"===mt&&Le.instanceMatrix&&(fn=Le.instanceMatrix),"instanceColor"===mt&&Le.instanceColor&&(fn=Le.instanceColor)),void 0===Ot||Ot.attribute!==fn||fn&&Ot.data!==fn.data)return!0;Ye++}return m.attributesNum!==Ye||m.index!==Be}(Le,Be,Te,Ve),Ie&&function B(Le,lt,Te,Be){const Ve={},Ie=lt.attributes;let Ye=0;const Dt=Te.getAttributes();for(const mt in Dt)if(Dt[mt].location>=0){let Ot=Ie[mt];void 0===Ot&&("instanceMatrix"===mt&&Le.instanceMatrix&&(Ot=Le.instanceMatrix),"instanceColor"===mt&&Le.instanceColor&&(Ot=Le.instanceColor));const fn={};fn.attribute=Ot,Ot&&Ot.data&&(fn.data=Ot.data),Ve[mt]=fn,Ye++}m.attributes=Ve,m.attributesNum=Ye,m.index=Be}(Le,Be,Te,Ve)}else{const Ye=!0===lt.wireframe;(m.geometry!==Be.id||m.program!==Te.id||m.wireframe!==Ye)&&(m.geometry=Be.id,m.program=Te.id,m.wireframe=Ye,Ie=!0)}null!==Ve&&t.update(Ve,34963),(Ie||v)&&(v=!1,function G(Le,lt,Te,Be){if(!1===i.isWebGL2&&(Le.isInstancedMesh||Be.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;j();const Ve=Be.attributes,Ie=Te.getAttributes(),Ye=lt.defaultAttributeValues;for(const Dt in Ie){const mt=Ie[Dt];if(mt.location>=0){let Pt=Ve[Dt];if(void 0===Pt&&("instanceMatrix"===Dt&&Le.instanceMatrix&&(Pt=Le.instanceMatrix),"instanceColor"===Dt&&Le.instanceColor&&(Pt=Le.instanceColor)),void 0!==Pt){const Ot=Pt.normalized,fn=Pt.itemSize,ht=t.get(Pt);if(void 0===ht)continue;const cn=ht.buffer,en=ht.type,Jt=ht.bytesPerElement;if(Pt.isInterleavedBufferAttribute){const zt=Pt.data,An=zt.stride,bt=Pt.offset;if(zt.isInstancedInterleavedBuffer){for(let gt=0;gt<mt.locationSize;gt++)te(mt.location+gt,zt.meshPerAttribute);!0!==Le.isInstancedMesh&&void 0===Be._maxInstanceCount&&(Be._maxInstanceCount=zt.meshPerAttribute*zt.count)}else for(let gt=0;gt<mt.locationSize;gt++)z(mt.location+gt);l.bindBuffer(34962,cn);for(let gt=0;gt<mt.locationSize;gt++)Me(mt.location+gt,fn/mt.locationSize,en,Ot,An*Jt,(bt+fn/mt.locationSize*gt)*Jt)}else{if(Pt.isInstancedBufferAttribute){for(let zt=0;zt<mt.locationSize;zt++)te(mt.location+zt,Pt.meshPerAttribute);!0!==Le.isInstancedMesh&&void 0===Be._maxInstanceCount&&(Be._maxInstanceCount=Pt.meshPerAttribute*Pt.count)}else for(let zt=0;zt<mt.locationSize;zt++)z(mt.location+zt);l.bindBuffer(34962,cn);for(let zt=0;zt<mt.locationSize;zt++)Me(mt.location+zt,fn/mt.locationSize,en,Ot,fn*Jt,fn/mt.locationSize*zt*Jt)}}else if(void 0!==Ye){const Ot=Ye[Dt];if(void 0!==Ot)switch(Ot.length){case 2:l.vertexAttrib2fv(mt.location,Ot);break;case 3:l.vertexAttrib3fv(mt.location,Ot);break;case 4:l.vertexAttrib4fv(mt.location,Ot);break;default:l.vertexAttrib1fv(mt.location,Ot)}}}}ae()}(Le,lt,Te,Be),null!==Ve&&l.bindBuffer(34963,t.get(Ve).buffer))},reset:vt,resetDefaultState:Tt,dispose:function ye(){vt();for(const Le in h){const lt=h[Le];for(const Te in lt){const Be=lt[Te];for(const Ve in Be)A(Be[Ve].object),delete Be[Ve];delete lt[Te]}delete h[Le]}},releaseStatesOfGeometry:function Ce(Le){if(void 0===h[Le.id])return;const lt=h[Le.id];for(const Te in lt){const Be=lt[Te];for(const Ve in Be)A(Be[Ve].object),delete Be[Ve];delete lt[Te]}delete h[Le.id]},releaseStatesOfProgram:function Re(Le){for(const lt in h){const Te=h[lt];if(void 0===Te[Le.id])continue;const Be=Te[Le.id];for(const Ve in Be)A(Be[Ve].object),delete Be[Ve];delete Te[Le.id]}},initAttributes:j,enableAttribute:z,disableUnusedAttributes:ae}}function iw(l,e,t,i){const s=i.isWebGL2;let a;this.setMode=function u(m){a=m},this.render=function h(m,v){l.drawArrays(a,m,v),t.update(v,a,1)},this.renderInstances=function p(m,v,_){if(0===_)return;let M,E;if(s)M=l,E="drawArraysInstanced";else if(M=e.get("ANGLE_instanced_arrays"),E="drawArraysInstancedANGLE",null===M)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");M[E](a,m,v,_),t.update(v,a,_)}}function rw(l,e,t){let i;function a(Me){if("highp"===Me){if(l.getShaderPrecisionFormat(35633,36338).precision>0&&l.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Me="mediump"}return"mediump"===Me&&l.getShaderPrecisionFormat(35633,36337).precision>0&&l.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const u="undefined"!=typeof WebGL2RenderingContext&&l instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&l instanceof WebGL2ComputeRenderingContext;let h=void 0!==t.precision?t.precision:"highp";const p=a(h);p!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",p,"instead."),h=p);const m=u||e.has("WEBGL_draw_buffers"),v=!0===t.logarithmicDepthBuffer,_=l.getParameter(34930),M=l.getParameter(35660),E=l.getParameter(3379),A=l.getParameter(34076),T=l.getParameter(34921),I=l.getParameter(36347),k=l.getParameter(36348),B=l.getParameter(36349),j=M>0,z=u||e.has("OES_texture_float");return{isWebGL2:u,drawBuffers:m,getMaxAnisotropy:function s(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const Me=e.get("EXT_texture_filter_anisotropic");i=l.getParameter(Me.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:a,precision:h,logarithmicDepthBuffer:v,maxTextures:_,maxVertexTextures:M,maxTextureSize:E,maxCubemapSize:A,maxAttributes:T,maxVertexUniforms:I,maxVaryings:k,maxFragmentUniforms:B,vertexTextures:j,floatFragmentTextures:z,floatVertexTextures:j&&z,maxSamples:u?l.getParameter(36183):0}}function f0(l){const e=this;let t=null,i=0,s=!1,a=!1;const u=new Sl,h=new Er,p={value:null,needsUpdate:!1};function m(){p.value!==t&&(p.value=t,p.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function v(_,M,E,A){const T=null!==_?_.length:0;let I=null;if(0!==T){if(I=p.value,!0!==A||null===I){const k=E+4*T,B=M.matrixWorldInverse;h.getNormalMatrix(B),(null===I||I.length<k)&&(I=new Float32Array(k));for(let j=0,z=E;j!==T;++j,z+=4)u.copy(_[j]).applyMatrix4(B,h),u.normal.toArray(I,z),I[z+3]=u.constant}p.value=I,p.needsUpdate=!0}return e.numPlanes=T,e.numIntersection=0,I}this.uniform=p,this.numPlanes=0,this.numIntersection=0,this.init=function(_,M,E){const A=0!==_.length||M||0!==i||s;return s=M,t=v(_,E,0),i=_.length,A},this.beginShadows=function(){a=!0,v(null)},this.endShadows=function(){a=!1,m()},this.setState=function(_,M,E){const A=_.clippingPlanes,T=_.clipIntersection,I=_.clipShadows,k=l.get(_);if(!s||null===A||0===A.length||a&&!I)a?v(null):m();else{const B=a?0:i,j=4*B;let z=k.clippingState||null;p.value=z,z=v(A,M,j,E);for(let te=0;te!==j;++te)z[te]=t[te];k.clippingState=z,this.numIntersection=T?this.numPlanes:0,this.numPlanes+=B}}}function sw(l){let e=new WeakMap;function t(u,h){return 303===h?u.mapping=301:304===h&&(u.mapping=302),u}function s(u){const h=u.target;h.removeEventListener("dispose",s);const p=e.get(h);void 0!==p&&(e.delete(h),p.dispose())}return{get:function i(u){if(u&&u.isTexture&&!1===u.isRenderTargetTexture){const h=u.mapping;if(303===h||304===h){if(e.has(u))return t(e.get(u).texture,u.mapping);{const p=u.image;if(p&&p.height>0){const m=new em(p.height/2);return m.fromEquirectangularTexture(l,u),e.set(u,m),u.addEventListener("dispose",s),t(m.texture,u.mapping)}return null}}}return u},dispose:function a(){e=new WeakMap}}}Is.physical={uniforms:Ki([Is.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new St(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new qt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new St},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new qt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new qt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Fn.meshphysical_vert,fragmentShader:Fn.meshphysical_frag};class $d extends bl{constructor(e=-1,t=1,i=1,s=-1,a=.1,u=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=a,this.far=u,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,a,u){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=a,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let a=i-e,u=i+e,h=s+t,p=s-t;if(null!==this.view&&this.view.enabled){const m=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=m*this.view.offsetX,u=a+m*this.view.width,h-=v*this.view.offsetY,p=h-v*this.view.height}this.projectionMatrix.makeOrthographic(a,u,h,p,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const p0=[.125,.215,.35,.446,.526,.582],jd=new $d,m0=new qt;let Rs=null;const Xo=(1+Math.sqrt(5))/2,Cc=1/Xo,g0=[new ue(1,1,1),new ue(-1,1,1),new ue(1,1,-1),new ue(-1,1,-1),new ue(0,Xo,Cc),new ue(0,Xo,-Cc),new ue(Cc,0,Xo),new ue(-Cc,0,Xo),new ue(Xo,Cc,0),new ue(-Xo,Cc,0)];class ow{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){Rs=this._renderer.getRenderTarget(),this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,i,s,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=_0(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Yd(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Rs),e.scissorTest=!1,qd(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),Rs=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:ri,minFilter:ri,generateMipmaps:!1,type:sc,format:os,encoding:hl,depthBuffer:!1},s=v0(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=v0(e,t,i);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function y0(l){const e=[],t=[],i=[];let s=l;const a=l-4+1+p0.length;for(let u=0;u<a;u++){const h=Math.pow(2,s);t.push(h);let p=1/h;u>l-4?p=p0[u-l+4-1]:0===u&&(p=0),i.push(p);const m=1/(h-2),v=-m,_=1+m,M=[v,v,_,v,_,_,v,v,_,_,v,_],E=6,A=6,T=3,I=2,k=1,B=new Float32Array(T*A*E),j=new Float32Array(I*A*E),z=new Float32Array(k*A*E);for(let ae=0;ae<E;ae++){const Me=ae%3*2/3-1,G=ae>2?0:-1;B.set([Me,G,0,Me+2/3,G,0,Me+2/3,G+1,0,Me,G,0,Me+2/3,G+1,0,Me,G+1,0],T*A*ae),j.set(M,I*A*ae),z.set([ae,ae,ae,ae,ae,ae],k*A*ae)}const te=new Nn;te.setAttribute("position",new Ji(B,T)),te.setAttribute("uv",new Ji(j,I)),te.setAttribute("faceIndex",new Ji(z,k)),e.push(te),s>4&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(a)),this._blurMaterial=function aw(l,e,t){const i=new Float32Array(20),s=new ue(0,1,0);return new So({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${l}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(a,e,t)}return s}_compileMaterial(e){const t=new Dr(this._lodPlanes[0],e);this._renderer.compile(t,jd)}_sceneToCubeUV(e,t,i,s){const h=new yr(90,1,t,i),p=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],v=this._renderer,_=v.autoClear,M=v.toneMapping;v.getClearColor(m0),v.toneMapping=0,v.autoClear=!1;const E=new gr({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),A=new Dr(new Mo,E);let T=!1;const I=e.background;I?I.isColor&&(E.color.copy(I),e.background=null,T=!0):(E.color.copy(m0),T=!0);for(let k=0;k<6;k++){const B=k%3;0===B?(h.up.set(0,p[k],0),h.lookAt(m[k],0,0)):1===B?(h.up.set(0,0,p[k]),h.lookAt(0,m[k],0)):(h.up.set(0,p[k],0),h.lookAt(0,0,m[k]));const j=this._cubeSize;qd(s,B*j,k>2?j:0,j,j),v.setRenderTarget(s),T&&v.render(A,h),v.render(e,h)}A.geometry.dispose(),A.material.dispose(),v.toneMapping=M,v.autoClear=_,e.background=I}_textureToCubeUV(e,t){const i=this._renderer,s=301===e.mapping||302===e.mapping;s?(null===this._cubemapMaterial&&(this._cubemapMaterial=_0()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Yd());const a=s?this._cubemapMaterial:this._equirectMaterial,u=new Dr(this._lodPlanes[0],a);a.uniforms.envMap.value=e;const p=this._cubeSize;qd(t,0,0,3*p,2*p),i.setRenderTarget(t),i.render(u,jd)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]);this._blur(e,s-1,s,a,g0[(s-1)%g0.length])}t.autoClear=i}_blur(e,t,i,s,a){const u=this._pingPongRenderTarget;this._halfBlur(e,u,t,i,s,"latitudinal",a),this._halfBlur(u,e,i,i,s,"longitudinal",a)}_halfBlur(e,t,i,s,a,u,h){const p=this._renderer,m=this._blurMaterial;"latitudinal"!==u&&"longitudinal"!==u&&console.error("blur direction must be either latitudinal or longitudinal!");const _=new Dr(this._lodPlanes[s],m),M=m.uniforms,E=this._sizeLods[i]-1,A=isFinite(a)?Math.PI/(2*E):2*Math.PI/39,T=a/A,I=isFinite(a)?1+Math.floor(3*T):20;I>20&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${I} samples when the maximum is set to 20`);const k=[];let B=0;for(let Me=0;Me<20;++Me){const G=Me/T,ye=Math.exp(-G*G/2);k.push(ye),0===Me?B+=ye:Me<I&&(B+=2*ye)}for(let Me=0;Me<k.length;Me++)k[Me]=k[Me]/B;M.envMap.value=e.texture,M.samples.value=I,M.weights.value=k,M.latitudinal.value="latitudinal"===u,h&&(M.poleAxis.value=h);const{_lodMax:j}=this;M.dTheta.value=A,M.mipInt.value=j-i;const z=this._sizeLods[s];qd(t,3*z*(s>j-4?s-j+4:0),4*(this._cubeSize-z),3*z,2*z),p.setRenderTarget(t),p.render(_,jd)}}function v0(l,e,t){const i=new Ys(l,e,t);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function qd(l,e,t,i,s){l.viewport.set(e,t,i,s),l.scissor.set(e,t,i,s)}function Yd(){return new So({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function _0(){return new So({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Kd(l){let e=new WeakMap,t=null;function a(h){const p=h.target;p.removeEventListener("dispose",a);const m=e.get(p);void 0!==m&&(e.delete(p),m.dispose())}return{get:function i(h){if(h&&h.isTexture){const p=h.mapping,m=303===p||304===p,v=301===p||302===p;if(m||v){if(h.isRenderTargetTexture&&!0===h.needsPMREMUpdate){h.needsPMREMUpdate=!1;let _=e.get(h);return null===t&&(t=new ow(l)),_=m?t.fromEquirectangular(h,_):t.fromCubemap(h,_),e.set(h,_),_.texture}if(e.has(h))return e.get(h).texture;{const _=h.image;if(m&&_&&_.height>0||v&&_&&function s(h){let p=0;for(let v=0;v<6;v++)void 0!==h[v]&&p++;return 6===p}(_)){null===t&&(t=new ow(l));const M=m?t.fromEquirectangular(h):t.fromCubemap(h);return e.set(h,M),h.addEventListener("dispose",a),M.texture}return null}}}return h},dispose:function u(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function _m(l){const e={};function t(i){if(void 0!==e[i])return e[i];let s;switch(i){case"WEBGL_depth_texture":s=l.getExtension("WEBGL_depth_texture")||l.getExtension("MOZ_WEBGL_depth_texture")||l.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=l.getExtension("WEBGL_compressed_texture_s3tc")||l.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=l.getExtension("WEBGL_compressed_texture_pvrtc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=l.getExtension(i)}return e[i]=s,s}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const s=t(i);return null===s&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function lw(l,e,t,i){const s={},a=new WeakMap;function u(_){const M=_.target;null!==M.index&&e.remove(M.index);for(const A in M.attributes)e.remove(M.attributes[A]);M.removeEventListener("dispose",u),delete s[M.id];const E=a.get(M);E&&(e.remove(E),a.delete(M)),i.releaseStatesOfGeometry(M),!0===M.isInstancedBufferGeometry&&delete M._maxInstanceCount,t.memory.geometries--}function m(_){const M=[],E=_.index,A=_.attributes.position;let T=0;if(null!==E){const B=E.array;T=E.version;for(let j=0,z=B.length;j<z;j+=3){const te=B[j+0],ae=B[j+1],Me=B[j+2];M.push(te,ae,ae,Me,Me,te)}}else{T=A.version;for(let j=0,z=A.array.length/3-1;j<z;j+=3){const te=j+0,ae=j+1,Me=j+2;M.push(te,ae,ae,Me,Me,te)}}const I=new(Hu(M)?Pd:qp)(M,1);I.version=T;const k=a.get(_);k&&e.remove(k),a.set(_,I)}return{get:function h(_,M){return!0===s[M.id]||(M.addEventListener("dispose",u),s[M.id]=!0,t.memory.geometries++),M},update:function p(_){const M=_.attributes;for(const A in M)e.update(M[A],34962);const E=_.morphAttributes;for(const A in E){const T=E[A];for(let I=0,k=T.length;I<k;I++)e.update(T[I],34962)}},getWireframeAttribute:function v(_){const M=a.get(_);if(M){const E=_.index;null!==E&&M.version<E.version&&m(_)}else m(_);return a.get(_)}}}function x0(l,e,t,i){const s=i.isWebGL2;let a,h,p;this.setMode=function u(M){a=M},this.setIndex=function m(M){h=M.type,p=M.bytesPerElement},this.render=function v(M,E){l.drawElements(a,E,h,M*p),t.update(E,a,1)},this.renderInstances=function _(M,E,A){if(0===A)return;let T,I;if(s)T=l,I="drawElementsInstanced";else if(T=e.get("ANGLE_instanced_arrays"),I="drawElementsInstancedANGLE",null===T)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");T[I](a,E,h,M*p,A),t.update(E,a,A)}}function xm(l){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function s(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(a,u,h){switch(t.calls++,u){case 4:t.triangles+=h*(a/3);break;case 1:t.lines+=h*(a/2);break;case 3:t.lines+=h*(a-1);break;case 2:t.lines+=h*a;break;case 0:t.points+=h*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",u)}}}}function w0(l,e){return l[0]-e[0]}function vS(l,e){return Math.abs(e[1])-Math.abs(l[1])}function b0(l,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Uint8Array?t=255:i instanceof Uint16Array?t=65535:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),l.divideScalar(t)}function wm(l,e,t){const i={},s=new Float32Array(8),a=new WeakMap,u=new Jn,h=[];for(let m=0;m<8;m++)h[m]=[m,0];return{update:function p(m,v,_,M){const E=m.morphTargetInfluences;if(!0===e.isWebGL2){const A=v.morphAttributes.position||v.morphAttributes.normal||v.morphAttributes.color,T=void 0!==A?A.length:0;let I=a.get(v);if(void 0===I||I.count!==T){let lt=function(){Tt.dispose(),a.delete(v),v.removeEventListener("dispose",lt)};void 0!==I&&I.texture.dispose();const j=void 0!==v.morphAttributes.position,z=void 0!==v.morphAttributes.normal,te=void 0!==v.morphAttributes.color,ae=v.morphAttributes.position||[],Me=v.morphAttributes.normal||[],G=v.morphAttributes.color||[];let ye=0;!0===j&&(ye=1),!0===z&&(ye=2),!0===te&&(ye=3);let Ce=v.attributes.position.count*ye,Re=1;Ce>e.maxTextureSize&&(Re=Math.ceil(Ce/e.maxTextureSize),Ce=e.maxTextureSize);const vt=new Float32Array(Ce*Re*4*T),Tt=new Ap(vt,Ce,Re,T);Tt.type=zo,Tt.needsUpdate=!0;const Le=4*ye;for(let Te=0;Te<T;Te++){const Be=ae[Te],Ve=Me[Te],Ie=G[Te],Ye=Ce*Re*4*Te;for(let Dt=0;Dt<Be.count;Dt++){const mt=Dt*Le;!0===j&&(u.fromBufferAttribute(Be,Dt),!0===Be.normalized&&b0(u,Be),vt[Ye+mt+0]=u.x,vt[Ye+mt+1]=u.y,vt[Ye+mt+2]=u.z,vt[Ye+mt+3]=0),!0===z&&(u.fromBufferAttribute(Ve,Dt),!0===Ve.normalized&&b0(u,Ve),vt[Ye+mt+4]=u.x,vt[Ye+mt+5]=u.y,vt[Ye+mt+6]=u.z,vt[Ye+mt+7]=0),!0===te&&(u.fromBufferAttribute(Ie,Dt),!0===Ie.normalized&&b0(u,Ie),vt[Ye+mt+8]=u.x,vt[Ye+mt+9]=u.y,vt[Ye+mt+10]=u.z,vt[Ye+mt+11]=4===Ie.itemSize?u.w:1)}}I={count:T,texture:Tt,size:new St(Ce,Re)},a.set(v,I),v.addEventListener("dispose",lt)}let k=0;for(let j=0;j<E.length;j++)k+=E[j];const B=v.morphTargetsRelative?1:1-k;M.getUniforms().setValue(l,"morphTargetBaseInfluence",B),M.getUniforms().setValue(l,"morphTargetInfluences",E),M.getUniforms().setValue(l,"morphTargetsTexture",I.texture,t),M.getUniforms().setValue(l,"morphTargetsTextureSize",I.size)}else{const A=void 0===E?0:E.length;let T=i[v.id];if(void 0===T||T.length!==A){T=[];for(let z=0;z<A;z++)T[z]=[z,0];i[v.id]=T}for(let z=0;z<A;z++){const te=T[z];te[0]=z,te[1]=E[z]}T.sort(vS);for(let z=0;z<8;z++)z<A&&T[z][1]?(h[z][0]=T[z][0],h[z][1]=T[z][1]):(h[z][0]=Number.MAX_SAFE_INTEGER,h[z][1]=0);h.sort(w0);const I=v.morphAttributes.position,k=v.morphAttributes.normal;let B=0;for(let z=0;z<8;z++){const te=h[z],ae=te[0],Me=te[1];ae!==Number.MAX_SAFE_INTEGER&&Me?(I&&v.getAttribute("morphTarget"+z)!==I[ae]&&v.setAttribute("morphTarget"+z,I[ae]),k&&v.getAttribute("morphNormal"+z)!==k[ae]&&v.setAttribute("morphNormal"+z,k[ae]),s[z]=Me,B+=Me):(I&&!0===v.hasAttribute("morphTarget"+z)&&v.deleteAttribute("morphTarget"+z),k&&!0===v.hasAttribute("morphNormal"+z)&&v.deleteAttribute("morphNormal"+z),s[z]=0)}const j=v.morphTargetsRelative?1:1-B;M.getUniforms().setValue(l,"morphTargetBaseInfluence",j),M.getUniforms().setValue(l,"morphTargetInfluences",s)}}}}function _S(l,e,t,i){let s=new WeakMap;function h(p){const m=p.target;m.removeEventListener("dispose",h),t.remove(m.instanceMatrix),null!==m.instanceColor&&t.remove(m.instanceColor)}return{update:function a(p){const m=i.render.frame,_=e.get(p,p.geometry);return s.get(_)!==m&&(e.update(_),s.set(_,m)),p.isInstancedMesh&&(!1===p.hasEventListener("dispose",h)&&p.addEventListener("dispose",h),t.update(p.instanceMatrix,34962),null!==p.instanceColor&&t.update(p.instanceColor,34962)),_},dispose:function u(){s=new WeakMap}}}const M0=new gl,bm=new Ap,Mm=new dc,Sm=new nh,Em=[],Xd=[],Eo=new Float32Array(16),sh=new Float32Array(9),oh=new Float32Array(4);function Do(l,e,t){const i=l[0];if(i<=0||i>0)return l;const s=e*t;let a=Em[s];if(void 0===a&&(a=new Float32Array(s),Em[s]=a),0!==e){i.toArray(a,0);for(let u=1,h=0;u!==e;++u)h+=t,l[u].toArray(a,h)}return a}function Cr(l,e){if(l.length!==e.length)return!1;for(let t=0,i=l.length;t<i;t++)if(l[t]!==e[t])return!1;return!0}function ar(l,e){for(let t=0,i=e.length;t<i;t++)l[t]=e[t]}function ah(l,e){let t=Xd[e];void 0===t&&(t=new Int32Array(e),Xd[e]=t);for(let i=0;i!==e;++i)t[i]=l.allocateTextureUnit();return t}function cw(l,e){const t=this.cache;t[0]!==e&&(l.uniform1f(this.addr,e),t[0]=e)}function uw(l,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(l.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Cr(t,e))return;l.uniform2fv(this.addr,e),ar(t,e)}}function lh(l,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(l.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(l.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Cr(t,e))return;l.uniform3fv(this.addr,e),ar(t,e)}}function hw(l,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(l.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Cr(t,e))return;l.uniform4fv(this.addr,e),ar(t,e)}}function xS(l,e){const t=this.cache,i=e.elements;if(void 0===i){if(Cr(t,e))return;l.uniformMatrix2fv(this.addr,!1,e),ar(t,e)}else{if(Cr(t,i))return;oh.set(i),l.uniformMatrix2fv(this.addr,!1,oh),ar(t,i)}}function dw(l,e){const t=this.cache,i=e.elements;if(void 0===i){if(Cr(t,e))return;l.uniformMatrix3fv(this.addr,!1,e),ar(t,e)}else{if(Cr(t,i))return;sh.set(i),l.uniformMatrix3fv(this.addr,!1,sh),ar(t,i)}}function wS(l,e){const t=this.cache,i=e.elements;if(void 0===i){if(Cr(t,e))return;l.uniformMatrix4fv(this.addr,!1,e),ar(t,e)}else{if(Cr(t,i))return;Eo.set(i),l.uniformMatrix4fv(this.addr,!1,Eo),ar(t,i)}}function fw(l,e){const t=this.cache;t[0]!==e&&(l.uniform1i(this.addr,e),t[0]=e)}function pw(l,e){const t=this.cache;Cr(t,e)||(l.uniform2iv(this.addr,e),ar(t,e))}function mw(l,e){const t=this.cache;Cr(t,e)||(l.uniform3iv(this.addr,e),ar(t,e))}function gw(l,e){const t=this.cache;Cr(t,e)||(l.uniform4iv(this.addr,e),ar(t,e))}function bS(l,e){const t=this.cache;t[0]!==e&&(l.uniform1ui(this.addr,e),t[0]=e)}function S0(l,e){const t=this.cache;Cr(t,e)||(l.uniform2uiv(this.addr,e),ar(t,e))}function E0(l,e){const t=this.cache;Cr(t,e)||(l.uniform3uiv(this.addr,e),ar(t,e))}function yw(l,e){const t=this.cache;Cr(t,e)||(l.uniform4uiv(this.addr,e),ar(t,e))}function Dm(l,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(l.uniform1i(this.addr,s),i[0]=s),t.setTexture2D(e||M0,s)}function vw(l,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(l.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||Mm,s)}function _w(l,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(l.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||Sm,s)}function xw(l,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(l.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||bm,s)}function bw(l,e){l.uniform1fv(this.addr,e)}function Mw(l,e){const t=Do(e,this.size,2);l.uniform2fv(this.addr,t)}function Zd(l,e){const t=Do(e,this.size,3);l.uniform3fv(this.addr,t)}function Tl(l,e){const t=Do(e,this.size,4);l.uniform4fv(this.addr,t)}function MS(l,e){const t=Do(e,this.size,4);l.uniformMatrix2fv(this.addr,!1,t)}function ch(l,e){const t=Do(e,this.size,9);l.uniformMatrix3fv(this.addr,!1,t)}function Sw(l,e){const t=Do(e,this.size,16);l.uniformMatrix4fv(this.addr,!1,t)}function Ew(l,e){l.uniform1iv(this.addr,e)}function Cm(l,e){l.uniform2iv(this.addr,e)}function Dw(l,e){l.uniform3iv(this.addr,e)}function Co(l,e){l.uniform4iv(this.addr,e)}function uh(l,e){l.uniform1uiv(this.addr,e)}function vr(l,e){l.uniform2uiv(this.addr,e)}function Al(l,e){l.uniform3uiv(this.addr,e)}function Jd(l,e){l.uniform4uiv(this.addr,e)}function Ps(l,e,t){const i=e.length,s=ah(t,i);l.uniform1iv(this.addr,s);for(let a=0;a!==i;++a)t.setTexture2D(e[a]||M0,s[a])}function Tm(l,e,t){const i=e.length,s=ah(t,i);l.uniform1iv(this.addr,s);for(let a=0;a!==i;++a)t.setTexture3D(e[a]||Mm,s[a])}function Tc(l,e,t){const i=e.length,s=ah(t,i);l.uniform1iv(this.addr,s);for(let a=0;a!==i;++a)t.setTextureCube(e[a]||Sm,s[a])}function Ac(l,e,t){const i=e.length,s=ah(t,i);l.uniform1iv(this.addr,s);for(let a=0;a!==i;++a)t.setTexture2DArray(e[a]||bm,s[a])}class Rc{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function ww(l){switch(l){case 5126:return cw;case 35664:return uw;case 35665:return lh;case 35666:return hw;case 35674:return xS;case 35675:return dw;case 35676:return wS;case 5124:case 35670:return fw;case 35667:case 35671:return pw;case 35668:case 35672:return mw;case 35669:case 35673:return gw;case 5125:return bS;case 36294:return S0;case 36295:return E0;case 36296:return yw;case 35678:case 36198:case 36298:case 36306:case 35682:return Dm;case 35679:case 36299:case 36307:return vw;case 35680:case 36300:case 36308:case 36293:return _w;case 36289:case 36303:case 36311:case 36292:return xw}}(t.type)}}class Pc{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function Ic(l){switch(l){case 5126:return bw;case 35664:return Mw;case 35665:return Zd;case 35666:return Tl;case 35674:return MS;case 35675:return ch;case 35676:return Sw;case 5124:case 35670:return Ew;case 35667:case 35671:return Cm;case 35668:case 35672:return Dw;case 35669:case 35673:return Co;case 5125:return uh;case 36294:return vr;case 36295:return Al;case 36296:return Jd;case 35678:case 36198:case 36298:case 36306:case 35682:return Ps;case 35679:case 36299:case 36307:return Tm;case 35680:case 36300:case 36308:case 36293:return Tc;case 36289:case 36303:case 36311:case 36292:return Ac}}(t.type)}}class Lc{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let a=0,u=s.length;a!==u;++a){const h=s[a];h.setValue(e,t[h.id],i)}}}const Ra=/(\w+)(\])?(\[|\.)?/g;function Il(l,e){l.seq.push(e),l.map[e.id]=e}function Nc(l,e,t){const i=l.name,s=i.length;for(Ra.lastIndex=0;;){const a=Ra.exec(i),u=Ra.lastIndex;let h=a[1];const m=a[3];if("]"===a[2]&&(h|=0),void 0===m||"["===m&&u+2===s){Il(t,void 0===m?new Rc(h,l,e):new Pc(h,l,e));break}{let _=t.map[h];void 0===_&&(_=new Lc(h),Il(t,_)),t=_}}}class hh{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let s=0;s<i;++s){const a=e.getActiveUniform(t,s);Nc(a,e.getUniformLocation(t,a.name),this)}}setValue(e,t,i,s){const a=this.map[t];void 0!==a&&a.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];void 0!==s&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let a=0,u=t.length;a!==u;++a){const h=t[a],p=i[h.id];!1!==p.needsUpdate&&h.setValue(e,p.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,a=e.length;s!==a;++s){const u=e[s];u.id in t&&i.push(u)}return i}}function Am(l,e,t){const i=l.createShader(e);return l.shaderSource(i,t),l.compileShader(i),i}let D0=0;function Im(l,e,t){const i=l.getShaderParameter(e,35713),s=l.getShaderInfoLog(e).trim();if(i&&""===s)return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const u=parseInt(a[1]);return t.toUpperCase()+"\n\n"+s+"\n\n"+function C0(l,e){const t=l.split("\n"),i=[],s=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let u=s;u<a;u++){const h=u+1;i.push(`${h===e?">":" "} ${h}: ${t[u]}`)}return i.join("\n")}(l.getShaderSource(e),u)}return s}function A0(l,e){const t=function T0(l){switch(l){case hl:return["Linear","( value )"];case Li:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",l),["Linear","( value )"]}}(e);return"vec4 "+l+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function I0(l,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+l+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function dh(l){return""!==l}function Rm(l,e){return l.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function P0(l,e){return l.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Aw=/^[ \t]*#include +<([\w\d./]+)>/gm;function fh(l){return l.replace(Aw,Pm)}function Pm(l,e){const t=Fn[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return fh(t)}const Iw=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Qd=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ph(l){return l.replace(Qd,L0).replace(Iw,Lm)}function Lm(l,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),L0(0,e,t,i)}function L0(l,e,t,i){let s="";for(let a=parseInt(e);a<parseInt(t);a++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return s}function mh(l){let e="precision "+l.precision+" float;\nprecision "+l.precision+" int;";return"highp"===l.precision?e+="\n#define HIGH_PRECISION":"mediump"===l.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===l.precision&&(e+="\n#define LOW_PRECISION"),e}function F0(l,e,t,i){const s=l.getContext(),a=t.defines;let u=t.vertexShader,h=t.fragmentShader;const p=function ef(l){let e="SHADOWMAP_TYPE_BASIC";return 1===l.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===l.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===l.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),m=function Nm(l){let e="ENVMAP_TYPE_CUBE";if(l.envMap)switch(l.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),v=function N0(l){let e="ENVMAP_MODE_REFLECTION";return l.envMap&&302===l.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),_=function Om(l){let e="ENVMAP_BLENDING_NONE";if(l.envMap)switch(l.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),M=function O0(l){const e=l.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),E=t.isWebGL2?"":function R0(l){return[l.extensionDerivatives||l.envMapCubeUVHeight||l.bumpMap||l.tangentSpaceNormalMap||l.clearcoatNormalMap||l.flatShading||"physical"===l.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(l.extensionFragDepth||l.logarithmicDepthBuffer)&&l.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",l.extensionDrawBuffers&&l.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(l.extensionShaderTextureLOD||l.envMap||l.transmission)&&l.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(dh).join("\n")}(t),A=function Cw(l){const e=[];for(const t in l){const i=l[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(a),T=s.createProgram();let I,k,B=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(I=[A].filter(dh).join("\n"),I.length>0&&(I+="\n"),k=[E,A].filter(dh).join("\n"),k.length>0&&(k+="\n")):(I=[mh(t),"#define SHADER_NAME "+t.shaderName,A,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+v:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+p:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(dh).join("\n"),k=[E,mh(t),"#define SHADER_NAME "+t.shaderName,A,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.envMap?"#define "+v:"",t.envMap?"#define "+_:"",M?"#define CUBEUV_TEXEL_WIDTH "+M.texelWidth:"",M?"#define CUBEUV_TEXEL_HEIGHT "+M.texelHeight:"",M?"#define CUBEUV_MAX_MIP "+M.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+p:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Fn.tonemapping_pars_fragment:"",0!==t.toneMapping?I0("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Fn.encodings_pars_fragment,A0("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(dh).join("\n")),u=fh(u),u=Rm(u,t),u=P0(u,t),h=fh(h),h=Rm(h,t),h=P0(h,t),u=ph(u),h=ph(h),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(B="#version 300 es\n",I=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+I,k=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+k);const z=B+k+h,te=Am(s,35633,B+I+u),ae=Am(s,35632,z);if(s.attachShader(T,te),s.attachShader(T,ae),void 0!==t.index0AttributeName?s.bindAttribLocation(T,0,t.index0AttributeName):!0===t.morphTargets&&s.bindAttribLocation(T,0,"position"),s.linkProgram(T),l.debug.checkShaderErrors){const ye=s.getProgramInfoLog(T).trim(),Ce=s.getShaderInfoLog(te).trim(),Re=s.getShaderInfoLog(ae).trim();let vt=!0,Tt=!0;if(!1===s.getProgramParameter(T,35714)){vt=!1;const Le=Im(s,te,"vertex"),lt=Im(s,ae,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(T,35715)+"\n\nProgram Info Log: "+ye+"\n"+Le+"\n"+lt)}else""!==ye?console.warn("THREE.WebGLProgram: Program Info Log:",ye):(""===Ce||""===Re)&&(Tt=!1);Tt&&(this.diagnostics={runnable:vt,programLog:ye,vertexShader:{log:Ce,prefix:I},fragmentShader:{log:Re,prefix:k}})}let Me,G;return s.deleteShader(te),s.deleteShader(ae),this.getUniforms=function(){return void 0===Me&&(Me=new hh(s,T)),Me},this.getAttributes=function(){return void 0===G&&(G=function Tw(l,e){const t={},i=l.getProgramParameter(e,35721);for(let s=0;s<i;s++){const a=l.getActiveAttrib(e,s),u=a.name;let h=1;35674===a.type&&(h=2),35675===a.type&&(h=3),35676===a.type&&(h=4),t[u]={type:a.type,location:l.getAttribLocation(e,u),locationSize:h}}return t}(s,T)),G},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(T),this.program=void 0},this.name=t.shaderName,this.id=D0++,this.cacheKey=e,this.usedTimes=1,this.program=T,this.vertexShader=te,this.fragmentShader=ae,this}let Fm=0;class k0{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,s=this._getShaderStage(e.vertexShader),a=this._getShaderStage(i),u=this._getShaderCacheForMaterial(e);return!1===u.has(s)&&(u.add(s),s.usedTimes++),!1===u.has(a)&&(u.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const i=new Rw(e);t.set(e,i)}return t.get(e)}}class Rw{constructor(e){this.id=Fm++,this.code=e,this.usedTimes=0}}function B0(l,e,t,i,s,a,u){const h=new or,p=new k0,m=[],v=s.isWebGL2,_=s.logarithmicDepthBuffer,M=s.vertexTextures;let E=s.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function T(G,ye,Ce,Re,vt){const Tt=Re.fog,Le=vt.geometry,Te=(G.isMeshStandardMaterial?t:e).get(G.envMap||(G.isMeshStandardMaterial?Re.environment:null)),Be=Te&&306===Te.mapping?Te.image.height:null,Ve=A[G.type];null!==G.precision&&(E=s.getMaxPrecision(G.precision),E!==G.precision&&console.warn("THREE.WebGLProgram.getParameters:",G.precision,"not supported, using",E,"instead."));const Ie=Le.morphAttributes.position||Le.morphAttributes.normal||Le.morphAttributes.color,Ye=void 0!==Ie?Ie.length:0;let mt,Pt,Ot,fn,Dt=0;if(void 0!==Le.morphAttributes.position&&(Dt=1),void 0!==Le.morphAttributes.normal&&(Dt=2),void 0!==Le.morphAttributes.color&&(Dt=3),Ve){const An=Is[Ve];mt=An.vertexShader,Pt=An.fragmentShader}else mt=G.vertexShader,Pt=G.fragmentShader,p.update(G),Ot=p.getVertexShaderID(G),fn=p.getFragmentShaderID(G);const ht=l.getRenderTarget(),en=G.clearcoat>0,Jt=G.iridescence>0;return{isWebGL2:v,shaderID:Ve,shaderName:G.type,vertexShader:mt,fragmentShader:Pt,defines:G.defines,customVertexShaderID:Ot,customFragmentShaderID:fn,isRawShaderMaterial:!0===G.isRawShaderMaterial,glslVersion:G.glslVersion,precision:E,instancing:!0===vt.isInstancedMesh,instancingColor:!0===vt.isInstancedMesh&&null!==vt.instanceColor,supportsVertexTextures:M,outputEncoding:null===ht?l.outputEncoding:!0===ht.isXRRenderTarget?ht.texture.encoding:hl,map:!!G.map,matcap:!!G.matcap,envMap:!!Te,envMapMode:Te&&Te.mapping,envMapCubeUVHeight:Be,lightMap:!!G.lightMap,aoMap:!!G.aoMap,emissiveMap:!!G.emissiveMap,bumpMap:!!G.bumpMap,normalMap:!!G.normalMap,objectSpaceNormalMap:1===G.normalMapType,tangentSpaceNormalMap:0===G.normalMapType,decodeVideoTexture:!!G.map&&!0===G.map.isVideoTexture&&G.map.encoding===Li,clearcoat:en,clearcoatMap:en&&!!G.clearcoatMap,clearcoatRoughnessMap:en&&!!G.clearcoatRoughnessMap,clearcoatNormalMap:en&&!!G.clearcoatNormalMap,iridescence:Jt,iridescenceMap:Jt&&!!G.iridescenceMap,iridescenceThicknessMap:Jt&&!!G.iridescenceThicknessMap,displacementMap:!!G.displacementMap,roughnessMap:!!G.roughnessMap,metalnessMap:!!G.metalnessMap,specularMap:!!G.specularMap,specularIntensityMap:!!G.specularIntensityMap,specularColorMap:!!G.specularColorMap,opaque:!1===G.transparent&&1===G.blending,alphaMap:!!G.alphaMap,alphaTest:G.alphaTest>0,gradientMap:!!G.gradientMap,sheen:G.sheen>0,sheenColorMap:!!G.sheenColorMap,sheenRoughnessMap:!!G.sheenRoughnessMap,transmission:G.transmission>0,transmissionMap:!!G.transmissionMap,thicknessMap:!!G.thicknessMap,combine:G.combine,vertexTangents:!!G.normalMap&&!!Le.attributes.tangent,vertexColors:G.vertexColors,vertexAlphas:!0===G.vertexColors&&!!Le.attributes.color&&4===Le.attributes.color.itemSize,vertexUvs:!!(G.map||G.bumpMap||G.normalMap||G.specularMap||G.alphaMap||G.emissiveMap||G.roughnessMap||G.metalnessMap||G.clearcoatMap||G.clearcoatRoughnessMap||G.clearcoatNormalMap||G.iridescenceMap||G.iridescenceThicknessMap||G.displacementMap||G.transmissionMap||G.thicknessMap||G.specularIntensityMap||G.specularColorMap||G.sheenColorMap||G.sheenRoughnessMap),uvsVertexOnly:!(G.map||G.bumpMap||G.normalMap||G.specularMap||G.alphaMap||G.emissiveMap||G.roughnessMap||G.metalnessMap||G.clearcoatNormalMap||G.iridescenceMap||G.iridescenceThicknessMap||G.transmission>0||G.transmissionMap||G.thicknessMap||G.specularIntensityMap||G.specularColorMap||G.sheen>0||G.sheenColorMap||G.sheenRoughnessMap||!G.displacementMap),fog:!!Tt,useFog:!0===G.fog,fogExp2:Tt&&Tt.isFogExp2,flatShading:!!G.flatShading,sizeAttenuation:G.sizeAttenuation,logarithmicDepthBuffer:_,skinning:!0===vt.isSkinnedMesh,morphTargets:void 0!==Le.morphAttributes.position,morphNormals:void 0!==Le.morphAttributes.normal,morphColors:void 0!==Le.morphAttributes.color,morphTargetsCount:Ye,morphTextureStride:Dt,numDirLights:ye.directional.length,numPointLights:ye.point.length,numSpotLights:ye.spot.length,numRectAreaLights:ye.rectArea.length,numHemiLights:ye.hemi.length,numDirLightShadows:ye.directionalShadowMap.length,numPointLightShadows:ye.pointShadowMap.length,numSpotLightShadows:ye.spotShadowMap.length,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:G.dithering,shadowMapEnabled:l.shadowMap.enabled&&Ce.length>0,shadowMapType:l.shadowMap.type,toneMapping:G.toneMapped?l.toneMapping:0,physicallyCorrectLights:l.physicallyCorrectLights,premultipliedAlpha:G.premultipliedAlpha,doubleSided:2===G.side,flipSided:1===G.side,useDepthPacking:!!G.depthPacking,depthPacking:G.depthPacking||0,index0AttributeName:G.index0AttributeName,extensionDerivatives:G.extensions&&G.extensions.derivatives,extensionFragDepth:G.extensions&&G.extensions.fragDepth,extensionDrawBuffers:G.extensions&&G.extensions.drawBuffers,extensionShaderTextureLOD:G.extensions&&G.extensions.shaderTextureLOD,rendererExtensionFragDepth:v||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:v||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:v||i.has("EXT_shader_texture_lod"),customProgramCacheKey:G.customProgramCacheKey()}},getProgramCacheKey:function I(G){const ye=[];if(G.shaderID?ye.push(G.shaderID):(ye.push(G.customVertexShaderID),ye.push(G.customFragmentShaderID)),void 0!==G.defines)for(const Ce in G.defines)ye.push(Ce),ye.push(G.defines[Ce]);return!1===G.isRawShaderMaterial&&(function k(G,ye){G.push(ye.precision),G.push(ye.outputEncoding),G.push(ye.envMapMode),G.push(ye.envMapCubeUVHeight),G.push(ye.combine),G.push(ye.vertexUvs),G.push(ye.fogExp2),G.push(ye.sizeAttenuation),G.push(ye.morphTargetsCount),G.push(ye.morphAttributeCount),G.push(ye.numDirLights),G.push(ye.numPointLights),G.push(ye.numSpotLights),G.push(ye.numHemiLights),G.push(ye.numRectAreaLights),G.push(ye.numDirLightShadows),G.push(ye.numPointLightShadows),G.push(ye.numSpotLightShadows),G.push(ye.shadowMapType),G.push(ye.toneMapping),G.push(ye.numClippingPlanes),G.push(ye.numClipIntersection),G.push(ye.depthPacking)}(ye,G),function B(G,ye){h.disableAll(),ye.isWebGL2&&h.enable(0),ye.supportsVertexTextures&&h.enable(1),ye.instancing&&h.enable(2),ye.instancingColor&&h.enable(3),ye.map&&h.enable(4),ye.matcap&&h.enable(5),ye.envMap&&h.enable(6),ye.lightMap&&h.enable(7),ye.aoMap&&h.enable(8),ye.emissiveMap&&h.enable(9),ye.bumpMap&&h.enable(10),ye.normalMap&&h.enable(11),ye.objectSpaceNormalMap&&h.enable(12),ye.tangentSpaceNormalMap&&h.enable(13),ye.clearcoat&&h.enable(14),ye.clearcoatMap&&h.enable(15),ye.clearcoatRoughnessMap&&h.enable(16),ye.clearcoatNormalMap&&h.enable(17),ye.iridescence&&h.enable(18),ye.iridescenceMap&&h.enable(19),ye.iridescenceThicknessMap&&h.enable(20),ye.displacementMap&&h.enable(21),ye.specularMap&&h.enable(22),ye.roughnessMap&&h.enable(23),ye.metalnessMap&&h.enable(24),ye.gradientMap&&h.enable(25),ye.alphaMap&&h.enable(26),ye.alphaTest&&h.enable(27),ye.vertexColors&&h.enable(28),ye.vertexAlphas&&h.enable(29),ye.vertexUvs&&h.enable(30),ye.vertexTangents&&h.enable(31),ye.uvsVertexOnly&&h.enable(32),ye.fog&&h.enable(33),G.push(h.mask),h.disableAll(),ye.useFog&&h.enable(0),ye.flatShading&&h.enable(1),ye.logarithmicDepthBuffer&&h.enable(2),ye.skinning&&h.enable(3),ye.morphTargets&&h.enable(4),ye.morphNormals&&h.enable(5),ye.morphColors&&h.enable(6),ye.premultipliedAlpha&&h.enable(7),ye.shadowMapEnabled&&h.enable(8),ye.physicallyCorrectLights&&h.enable(9),ye.doubleSided&&h.enable(10),ye.flipSided&&h.enable(11),ye.useDepthPacking&&h.enable(12),ye.dithering&&h.enable(13),ye.specularIntensityMap&&h.enable(14),ye.specularColorMap&&h.enable(15),ye.transmission&&h.enable(16),ye.transmissionMap&&h.enable(17),ye.thicknessMap&&h.enable(18),ye.sheen&&h.enable(19),ye.sheenColorMap&&h.enable(20),ye.sheenRoughnessMap&&h.enable(21),ye.decodeVideoTexture&&h.enable(22),ye.opaque&&h.enable(23),G.push(h.mask)}(ye,G),ye.push(l.outputEncoding)),ye.push(G.customProgramCacheKey),ye.join()},getUniforms:function j(G){const ye=A[G.type];let Ce;return Ce=ye?Ly.clone(Is[ye].uniforms):G.uniforms,Ce},acquireProgram:function z(G,ye){let Ce;for(let Re=0,vt=m.length;Re<vt;Re++){const Tt=m[Re];if(Tt.cacheKey===ye){Ce=Tt,++Ce.usedTimes;break}}return void 0===Ce&&(Ce=new F0(l,ye,G,a),m.push(Ce)),Ce},releaseProgram:function te(G){if(0==--G.usedTimes){const ye=m.indexOf(G);m[ye]=m[m.length-1],m.pop(),G.destroy()}},releaseShaderCache:function ae(G){p.remove(G)},programs:m,dispose:function Me(){p.dispose()}}}function U0(){let l=new WeakMap;return{get:function e(a){let u=l.get(a);return void 0===u&&(u={},l.set(a,u)),u},remove:function t(a){l.delete(a)},update:function i(a,u,h){l.get(a)[u]=h},dispose:function s(){l=new WeakMap}}}function V0(l,e){return l.groupOrder!==e.groupOrder?l.groupOrder-e.groupOrder:l.renderOrder!==e.renderOrder?l.renderOrder-e.renderOrder:l.material.id!==e.material.id?l.material.id-e.material.id:l.z!==e.z?l.z-e.z:l.id-e.id}function km(l,e){return l.groupOrder!==e.groupOrder?l.groupOrder-e.groupOrder:l.renderOrder!==e.renderOrder?l.renderOrder-e.renderOrder:l.z!==e.z?e.z-l.z:l.id-e.id}function z0(){const l=[];let e=0;const t=[],i=[],s=[];function u(_,M,E,A,T,I){let k=l[e];return void 0===k?(k={id:_.id,object:_,geometry:M,material:E,groupOrder:A,renderOrder:_.renderOrder,z:T,group:I},l[e]=k):(k.id=_.id,k.object=_,k.geometry=M,k.material=E,k.groupOrder=A,k.renderOrder=_.renderOrder,k.z=T,k.group=I),e++,k}return{opaque:t,transmissive:i,transparent:s,init:function a(){e=0,t.length=0,i.length=0,s.length=0},push:function h(_,M,E,A,T,I){const k=u(_,M,E,A,T,I);E.transmission>0?i.push(k):!0===E.transparent?s.push(k):t.push(k)},unshift:function p(_,M,E,A,T,I){const k=u(_,M,E,A,T,I);E.transmission>0?i.unshift(k):!0===E.transparent?s.unshift(k):t.unshift(k)},finish:function v(){for(let _=e,M=l.length;_<M;_++){const E=l[_];if(null===E.id)break;E.id=null,E.object=null,E.geometry=null,E.material=null,E.group=null}},sort:function m(_,M){t.length>1&&t.sort(_||V0),i.length>1&&i.sort(M||km),s.length>1&&s.sort(M||km)}}}function Pw(){let l=new WeakMap;return{get:function e(i,s){let a;return!1===l.has(i)?(a=new z0,l.set(i,[a])):s>=l.get(i).length?(a=new z0,l.get(i).push(a)):a=l.get(i)[s],a},dispose:function t(){l=new WeakMap}}}function Lw(){const l={};return{get:function(e){if(void 0!==l[e.id])return l[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ue,color:new qt};break;case"SpotLight":t={position:new ue,direction:new ue,color:new qt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ue,color:new qt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ue,skyColor:new qt,groundColor:new qt};break;case"RectAreaLight":t={color:new qt,position:new ue,halfWidth:new ue,halfHeight:new ue}}return l[e.id]=t,t}}}let Bm=0;function G0(l,e){return(e.castShadow?1:0)-(l.castShadow?1:0)}function W0(l,e){const t=new Lw,i=function H0(){const l={};return{get:function(e){if(void 0!==l[e.id])return l[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new St};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new St,shadowCameraNear:1,shadowCameraFar:1e3}}return l[e.id]=t,t}}}(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let v=0;v<9;v++)s.probe.push(new ue);const a=new ue,u=new Tn,h=new Tn;return{setup:function p(v,_){let M=0,E=0,A=0;for(let ye=0;ye<9;ye++)s.probe[ye].set(0,0,0);let T=0,I=0,k=0,B=0,j=0,z=0,te=0,ae=0;v.sort(G0);const Me=!0!==_?Math.PI:1;for(let ye=0,Ce=v.length;ye<Ce;ye++){const Re=v[ye],vt=Re.color,Tt=Re.intensity,Le=Re.distance,lt=Re.shadow&&Re.shadow.map?Re.shadow.map.texture:null;if(Re.isAmbientLight)M+=vt.r*Tt*Me,E+=vt.g*Tt*Me,A+=vt.b*Tt*Me;else if(Re.isLightProbe)for(let Te=0;Te<9;Te++)s.probe[Te].addScaledVector(Re.sh.coefficients[Te],Tt);else if(Re.isDirectionalLight){const Te=t.get(Re);if(Te.color.copy(Re.color).multiplyScalar(Re.intensity*Me),Re.castShadow){const Be=Re.shadow,Ve=i.get(Re);Ve.shadowBias=Be.bias,Ve.shadowNormalBias=Be.normalBias,Ve.shadowRadius=Be.radius,Ve.shadowMapSize=Be.mapSize,s.directionalShadow[T]=Ve,s.directionalShadowMap[T]=lt,s.directionalShadowMatrix[T]=Re.shadow.matrix,z++}s.directional[T]=Te,T++}else if(Re.isSpotLight){const Te=t.get(Re);if(Te.position.setFromMatrixPosition(Re.matrixWorld),Te.color.copy(vt).multiplyScalar(Tt*Me),Te.distance=Le,Te.coneCos=Math.cos(Re.angle),Te.penumbraCos=Math.cos(Re.angle*(1-Re.penumbra)),Te.decay=Re.decay,Re.castShadow){const Be=Re.shadow,Ve=i.get(Re);Ve.shadowBias=Be.bias,Ve.shadowNormalBias=Be.normalBias,Ve.shadowRadius=Be.radius,Ve.shadowMapSize=Be.mapSize,s.spotShadow[k]=Ve,s.spotShadowMap[k]=lt,s.spotShadowMatrix[k]=Re.shadow.matrix,ae++}s.spot[k]=Te,k++}else if(Re.isRectAreaLight){const Te=t.get(Re);Te.color.copy(vt).multiplyScalar(Tt),Te.halfWidth.set(.5*Re.width,0,0),Te.halfHeight.set(0,.5*Re.height,0),s.rectArea[B]=Te,B++}else if(Re.isPointLight){const Te=t.get(Re);if(Te.color.copy(Re.color).multiplyScalar(Re.intensity*Me),Te.distance=Re.distance,Te.decay=Re.decay,Re.castShadow){const Be=Re.shadow,Ve=i.get(Re);Ve.shadowBias=Be.bias,Ve.shadowNormalBias=Be.normalBias,Ve.shadowRadius=Be.radius,Ve.shadowMapSize=Be.mapSize,Ve.shadowCameraNear=Be.camera.near,Ve.shadowCameraFar=Be.camera.far,s.pointShadow[I]=Ve,s.pointShadowMap[I]=lt,s.pointShadowMatrix[I]=Re.shadow.matrix,te++}s.point[I]=Te,I++}else if(Re.isHemisphereLight){const Te=t.get(Re);Te.skyColor.copy(Re.color).multiplyScalar(Tt*Me),Te.groundColor.copy(Re.groundColor).multiplyScalar(Tt*Me),s.hemi[j]=Te,j++}}B>0&&(e.isWebGL2||!0===l.has("OES_texture_float_linear")?(s.rectAreaLTC1=Gt.LTC_FLOAT_1,s.rectAreaLTC2=Gt.LTC_FLOAT_2):!0===l.has("OES_texture_half_float_linear")?(s.rectAreaLTC1=Gt.LTC_HALF_1,s.rectAreaLTC2=Gt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=M,s.ambient[1]=E,s.ambient[2]=A;const G=s.hash;(G.directionalLength!==T||G.pointLength!==I||G.spotLength!==k||G.rectAreaLength!==B||G.hemiLength!==j||G.numDirectionalShadows!==z||G.numPointShadows!==te||G.numSpotShadows!==ae)&&(s.directional.length=T,s.spot.length=k,s.rectArea.length=B,s.point.length=I,s.hemi.length=j,s.directionalShadow.length=z,s.directionalShadowMap.length=z,s.pointShadow.length=te,s.pointShadowMap.length=te,s.spotShadow.length=ae,s.spotShadowMap.length=ae,s.directionalShadowMatrix.length=z,s.pointShadowMatrix.length=te,s.spotShadowMatrix.length=ae,G.directionalLength=T,G.pointLength=I,G.spotLength=k,G.rectAreaLength=B,G.hemiLength=j,G.numDirectionalShadows=z,G.numPointShadows=te,G.numSpotShadows=ae,s.version=Bm++)},setupView:function m(v,_){let M=0,E=0,A=0,T=0,I=0;const k=_.matrixWorldInverse;for(let B=0,j=v.length;B<j;B++){const z=v[B];if(z.isDirectionalLight){const te=s.directional[M];te.direction.setFromMatrixPosition(z.matrixWorld),a.setFromMatrixPosition(z.target.matrixWorld),te.direction.sub(a),te.direction.transformDirection(k),M++}else if(z.isSpotLight){const te=s.spot[A];te.position.setFromMatrixPosition(z.matrixWorld),te.position.applyMatrix4(k),te.direction.setFromMatrixPosition(z.matrixWorld),a.setFromMatrixPosition(z.target.matrixWorld),te.direction.sub(a),te.direction.transformDirection(k),A++}else if(z.isRectAreaLight){const te=s.rectArea[T];te.position.setFromMatrixPosition(z.matrixWorld),te.position.applyMatrix4(k),h.identity(),u.copy(z.matrixWorld),u.premultiply(k),h.extractRotation(u),te.halfWidth.set(.5*z.width,0,0),te.halfHeight.set(0,.5*z.height,0),te.halfWidth.applyMatrix4(h),te.halfHeight.applyMatrix4(h),T++}else if(z.isPointLight){const te=s.point[E];te.position.setFromMatrixPosition(z.matrixWorld),te.position.applyMatrix4(k),E++}else if(z.isHemisphereLight){const te=s.hemi[I];te.direction.setFromMatrixPosition(z.matrixWorld),te.direction.transformDirection(k),I++}}},state:s}}function Um(l,e){const t=new W0(l,e),i=[],s=[];return{init:function a(){i.length=0,s.length=0},state:{lightsArray:i,shadowsArray:s,lights:t},setupLights:function p(_){t.setup(i,_)},setupLightsView:function m(_){t.setupView(i,_)},pushLight:function u(_){i.push(_)},pushShadow:function h(_){s.push(_)}}}function $0(l,e){let t=new WeakMap;return{get:function i(a,u=0){let h;return!1===t.has(a)?(h=new Um(l,e),t.set(a,[h])):u>=t.get(a).length?(h=new Um(l,e),t.get(a).push(h)):h=t.get(a)[u],h},dispose:function s(){t=new WeakMap}}}class Vm extends Ku{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class zm extends Ku{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new ue,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function SS(l,e,t){let i=new tm;const s=new St,a=new St,u=new Jn,h=new Vm({depthPacking:3201}),p=new zm,m={},v=t.maxTextureSize,_={0:1,1:0,2:2},M=new So({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new St},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),E=M.clone();E.defines.HORIZONTAL_PASS=1;const A=new Nn;A.setAttribute("position",new Ji(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const T=new Dr(A,M),I=this;function k(z,te){const ae=e.update(T);M.defines.VSM_SAMPLES!==z.blurSamples&&(M.defines.VSM_SAMPLES=z.blurSamples,E.defines.VSM_SAMPLES=z.blurSamples,M.needsUpdate=!0,E.needsUpdate=!0),null===z.mapPass&&(z.mapPass=new Ys(s.x,s.y)),M.uniforms.shadow_pass.value=z.map.texture,M.uniforms.resolution.value=z.mapSize,M.uniforms.radius.value=z.radius,l.setRenderTarget(z.mapPass),l.clear(),l.renderBufferDirect(te,null,ae,M,T,null),E.uniforms.shadow_pass.value=z.mapPass.texture,E.uniforms.resolution.value=z.mapSize,E.uniforms.radius.value=z.radius,l.setRenderTarget(z.map),l.clear(),l.renderBufferDirect(te,null,ae,E,T,null)}function B(z,te,ae,Me,G,ye){let Ce=null;const Re=!0===ae.isPointLight?z.customDistanceMaterial:z.customDepthMaterial;if(Ce=void 0!==Re?Re:!0===ae.isPointLight?p:h,l.localClippingEnabled&&!0===te.clipShadows&&Array.isArray(te.clippingPlanes)&&0!==te.clippingPlanes.length||te.displacementMap&&0!==te.displacementScale||te.alphaMap&&te.alphaTest>0){const vt=Ce.uuid,Tt=te.uuid;let Le=m[vt];void 0===Le&&(Le={},m[vt]=Le);let lt=Le[Tt];void 0===lt&&(lt=Ce.clone(),Le[Tt]=lt),Ce=lt}return Ce.visible=te.visible,Ce.wireframe=te.wireframe,Ce.side=3===ye?null!==te.shadowSide?te.shadowSide:te.side:null!==te.shadowSide?te.shadowSide:_[te.side],Ce.alphaMap=te.alphaMap,Ce.alphaTest=te.alphaTest,Ce.clipShadows=te.clipShadows,Ce.clippingPlanes=te.clippingPlanes,Ce.clipIntersection=te.clipIntersection,Ce.displacementMap=te.displacementMap,Ce.displacementScale=te.displacementScale,Ce.displacementBias=te.displacementBias,Ce.wireframeLinewidth=te.wireframeLinewidth,Ce.linewidth=te.linewidth,!0===ae.isPointLight&&!0===Ce.isMeshDistanceMaterial&&(Ce.referencePosition.setFromMatrixPosition(ae.matrixWorld),Ce.nearDistance=Me,Ce.farDistance=G),Ce}function j(z,te,ae,Me,G){if(!1===z.visible)return;if(z.layers.test(te.layers)&&(z.isMesh||z.isLine||z.isPoints)&&(z.castShadow||z.receiveShadow&&3===G)&&(!z.frustumCulled||i.intersectsObject(z))){z.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,z.matrixWorld);const Re=e.update(z),vt=z.material;if(Array.isArray(vt)){const Tt=Re.groups;for(let Le=0,lt=Tt.length;Le<lt;Le++){const Te=Tt[Le],Be=vt[Te.materialIndex];if(Be&&Be.visible){const Ve=B(z,Be,Me,ae.near,ae.far,G);l.renderBufferDirect(ae,null,Re,Ve,z,Te)}}}else if(vt.visible){const Tt=B(z,vt,Me,ae.near,ae.far,G);l.renderBufferDirect(ae,null,Re,Tt,z,null)}}const Ce=z.children;for(let Re=0,vt=Ce.length;Re<vt;Re++)j(Ce[Re],te,ae,Me,G)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(z,te,ae){if(!1===I.enabled||!1===I.autoUpdate&&!1===I.needsUpdate||0===z.length)return;const Me=l.getRenderTarget(),G=l.getActiveCubeFace(),ye=l.getActiveMipmapLevel(),Ce=l.state;Ce.setBlending(0),Ce.buffers.color.setClear(1,1,1,1),Ce.buffers.depth.setTest(!0),Ce.setScissorTest(!1);for(let Re=0,vt=z.length;Re<vt;Re++){const Tt=z[Re],Le=Tt.shadow;if(void 0===Le){console.warn("THREE.WebGLShadowMap:",Tt,"has no shadow.");continue}if(!1===Le.autoUpdate&&!1===Le.needsUpdate)continue;s.copy(Le.mapSize);const lt=Le.getFrameExtents();s.multiply(lt),a.copy(Le.mapSize),(s.x>v||s.y>v)&&(s.x>v&&(a.x=Math.floor(v/lt.x),s.x=a.x*lt.x,Le.mapSize.x=a.x),s.y>v&&(a.y=Math.floor(v/lt.y),s.y=a.y*lt.y,Le.mapSize.y=a.y)),null===Le.map&&(Le.map=new Ys(s.x,s.y,3!==this.type?{minFilter:jn,magFilter:jn}:{}),Le.map.texture.name=Tt.name+".shadowMap",Le.camera.updateProjectionMatrix()),l.setRenderTarget(Le.map),l.clear();const Te=Le.getViewportCount();for(let Be=0;Be<Te;Be++){const Ve=Le.getViewport(Be);u.set(a.x*Ve.x,a.y*Ve.y,a.x*Ve.z,a.y*Ve.w),Ce.viewport(u),Le.updateMatrices(Tt,Be),i=Le.getFrustum(),j(te,ae,Le.camera,Tt,this.type)}!0!==Le.isPointLightShadow&&3===this.type&&k(Le,ae),Le.needsUpdate=!1}I.needsUpdate=!1,l.setRenderTarget(Me,G,ye)}}function Nw(l,e,t){const i=t.isWebGL2,h=new function s(){let x=!1;const P=new Jn;let F=null;const Y=new Jn(0,0,0,0);return{setMask:function(ce){F!==ce&&!x&&(l.colorMask(ce,ce,ce,ce),F=ce)},setLocked:function(ce){x=ce},setClear:function(ce,Ee,Xe,ct,Lt){!0===Lt&&(ce*=ct,Ee*=ct,Xe*=ct),P.set(ce,Ee,Xe,ct),!1===Y.equals(P)&&(l.clearColor(ce,Ee,Xe,ct),Y.copy(P))},reset:function(){x=!1,F=null,Y.set(-1,0,0,0)}}},p=new function a(){let x=!1,P=null,F=null,Y=null;return{setTest:function(ce){ce?cn(2929):en(2929)},setMask:function(ce){P!==ce&&!x&&(l.depthMask(ce),P=ce)},setFunc:function(ce){if(F!==ce){if(ce)switch(ce){case 0:l.depthFunc(512);break;case 1:l.depthFunc(519);break;case 2:l.depthFunc(513);break;case 3:default:l.depthFunc(515);break;case 4:l.depthFunc(514);break;case 5:l.depthFunc(518);break;case 6:l.depthFunc(516);break;case 7:l.depthFunc(517)}else l.depthFunc(515);F=ce}},setLocked:function(ce){x=ce},setClear:function(ce){Y!==ce&&(l.clearDepth(ce),Y=ce)},reset:function(){x=!1,P=null,F=null,Y=null}}},m=new function u(){let x=!1,P=null,F=null,Y=null,ce=null,Ee=null,Xe=null,ct=null,Lt=null;return{setTest:function(It){x||(It?cn(2960):en(2960))},setMask:function(It){P!==It&&!x&&(l.stencilMask(It),P=It)},setFunc:function(It,Qt,ut){(F!==It||Y!==Qt||ce!==ut)&&(l.stencilFunc(It,Qt,ut),F=It,Y=Qt,ce=ut)},setOp:function(It,Qt,ut){(Ee!==It||Xe!==Qt||ct!==ut)&&(l.stencilOp(It,Qt,ut),Ee=It,Xe=Qt,ct=ut)},setLocked:function(It){x=It},setClear:function(It){Lt!==It&&(l.clearStencil(It),Lt=It)},reset:function(){x=!1,P=null,F=null,Y=null,ce=null,Ee=null,Xe=null,ct=null,Lt=null}}},v=new WeakMap,_=new WeakMap;let M={},E={},A=new WeakMap,T=[],I=null,k=!1,B=null,j=null,z=null,te=null,ae=null,Me=null,G=null,ye=!1,Ce=null,Re=null,vt=null,Tt=null,Le=null;const lt=l.getParameter(35661);let Te=!1,Be=0;const Ve=l.getParameter(7938);-1!==Ve.indexOf("WebGL")?(Be=parseFloat(/^WebGL (\d)/.exec(Ve)[1]),Te=Be>=1):-1!==Ve.indexOf("OpenGL ES")&&(Be=parseFloat(/^OpenGL ES (\d)/.exec(Ve)[1]),Te=Be>=2);let Ie=null,Ye={};const Dt=l.getParameter(3088),mt=l.getParameter(2978),Pt=(new Jn).fromArray(Dt),Ot=(new Jn).fromArray(mt);function fn(x,P,F){const Y=new Uint8Array(4),ce=l.createTexture();l.bindTexture(x,ce),l.texParameteri(x,10241,9728),l.texParameteri(x,10240,9728);for(let Ee=0;Ee<F;Ee++)l.texImage2D(P+Ee,0,6408,1,1,0,6408,5121,Y);return ce}const ht={};function cn(x){!0!==M[x]&&(l.enable(x),M[x]=!0)}function en(x){!1!==M[x]&&(l.disable(x),M[x]=!1)}ht[3553]=fn(3553,3553,1),ht[34067]=fn(34067,34069,6),h.setClear(0,0,0,1),p.setClear(1),m.setClear(0),cn(2929),p.setFunc(3),Wt(!1),In(1),cn(2884),Ft(0);const bt={100:32774,101:32778,102:32779};if(i)bt[103]=32775,bt[104]=32776;else{const x=e.get("EXT_blend_minmax");null!==x&&(bt[103]=x.MIN_EXT,bt[104]=x.MAX_EXT)}const gt={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Ft(x,P,F,Y,ce,Ee,Xe,ct){if(0!==x){if(!1===k&&(cn(3042),k=!0),5===x)ce=ce||P,Ee=Ee||F,Xe=Xe||Y,(P!==j||ce!==ae)&&(l.blendEquationSeparate(bt[P],bt[ce]),j=P,ae=ce),(F!==z||Y!==te||Ee!==Me||Xe!==G)&&(l.blendFuncSeparate(gt[F],gt[Y],gt[Ee],gt[Xe]),z=F,te=Y,Me=Ee,G=Xe),B=x,ye=null;else if(x!==B||ct!==ye){if((100!==j||100!==ae)&&(l.blendEquation(32774),j=100,ae=100),ct)switch(x){case 1:l.blendFuncSeparate(1,771,1,771);break;case 2:l.blendFunc(1,1);break;case 3:l.blendFuncSeparate(0,769,0,1);break;case 4:l.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",x)}else switch(x){case 1:l.blendFuncSeparate(770,771,1,771);break;case 2:l.blendFunc(770,1);break;case 3:l.blendFuncSeparate(0,769,0,1);break;case 4:l.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",x)}z=null,te=null,Me=null,G=null,B=x,ye=ct}}else!0===k&&(en(3042),k=!1)}function Wt(x){Ce!==x&&(l.frontFace(x?2304:2305),Ce=x)}function In(x){0!==x?(cn(2884),x!==Re&&l.cullFace(1===x?1029:2===x?1028:1032)):en(2884),Re=x}function mn(x,P,F){x?(cn(32823),(Tt!==P||Le!==F)&&(l.polygonOffset(P,F),Tt=P,Le=F)):en(32823)}function ti(x){void 0===x&&(x=33984+lt-1),Ie!==x&&(l.activeTexture(x),Ie=x)}return{buffers:{color:h,depth:p,stencil:m},enable:cn,disable:en,bindFramebuffer:function Jt(x,P){return E[x]!==P&&(l.bindFramebuffer(x,P),E[x]=P,i&&(36009===x&&(E[36160]=P),36160===x&&(E[36009]=P)),!0)},drawBuffers:function zt(x,P){let F=T,Y=!1;if(x)if(F=A.get(P),void 0===F&&(F=[],A.set(P,F)),x.isWebGLMultipleRenderTargets){const ce=x.texture;if(F.length!==ce.length||36064!==F[0]){for(let Ee=0,Xe=ce.length;Ee<Xe;Ee++)F[Ee]=36064+Ee;F.length=ce.length,Y=!0}}else 36064!==F[0]&&(F[0]=36064,Y=!0);else 1029!==F[0]&&(F[0]=1029,Y=!0);Y&&(t.isWebGL2?l.drawBuffers(F):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(F))},useProgram:function An(x){return I!==x&&(l.useProgram(x),I=x,!0)},setBlending:Ft,setMaterial:function tn(x,P){2===x.side?en(2884):cn(2884);let F=1===x.side;P&&(F=!F),Wt(F),1===x.blending&&!1===x.transparent?Ft(0):Ft(x.blending,x.blendEquation,x.blendSrc,x.blendDst,x.blendEquationAlpha,x.blendSrcAlpha,x.blendDstAlpha,x.premultipliedAlpha),p.setFunc(x.depthFunc),p.setTest(x.depthTest),p.setMask(x.depthWrite),h.setMask(x.colorWrite);const Y=x.stencilWrite;m.setTest(Y),Y&&(m.setMask(x.stencilWriteMask),m.setFunc(x.stencilFunc,x.stencilRef,x.stencilFuncMask),m.setOp(x.stencilFail,x.stencilZFail,x.stencilZPass)),mn(x.polygonOffset,x.polygonOffsetFactor,x.polygonOffsetUnits),!0===x.alphaToCoverage?cn(32926):en(32926)},setFlipSided:Wt,setCullFace:In,setLineWidth:function vn(x){x!==vt&&(Te&&l.lineWidth(x),vt=x)},setPolygonOffset:mn,setScissorTest:function mi(x){x?cn(3089):en(3089)},activeTexture:ti,bindTexture:function ve(x,P){null===Ie&&ti();let F=Ye[Ie];void 0===F&&(F={type:void 0,texture:void 0},Ye[Ie]=F),(F.type!==x||F.texture!==P)&&(l.bindTexture(x,P||ht[x]),F.type=x,F.texture=P)},unbindTexture:function ne(){const x=Ye[Ie];void 0!==x&&void 0!==x.type&&(l.bindTexture(x.type,null),x.type=void 0,x.texture=void 0)},compressedTexImage2D:function it(){try{l.compressedTexImage2D.apply(l,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},texImage2D:function r(){try{l.texImage2D.apply(l,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},texImage3D:function o(){try{l.texImage3D.apply(l,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},updateUBOMapping:function f(x,P){let F=_.get(P);void 0===F&&(F=new WeakMap,_.set(P,F));let Y=F.get(x);void 0===Y&&(Y=l.getUniformBlockIndex(P,x.name),F.set(x,Y))},uniformBlockBinding:function g(x,P){const Y=_.get(P).get(x);v.get(x)!==Y&&(l.uniformBlockBinding(P,Y,x.__bindingPointIndex),v.set(x,Y))},texStorage2D:function Mn(){try{l.texStorage2D.apply(l,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},texStorage3D:function n(){try{l.texStorage3D.apply(l,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},texSubImage2D:function At(){try{l.texSubImage2D.apply(l,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},texSubImage3D:function Bt(){try{l.texSubImage3D.apply(l,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},compressedTexSubImage2D:function $t(){try{l.compressedTexSubImage2D.apply(l,arguments)}catch(x){console.error("THREE.WebGLState:",x)}},scissor:function c(x){!1===Pt.equals(x)&&(l.scissor(x.x,x.y,x.z,x.w),Pt.copy(x))},viewport:function d(x){!1===Ot.equals(x)&&(l.viewport(x.x,x.y,x.z,x.w),Ot.copy(x))},reset:function S(){l.disable(3042),l.disable(2884),l.disable(2929),l.disable(32823),l.disable(3089),l.disable(2960),l.disable(32926),l.blendEquation(32774),l.blendFunc(1,0),l.blendFuncSeparate(1,0,1,0),l.colorMask(!0,!0,!0,!0),l.clearColor(0,0,0,0),l.depthMask(!0),l.depthFunc(513),l.clearDepth(1),l.stencilMask(4294967295),l.stencilFunc(519,0,4294967295),l.stencilOp(7680,7680,7680),l.clearStencil(0),l.cullFace(1029),l.frontFace(2305),l.polygonOffset(0,0),l.activeTexture(33984),l.bindFramebuffer(36160,null),!0===i&&(l.bindFramebuffer(36009,null),l.bindFramebuffer(36008,null)),l.useProgram(null),l.lineWidth(1),l.scissor(0,0,l.canvas.width,l.canvas.height),l.viewport(0,0,l.canvas.width,l.canvas.height),M={},Ie=null,Ye={},E={},A=new WeakMap,T=[],I=null,k=!1,B=null,j=null,z=null,te=null,ae=null,Me=null,G=null,ye=!1,Ce=null,Re=null,vt=null,Tt=null,Le=null,Pt.set(0,0,l.canvas.width,l.canvas.height),Ot.set(0,0,l.canvas.width,l.canvas.height),h.reset(),p.reset(),m.reset()}}}function Ow(l,e,t,i,s,a,u){const h=s.isWebGL2,p=s.maxTextures,m=s.maxCubemapSize,v=s.maxTextureSize,_=s.maxSamples,M=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,E=/OculusBrowser/g.test(navigator.userAgent),A=new WeakMap;let T;const I=new WeakMap;let k=!1;try{k="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(ve){}function B(ve,ne){return k?new OffscreenCanvas(ve,ne):ba("canvas")}function j(ve,ne,it,At){let Bt=1;if((ve.width>At||ve.height>At)&&(Bt=At/Math.max(ve.width,ve.height)),Bt<1||!0===ne){if("undefined"!=typeof HTMLImageElement&&ve instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&ve instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&ve instanceof ImageBitmap){const $t=ne?bd:Math.floor,Mn=$t(Bt*ve.width),n=$t(Bt*ve.height);void 0===T&&(T=B(Mn,n));const r=it?B(Mn,n):T;return r.width=Mn,r.height=n,r.getContext("2d").drawImage(ve,0,0,Mn,n),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ve.width+"x"+ve.height+") to ("+Mn+"x"+n+")."),r}return"data"in ve&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ve.width+"x"+ve.height+")."),ve}return ve}function z(ve){return zu(ve.width)&&zu(ve.height)}function ae(ve,ne){return ve.generateMipmaps&&ne&&ve.minFilter!==jn&&ve.minFilter!==ri}function Me(ve){l.generateMipmap(ve)}function G(ve,ne,it,At,Bt=!1){if(!1===h)return ne;if(null!==ve){if(void 0!==l[ve])return l[ve];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ve+"'")}let $t=ne;return 6403===ne&&(5126===it&&($t=33326),5131===it&&($t=33325),5121===it&&($t=33321)),33319===ne&&(5126===it&&($t=33328),5131===it&&($t=33327),5121===it&&($t=33323)),6408===ne&&(5126===it&&($t=34836),5131===it&&($t=34842),5121===it&&($t=At===Li&&!1===Bt?35907:32856),32819===it&&($t=32854),32820===it&&($t=32855)),(33325===$t||33326===$t||33327===$t||33328===$t||34842===$t||34836===$t)&&e.get("EXT_color_buffer_float"),$t}function ye(ve,ne,it){return!0===ae(ve,it)||ve.isFramebufferTexture&&ve.minFilter!==jn&&ve.minFilter!==ri?Math.log2(Math.max(ne.width,ne.height))+1:void 0!==ve.mipmaps&&ve.mipmaps.length>0?ve.mipmaps.length:ve.isCompressedTexture&&Array.isArray(ve.image)?ne.mipmaps.length:1}function Ce(ve){return ve===jn||1004===ve||1005===ve?9728:9729}function Re(ve){const ne=ve.target;ne.removeEventListener("dispose",Re),function Tt(ve){const ne=i.get(ve);if(void 0===ne.__webglInit)return;const it=ve.source,At=I.get(it);if(At){const Bt=At[ne.__cacheKey];Bt.usedTimes--,0===Bt.usedTimes&&Le(ve),0===Object.keys(At).length&&I.delete(it)}i.remove(ve)}(ne),ne.isVideoTexture&&A.delete(ne)}function vt(ve){const ne=ve.target;ne.removeEventListener("dispose",vt),function lt(ve){const ne=ve.texture,it=i.get(ve),At=i.get(ne);if(void 0!==At.__webglTexture&&(l.deleteTexture(At.__webglTexture),u.memory.textures--),ve.depthTexture&&ve.depthTexture.dispose(),ve.isWebGLCubeRenderTarget)for(let Bt=0;Bt<6;Bt++)l.deleteFramebuffer(it.__webglFramebuffer[Bt]),it.__webglDepthbuffer&&l.deleteRenderbuffer(it.__webglDepthbuffer[Bt]);else{if(l.deleteFramebuffer(it.__webglFramebuffer),it.__webglDepthbuffer&&l.deleteRenderbuffer(it.__webglDepthbuffer),it.__webglMultisampledFramebuffer&&l.deleteFramebuffer(it.__webglMultisampledFramebuffer),it.__webglColorRenderbuffer)for(let Bt=0;Bt<it.__webglColorRenderbuffer.length;Bt++)it.__webglColorRenderbuffer[Bt]&&l.deleteRenderbuffer(it.__webglColorRenderbuffer[Bt]);it.__webglDepthRenderbuffer&&l.deleteRenderbuffer(it.__webglDepthRenderbuffer)}if(ve.isWebGLMultipleRenderTargets)for(let Bt=0,$t=ne.length;Bt<$t;Bt++){const Mn=i.get(ne[Bt]);Mn.__webglTexture&&(l.deleteTexture(Mn.__webglTexture),u.memory.textures--),i.remove(ne[Bt])}i.remove(ne),i.remove(ve)}(ne)}function Le(ve){const ne=i.get(ve);l.deleteTexture(ne.__webglTexture),delete I.get(ve.source)[ne.__cacheKey],u.memory.textures--}let Te=0;function Ye(ve,ne){const it=i.get(ve);if(ve.isVideoTexture&&function mi(ve){const ne=u.render.frame;A.get(ve)!==ne&&(A.set(ve,ne),ve.update())}(ve),!1===ve.isRenderTargetTexture&&ve.version>0&&it.__version!==ve.version){const At=ve.image;if(null===At)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==At.complete)return void en(it,ve,ne);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+ne),t.bindTexture(3553,it.__webglTexture)}const Ot={1e3:10497,[Hn]:33071,1002:33648},fn={[jn]:9728,1004:9984,1005:9986,[ri]:9729,1007:9985,1008:9987};function ht(ve,ne,it){if(it?(l.texParameteri(ve,10242,Ot[ne.wrapS]),l.texParameteri(ve,10243,Ot[ne.wrapT]),(32879===ve||35866===ve)&&l.texParameteri(ve,32882,Ot[ne.wrapR]),l.texParameteri(ve,10240,fn[ne.magFilter]),l.texParameteri(ve,10241,fn[ne.minFilter])):(l.texParameteri(ve,10242,33071),l.texParameteri(ve,10243,33071),(32879===ve||35866===ve)&&l.texParameteri(ve,32882,33071),(ne.wrapS!==Hn||ne.wrapT!==Hn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),l.texParameteri(ve,10240,Ce(ne.magFilter)),l.texParameteri(ve,10241,Ce(ne.minFilter)),ne.minFilter!==jn&&ne.minFilter!==ri&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const At=e.get("EXT_texture_filter_anisotropic");if(ne.type===zo&&!1===e.has("OES_texture_float_linear")||!1===h&&ne.type===sc&&!1===e.has("OES_texture_half_float_linear"))return;(ne.anisotropy>1||i.get(ne).__currentAnisotropy)&&(l.texParameterf(ve,At.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ne.anisotropy,s.getMaxAnisotropy())),i.get(ne).__currentAnisotropy=ne.anisotropy)}}function cn(ve,ne){let it=!1;void 0===ve.__webglInit&&(ve.__webglInit=!0,ne.addEventListener("dispose",Re));const At=ne.source;let Bt=I.get(At);void 0===Bt&&(Bt={},I.set(At,Bt));const $t=function Ie(ve){const ne=[];return ne.push(ve.wrapS),ne.push(ve.wrapT),ne.push(ve.magFilter),ne.push(ve.minFilter),ne.push(ve.anisotropy),ne.push(ve.internalFormat),ne.push(ve.format),ne.push(ve.type),ne.push(ve.generateMipmaps),ne.push(ve.premultiplyAlpha),ne.push(ve.flipY),ne.push(ve.unpackAlignment),ne.push(ve.encoding),ne.join()}(ne);if($t!==ve.__cacheKey){void 0===Bt[$t]&&(Bt[$t]={texture:l.createTexture(),usedTimes:0},u.memory.textures++,it=!0),Bt[$t].usedTimes++;const Mn=Bt[ve.__cacheKey];void 0!==Mn&&(Bt[ve.__cacheKey].usedTimes--,0===Mn.usedTimes&&Le(ne)),ve.__cacheKey=$t,ve.__webglTexture=Bt[$t].texture}return it}function en(ve,ne,it){let At=3553;ne.isDataArrayTexture&&(At=35866),ne.isData3DTexture&&(At=32879);const Bt=cn(ve,ne),$t=ne.source;if(t.activeTexture(33984+it),t.bindTexture(At,ve.__webglTexture),$t.version!==$t.__currentVersion||!0===Bt){l.pixelStorei(37440,ne.flipY),l.pixelStorei(37441,ne.premultiplyAlpha),l.pixelStorei(3317,ne.unpackAlignment),l.pixelStorei(37443,0);const Mn=function te(ve){return!h&&(ve.wrapS!==Hn||ve.wrapT!==Hn||ve.minFilter!==jn&&ve.minFilter!==ri)}(ne)&&!1===z(ne.image);let n=j(ne.image,Mn,!1,v);n=ti(ne,n);const r=z(n)||h,o=a.convert(ne.format,ne.encoding);let f,c=a.convert(ne.type),d=G(ne.internalFormat,o,c,ne.encoding,ne.isVideoTexture);ht(At,ne,r);const g=ne.mipmaps,S=h&&!0!==ne.isVideoTexture,x=void 0===$t.__currentVersion||!0===Bt,P=ye(ne,n,r);if(ne.isDepthTexture)d=6402,h?d=ne.type===zo?36012:ne.type===si?33190:ne.type===oc?35056:33189:ne.type===zo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ne.format===js&&6402===d&&1012!==ne.type&&ne.type!==si&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ne.type=si,c=a.convert(ne.type)),ne.format===ac&&6402===d&&(d=34041,ne.type!==oc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ne.type=oc,c=a.convert(ne.type))),x&&(S?t.texStorage2D(3553,1,d,n.width,n.height):t.texImage2D(3553,0,d,n.width,n.height,0,o,c,null));else if(ne.isDataTexture)if(g.length>0&&r){S&&x&&t.texStorage2D(3553,P,d,g[0].width,g[0].height);for(let F=0,Y=g.length;F<Y;F++)f=g[F],S?t.texSubImage2D(3553,F,0,0,f.width,f.height,o,c,f.data):t.texImage2D(3553,F,d,f.width,f.height,0,o,c,f.data);ne.generateMipmaps=!1}else S?(x&&t.texStorage2D(3553,P,d,n.width,n.height),t.texSubImage2D(3553,0,0,0,n.width,n.height,o,c,n.data)):t.texImage2D(3553,0,d,n.width,n.height,0,o,c,n.data);else if(ne.isCompressedTexture){S&&x&&t.texStorage2D(3553,P,d,g[0].width,g[0].height);for(let F=0,Y=g.length;F<Y;F++)f=g[F],ne.format!==os?null!==o?S?t.compressedTexSubImage2D(3553,F,0,0,f.width,f.height,o,f.data):t.compressedTexImage2D(3553,F,d,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):S?t.texSubImage2D(3553,F,0,0,f.width,f.height,o,c,f.data):t.texImage2D(3553,F,d,f.width,f.height,0,o,c,f.data)}else if(ne.isDataArrayTexture)S?(x&&t.texStorage3D(35866,P,d,n.width,n.height,n.depth),t.texSubImage3D(35866,0,0,0,0,n.width,n.height,n.depth,o,c,n.data)):t.texImage3D(35866,0,d,n.width,n.height,n.depth,0,o,c,n.data);else if(ne.isData3DTexture)S?(x&&t.texStorage3D(32879,P,d,n.width,n.height,n.depth),t.texSubImage3D(32879,0,0,0,0,n.width,n.height,n.depth,o,c,n.data)):t.texImage3D(32879,0,d,n.width,n.height,n.depth,0,o,c,n.data);else if(ne.isFramebufferTexture){if(x)if(S)t.texStorage2D(3553,P,d,n.width,n.height);else{let F=n.width,Y=n.height;for(let ce=0;ce<P;ce++)t.texImage2D(3553,ce,d,F,Y,0,o,c,null),F>>=1,Y>>=1}}else if(g.length>0&&r){S&&x&&t.texStorage2D(3553,P,d,g[0].width,g[0].height);for(let F=0,Y=g.length;F<Y;F++)f=g[F],S?t.texSubImage2D(3553,F,0,0,o,c,f):t.texImage2D(3553,F,d,o,c,f);ne.generateMipmaps=!1}else S?(x&&t.texStorage2D(3553,P,d,n.width,n.height),t.texSubImage2D(3553,0,0,0,o,c,n)):t.texImage2D(3553,0,d,o,c,n);ae(ne,r)&&Me(At),$t.__currentVersion=$t.version,ne.onUpdate&&ne.onUpdate(ne)}ve.__version=ne.version}function zt(ve,ne,it,At,Bt){const $t=a.convert(it.format,it.encoding),Mn=a.convert(it.type),n=G(it.internalFormat,$t,Mn,it.encoding);i.get(ne).__hasExternalTextures||(32879===Bt||35866===Bt?t.texImage3D(Bt,0,n,ne.width,ne.height,ne.depth,0,$t,Mn,null):t.texImage2D(Bt,0,n,ne.width,ne.height,0,$t,Mn,null)),t.bindFramebuffer(36160,ve),mn(ne)?M.framebufferTexture2DMultisampleEXT(36160,At,Bt,i.get(it).__webglTexture,0,vn(ne)):l.framebufferTexture2D(36160,At,Bt,i.get(it).__webglTexture,0),t.bindFramebuffer(36160,null)}function An(ve,ne,it){if(l.bindRenderbuffer(36161,ve),ne.depthBuffer&&!ne.stencilBuffer){let At=33189;if(it||mn(ne)){const Bt=ne.depthTexture;Bt&&Bt.isDepthTexture&&(Bt.type===zo?At=36012:Bt.type===si&&(At=33190));const $t=vn(ne);mn(ne)?M.renderbufferStorageMultisampleEXT(36161,$t,At,ne.width,ne.height):l.renderbufferStorageMultisample(36161,$t,At,ne.width,ne.height)}else l.renderbufferStorage(36161,At,ne.width,ne.height);l.framebufferRenderbuffer(36160,36096,36161,ve)}else if(ne.depthBuffer&&ne.stencilBuffer){const At=vn(ne);it&&!1===mn(ne)?l.renderbufferStorageMultisample(36161,At,35056,ne.width,ne.height):mn(ne)?M.renderbufferStorageMultisampleEXT(36161,At,35056,ne.width,ne.height):l.renderbufferStorage(36161,34041,ne.width,ne.height),l.framebufferRenderbuffer(36160,33306,36161,ve)}else{const At=!0===ne.isWebGLMultipleRenderTargets?ne.texture:[ne.texture];for(let Bt=0;Bt<At.length;Bt++){const $t=At[Bt],Mn=a.convert($t.format,$t.encoding),n=a.convert($t.type),r=G($t.internalFormat,Mn,n,$t.encoding),o=vn(ne);it&&!1===mn(ne)?l.renderbufferStorageMultisample(36161,o,r,ne.width,ne.height):mn(ne)?M.renderbufferStorageMultisampleEXT(36161,o,r,ne.width,ne.height):l.renderbufferStorage(36161,r,ne.width,ne.height)}}l.bindRenderbuffer(36161,null)}function gt(ve){const ne=i.get(ve),it=!0===ve.isWebGLCubeRenderTarget;if(ve.depthTexture&&!ne.__autoAllocateDepthBuffer){if(it)throw new Error("target.depthTexture not supported in Cube render targets");!function bt(ve,ne){if(ne&&ne.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,ve),!ne.depthTexture||!ne.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(ne.depthTexture).__webglTexture||ne.depthTexture.image.width!==ne.width||ne.depthTexture.image.height!==ne.height)&&(ne.depthTexture.image.width=ne.width,ne.depthTexture.image.height=ne.height,ne.depthTexture.needsUpdate=!0),Ye(ne.depthTexture,0);const At=i.get(ne.depthTexture).__webglTexture,Bt=vn(ne);if(ne.depthTexture.format===js)mn(ne)?M.framebufferTexture2DMultisampleEXT(36160,36096,3553,At,0,Bt):l.framebufferTexture2D(36160,36096,3553,At,0);else{if(ne.depthTexture.format!==ac)throw new Error("Unknown depthTexture format");mn(ne)?M.framebufferTexture2DMultisampleEXT(36160,33306,3553,At,0,Bt):l.framebufferTexture2D(36160,33306,3553,At,0)}}(ne.__webglFramebuffer,ve)}else if(it){ne.__webglDepthbuffer=[];for(let At=0;At<6;At++)t.bindFramebuffer(36160,ne.__webglFramebuffer[At]),ne.__webglDepthbuffer[At]=l.createRenderbuffer(),An(ne.__webglDepthbuffer[At],ve,!1)}else t.bindFramebuffer(36160,ne.__webglFramebuffer),ne.__webglDepthbuffer=l.createRenderbuffer(),An(ne.__webglDepthbuffer,ve,!1);t.bindFramebuffer(36160,null)}function vn(ve){return Math.min(_,ve.samples)}function mn(ve){const ne=i.get(ve);return h&&ve.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==ne.__useRenderToTexture}function ti(ve,ne){const it=ve.encoding,At=ve.format,Bt=ve.type;return!0===ve.isCompressedTexture||!0===ve.isVideoTexture||1035===ve.format||it!==hl&&(it===Li?!1===h?!0===e.has("EXT_sRGB")&&At===os?(ve.format=1035,ve.minFilter=ri,ve.generateMipmaps=!1):ne=by.sRGBToLinear(ne):(At!==os||Bt!==sl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",it)),ne}this.allocateTextureUnit=function Ve(){const ve=Te;return ve>=p&&console.warn("THREE.WebGLTextures: Trying to use "+ve+" texture units while this GPU supports only "+p),Te+=1,ve},this.resetTextureUnits=function Be(){Te=0},this.setTexture2D=Ye,this.setTexture2DArray=function Dt(ve,ne){const it=i.get(ve);ve.version>0&&it.__version!==ve.version?en(it,ve,ne):(t.activeTexture(33984+ne),t.bindTexture(35866,it.__webglTexture))},this.setTexture3D=function mt(ve,ne){const it=i.get(ve);ve.version>0&&it.__version!==ve.version?en(it,ve,ne):(t.activeTexture(33984+ne),t.bindTexture(32879,it.__webglTexture))},this.setTextureCube=function Pt(ve,ne){const it=i.get(ve);ve.version>0&&it.__version!==ve.version?function Jt(ve,ne,it){if(6!==ne.image.length)return;const At=cn(ve,ne),Bt=ne.source;if(t.activeTexture(33984+it),t.bindTexture(34067,ve.__webglTexture),Bt.version!==Bt.__currentVersion||!0===At){l.pixelStorei(37440,ne.flipY),l.pixelStorei(37441,ne.premultiplyAlpha),l.pixelStorei(3317,ne.unpackAlignment),l.pixelStorei(37443,0);const $t=ne.isCompressedTexture||ne.image[0].isCompressedTexture,Mn=ne.image[0]&&ne.image[0].isDataTexture,n=[];for(let F=0;F<6;F++)n[F]=$t||Mn?Mn?ne.image[F].image:ne.image[F]:j(ne.image[F],!1,!0,m),n[F]=ti(ne,n[F]);const r=n[0],o=z(r)||h,c=a.convert(ne.format,ne.encoding),d=a.convert(ne.type),f=G(ne.internalFormat,c,d,ne.encoding),g=h&&!0!==ne.isVideoTexture,S=void 0===Bt.__currentVersion||!0===At;let P,x=ye(ne,r,o);if(ht(34067,ne,o),$t){g&&S&&t.texStorage2D(34067,x,f,r.width,r.height);for(let F=0;F<6;F++){P=n[F].mipmaps;for(let Y=0;Y<P.length;Y++){const ce=P[Y];ne.format!==os?null!==c?g?t.compressedTexSubImage2D(34069+F,Y,0,0,ce.width,ce.height,c,ce.data):t.compressedTexImage2D(34069+F,Y,f,ce.width,ce.height,0,ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g?t.texSubImage2D(34069+F,Y,0,0,ce.width,ce.height,c,d,ce.data):t.texImage2D(34069+F,Y,f,ce.width,ce.height,0,c,d,ce.data)}}}else{P=ne.mipmaps,g&&S&&(P.length>0&&x++,t.texStorage2D(34067,x,f,n[0].width,n[0].height));for(let F=0;F<6;F++)if(Mn){g?t.texSubImage2D(34069+F,0,0,0,n[F].width,n[F].height,c,d,n[F].data):t.texImage2D(34069+F,0,f,n[F].width,n[F].height,0,c,d,n[F].data);for(let Y=0;Y<P.length;Y++){const Ee=P[Y].image[F].image;g?t.texSubImage2D(34069+F,Y+1,0,0,Ee.width,Ee.height,c,d,Ee.data):t.texImage2D(34069+F,Y+1,f,Ee.width,Ee.height,0,c,d,Ee.data)}}else{g?t.texSubImage2D(34069+F,0,0,0,c,d,n[F]):t.texImage2D(34069+F,0,f,c,d,n[F]);for(let Y=0;Y<P.length;Y++){const ce=P[Y];g?t.texSubImage2D(34069+F,Y+1,0,0,c,d,ce.image[F]):t.texImage2D(34069+F,Y+1,f,c,d,ce.image[F])}}}ae(ne,o)&&Me(34067),Bt.__currentVersion=Bt.version,ne.onUpdate&&ne.onUpdate(ne)}ve.__version=ne.version}(it,ve,ne):(t.activeTexture(33984+ne),t.bindTexture(34067,it.__webglTexture))},this.rebindTextures=function Ft(ve,ne,it){const At=i.get(ve);void 0!==ne&&zt(At.__webglFramebuffer,ve,ve.texture,36064,3553),void 0!==it&&gt(ve)},this.setupRenderTarget=function tn(ve){const ne=ve.texture,it=i.get(ve),At=i.get(ne);ve.addEventListener("dispose",vt),!0!==ve.isWebGLMultipleRenderTargets&&(void 0===At.__webglTexture&&(At.__webglTexture=l.createTexture()),At.__version=ne.version,u.memory.textures++);const Bt=!0===ve.isWebGLCubeRenderTarget,$t=!0===ve.isWebGLMultipleRenderTargets,Mn=z(ve)||h;if(Bt){it.__webglFramebuffer=[];for(let n=0;n<6;n++)it.__webglFramebuffer[n]=l.createFramebuffer()}else{if(it.__webglFramebuffer=l.createFramebuffer(),$t)if(s.drawBuffers){const n=ve.texture;for(let r=0,o=n.length;r<o;r++){const c=i.get(n[r]);void 0===c.__webglTexture&&(c.__webglTexture=l.createTexture(),u.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(h&&ve.samples>0&&!1===mn(ve)){const n=$t?ne:[ne];it.__webglMultisampledFramebuffer=l.createFramebuffer(),it.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,it.__webglMultisampledFramebuffer);for(let r=0;r<n.length;r++){const o=n[r];it.__webglColorRenderbuffer[r]=l.createRenderbuffer(),l.bindRenderbuffer(36161,it.__webglColorRenderbuffer[r]);const c=a.convert(o.format,o.encoding),d=a.convert(o.type),f=G(o.internalFormat,c,d,o.encoding),g=vn(ve);l.renderbufferStorageMultisample(36161,g,f,ve.width,ve.height),l.framebufferRenderbuffer(36160,36064+r,36161,it.__webglColorRenderbuffer[r])}l.bindRenderbuffer(36161,null),ve.depthBuffer&&(it.__webglDepthRenderbuffer=l.createRenderbuffer(),An(it.__webglDepthRenderbuffer,ve,!0)),t.bindFramebuffer(36160,null)}}if(Bt){t.bindTexture(34067,At.__webglTexture),ht(34067,ne,Mn);for(let n=0;n<6;n++)zt(it.__webglFramebuffer[n],ve,ne,36064,34069+n);ae(ne,Mn)&&Me(34067),t.unbindTexture()}else if($t){const n=ve.texture;for(let r=0,o=n.length;r<o;r++){const c=n[r],d=i.get(c);t.bindTexture(3553,d.__webglTexture),ht(3553,c,Mn),zt(it.__webglFramebuffer,ve,c,36064+r,3553),ae(c,Mn)&&Me(3553)}t.unbindTexture()}else{let n=3553;(ve.isWebGL3DRenderTarget||ve.isWebGLArrayRenderTarget)&&(h?n=ve.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(n,At.__webglTexture),ht(n,ne,Mn),zt(it.__webglFramebuffer,ve,ne,36064,n),ae(ne,Mn)&&Me(n),t.unbindTexture()}ve.depthBuffer&&gt(ve)},this.updateRenderTargetMipmap=function Wt(ve){const ne=z(ve)||h,it=!0===ve.isWebGLMultipleRenderTargets?ve.texture:[ve.texture];for(let At=0,Bt=it.length;At<Bt;At++){const $t=it[At];if(ae($t,ne)){const Mn=ve.isWebGLCubeRenderTarget?34067:3553,n=i.get($t).__webglTexture;t.bindTexture(Mn,n),Me(Mn),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function In(ve){if(h&&ve.samples>0&&!1===mn(ve)){const ne=ve.isWebGLMultipleRenderTargets?ve.texture:[ve.texture],it=ve.width,At=ve.height;let Bt=16384;const $t=[],Mn=ve.stencilBuffer?33306:36096,n=i.get(ve),r=!0===ve.isWebGLMultipleRenderTargets;if(r)for(let o=0;o<ne.length;o++)t.bindFramebuffer(36160,n.__webglMultisampledFramebuffer),l.framebufferRenderbuffer(36160,36064+o,36161,null),t.bindFramebuffer(36160,n.__webglFramebuffer),l.framebufferTexture2D(36009,36064+o,3553,null,0);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);for(let o=0;o<ne.length;o++){$t.push(36064+o),ve.depthBuffer&&$t.push(Mn);const c=void 0!==n.__ignoreDepthValues&&n.__ignoreDepthValues;if(!1===c&&(ve.depthBuffer&&(Bt|=256),ve.stencilBuffer&&(Bt|=1024)),r&&l.framebufferRenderbuffer(36008,36064,36161,n.__webglColorRenderbuffer[o]),!0===c&&(l.invalidateFramebuffer(36008,[Mn]),l.invalidateFramebuffer(36009,[Mn])),r){const d=i.get(ne[o]).__webglTexture;l.framebufferTexture2D(36009,36064,3553,d,0)}l.blitFramebuffer(0,0,it,At,0,0,it,At,Bt,9728),E&&l.invalidateFramebuffer(36008,$t)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),r)for(let o=0;o<ne.length;o++){t.bindFramebuffer(36160,n.__webglMultisampledFramebuffer),l.framebufferRenderbuffer(36160,36064+o,36161,n.__webglColorRenderbuffer[o]);const c=i.get(ne[o]).__webglTexture;t.bindFramebuffer(36160,n.__webglFramebuffer),l.framebufferTexture2D(36009,36064+o,3553,c,0)}t.bindFramebuffer(36009,n.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=gt,this.setupFrameBufferTexture=zt,this.useMultisampledRTT=mn}function Y0(l,e,t){const i=t.isWebGL2;return{convert:function s(a,u=null){let h;if(a===sl)return 5121;if(1017===a)return 32819;if(1018===a)return 32820;if(1010===a)return 5120;if(1011===a)return 5122;if(1012===a)return 5123;if(1013===a)return 5124;if(a===si)return 5125;if(a===zo)return 5126;if(a===sc)return i?5131:(h=e.get("OES_texture_half_float"),null!==h?h.HALF_FLOAT_OES:null);if(1021===a)return 6406;if(a===os)return 6408;if(1024===a)return 6409;if(1025===a)return 6410;if(a===js)return 6402;if(a===ac)return 34041;if(1028===a)return 6403;if(1022===a)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===a)return h=e.get("EXT_sRGB"),null!==h?h.SRGB_ALPHA_EXT:null;if(1029===a)return 36244;if(1030===a)return 33319;if(1031===a)return 33320;if(1033===a)return 36249;if(33776===a||33777===a||33778===a||33779===a)if(u===Li){if(h=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===h)return null;if(33776===a)return h.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===a)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===a)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===a)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(h=e.get("WEBGL_compressed_texture_s3tc"),null===h)return null;if(33776===a)return h.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===a)return h.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===a)return h.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===a)return h.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===a||35841===a||35842===a||35843===a){if(h=e.get("WEBGL_compressed_texture_pvrtc"),null===h)return null;if(35840===a)return h.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===a)return h.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===a)return h.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===a)return h.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===a)return h=e.get("WEBGL_compressed_texture_etc1"),null!==h?h.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===a||37496===a){if(h=e.get("WEBGL_compressed_texture_etc"),null===h)return null;if(37492===a)return u===Li?h.COMPRESSED_SRGB8_ETC2:h.COMPRESSED_RGB8_ETC2;if(37496===a)return u===Li?h.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:h.COMPRESSED_RGBA8_ETC2_EAC}if(37808===a||37809===a||37810===a||37811===a||37812===a||37813===a||37814===a||37815===a||37816===a||37817===a||37818===a||37819===a||37820===a||37821===a){if(h=e.get("WEBGL_compressed_texture_astc"),null===h)return null;if(37808===a)return u===Li?h.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:h.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===a)return u===Li?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:h.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===a)return u===Li?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:h.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===a)return u===Li?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:h.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===a)return u===Li?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:h.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===a)return u===Li?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:h.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===a)return u===Li?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:h.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===a)return u===Li?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:h.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===a)return u===Li?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:h.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===a)return u===Li?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:h.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===a)return u===Li?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:h.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===a)return u===Li?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:h.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===a)return u===Li?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:h.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===a)return u===Li?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:h.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===a){if(h=e.get("EXT_texture_compression_bptc"),null===h)return null;if(36492===a)return u===Li?h.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:h.COMPRESSED_RGBA_BPTC_UNORM_EXT}return a===oc?i?34042:(h=e.get("WEBGL_depth_texture"),null!==h?h.UNSIGNED_INT_24_8_WEBGL:null):void 0!==l[a]?l[a]:null}}}class Fw extends yr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class _i extends Cs{constructor(){super(),this.isGroup=!0,this.type="Group"}}const K0={type:"move"};class Hm{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new _i,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new _i,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ue,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ue),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new _i,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ue,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ue),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let s=null,a=null,u=null;const h=this._targetRay,p=this._grip,m=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(m&&e.hand){u=!0;for(const T of e.hand.values()){const I=t.getJointPose(T,i);if(void 0===m.joints[T.jointName]){const B=new _i;B.matrixAutoUpdate=!1,B.visible=!1,m.joints[T.jointName]=B,m.add(B)}const k=m.joints[T.jointName];null!==I&&(k.matrix.fromArray(I.transform.matrix),k.matrix.decompose(k.position,k.rotation,k.scale),k.jointRadius=I.radius),k.visible=null!==I}const M=m.joints["index-finger-tip"].position.distanceTo(m.joints["thumb-tip"].position),E=.02,A=.005;m.inputState.pinching&&M>E+A?(m.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!m.inputState.pinching&&M<=E-A&&(m.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==p&&e.gripSpace&&(a=t.getPose(e.gripSpace,i),null!==a&&(p.matrix.fromArray(a.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),a.linearVelocity?(p.hasLinearVelocity=!0,p.linearVelocity.copy(a.linearVelocity)):p.hasLinearVelocity=!1,a.angularVelocity?(p.hasAngularVelocity=!0,p.angularVelocity.copy(a.angularVelocity)):p.hasAngularVelocity=!1));null!==h&&(s=t.getPose(e.targetRaySpace,i),null===s&&null!==a&&(s=a),null!==s&&(h.matrix.fromArray(s.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),s.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(s.linearVelocity)):h.hasLinearVelocity=!1,s.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(s.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(K0)))}return null!==h&&(h.visible=null!==s),null!==p&&(p.visible=null!==a),null!==m&&(m.visible=null!==u),this}}class kw extends gl{constructor(e,t,i,s,a,u,h,p,m,v){if((v=void 0!==v?v:js)!==js&&v!==ac)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&v===js&&(i=si),void 0===i&&v===ac&&(i=oc),super(null,s,a,u,h,p,v,i,m),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==h?h:jn,this.minFilter=void 0!==p?p:jn,this.flipY=!1,this.generateMipmaps=!1}}class X0 extends uc{constructor(e,t){super();const i=this;let s=null,a=1,u=null,h="local-floor",p=null,m=null,v=null,_=null,M=null,E=null;const A=t.getContextAttributes();let T=null,I=null;const k=[],B=[],j=new yr;j.layers.enable(1),j.viewport=new Jn;const z=new yr;z.layers.enable(2),z.viewport=new Jn;const te=[j,z],ae=new Fw;ae.layers.enable(1),ae.layers.enable(2);let Me=null,G=null;function ye(Ie){const Ye=B.indexOf(Ie.inputSource);if(-1===Ye)return;const Dt=k[Ye];void 0!==Dt&&Dt.dispatchEvent({type:Ie.type,data:Ie.inputSource})}function Ce(){s.removeEventListener("select",ye),s.removeEventListener("selectstart",ye),s.removeEventListener("selectend",ye),s.removeEventListener("squeeze",ye),s.removeEventListener("squeezestart",ye),s.removeEventListener("squeezeend",ye),s.removeEventListener("end",Ce),s.removeEventListener("inputsourceschange",Re);for(let Ie=0;Ie<k.length;Ie++){const Ye=B[Ie];null!==Ye&&(B[Ie]=null,k[Ie].disconnect(Ye))}Me=null,G=null,e.setRenderTarget(T),M=null,_=null,v=null,s=null,I=null,Ve.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function Re(Ie){for(let Ye=0;Ye<Ie.removed.length;Ye++){const Dt=Ie.removed[Ye],mt=B.indexOf(Dt);mt>=0&&(B[mt]=null,k[mt].dispatchEvent({type:"disconnected",data:Dt}))}for(let Ye=0;Ye<Ie.added.length;Ye++){const Dt=Ie.added[Ye];let mt=B.indexOf(Dt);if(-1===mt){for(let Ot=0;Ot<k.length;Ot++){if(Ot>=B.length){B.push(Dt),mt=Ot;break}if(null===B[Ot]){B[Ot]=Dt,mt=Ot;break}}if(-1===mt)break}const Pt=k[mt];Pt&&Pt.dispatchEvent({type:"connected",data:Dt})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ie){let Ye=k[Ie];return void 0===Ye&&(Ye=new Hm,k[Ie]=Ye),Ye.getTargetRaySpace()},this.getControllerGrip=function(Ie){let Ye=k[Ie];return void 0===Ye&&(Ye=new Hm,k[Ie]=Ye),Ye.getGripSpace()},this.getHand=function(Ie){let Ye=k[Ie];return void 0===Ye&&(Ye=new Hm,k[Ie]=Ye),Ye.getHandSpace()},this.setFramebufferScaleFactor=function(Ie){a=Ie,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ie){h=Ie,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||u},this.setReferenceSpace=function(Ie){p=Ie},this.getBaseLayer=function(){return null!==_?_:M},this.getBinding=function(){return v},this.getFrame=function(){return E},this.getSession=function(){return s},this.setSession=function(){var Ie=(0,Qh.Z)(function*(Ye){if(s=Ye,null!==s){if(T=e.getRenderTarget(),s.addEventListener("select",ye),s.addEventListener("selectstart",ye),s.addEventListener("selectend",ye),s.addEventListener("squeeze",ye),s.addEventListener("squeezestart",ye),s.addEventListener("squeezeend",ye),s.addEventListener("end",Ce),s.addEventListener("inputsourceschange",Re),!0!==A.xrCompatible&&(yield t.makeXRCompatible()),void 0===s.renderState.layers||!1===e.capabilities.isWebGL2)M=new XRWebGLLayer(s,t,{antialias:void 0!==s.renderState.layers||A.antialias,alpha:A.alpha,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:a}),s.updateRenderState({baseLayer:M}),I=new Ys(M.framebufferWidth,M.framebufferHeight,{format:os,type:sl,encoding:e.outputEncoding});else{let Dt=null,mt=null,Pt=null;A.depth&&(Pt=A.stencil?35056:33190,Dt=A.stencil?ac:js,mt=A.stencil?oc:si);const Ot={colorFormat:32856,depthFormat:Pt,scaleFactor:a};v=new XRWebGLBinding(s,t),_=v.createProjectionLayer(Ot),s.updateRenderState({layers:[_]}),I=new Ys(_.textureWidth,_.textureHeight,{format:os,type:sl,depthTexture:new kw(_.textureWidth,_.textureHeight,mt,void 0,void 0,void 0,void 0,void 0,void 0,Dt),stencilBuffer:A.stencil,encoding:e.outputEncoding,samples:A.antialias?4:0}),e.properties.get(I).__ignoreDepthValues=_.ignoreDepthValues}I.isXRRenderTarget=!0,this.setFoveation(1),p=null,u=yield s.requestReferenceSpace(h),Ve.setContext(s),Ve.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(Ye){return Ie.apply(this,arguments)}}();const vt=new ue,Tt=new ue;function lt(Ie,Ye){null===Ye?Ie.matrixWorld.copy(Ie.matrix):Ie.matrixWorld.multiplyMatrices(Ye.matrixWorld,Ie.matrix),Ie.matrixWorldInverse.copy(Ie.matrixWorld).invert()}this.updateCamera=function(Ie){if(null===s)return;ae.near=z.near=j.near=Ie.near,ae.far=z.far=j.far=Ie.far,(Me!==ae.near||G!==ae.far)&&(s.updateRenderState({depthNear:ae.near,depthFar:ae.far}),Me=ae.near,G=ae.far);const Ye=Ie.parent,Dt=ae.cameras;lt(ae,Ye);for(let Pt=0;Pt<Dt.length;Pt++)lt(Dt[Pt],Ye);ae.matrixWorld.decompose(ae.position,ae.quaternion,ae.scale),Ie.position.copy(ae.position),Ie.quaternion.copy(ae.quaternion),Ie.scale.copy(ae.scale),Ie.matrix.copy(ae.matrix),Ie.matrixWorld.copy(ae.matrixWorld);const mt=Ie.children;for(let Pt=0,Ot=mt.length;Pt<Ot;Pt++)mt[Pt].updateMatrixWorld(!0);2===Dt.length?function Le(Ie,Ye,Dt){vt.setFromMatrixPosition(Ye.matrixWorld),Tt.setFromMatrixPosition(Dt.matrixWorld);const mt=vt.distanceTo(Tt),Pt=Ye.projectionMatrix.elements,Ot=Dt.projectionMatrix.elements,fn=Pt[14]/(Pt[10]-1),ht=Pt[14]/(Pt[10]+1),cn=(Pt[9]+1)/Pt[5],en=(Pt[9]-1)/Pt[5],Jt=(Pt[8]-1)/Pt[0],zt=(Ot[8]+1)/Ot[0],An=fn*Jt,bt=fn*zt,gt=mt/(-Jt+zt),Ft=gt*-Jt;Ye.matrixWorld.decompose(Ie.position,Ie.quaternion,Ie.scale),Ie.translateX(Ft),Ie.translateZ(gt),Ie.matrixWorld.compose(Ie.position,Ie.quaternion,Ie.scale),Ie.matrixWorldInverse.copy(Ie.matrixWorld).invert();const tn=fn+gt,Wt=ht+gt;Ie.projectionMatrix.makePerspective(An-Ft,bt+(mt-Ft),cn*ht/Wt*tn,en*ht/Wt*tn,tn,Wt)}(ae,j,z):ae.projectionMatrix.copy(j.projectionMatrix)},this.getCamera=function(){return ae},this.getFoveation=function(){return null!==_?_.fixedFoveation:null!==M?M.fixedFoveation:void 0},this.setFoveation=function(Ie){null!==_&&(_.fixedFoveation=Ie),null!==M&&void 0!==M.fixedFoveation&&(M.fixedFoveation=Ie)};let Te=null;const Ve=new Ts;Ve.setAnimationLoop(function Be(Ie,Ye){if(m=Ye.getViewerPose(p||u),E=Ye,null!==m){const Dt=m.views;null!==M&&(e.setRenderTargetFramebuffer(I,M.framebuffer),e.setRenderTarget(I));let mt=!1;Dt.length!==ae.cameras.length&&(ae.cameras.length=0,mt=!0);for(let Pt=0;Pt<Dt.length;Pt++){const Ot=Dt[Pt];let fn=null;if(null!==M)fn=M.getViewport(Ot);else{const cn=v.getViewSubImage(_,Ot);fn=cn.viewport,0===Pt&&(e.setRenderTargetTextures(I,cn.colorTexture,_.ignoreDepthValues?void 0:cn.depthStencilTexture),e.setRenderTarget(I))}let ht=te[Pt];void 0===ht&&(ht=new yr,ht.layers.enable(Pt),ht.viewport=new Jn,te[Pt]=ht),ht.matrix.fromArray(Ot.transform.matrix),ht.projectionMatrix.fromArray(Ot.projectionMatrix),ht.viewport.set(fn.x,fn.y,fn.width,fn.height),0===Pt&&ae.matrix.copy(ht.matrix),!0===mt&&ae.cameras.push(ht)}}for(let Dt=0;Dt<k.length;Dt++){const mt=B[Dt],Pt=k[Dt];null!==mt&&void 0!==Pt&&Pt.update(mt,Ye,p||u)}Te&&Te(Ie,Ye),E=null}),this.setAnimationLoop=function(Ie){Te=Ie},this.dispose=function(){}}}function Bw(l,e){function s(T,I){T.opacity.value=I.opacity,I.color&&T.diffuse.value.copy(I.color),I.emissive&&T.emissive.value.copy(I.emissive).multiplyScalar(I.emissiveIntensity),I.map&&(T.map.value=I.map),I.alphaMap&&(T.alphaMap.value=I.alphaMap),I.bumpMap&&(T.bumpMap.value=I.bumpMap,T.bumpScale.value=I.bumpScale,1===I.side&&(T.bumpScale.value*=-1)),I.displacementMap&&(T.displacementMap.value=I.displacementMap,T.displacementScale.value=I.displacementScale,T.displacementBias.value=I.displacementBias),I.emissiveMap&&(T.emissiveMap.value=I.emissiveMap),I.normalMap&&(T.normalMap.value=I.normalMap,T.normalScale.value.copy(I.normalScale),1===I.side&&T.normalScale.value.negate()),I.specularMap&&(T.specularMap.value=I.specularMap),I.alphaTest>0&&(T.alphaTest.value=I.alphaTest);const k=e.get(I).envMap;if(k&&(T.envMap.value=k,T.flipEnvMap.value=k.isCubeTexture&&!1===k.isRenderTargetTexture?-1:1,T.reflectivity.value=I.reflectivity,T.ior.value=I.ior,T.refractionRatio.value=I.refractionRatio),I.lightMap){T.lightMap.value=I.lightMap;const z=!0!==l.physicallyCorrectLights?Math.PI:1;T.lightMapIntensity.value=I.lightMapIntensity*z}let B,j;I.aoMap&&(T.aoMap.value=I.aoMap,T.aoMapIntensity.value=I.aoMapIntensity),I.map?B=I.map:I.specularMap?B=I.specularMap:I.displacementMap?B=I.displacementMap:I.normalMap?B=I.normalMap:I.bumpMap?B=I.bumpMap:I.roughnessMap?B=I.roughnessMap:I.metalnessMap?B=I.metalnessMap:I.alphaMap?B=I.alphaMap:I.emissiveMap?B=I.emissiveMap:I.clearcoatMap?B=I.clearcoatMap:I.clearcoatNormalMap?B=I.clearcoatNormalMap:I.clearcoatRoughnessMap?B=I.clearcoatRoughnessMap:I.iridescenceMap?B=I.iridescenceMap:I.iridescenceThicknessMap?B=I.iridescenceThicknessMap:I.specularIntensityMap?B=I.specularIntensityMap:I.specularColorMap?B=I.specularColorMap:I.transmissionMap?B=I.transmissionMap:I.thicknessMap?B=I.thicknessMap:I.sheenColorMap?B=I.sheenColorMap:I.sheenRoughnessMap&&(B=I.sheenRoughnessMap),void 0!==B&&(B.isWebGLRenderTarget&&(B=B.texture),!0===B.matrixAutoUpdate&&B.updateMatrix(),T.uvTransform.value.copy(B.matrix)),I.aoMap?j=I.aoMap:I.lightMap&&(j=I.lightMap),void 0!==j&&(j.isWebGLRenderTarget&&(j=j.texture),!0===j.matrixAutoUpdate&&j.updateMatrix(),T.uv2Transform.value.copy(j.matrix))}return{refreshFogUniforms:function t(T,I){T.fogColor.value.copy(I.color),I.isFog?(T.fogNear.value=I.near,T.fogFar.value=I.far):I.isFogExp2&&(T.fogDensity.value=I.density)},refreshMaterialUniforms:function i(T,I,k,B,j){I.isMeshBasicMaterial||I.isMeshLambertMaterial?s(T,I):I.isMeshToonMaterial?(s(T,I),function v(T,I){I.gradientMap&&(T.gradientMap.value=I.gradientMap)}(T,I)):I.isMeshPhongMaterial?(s(T,I),function m(T,I){T.specular.value.copy(I.specular),T.shininess.value=Math.max(I.shininess,1e-4)}(T,I)):I.isMeshStandardMaterial?(s(T,I),function _(T,I){T.roughness.value=I.roughness,T.metalness.value=I.metalness,I.roughnessMap&&(T.roughnessMap.value=I.roughnessMap),I.metalnessMap&&(T.metalnessMap.value=I.metalnessMap),e.get(I).envMap&&(T.envMapIntensity.value=I.envMapIntensity)}(T,I),I.isMeshPhysicalMaterial&&function M(T,I,k){T.ior.value=I.ior,I.sheen>0&&(T.sheenColor.value.copy(I.sheenColor).multiplyScalar(I.sheen),T.sheenRoughness.value=I.sheenRoughness,I.sheenColorMap&&(T.sheenColorMap.value=I.sheenColorMap),I.sheenRoughnessMap&&(T.sheenRoughnessMap.value=I.sheenRoughnessMap)),I.clearcoat>0&&(T.clearcoat.value=I.clearcoat,T.clearcoatRoughness.value=I.clearcoatRoughness,I.clearcoatMap&&(T.clearcoatMap.value=I.clearcoatMap),I.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=I.clearcoatRoughnessMap),I.clearcoatNormalMap&&(T.clearcoatNormalScale.value.copy(I.clearcoatNormalScale),T.clearcoatNormalMap.value=I.clearcoatNormalMap,1===I.side&&T.clearcoatNormalScale.value.negate())),I.iridescence>0&&(T.iridescence.value=I.iridescence,T.iridescenceIOR.value=I.iridescenceIOR,T.iridescenceThicknessMinimum.value=I.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=I.iridescenceThicknessRange[1],I.iridescenceMap&&(T.iridescenceMap.value=I.iridescenceMap),I.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=I.iridescenceThicknessMap)),I.transmission>0&&(T.transmission.value=I.transmission,T.transmissionSamplerMap.value=k.texture,T.transmissionSamplerSize.value.set(k.width,k.height),I.transmissionMap&&(T.transmissionMap.value=I.transmissionMap),T.thickness.value=I.thickness,I.thicknessMap&&(T.thicknessMap.value=I.thicknessMap),T.attenuationDistance.value=I.attenuationDistance,T.attenuationColor.value.copy(I.attenuationColor)),T.specularIntensity.value=I.specularIntensity,T.specularColor.value.copy(I.specularColor),I.specularIntensityMap&&(T.specularIntensityMap.value=I.specularIntensityMap),I.specularColorMap&&(T.specularColorMap.value=I.specularColorMap)}(T,I,j)):I.isMeshMatcapMaterial?(s(T,I),function E(T,I){I.matcap&&(T.matcap.value=I.matcap)}(T,I)):I.isMeshDepthMaterial?s(T,I):I.isMeshDistanceMaterial?(s(T,I),function A(T,I){T.referencePosition.value.copy(I.referencePosition),T.nearDistance.value=I.nearDistance,T.farDistance.value=I.farDistance}(T,I)):I.isMeshNormalMaterial?s(T,I):I.isLineBasicMaterial?(function a(T,I){T.diffuse.value.copy(I.color),T.opacity.value=I.opacity}(T,I),I.isLineDashedMaterial&&function u(T,I){T.dashSize.value=I.dashSize,T.totalSize.value=I.dashSize+I.gapSize,T.scale.value=I.scale}(T,I)):I.isPointsMaterial?function h(T,I,k,B){let j;T.diffuse.value.copy(I.color),T.opacity.value=I.opacity,T.size.value=I.size*k,T.scale.value=.5*B,I.map&&(T.map.value=I.map),I.alphaMap&&(T.alphaMap.value=I.alphaMap),I.alphaTest>0&&(T.alphaTest.value=I.alphaTest),I.map?j=I.map:I.alphaMap&&(j=I.alphaMap),void 0!==j&&(!0===j.matrixAutoUpdate&&j.updateMatrix(),T.uvTransform.value.copy(j.matrix))}(T,I,k,B):I.isSpriteMaterial?function p(T,I){let k;T.diffuse.value.copy(I.color),T.opacity.value=I.opacity,T.rotation.value=I.rotation,I.map&&(T.map.value=I.map),I.alphaMap&&(T.alphaMap.value=I.alphaMap),I.alphaTest>0&&(T.alphaTest.value=I.alphaTest),I.map?k=I.map:I.alphaMap&&(k=I.alphaMap),void 0!==k&&(!0===k.matrixAutoUpdate&&k.updateMatrix(),T.uvTransform.value.copy(k.matrix))}(T,I):I.isShadowMaterial?(T.color.value.copy(I.color),T.opacity.value=I.opacity):I.isShaderMaterial&&(I.uniformsNeedUpdate=!1)}}}function Z0(l,e,t,i){let s={},a={},u=[];const h=t.isWebGL2?l.getParameter(35375):0;function E(B,j,z){const te=B.value;if(void 0===z[j])return z[j]="number"==typeof te?te:te.clone(),!0;if("number"==typeof te){if(z[j]!==te)return z[j]=te,!0}else{const ae=z[j];if(!1===ae.equals(te))return ae.copy(te),!0}return!1}function T(B){const j=B.value,z={boundary:0,storage:0};return"number"==typeof j?(z.boundary=4,z.storage=4):j.isVector2?(z.boundary=8,z.storage=8):j.isVector3||j.isColor?(z.boundary=16,z.storage=12):j.isVector4?(z.boundary=16,z.storage=16):j.isMatrix3?(z.boundary=48,z.storage=48):j.isMatrix4?(z.boundary=64,z.storage=64):j.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",j),z}function I(B){const j=B.target;j.removeEventListener("dispose",I);const z=u.indexOf(j.__bindingPointIndex);u.splice(z,1),l.deleteBuffer(s[j.id]),delete s[j.id],delete a[j.id]}return{bind:function p(B,j){i.uniformBlockBinding(B,j.program)},update:function m(B,j){let z=s[B.id];void 0===z&&(function A(B){const j=B.uniforms;let z=0;let ae=0;for(let Me=0,G=j.length;Me<G;Me++){const ye=j[Me],Ce=T(ye);if(ye.__data=new Float32Array(Ce.storage/Float32Array.BYTES_PER_ELEMENT),ye.__offset=z,Me>0){ae=z%16;const Re=16-ae;0!==ae&&Re-Ce.boundary<0&&(z+=16-ae,ye.__offset=z)}z+=Ce.storage}ae=z%16,ae>0&&(z+=16-ae),B.__size=z,B.__cache={}}(B),z=function v(B){const j=function _(){for(let B=0;B<h;B++)if(-1===u.indexOf(B))return u.push(B),B;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();B.__bindingPointIndex=j;const z=l.createBuffer(),te=B.__size,ae=B.usage;return l.bindBuffer(35345,z),l.bufferData(35345,te,ae),l.bindBuffer(35345,null),l.bindBufferBase(35345,j,z),z}(B),s[B.id]=z,B.addEventListener("dispose",I)),i.updateUBOMapping(B,j.program);const ae=e.render.frame;a[B.id]!==ae&&(function M(B){const z=B.uniforms,te=B.__cache;l.bindBuffer(35345,s[B.id]);for(let ae=0,Me=z.length;ae<Me;ae++){const G=z[ae];if(!0===E(G,ae,te)){const ye=G.value,Ce=G.__offset;"number"==typeof ye?(G.__data[0]=ye,l.bufferSubData(35345,Ce,G.__data)):(G.value.isMatrix3?(G.__data[0]=G.value.elements[0],G.__data[1]=G.value.elements[1],G.__data[2]=G.value.elements[2],G.__data[3]=G.value.elements[0],G.__data[4]=G.value.elements[3],G.__data[5]=G.value.elements[4],G.__data[6]=G.value.elements[5],G.__data[7]=G.value.elements[0],G.__data[8]=G.value.elements[6],G.__data[9]=G.value.elements[7],G.__data[10]=G.value.elements[8],G.__data[11]=G.value.elements[0]):ye.toArray(G.__data),l.bufferSubData(35345,Ce,G.__data))}}l.bindBuffer(35345,null)}(B),a[B.id]=ae)},dispose:function k(){for(const B in s)l.deleteBuffer(s[B]);u=[],s={},a={}}}}function Oc(l={}){this.isWebGLRenderer=!0;const e=void 0!==l.canvas?l.canvas:function J0(){const l=ba("canvas");return l.style.display="block",l}(),t=void 0!==l.context?l.context:null,i=void 0===l.depth||l.depth,s=void 0===l.stencil||l.stencil,a=void 0!==l.antialias&&l.antialias,u=void 0===l.premultipliedAlpha||l.premultipliedAlpha,h=void 0!==l.preserveDrawingBuffer&&l.preserveDrawingBuffer,p=void 0!==l.powerPreference?l.powerPreference:"default",m=void 0!==l.failIfMajorPerformanceCaveat&&l.failIfMajorPerformanceCaveat;let v;v=null!==t?t.getContextAttributes().alpha:void 0!==l.alpha&&l.alpha;let _=null,M=null;const E=[],A=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=hl,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const T=this;let I=!1,k=0,B=0,j=null,z=-1,te=null;const ae=new Jn,Me=new Jn;let G=null,ye=e.width,Ce=e.height,Re=1,vt=null,Tt=null;const Le=new Jn(0,0,ye,Ce),lt=new Jn(0,0,ye,Ce);let Te=!1;const Be=new tm;let Ve=!1,Ie=!1,Ye=null;const Dt=new Tn,mt=new St,Pt=new ue,Ot={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function fn(){return null===j?Re:1}let en,Jt,zt,An,bt,gt,Ft,tn,Wt,In,vn,mn,mi,ti,ve,ne,it,At,Bt,$t,Mn,n,r,o,ht=t;function cn(he,$e){for(let tt=0;tt<he.length;tt++){const _t=e.getContext(he[tt],$e);if(null!==_t)return _t}return null}try{const he={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:u,preserveDrawingBuffer:h,powerPreference:p,failIfMajorPerformanceCaveat:m};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r143"),e.addEventListener("webglcontextlost",f,!1),e.addEventListener("webglcontextrestored",g,!1),e.addEventListener("webglcontextcreationerror",S,!1),null===ht){const $e=["webgl2","webgl","experimental-webgl"];if(!0===T.isWebGL1Renderer&&$e.shift(),ht=cn($e,he),null===ht)throw cn($e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ht.getShaderPrecisionFormat&&(ht.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(he){throw console.error("THREE.WebGLRenderer: "+he.message),he}function c(){en=new _m(ht),Jt=new rw(ht,en,l),en.init(Jt),n=new Y0(ht,en,Jt),zt=new Nw(ht,en,Jt),An=new xm,bt=new U0,gt=new Ow(ht,en,zt,bt,Jt,n,An),Ft=new sw(T),tn=new Kd(T),Wt=new dx(ht,Jt),r=new nw(ht,en,Wt,Jt),In=new lw(ht,Wt,An,r),vn=new _S(ht,In,Wt,An),Bt=new wm(ht,Jt,gt),ne=new f0(bt),mn=new B0(T,Ft,tn,en,Jt,r,ne),mi=new Bw(T,bt),ti=new Pw,ve=new $0(en,Jt),At=new d0(T,Ft,zt,vn,v,u),it=new SS(T,vn,Jt),o=new Z0(ht,An,Jt,zt),$t=new iw(ht,en,An,Jt),Mn=new x0(ht,en,An,Jt),An.programs=mn.programs,T.capabilities=Jt,T.extensions=en,T.properties=bt,T.renderLists=ti,T.shadowMap=it,T.state=zt,T.info=An}c();const d=new X0(T,ht);function f(he){he.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function g(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1;const he=An.autoReset,$e=it.enabled,tt=it.autoUpdate,Ze=it.needsUpdate,_t=it.type;c(),An.autoReset=he,it.enabled=$e,it.autoUpdate=tt,it.needsUpdate=Ze,it.type=_t}function S(he){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",he.statusMessage)}function x(he){const $e=he.target;$e.removeEventListener("dispose",x),function P(he){(function F(he){const $e=bt.get(he).programs;void 0!==$e&&($e.forEach(function(tt){mn.releaseProgram(tt)}),he.isShaderMaterial&&mn.releaseShaderCache(he))})(he),bt.remove(he)}($e)}this.xr=d,this.getContext=function(){return ht},this.getContextAttributes=function(){return ht.getContextAttributes()},this.forceContextLoss=function(){const he=en.get("WEBGL_lose_context");he&&he.loseContext()},this.forceContextRestore=function(){const he=en.get("WEBGL_lose_context");he&&he.restoreContext()},this.getPixelRatio=function(){return Re},this.setPixelRatio=function(he){void 0!==he&&(Re=he,this.setSize(ye,Ce,!1))},this.getSize=function(he){return he.set(ye,Ce)},this.setSize=function(he,$e,tt){d.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ye=he,Ce=$e,e.width=Math.floor(he*Re),e.height=Math.floor($e*Re),!1!==tt&&(e.style.width=he+"px",e.style.height=$e+"px"),this.setViewport(0,0,he,$e))},this.getDrawingBufferSize=function(he){return he.set(ye*Re,Ce*Re).floor()},this.setDrawingBufferSize=function(he,$e,tt){ye=he,Ce=$e,Re=tt,e.width=Math.floor(he*tt),e.height=Math.floor($e*tt),this.setViewport(0,0,he,$e)},this.getCurrentViewport=function(he){return he.copy(ae)},this.getViewport=function(he){return he.copy(Le)},this.setViewport=function(he,$e,tt,Ze){he.isVector4?Le.set(he.x,he.y,he.z,he.w):Le.set(he,$e,tt,Ze),zt.viewport(ae.copy(Le).multiplyScalar(Re).floor())},this.getScissor=function(he){return he.copy(lt)},this.setScissor=function(he,$e,tt,Ze){he.isVector4?lt.set(he.x,he.y,he.z,he.w):lt.set(he,$e,tt,Ze),zt.scissor(Me.copy(lt).multiplyScalar(Re).floor())},this.getScissorTest=function(){return Te},this.setScissorTest=function(he){zt.setScissorTest(Te=he)},this.setOpaqueSort=function(he){vt=he},this.setTransparentSort=function(he){Tt=he},this.getClearColor=function(he){return he.copy(At.getClearColor())},this.setClearColor=function(){At.setClearColor.apply(At,arguments)},this.getClearAlpha=function(){return At.getClearAlpha()},this.setClearAlpha=function(){At.setClearAlpha.apply(At,arguments)},this.clear=function(he=!0,$e=!0,tt=!0){let Ze=0;he&&(Ze|=16384),$e&&(Ze|=256),tt&&(Ze|=1024),ht.clear(Ze)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",f,!1),e.removeEventListener("webglcontextrestored",g,!1),e.removeEventListener("webglcontextcreationerror",S,!1),ti.dispose(),ve.dispose(),bt.dispose(),Ft.dispose(),tn.dispose(),vn.dispose(),r.dispose(),o.dispose(),mn.dispose(),d.dispose(),d.removeEventListener("sessionstart",Ee),d.removeEventListener("sessionend",Xe),Ye&&(Ye.dispose(),Ye=null),ct.stop()},this.renderBufferDirect=function(he,$e,tt,Ze,_t,yn){null===$e&&($e=Ot);const Sn=_t.isMesh&&_t.matrixWorld.determinant()<0,kn=function Bl(he,$e,tt,Ze,_t){!0!==$e.isScene&&($e=Ot),gt.resetTextureUnits();const yn=$e.fog,kn=null===j?T.outputEncoding:!0===j.isXRRenderTarget?j.texture.encoding:hl,On=(Ze.isMeshStandardMaterial?tn:Ft).get(Ze.envMap||(Ze.isMeshStandardMaterial?$e.environment:null)),ni=!0===Ze.vertexColors&&!!tt.attributes.color&&4===tt.attributes.color.itemSize,qn=!!Ze.normalMap&&!!tt.attributes.tangent,Kn=!!tt.morphAttributes.position,Hi=!!tt.morphAttributes.normal,$h=!!tt.morphAttributes.color,Yf=Ze.toneMapped?T.toneMapping:0,Kf=tt.morphAttributes.position||tt.morphAttributes.normal||tt.morphAttributes.color,za=void 0!==Kf?Kf.length:0,Qn=bt.get(Ze),Xf=M.state.lights;!0!==Ve||!0!==Ie&&he===te||ne.setState(Ze,he,he===te&&Ze.id===z);let er=!1;Ze.version===Qn.__version?(Qn.needsLights&&Qn.lightsStateVersion!==Xf.state.version||Qn.outputEncoding!==kn||_t.isInstancedMesh&&!1===Qn.instancing||!_t.isInstancedMesh&&!0===Qn.instancing||_t.isSkinnedMesh&&!1===Qn.skinning||!_t.isSkinnedMesh&&!0===Qn.skinning||Qn.envMap!==On||!0===Ze.fog&&Qn.fog!==yn||void 0!==Qn.numClippingPlanes&&(Qn.numClippingPlanes!==ne.numPlanes||Qn.numIntersection!==ne.numIntersection)||Qn.vertexAlphas!==ni||Qn.vertexTangents!==qn||Qn.morphTargets!==Kn||Qn.morphNormals!==Hi||Qn.morphColors!==$h||Qn.toneMapping!==Yf||!0===Jt.isWebGL2&&Qn.morphTargetsCount!==za)&&(er=!0):(er=!0,Qn.__version=Ze.version);let Po=Qn.currentProgram;!0===er&&(Po=Cn(Ze,$e,_t));let Qc=!1,Ug=!1,_M=!1;const ds=Po.getUniforms(),Vg=Qn.uniforms;if(zt.useProgram(Po.program)&&(Qc=!0,Ug=!0,_M=!0),Ze.id!==z&&(z=Ze.id,Ug=!0),Qc||te!==he){if(ds.setValue(ht,"projectionMatrix",he.projectionMatrix),Jt.logarithmicDepthBuffer&&ds.setValue(ht,"logDepthBufFC",2/(Math.log(he.far+1)/Math.LN2)),te!==he&&(te=he,Ug=!0,_M=!0),Ze.isShaderMaterial||Ze.isMeshPhongMaterial||Ze.isMeshToonMaterial||Ze.isMeshStandardMaterial||Ze.envMap){const ro=ds.map.cameraPosition;void 0!==ro&&ro.setValue(ht,Pt.setFromMatrixPosition(he.matrixWorld))}(Ze.isMeshPhongMaterial||Ze.isMeshToonMaterial||Ze.isMeshLambertMaterial||Ze.isMeshBasicMaterial||Ze.isMeshStandardMaterial||Ze.isShaderMaterial)&&ds.setValue(ht,"isOrthographic",!0===he.isOrthographicCamera),(Ze.isMeshPhongMaterial||Ze.isMeshToonMaterial||Ze.isMeshLambertMaterial||Ze.isMeshBasicMaterial||Ze.isMeshStandardMaterial||Ze.isShaderMaterial||Ze.isShadowMaterial||_t.isSkinnedMesh)&&ds.setValue(ht,"viewMatrix",he.matrixWorldInverse)}if(_t.isSkinnedMesh){ds.setOptional(ht,_t,"bindMatrix"),ds.setOptional(ht,_t,"bindMatrixInverse");const ro=_t.skeleton;ro&&(Jt.floatVertexTextures?(null===ro.boneTexture&&ro.computeBoneTexture(),ds.setValue(ht,"boneTexture",ro.boneTexture,gt),ds.setValue(ht,"boneTextureSize",ro.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const xM=tt.morphAttributes;if((void 0!==xM.position||void 0!==xM.normal||void 0!==xM.color&&!0===Jt.isWebGL2)&&Bt.update(_t,tt,Ze,Po),(Ug||Qn.receiveShadow!==_t.receiveShadow)&&(Qn.receiveShadow=_t.receiveShadow,ds.setValue(ht,"receiveShadow",_t.receiveShadow)),Ug&&(ds.setValue(ht,"toneMappingExposure",T.toneMappingExposure),Qn.needsLights&&function kg(he,$e){he.ambientLightColor.needsUpdate=$e,he.lightProbe.needsUpdate=$e,he.directionalLights.needsUpdate=$e,he.directionalLightShadows.needsUpdate=$e,he.pointLights.needsUpdate=$e,he.pointLightShadows.needsUpdate=$e,he.spotLights.needsUpdate=$e,he.spotLightShadows.needsUpdate=$e,he.rectAreaLights.needsUpdate=$e,he.hemisphereLights.needsUpdate=$e}(Vg,_M),yn&&!0===Ze.fog&&mi.refreshFogUniforms(Vg,yn),mi.refreshMaterialUniforms(Vg,Ze,Re,Ce,Ye),hh.upload(ht,Qn.uniformsList,Vg,gt)),Ze.isShaderMaterial&&!0===Ze.uniformsNeedUpdate&&(hh.upload(ht,Qn.uniformsList,Vg,gt),Ze.uniformsNeedUpdate=!1),Ze.isSpriteMaterial&&ds.setValue(ht,"center",_t.center),ds.setValue(ht,"modelViewMatrix",_t.modelViewMatrix),ds.setValue(ht,"normalMatrix",_t.normalMatrix),ds.setValue(ht,"modelMatrix",_t.matrixWorld),Ze.isShaderMaterial||Ze.isRawShaderMaterial){const ro=Ze.uniformsGroups;for(let wM=0,wE=ro.length;wM<wE;wM++)if(Jt.isWebGL2){const nE=ro[wM];o.update(nE,Po),o.bind(nE,Po)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Po}(he,$e,tt,Ze,_t);zt.setMaterial(Ze,Sn);let On=tt.index;const ni=tt.attributes.position;if(null===On){if(void 0===ni||0===ni.count)return}else if(0===On.count)return;let qn=1;!0===Ze.wireframe&&(On=In.getWireframeAttribute(tt),qn=2),r.setup(_t,Ze,kn,tt,On);let Kn,Hi=$t;null!==On&&(Kn=Wt.get(On),Hi=Mn,Hi.setIndex(Kn));const $h=null!==On?On.count:ni.count,Yf=tt.drawRange.start*qn,Kf=tt.drawRange.count*qn,za=null!==yn?yn.start*qn:0,Qn=null!==yn?yn.count*qn:1/0,Xf=Math.max(Yf,za),er=Math.min($h,Yf+Kf,za+Qn)-1,Po=Math.max(0,er-Xf+1);if(0!==Po){if(_t.isMesh)!0===Ze.wireframe?(zt.setLineWidth(Ze.wireframeLinewidth*fn()),Hi.setMode(1)):Hi.setMode(4);else if(_t.isLine){let Qc=Ze.linewidth;void 0===Qc&&(Qc=1),zt.setLineWidth(Qc*fn()),Hi.setMode(_t.isLineSegments?1:_t.isLineLoop?2:3)}else _t.isPoints?Hi.setMode(0):_t.isSprite&&Hi.setMode(4);if(_t.isInstancedMesh)Hi.renderInstances(Xf,Po,_t.count);else if(tt.isInstancedBufferGeometry){const Qc=Math.min(tt.instanceCount,tt._maxInstanceCount);Hi.renderInstances(Xf,Po,Qc)}else Hi.render(Xf,Po)}},this.compile=function(he,$e){M=ve.get(he),M.init(),A.push(M),he.traverseVisible(function(tt){tt.isLight&&tt.layers.test($e.layers)&&(M.pushLight(tt),tt.castShadow&&M.pushShadow(tt))}),M.setupLights(T.physicallyCorrectLights),he.traverse(function(tt){const Ze=tt.material;if(Ze)if(Array.isArray(Ze))for(let _t=0;_t<Ze.length;_t++)Cn(Ze[_t],he,tt);else Cn(Ze,he,tt)}),A.pop(),M=null};let Y=null;function Ee(){ct.stop()}function Xe(){ct.start()}const ct=new Ts;function Lt(he,$e,tt,Ze){if(!1===he.visible)return;if(he.layers.test($e.layers))if(he.isGroup)tt=he.renderOrder;else if(he.isLOD)!0===he.autoUpdate&&he.update($e);else if(he.isLight)M.pushLight(he),he.castShadow&&M.pushShadow(he);else if(he.isSprite){if(!he.frustumCulled||Be.intersectsSprite(he)){Ze&&Pt.setFromMatrixPosition(he.matrixWorld).applyMatrix4(Dt);const Sn=vn.update(he),kn=he.material;kn.visible&&_.push(he,Sn,kn,tt,Pt.z,null)}}else if((he.isMesh||he.isLine||he.isPoints)&&(he.isSkinnedMesh&&he.skeleton.frame!==An.render.frame&&(he.skeleton.update(),he.skeleton.frame=An.render.frame),!he.frustumCulled||Be.intersectsObject(he))){Ze&&Pt.setFromMatrixPosition(he.matrixWorld).applyMatrix4(Dt);const Sn=vn.update(he),kn=he.material;if(Array.isArray(kn)){const On=Sn.groups;for(let ni=0,qn=On.length;ni<qn;ni++){const Kn=On[ni],Hi=kn[Kn.materialIndex];Hi&&Hi.visible&&_.push(he,Sn,Hi,tt,Pt.z,Kn)}}else kn.visible&&_.push(he,Sn,kn,tt,Pt.z,null)}const yn=he.children;for(let Sn=0,kn=yn.length;Sn<kn;Sn++)Lt(yn[Sn],$e,tt,Ze)}function It(he,$e,tt,Ze){const _t=he.opaque,yn=he.transmissive,Sn=he.transparent;M.setupLightsView(tt),yn.length>0&&function Qt(he,$e,tt){const Ze=Jt.isWebGL2;null===Ye&&(Ye=new Ys(1,1,{generateMipmaps:!0,type:en.has("EXT_color_buffer_half_float")?sc:sl,minFilter:1008,samples:Ze&&!0===a?4:0})),T.getDrawingBufferSize(mt),Ze?Ye.setSize(mt.x,mt.y):Ye.setSize(bd(mt.x),bd(mt.y));const _t=T.getRenderTarget();T.setRenderTarget(Ye),T.clear();const yn=T.toneMapping;T.toneMapping=0,ut(he,$e,tt),T.toneMapping=yn,gt.updateMultisampleRenderTarget(Ye),gt.updateRenderTargetMipmap(Ye),T.setRenderTarget(_t)}(_t,$e,tt),Ze&&zt.viewport(ae.copy(Ze)),_t.length>0&&ut(_t,$e,tt),yn.length>0&&ut(yn,$e,tt),Sn.length>0&&ut(Sn,$e,tt),zt.buffers.depth.setTest(!0),zt.buffers.depth.setMask(!0),zt.buffers.color.setMask(!0),zt.setPolygonOffset(!1)}function ut(he,$e,tt){const Ze=!0===$e.isScene?$e.overrideMaterial:null;for(let _t=0,yn=he.length;_t<yn;_t++){const Sn=he[_t],kn=Sn.object,On=Sn.geometry,ni=null===Ze?Sn.material:Ze,qn=Sn.group;kn.layers.test(tt.layers)&&an(kn,$e,tt,On,ni,qn)}}function an(he,$e,tt,Ze,_t,yn){he.onBeforeRender(T,$e,tt,Ze,_t,yn),he.modelViewMatrix.multiplyMatrices(tt.matrixWorldInverse,he.matrixWorld),he.normalMatrix.getNormalMatrix(he.modelViewMatrix),_t.onBeforeRender(T,$e,tt,Ze,he,yn),!0===_t.transparent&&2===_t.side?(_t.side=1,_t.needsUpdate=!0,T.renderBufferDirect(tt,$e,Ze,_t,he,yn),_t.side=0,_t.needsUpdate=!0,T.renderBufferDirect(tt,$e,Ze,_t,he,yn),_t.side=2):T.renderBufferDirect(tt,$e,Ze,_t,he,yn),he.onAfterRender(T,$e,tt,Ze,_t,yn)}function Cn(he,$e,tt){!0!==$e.isScene&&($e=Ot);const Ze=bt.get(he),_t=M.state.lights,Sn=_t.state.version,kn=mn.getParameters(he,_t.state,M.state.shadowsArray,$e,tt),On=mn.getProgramCacheKey(kn);let ni=Ze.programs;Ze.environment=he.isMeshStandardMaterial?$e.environment:null,Ze.fog=$e.fog,Ze.envMap=(he.isMeshStandardMaterial?tn:Ft).get(he.envMap||Ze.environment),void 0===ni&&(he.addEventListener("dispose",x),ni=new Map,Ze.programs=ni);let qn=ni.get(On);if(void 0!==qn){if(Ze.currentProgram===qn&&Ze.lightsStateVersion===Sn)return li(he,kn),qn}else kn.uniforms=mn.getUniforms(he),he.onBuild(tt,kn,T),he.onBeforeCompile(kn,T),qn=mn.acquireProgram(kn,On),ni.set(On,qn),Ze.uniforms=kn.uniforms;const Kn=Ze.uniforms;(!he.isShaderMaterial&&!he.isRawShaderMaterial||!0===he.clipping)&&(Kn.clippingPlanes=ne.uniform),li(he,kn),Ze.needsLights=function Bg(he){return he.isMeshLambertMaterial||he.isMeshToonMaterial||he.isMeshPhongMaterial||he.isMeshStandardMaterial||he.isShadowMaterial||he.isShaderMaterial&&!0===he.lights}(he),Ze.lightsStateVersion=Sn,Ze.needsLights&&(Kn.ambientLightColor.value=_t.state.ambient,Kn.lightProbe.value=_t.state.probe,Kn.directionalLights.value=_t.state.directional,Kn.directionalLightShadows.value=_t.state.directionalShadow,Kn.spotLights.value=_t.state.spot,Kn.spotLightShadows.value=_t.state.spotShadow,Kn.rectAreaLights.value=_t.state.rectArea,Kn.ltc_1.value=_t.state.rectAreaLTC1,Kn.ltc_2.value=_t.state.rectAreaLTC2,Kn.pointLights.value=_t.state.point,Kn.pointLightShadows.value=_t.state.pointShadow,Kn.hemisphereLights.value=_t.state.hemi,Kn.directionalShadowMap.value=_t.state.directionalShadowMap,Kn.directionalShadowMatrix.value=_t.state.directionalShadowMatrix,Kn.spotShadowMap.value=_t.state.spotShadowMap,Kn.spotShadowMatrix.value=_t.state.spotShadowMatrix,Kn.pointShadowMap.value=_t.state.pointShadowMap,Kn.pointShadowMatrix.value=_t.state.pointShadowMatrix);const Hi=qn.getUniforms(),$h=hh.seqWithValue(Hi.seq,Kn);return Ze.currentProgram=qn,Ze.uniformsList=$h,qn}function li(he,$e){const tt=bt.get(he);tt.outputEncoding=$e.outputEncoding,tt.instancing=$e.instancing,tt.skinning=$e.skinning,tt.morphTargets=$e.morphTargets,tt.morphNormals=$e.morphNormals,tt.morphColors=$e.morphColors,tt.morphTargetsCount=$e.morphTargetsCount,tt.numClippingPlanes=$e.numClippingPlanes,tt.numIntersection=$e.numClipIntersection,tt.vertexAlphas=$e.vertexAlphas,tt.vertexTangents=$e.vertexTangents,tt.toneMapping=$e.toneMapping}ct.setAnimationLoop(function ce(he){Y&&Y(he)}),"undefined"!=typeof self&&ct.setContext(self),this.setAnimationLoop=function(he){Y=he,d.setAnimationLoop(he),null===he?ct.stop():ct.start()},d.addEventListener("sessionstart",Ee),d.addEventListener("sessionend",Xe),this.render=function(he,$e){if(void 0===$e||!0===$e.isCamera){if(!0!==I){if(!0===he.autoUpdate&&he.updateMatrixWorld(),null===$e.parent&&$e.updateMatrixWorld(),!0===d.enabled&&!0===d.isPresenting&&(!0===d.cameraAutoUpdate&&d.updateCamera($e),$e=d.getCamera()),!0===he.isScene&&he.onBeforeRender(T,he,$e,j),M=ve.get(he,A.length),M.init(),A.push(M),Dt.multiplyMatrices($e.projectionMatrix,$e.matrixWorldInverse),Be.setFromProjectionMatrix(Dt),Ie=this.localClippingEnabled,Ve=ne.init(this.clippingPlanes,Ie,$e),_=ti.get(he,E.length),_.init(),E.push(_),Lt(he,$e,0,T.sortObjects),_.finish(),!0===T.sortObjects&&_.sort(vt,Tt),!0===Ve&&ne.beginShadows(),it.render(M.state.shadowsArray,he,$e),!0===Ve&&ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),At.render(_,he),M.setupLights(T.physicallyCorrectLights),$e.isArrayCamera){const Ze=$e.cameras;for(let _t=0,yn=Ze.length;_t<yn;_t++){const Sn=Ze[_t];It(_,he,Sn,Sn.viewport)}}else It(_,he,$e);null!==j&&(gt.updateMultisampleRenderTarget(j),gt.updateRenderTargetMipmap(j)),!0===he.isScene&&he.onAfterRender(T,he,$e),r.resetDefaultState(),z=-1,te=null,A.pop(),M=A.length>0?A[A.length-1]:null,E.pop(),_=E.length>0?E[E.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return B},this.getRenderTarget=function(){return j},this.setRenderTargetTextures=function(he,$e,tt){bt.get(he.texture).__webglTexture=$e,bt.get(he.depthTexture).__webglTexture=tt;const Ze=bt.get(he);Ze.__hasExternalTextures=!0,Ze.__hasExternalTextures&&(Ze.__autoAllocateDepthBuffer=void 0===tt,Ze.__autoAllocateDepthBuffer||!0===en.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ze.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(he,$e){const tt=bt.get(he);tt.__webglFramebuffer=$e,tt.__useDefaultFramebuffer=void 0===$e},this.setRenderTarget=function(he,$e=0,tt=0){j=he,k=$e,B=tt;let Ze=!0;if(he){const On=bt.get(he);void 0!==On.__useDefaultFramebuffer?(zt.bindFramebuffer(36160,null),Ze=!1):void 0===On.__webglFramebuffer?gt.setupRenderTarget(he):On.__hasExternalTextures&&gt.rebindTextures(he,bt.get(he.texture).__webglTexture,bt.get(he.depthTexture).__webglTexture)}let _t=null,yn=!1,Sn=!1;if(he){const On=he.texture;(On.isData3DTexture||On.isDataArrayTexture)&&(Sn=!0);const ni=bt.get(he).__webglFramebuffer;he.isWebGLCubeRenderTarget?(_t=ni[$e],yn=!0):_t=Jt.isWebGL2&&he.samples>0&&!1===gt.useMultisampledRTT(he)?bt.get(he).__webglMultisampledFramebuffer:ni,ae.copy(he.viewport),Me.copy(he.scissor),G=he.scissorTest}else ae.copy(Le).multiplyScalar(Re).floor(),Me.copy(lt).multiplyScalar(Re).floor(),G=Te;if(zt.bindFramebuffer(36160,_t)&&Jt.drawBuffers&&Ze&&zt.drawBuffers(he,_t),zt.viewport(ae),zt.scissor(Me),zt.setScissorTest(G),yn){const On=bt.get(he.texture);ht.framebufferTexture2D(36160,36064,34069+$e,On.__webglTexture,tt)}else if(Sn){const On=bt.get(he.texture);ht.framebufferTextureLayer(36160,36064,On.__webglTexture,tt||0,$e||0)}z=-1},this.readRenderTargetPixels=function(he,$e,tt,Ze,_t,yn,Sn){if(!he||!he.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let kn=bt.get(he).__webglFramebuffer;if(he.isWebGLCubeRenderTarget&&void 0!==Sn&&(kn=kn[Sn]),kn){zt.bindFramebuffer(36160,kn);try{const On=he.texture,ni=On.format,qn=On.type;if(ni!==os&&n.convert(ni)!==ht.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Kn=qn===sc&&(en.has("EXT_color_buffer_half_float")||Jt.isWebGL2&&en.has("EXT_color_buffer_float"));if(!(qn===sl||n.convert(qn)===ht.getParameter(35738)||qn===zo&&(Jt.isWebGL2||en.has("OES_texture_float")||en.has("WEBGL_color_buffer_float"))||Kn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");$e>=0&&$e<=he.width-Ze&&tt>=0&&tt<=he.height-_t&&ht.readPixels($e,tt,Ze,_t,n.convert(ni),n.convert(qn),yn)}finally{const On=null!==j?bt.get(j).__webglFramebuffer:null;zt.bindFramebuffer(36160,On)}}},this.copyFramebufferToTexture=function(he,$e,tt=0){const Ze=Math.pow(2,-tt),_t=Math.floor($e.image.width*Ze),yn=Math.floor($e.image.height*Ze);gt.setTexture2D($e,0),ht.copyTexSubImage2D(3553,tt,0,0,he.x,he.y,_t,yn),zt.unbindTexture()},this.copyTextureToTexture=function(he,$e,tt,Ze=0){const _t=$e.image.width,yn=$e.image.height,Sn=n.convert(tt.format),kn=n.convert(tt.type);gt.setTexture2D(tt,0),ht.pixelStorei(37440,tt.flipY),ht.pixelStorei(37441,tt.premultiplyAlpha),ht.pixelStorei(3317,tt.unpackAlignment),$e.isDataTexture?ht.texSubImage2D(3553,Ze,he.x,he.y,_t,yn,Sn,kn,$e.image.data):$e.isCompressedTexture?ht.compressedTexSubImage2D(3553,Ze,he.x,he.y,$e.mipmaps[0].width,$e.mipmaps[0].height,Sn,$e.mipmaps[0].data):ht.texSubImage2D(3553,Ze,he.x,he.y,Sn,kn,$e.image),0===Ze&&tt.generateMipmaps&&ht.generateMipmap(3553),zt.unbindTexture()},this.copyTextureToTexture3D=function(he,$e,tt,Ze,_t=0){if(T.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const yn=he.max.x-he.min.x+1,Sn=he.max.y-he.min.y+1,kn=he.max.z-he.min.z+1,On=n.convert(Ze.format),ni=n.convert(Ze.type);let qn;if(Ze.isData3DTexture)gt.setTexture3D(Ze,0),qn=32879;else{if(!Ze.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");gt.setTexture2DArray(Ze,0),qn=35866}ht.pixelStorei(37440,Ze.flipY),ht.pixelStorei(37441,Ze.premultiplyAlpha),ht.pixelStorei(3317,Ze.unpackAlignment);const Kn=ht.getParameter(3314),Hi=ht.getParameter(32878),$h=ht.getParameter(3316),Yf=ht.getParameter(3315),Kf=ht.getParameter(32877),za=tt.isCompressedTexture?tt.mipmaps[0]:tt.image;ht.pixelStorei(3314,za.width),ht.pixelStorei(32878,za.height),ht.pixelStorei(3316,he.min.x),ht.pixelStorei(3315,he.min.y),ht.pixelStorei(32877,he.min.z),tt.isDataTexture||tt.isData3DTexture?ht.texSubImage3D(qn,_t,$e.x,$e.y,$e.z,yn,Sn,kn,On,ni,za.data):tt.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ht.compressedTexSubImage3D(qn,_t,$e.x,$e.y,$e.z,yn,Sn,kn,On,za.data)):ht.texSubImage3D(qn,_t,$e.x,$e.y,$e.z,yn,Sn,kn,On,ni,za),ht.pixelStorei(3314,Kn),ht.pixelStorei(32878,Hi),ht.pixelStorei(3316,$h),ht.pixelStorei(3315,Yf),ht.pixelStorei(32877,Kf),0===_t&&Ze.generateMipmaps&&ht.generateMipmap(qn),zt.unbindTexture()},this.initTexture=function(he){he.isCubeTexture?gt.setTextureCube(he,0):he.isData3DTexture?gt.setTexture3D(he,0):he.isDataArrayTexture?gt.setTexture2DArray(he,0):gt.setTexture2D(he,0),zt.unbindTexture()},this.resetState=function(){k=0,B=0,j=null,zt.reset(),r.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class Uw extends Oc{}).prototype.isWebGL1Renderer=!0;class Q0 extends Cs{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}class Nv extends Ku{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}function Ns(l,e,t){return hg(l)?new l.constructor(l.subarray(e,void 0!==t?t:l.length)):l.slice(e,t)}function Fa(l,e,t){return!l||!t&&l.constructor===e?l:"number"==typeof e.BYTES_PER_ELEMENT?new e(l):Array.prototype.slice.call(l)}function hg(l){return ArrayBuffer.isView(l)&&!(l instanceof DataView)}class Ef{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==s?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],a=t[i-1];e:{t:{let u;n:{i:if(!(e<s)){for(let h=i+2;;){if(void 0===s){if(e<a)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===h)break;if(a=s,s=t[++i],e<s)break t}u=t.length;break n}if(e>=a)break e;{const h=t[1];e<h&&(i=2,a=h);for(let p=i-2;;){if(void 0===a)return this._cachedIndex=0,this.copySampleValue_(0);if(i===p)break;if(s=a,a=t[--i-1],e>=a)break t}u=i,i=0}}for(;i<u;){const h=i+u>>>1;e<t[h]?u=h:i=h+1}if(s=t[i],a=t[i-1],void 0===a)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===s)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,s)}return this.interpolate_(i,a,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,a=e*s;for(let u=0;u!==s;++u)t[u]=i[a+u];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class mb extends Ef{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const s=this.parameterPositions;let a=e-2,u=e+1,h=s[a],p=s[u];if(void 0===h)switch(this.getSettings_().endingStart){case 2401:a=e,h=2*t-i;break;case 2402:a=s.length-2,h=t+s[a]-s[a+1];break;default:a=e,h=i}if(void 0===p)switch(this.getSettings_().endingEnd){case 2401:u=e,p=2*i-t;break;case 2402:u=1,p=i+s[1]-s[0];break;default:u=e-1,p=t}const m=.5*(i-t),v=this.valueSize;this._weightPrev=m/(t-h),this._weightNext=m/(p-i),this._offsetPrev=a*v,this._offsetNext=u*v}interpolate_(e,t,i,s){const a=this.resultBuffer,u=this.sampleValues,h=this.valueSize,p=e*h,m=p-h,v=this._offsetPrev,_=this._offsetNext,M=this._weightPrev,E=this._weightNext,A=(i-t)/(s-t),T=A*A,I=T*A,k=-M*I+2*M*T-M*A,B=(1+M)*I+(-1.5-2*M)*T+(-.5+M)*A+1,j=(-1-E)*I+(1.5+E)*T+.5*A,z=E*I-E*T;for(let te=0;te!==h;++te)a[te]=k*u[v+te]+B*u[m+te]+j*u[p+te]+z*u[_+te];return a}}class Df extends Ef{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const a=this.resultBuffer,u=this.sampleValues,h=this.valueSize,p=e*h,m=p-h,v=(i-t)/(s-t),_=1-v;for(let M=0;M!==h;++M)a[M]=u[m+M]*_+u[p+M]*v;return a}}class gb extends Ef{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class To{constructor(e,t,i,s){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Fa(t,this.TimeBufferType),this.values=Fa(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Fa(e.times,Array),values:Fa(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new gb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Df(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new mb(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let a=0,u=s-1;for(;a!==s&&i[a]<e;)++a;for(;-1!==u&&i[u]>t;)--u;if(++u,0!==a||u!==s){a>=u&&(u=Math.max(u,1),a=u-1);const h=this.getValueSize();this.times=Ns(i,a,u),this.values=Ns(this.values,a*h,u*h)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,a=i.length;0===a&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let u=null;for(let h=0;h!==a;h++){const p=i[h];if("number"==typeof p&&isNaN(p)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,p),e=!1;break}if(null!==u&&u>p){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,p,u),e=!1;break}u=p}if(void 0!==s&&hg(s))for(let h=0,p=s.length;h!==p;++h){const m=s[h];if(isNaN(m)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,m),e=!1;break}}return e}optimize(){const e=Ns(this.times),t=Ns(this.values),i=this.getValueSize(),s=2302===this.getInterpolation(),a=e.length-1;let u=1;for(let h=1;h<a;++h){let p=!1;const m=e[h];if(m!==e[h+1]&&(1!==h||m!==e[0]))if(s)p=!0;else{const _=h*i,M=_-i,E=_+i;for(let A=0;A!==i;++A){const T=t[_+A];if(T!==t[M+A]||T!==t[E+A]){p=!0;break}}}if(p){if(h!==u){e[u]=e[h];const _=h*i,M=u*i;for(let E=0;E!==i;++E)t[M+E]=t[_+E]}++u}}if(a>0){e[u]=e[a];for(let h=a*i,p=u*i,m=0;m!==i;++m)t[p+m]=t[h+m];++u}return u!==e.length?(this.times=Ns(e,0,u),this.values=Ns(t,0,u*i)):(this.times=e,this.values=t),this}clone(){const e=Ns(this.times,0),t=Ns(this.values,0),s=new(0,this.constructor)(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}To.prototype.TimeBufferType=Float32Array,To.prototype.ValueBufferType=Float32Array,To.prototype.DefaultInterpolation=2301;class to extends To{}to.prototype.ValueTypeName="bool",to.prototype.ValueBufferType=Array,to.prototype.DefaultInterpolation=2300,to.prototype.InterpolantFactoryMethodLinear=void 0,to.prototype.InterpolantFactoryMethodSmooth=void 0;(class pg extends To{}).prototype.ValueTypeName="color";(class Cf extends To{}).prototype.ValueTypeName="number";class AS extends Ef{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const a=this.resultBuffer,u=this.sampleValues,h=this.valueSize,p=(i-t)/(s-t);let m=e*h;for(let v=m+h;m!==v;m+=4)Zr.slerpFlat(a,0,u,m-h,u,m,p);return a}}class Kc extends To{InterpolantFactoryMethodLinear(e){return new AS(this.times,this.values,this.getValueSize(),e)}}Kc.prototype.ValueTypeName="quaternion",Kc.prototype.DefaultInterpolation=2301,Kc.prototype.InterpolantFactoryMethodSmooth=void 0;class ka extends To{}ka.prototype.ValueTypeName="string",ka.prototype.ValueBufferType=Array,ka.prototype.DefaultInterpolation=2300,ka.prototype.InterpolantFactoryMethodLinear=void 0,ka.prototype.InterpolantFactoryMethodSmooth=void 0;(class Tf extends To{}).prototype.ValueTypeName="vector",Error;const Pf="\\[\\]\\.:\\/",wg=new RegExp("["+Pf+"]","g"),Uh="[^"+Pf+"]",Ob="[^"+Pf.replace("\\.","")+"]",bg=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Uh)+/(WCOD+)?/.source.replace("WCOD",Ob)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Uh)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Uh)+"$"),t_=["material","materials","bones"];class n_{constructor(e,t,i){const s=i||ai.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const s=this._bindings[this._targetGroup.nCachedObjects_];void 0!==s&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,a=i.length;s!==a;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let ai=(()=>{class l{constructor(t,i,s){this.path=i,this.parsedPath=s||l.parseTrackName(i),this.node=l.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,s){return t&&t.isAnimationObjectGroup?new l.Composite(t,i,s):new l(t,i,s)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(wg,"")}static parseTrackName(t){const i=bg.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const s={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},a=s.nodeName&&s.nodeName.lastIndexOf(".");if(void 0!==a&&-1!==a){const u=s.nodeName.substring(a+1);-1!==t_.indexOf(u)&&(s.nodeName=s.nodeName.substring(0,a),s.objectName=u)}if(null===s.propertyName||0===s.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return s}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const s=t.skeleton.getBoneByName(i);if(void 0!==s)return s}if(t.children){const s=function(u){for(let h=0;h<u.length;h++){const p=u[h];if(p.name===i||p.uuid===i)return p;const m=s(p.children);if(m)return m}return null},a=s(t.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const s=this.resolvedProperty;for(let a=0,u=s.length;a!==u;++a)t[i++]=s[a]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const s=this.resolvedProperty;for(let a=0,u=s.length;a!==u;++a)s[a]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const s=this.resolvedProperty;for(let a=0,u=s.length;a!==u;++a)s[a]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const s=this.resolvedProperty;for(let a=0,u=s.length;a!==u;++a)s[a]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,s=i.objectName,a=i.propertyName;let u=i.propertyIndex;if(t||(t=l.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(s){let v=i.objectIndex;switch(s){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let _=0;_<t.length;_++)if(t[_].name===v){v=_;break}break;default:if(void 0===t[s])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[s]}if(void 0!==v){if(void 0===t[v])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[v]}}const h=t[a];if(void 0===h)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+a+" but it wasn't found.",t);let p=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?p=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(p=this.Versioning.MatrixWorldNeedsUpdate);let m=this.BindingType.Direct;if(void 0!==u){if("morphTargetInfluences"===a){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[u]&&(u=t.morphTargetDictionary[u])}m=this.BindingType.ArrayElement,this.resolvedProperty=h,this.propertyIndex=u}else void 0!==h.fromArray&&void 0!==h.toArray?(m=this.BindingType.HasFromToArray,this.resolvedProperty=h):Array.isArray(h)?(m=this.BindingType.EntireArray,this.resolvedProperty=h):this.propertyName=a;this.getValue=this.GetterByBindingType[m],this.setValue=this.SetterByBindingTypeAndVersioning[m][p]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return l.Composite=n_,l})();ai.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ai.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ai.prototype.GetterByBindingType=[ai.prototype._getValue_direct,ai.prototype._getValue_array,ai.prototype._getValue_arrayElement,ai.prototype._getValue_toArray],ai.prototype.SetterByBindingTypeAndVersioning=[[ai.prototype._setValue_direct,ai.prototype._setValue_direct_setNeedsUpdate,ai.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ai.prototype._setValue_array,ai.prototype._setValue_array_setNeedsUpdate,ai.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ai.prototype._setValue_arrayElement,ai.prototype._setValue_arrayElement_setNeedsUpdate,ai.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ai.prototype._setValue_fromArray,ai.prototype._setValue_fromArray_setNeedsUpdate,ai.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"143"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="143");var KS=U(9706),Hh=U(4782),Xi=U(4004),Ag=U(9300),io=U(2722),m_=U(3900),g_=U(262),kl=U(4482),y_=U(2733),XS=U(4351),Ig=U(8505),__=U(727);class Jb extends __.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const Gh={setInterval(l,e,...t){const{delegate:i}=Gh;return null!=i&&i.setInterval?i.setInterval(l,e,...t):setInterval(l,e,...t)},clearInterval(l){const{delegate:e}=Gh;return((null==e?void 0:e.clearInterval)||clearInterval)(l)},delegate:void 0};var ZS=U(8737),eM=U(6063);class Wh{constructor(e,t=Wh.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}Wh.now=eM.l.now;const Rg=new class Uf extends Wh{constructor(e,t=Wh.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}(class Qb extends Jb{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return Gh.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;Gh.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s,i=!1;try{this.work(e)}catch(a){i=!0,s=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ZS.P)(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}),JS=Rg;var x_=U(5403);function tM(l,e=Rg){return(0,kl.e)((t,i)=>{let s=null,a=null,u=null;const h=()=>{if(s){s.unsubscribe(),s=null;const m=a;a=null,i.next(m)}};function p(){const m=u+l,v=e.now();if(v<m)return s=this.schedule(void 0,m-v),void i.add(s);h()}t.subscribe((0,x_.x)(i,m=>{a=m,u=e.now(),s||(s=e.schedule(p,l),i.add(s))},()=>{h(),i.complete()},void 0,()=>{a=s=null}))})}var nM=U(4671);function w_(l,e=nM.y){return l=null!=l?l:iM,(0,kl.e)((t,i)=>{let s,a=!0;t.subscribe((0,x_.x)(i,u=>{const h=e(u);(a||!l(s,h))&&(a=!1,s=h,i.next(u))}))})}function iM(l,e){return l===e}var rM=U(6099),sM=U(8746),Vf=U(5698),Os=U(7579),b_=U(6451),Rr=U(9646),M_=U(515),zf=U(2076),Pg=U(5121),Pr=U(5876),Hf=U(4707),Lg=U(9751),oM=U(3532);function Gf(l=0,e,t=JS){let i=-1;return null!=e&&((0,oM.K)(e)?t=e:i=e),new Lg.y(s=>{let a=function aM(l){return l instanceof Date&&!isNaN(l)}(l)?+l-t.now():l;a<0&&(a=0);let u=0;return t.schedule(function(){s.closed||(s.next(u++),0<=i?this.schedule(void 0,i):s.complete())},a)})}function S_(l,e){if(1&l&&(D.TgZ(0,"div"),D._uU(1),D.ALo(2,"date"),D.qZA()),2&l){const t=D.oxw().ngIf;D.xp6(1),D.hij("Cached At: ",D.xi3(2,1,t.cacheTime,"yyyy-MM-dd HH:mm"),"")}}function E_(l,e){if(1&l&&(D.TgZ(0,"a",1),D._uU(1),D.qZA()),2&l){const t=D.oxw().ngIf;D.Q6J("href",t.indexUrl,D.LSH),D.xp6(1),D.Oqu(t.sourceDomain)}}function lM(l,e){if(1&l&&(D.ynx(0),D._uU(1),D.BQk()),2&l){const t=D.oxw().ngIf;D.xp6(1),D.Oqu(t.sourceDomain)}}function D_(l,e){if(1&l&&(D.ynx(0),D.TgZ(1,"a",1),D._UZ(2,"img",2),D.qZA(),D.TgZ(3,"div",3),D.YNc(4,S_,3,4,"div",0),D.TgZ(5,"div",4),D._uU(6,"Source: "),D.YNc(7,E_,2,2,"a",5),D.YNc(8,lM,2,1,"ng-container",0),D.qZA()(),D.BQk()),2&l){const t=e.ngIf,i=D.oxw();D.xp6(1),D.Q6J("href",t.sourceUrl,D.LSH),D.xp6(1),D.Udp("max-width",i.imageMaxWidth,"px")("max-height",i.imageMaxHeight,"px"),D.Q6J("src",t.thumbUrl,D.LSH),D.xp6(2),D.Q6J("ngIf",t.cacheTime),D.xp6(1),D.Udp("color",t.isSourceSecure?"blue":"red"),D.xp6(2),D.Q6J("ngIf",t.indexUrl),D.xp6(1),D.Q6J("ngIf",!t.indexUrl)}}let C_=(()=>{class l{constructor(t,i,s){this.elementRef=t,this.ngZone=i,this.http=s,this.map$=new Hf.t,this.marker$=new Hf.t,this.destroy$=new Os.x,this.cacheUrlPrefix$=new Hf.t,this.closed=new D.vpe,this.imageMaxWidth=300,this.imageMaxHeight=300,this._thumbnails=null,this.thumbnails$=new Hf.t,this._location=null}set urlPrefix(t){this.cacheUrlPrefix$.next(t)}set map(t){this.map$.next(t)}set marker(t){this.marker$.next(t)}ngOnDestroy(){this.ensureCloseWindow(!0),this.destroy$.next()}ngOnInit(){(0,Pg.a)([this.map$,this.marker$]).pipe((0,io.R)(this.destroy$)).subscribe(([i,s])=>{this.createWindow(i,s)});const t=this.thumbnails$.pipe((0,m_.w)(i=>i&&0!==i.length?Gf(0,4e3).pipe((0,Xi.U)(s=>i[s%i.length])):(0,Rr.of)(null)));this.image$=(0,Pg.a)([t,this.cacheUrlPrefix$]).pipe((0,Xi.U)(([i,s])=>{if(!i)return null;const a=i.sourceLink.match(/^http(s)?:\/\/([^/]+)/);if(!a)return(0,Dn.wb)(`URL unmatch ${i.sourceLink}`),null;const u=!!a[1],h={thumbUrl:i.sourceLink,sourceUrl:i.sourceLink,indexUrl:this._location?this._location.sourceUrl:null,sourceDomain:a[2],isSourceSecure:u};if(!i.cacheLink||!i.cacheAt)return h;const p=new Date(i.cacheAt),m=new Date;return u&&p.getTime()<m.getTime()-36e5||(h.thumbUrl=this.http.makeUncacheUrl(`${s}${i.cacheLink}`),h.cacheTime=p),h}))}set location(t){this._location=t,this._thumbnails=t?t.thumbLinks:null,this.thumbnails$.next(this._thumbnails)}ensureCloseWindow(t){!this.window||(this.window.close(),delete this.window,t&&this.closed.emit())}createWindow(t,i){this.ensureCloseWindow(),this.window=new google.maps.InfoWindow({content:this.elementRef.nativeElement}),this.window.addListener("closeclick",()=>{this.ensureCloseWindow(!0)}),this.window.open({anchor:i,map:t,shouldFocus:!1})}}return l.\u0275fac=function(t){return new(t||l)(D.Y36(D.SBq),D.Y36(D.R0b),D.Y36(Pr.O))},l.\u0275cmp=D.Xpm({type:l,selectors:[["app-camera-view"]],inputs:{urlPrefix:"urlPrefix",map:"map",marker:"marker",location:"location"},outputs:{closed:"closed"},decls:2,vars:3,consts:[[4,"ngIf"],["target","_blank",3,"href"],[3,"src"],[2,"padding","2px"],[1,""],["target","_blank",3,"href",4,"ngIf"]],template:function(t,i){1&t&&(D.YNc(0,D_,9,11,"ng-container",0),D.ALo(1,"async")),2&t&&D.Q6J("ngIf",D.lcZ(1,1,i.image$))},dependencies:[Ui.O5,Ui.Ov,Ui.uU]}),l})();function cM(l,e){if(1&l){const t=D.EpF();D.ynx(0),D.TgZ(1,"app-camera-view",2),D.NdJ("closed",function(){D.CHM(t);const s=D.oxw(2);return D.KtG(s.onCloseCameraWindow())}),D.qZA(),D.BQk()}if(2&l){const t=e.ngIf,i=D.oxw().ngIf;D.xp6(1),D.Q6J("map",i.map)("marker",i.marker)("location",i.location)("urlPrefix",t)}}function T_(l,e){if(1&l&&(D.ynx(0),D.YNc(1,cM,2,4,"ng-container",1),D.ALo(2,"async"),D.BQk()),2&l){const t=e.ngIf;D.xp6(1),D.Q6J("ngIf",D.lcZ(2,1,t.urlPrefix$))}}let uM=(()=>{class l{constructor(t,i,s){this.http=t,this.router=i,this.route=s,this.urlPrefix=Dn.NZ.DataLocationPrefix,this.destroy$=new Os.x,this.mapPersistent$=new Os.x,this.isProduction=Dn.NZ.production,this.windowResize$=new Os.x,this.boundsS2Segments$=new Os.x,this.cameraMarkers={},this.groupMarkers={},this.infoParent=null,this.apiVersion$=this.http.fetchGHJson(`${this.urlPrefix}version.json`).pipe((0,Hh.d)(1)),this.dataRepository$=this.apiVersion$.pipe((0,Xi.U)(a=>{for(const u of a.supportedIndex)if(ed()(u.semver,Dn.NZ.DataVersionRange))return u.targetPath;throw new Error("No supported version supplied")}),(0,Xi.U)(a=>({prefix:`${this.urlPrefix}${a}/`})),(0,Hh.d)(1)),this.thumbCacheRepository$=this.apiVersion$.pipe((0,Xi.U)(a=>{for(const u of a.supportedThumbs)if(ed()(u.semver,Dn.NZ.ThumbVersionRange))return u.targetPath;throw new Error("No supported version supplied")}),(0,Xi.U)(a=>({prefix:`${this.urlPrefix}${a}/`})),(0,Hh.d)(1)),this.initialMapState$=this.route.fragment.pipe((0,Xi.U)(a=>a?this.parsePersistantMapData(a):null),(0,Ag.h)(a=>null!==a)),this.mapHeight$=(0,b_.T)((0,Rr.of)(void 0),this.windowResize$).pipe((0,Xi.U)(()=>window.innerHeight))}onWindowResize(){this.windowResize$.next()}ngOnInit(){var t=this;return(0,Qh.Z)(function*(){const s=yield new KS.aN({apiKey:Dn.NZ.googleMapApiKey,version:"weekly",libraries:["places"]}).load();(0,Dn.w_)("Google API loaded",s);const a={center:{lat:Dn.NZ.MapDefaultLocation.lat,lng:Dn.NZ.MapDefaultLocation.lng},zoom:12},u=document.getElementById("toolsRoadMapMain");if(!u)throw new Error("No valid Map container element found.");const h=new s.maps.Map(u,a),p=new Q0,m=new Dr(new Mo(10,50,10),new Nv);p.add(m),h.addListener("bounds_changed",()=>{t.mapBoundsChanged(h)}),t.prepareDataStream(h),t.prepareStateStream()})()}parsePersistantMapData(t){const i=t.split(";"),s={};for(const M of i){const E=/^([^=]+)=(.*)/.exec(M);if(!E)continue;const A=decodeURIComponent(E[1]),T=decodeURIComponent(E[2]);s[A]=T}if(!("c"in s)||!("z"in s))return null;const u=/^([0-9.]+),([0-9.]+)$/.exec(s.c);if(!u)return null;const h=Number(u[1]),p=Number(u[2]),v=/^([0-9]+)$/.exec(s.z);return v?{centerLat:h,centerLng:p,zoom:Number(v[1])}:null}buildPersistantMapData(t){const i={};i.c=`${t.centerLat.toFixed(6)},${t.centerLng.toFixed(6)}`,i.z=`${t.zoom}`;const s=[];for(const a in i){const u=i[a];s.push(`${encodeURIComponent(a)}=${encodeURIComponent(u)}`)}return s.join(";")}prepareStateStream(){this.mapPersistent$.pipe((0,io.R)(this.destroy$)).subscribe(t=>{this.router.navigate([],{fragment:this.buildPersistantMapData(t)})})}mapBoundsChanged(t){const i=t.getCenter(),s=t.getZoom();if(i&&"number"==typeof s){const m=i.lat(),v=i.lng();this.mapPersistent$.next({centerLat:m,centerLng:v,zoom:s})}const a=t.getBounds();if(!a)return;const u=a.getNorthEast(),h=a.getSouthWest(),p=function fa(l,e,t,i){for(let a=15;0<a;a--){const u=pr.S2.latLngToKey(l,e,a),h=pr.S2.latLngToNeighborKeys(l,e,a),p=pr.S2.latLngToKey(t,i,a),m=pr.S2.latLngToNeighborKeys(t,i,a);if(u===p)return[new Yi(u),...h.map(v=>new Yi(v))];if(h.includes(p)||m.includes(u))return Array.from(new Set([u,...h,...m])).map(_=>new Yi(_))}return[0,1,2,3,4,5].map(a=>Yi.FromSegment([`${a}`]))}(u.lat(),u.lng(),h.lat(),h.lng());this.boundsS2Segments$.next(p)}ngOnDestroy(){this.destroy$.next()}requestNode$(t,i){const s=t.buildPath();return s in i?i[s]:this.dataRepository$.pipe((0,m_.w)(a=>this.http.fetchGHJson(`${a.prefix}${s}.json`).pipe((0,g_.K)(u=>((0,Dn.jG)(`While retrieving S2 cell ${s}`,u),this.requestNode$(t.parentSegment(),i))))),(0,Hh.d)(1))}requestCoveringNodes$(t,i,s){return this.requestNode$(t,s).pipe((0,Xi.U)(a=>[a,i]),function v_(l,e=1/0,t){return e=(e||0)<1?1/0:e,(0,kl.e)((i,s)=>(0,y_.p)(i,s,l,e,void 0,!0,t))}(([a,u])=>{if(u<=0||!Jl(a))return M_.E;const h=a;return(0,zf.D)(h.children).pipe((0,Xi.U)(p=>Yi.FromSegment(h.nodeSegments).concatSegment(p)),(0,XS.b)(p=>(0,Pg.a)([this.requestNode$(p,s),(0,Rr.of)(u-1)])))}),(0,Xi.U)(([a,u])=>a),(0,Ag.h)(a=>{if(Jl(a))return a.s2cellLevel===t.S2Level+i;if(nd(a))return!0;throw new Error("Not a supported node.")}))}requestTopSegment$(t,i=1){return this.requestCoveringNodes$(t,i,{}).pipe((0,Ig.b)(a=>(0,Dn.w_)(`Result is return on ${t}`,a)))}expireMarkers(t,i,s){const a=Object.keys(i),u=a.length;for(const p of a){if(s.includes(p))continue;const m=i[p];m.setMap(null),m.unbindAll(),delete i[p]}const h=Object.keys(i).length;(0,Dn.w_)(`${t} Marker Database size ${u} -> ${h}`)}prepareDataStream(t){this.currentZoom$=this.boundsS2Segments$.pipe((0,Xi.U)(_=>t.getZoom()),(0,Ag.h)(_=>!!_));const s=this.boundsS2Segments$.pipe(tM(1e3),w_((_,M)=>function nc(l,e){if(l.length!==e.length)return!1;for(let t=0;t<l.length;t++)if(!l[t].equals(e[t]))return!1;return!0}(_,M)),(0,Hh.d)(1)).pipe((0,m_.w)(_=>{const M=(new Date).getTime();return(0,Dn.w_)(`Prepare to request current segment ${M}`,_),(0,zf.D)(_).pipe((0,rM.z)(E=>this.requestTopSegment$(E),Dn.NZ.ThreadParallelMax),(0,sM.x)(()=>a.next()))})),a=new Os.x,u=new Os.x;let h=[];s.pipe((0,io.R)(this.destroy$)).subscribe(_=>{h.push(_)}),a.pipe((0,io.R)(this.destroy$)).subscribe(()=>{u.next(h),h=[]});const p=u.pipe((0,Xi.U)(_=>_.filter(M=>function Qa(l){return"s2cellId"in l}(M))),tM(500),(0,Hh.d)(1)),m=p.pipe((0,Xi.U)(_=>{const M=[];for(let E=0;E<_.length;E++){const A=_[E];if(!id(A))continue;const I=Yi.FromSegment(A.nodeSegments);let k=!1;for(let B=E+1;B<_.length;B++){const j=Yi.FromSegment(_[B].nodeSegments);if(I.isDescendant(j)){k=!0;break}}k||M.push(A)}return M})),v=p.pipe((0,Xi.U)(_=>_.filter(M=>nd(M))));m.pipe((0,io.R)(this.destroy$)).subscribe(_=>{(0,Dn.w_)(`New group nodes ${_.length}`);const M=[];for(const E of _){if(E.s2cellId in this.groupMarkers){M.push(E.s2cellId);continue}let A=new google.maps.LatLng({lat:E.s2cellLat,lng:E.s2cellLng});if(!t.getBounds().contains(A)){const B=Yi.FromSegment(E.nodeSegments).concatSegment(E.children[0]),j=pr.S2.keyToLatLng(B.key);A=new google.maps.LatLng({lat:j.lat,lng:j.lng})}const I=new google.maps.Marker({map:t,position:A,title:`${E.count} . Click to zoom-in`,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:"red",fillOpacity:.2,scale:Math.max(24*Math.log(E.count),32),strokeColor:"white",strokeWeight:.5}});I.set("model",E),I.addListener("click",k=>this.onClickGruopMarker(k,I,t)),M.push(E.s2cellId),this.groupMarkers[E.s2cellId]=I}this.expireMarkers("Group",this.groupMarkers,M)}),v.pipe((0,io.R)(this.destroy$)).subscribe(_=>{(0,Dn.w_)(`New camera nodes ${_.length}`);const M=[];for(const E of _)for(const A of E.members){if(A.s2cellId in this.cameraMarkers){M.push(A.s2cellId);continue}const T=new google.maps.LatLng({lat:A.lat,lng:A.lng}),I=new google.maps.Marker({map:t,position:T,title:A.title,icon:"assets/octicons+/map-device-camera.svg"});I.set("model",A),I.addListener("click",k=>this.onClickCameraMarker(k,I,t)),M.push(A.s2cellId),this.cameraMarkers[A.s2cellId]=I}this.expireMarkers("Camera",this.cameraMarkers,M)}),this.initialMapState$.pipe((0,io.R)(this.destroy$),(0,Vf.q)(1)).subscribe(_=>{t.setCenter({lat:_.centerLat,lng:_.centerLng}),t.setZoom(_.zoom)})}onClickGruopMarker(t,i,s){const a=s.getZoom();if(!a)return void(0,Dn.jG)("No zoom value now",i);s.setZoom(a+2);const u=i.getPosition();u?s.setCenter(u):(0,Dn.jG)("No position here",i)}onClickCameraMarker(t,i,s){const a=i.get("model");if(a.thumbLinks.length<1)return void(0,Dn.wb)("Unexpectedly no contents of thumbnails");const u=this.thumbCacheRepository$.pipe((0,Xi.U)(h=>h.prefix));this.infoParent={location:a,urlPrefix$:u,marker:i,map:s}}onCloseCameraWindow(){!this.infoParent||delete this.infoParent}}return l.\u0275fac=function(t){return new(t||l)(D.Y36(Pr.O),D.Y36(Mr.F0),D.Y36(Mr.gz))},l.\u0275cmp=D.Xpm({type:l,selectors:[["app-road-map"]],hostBindings:function(t,i){1&t&&D.NdJ("resize",function(){return i.onWindowResize()},!1,D.Jf7)},decls:3,vars:5,consts:[["id","toolsRoadMapMain",2,"width","100%"],[4,"ngIf"],[3,"map","marker","location","urlPrefix","closed"]],template:function(t,i){1&t&&(D.TgZ(0,"div",0),D.ALo(1,"async"),D.qZA(),D.YNc(2,T_,3,3,"ng-container",1)),2&t&&(D.Udp("height",D.lcZ(1,3,i.mapHeight$),"px"),D.xp6(2),D.Q6J("ngIf",i.infoParent))},dependencies:[Ui.O5,C_,Ui.Ov],styles:["[_nghost-%COMP%]{display:block}"]}),l})();const Ro=[{path:"Forecast",loadChildren:()=>U.e(123).then(U.bind(U,2123)).then(l=>l.ForecastModule)},{path:"",component:(()=>{class l{constructor(){}ngOnInit(){}}return l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=D.Xpm({type:l,selectors:[["app-road-top"]],decls:1,vars:0,template:function(t,i){1&t&&D._UZ(0,"app-road-map")},dependencies:[uM]}),l})()}];let A_=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=D.oAB({type:l}),l.\u0275inj=D.cJS({imports:[Mr.Bz.forRoot(Ro),da,Mr.Bz]}),l})();const Ng=["appDialogContainer"];function ia(l,e){if(1&l){const t=D.EpF();D.TgZ(0,"button",5),D.NdJ("click",function(){D.CHM(t);const s=D.oxw();return D.KtG(s.onClickOk())}),D._uU(1,"OK"),D.qZA()}}function hM(l,e){if(1&l){const t=D.EpF();D.TgZ(0,"button",5),D.NdJ("click",function(){D.CHM(t);const s=D.oxw();return D.KtG(s.onClickCancel())}),D._uU(1,"Cancel"),D.qZA()}}let QS=(()=>{class l{constructor(){this.animationState="init",this.windowResize$=new Os.x,this.isShowOk=!0,this.isShowCancel=!0,this.closed=new D.vpe,this.cancelClicked=new D.vpe,this.okClicked=new D.vpe}onWindowResize(){this.windowResize$.next()}ngOnInit(){this.winHeight$=(0,b_.T)((0,Rr.of)(void 0),this.windowResize$).pipe((0,Xi.U)(()=>document.body.clientHeight))}doCloseDialog(){this.animationState="closing",this.closed.emit()}onClickBackdrop(){this.doCloseDialog()}onClickCancel(){this.cancelClicked.emit(),this.doCloseDialog()}onClickOk(){this.okClicked.emit(),this.doCloseDialog()}}return l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=D.Xpm({type:l,selectors:[["app-dialog"]],viewQuery:function(t,i){if(1&t&&D.Gf(Ng,7,D.s_b),2&t){let s;D.iGM(s=D.CRH())&&(i.ref=s.first)}},hostBindings:function(t,i){1&t&&D.NdJ("resize",function(){return i.onWindowResize()},!1,D.Jf7)},inputs:{isShowOk:"isShowOk",isShowCancel:"isShowCancel"},decls:8,vars:8,consts:[[1,"appDialogBackdrop",3,"click"],[1,"appDialogWindow"],["appDialogContainer",""],[1,"appDialogControls"],["class","appDialogButton",3,"click",4,"ngIf"],[1,"appDialogButton",3,"click"]],template:function(t,i){1&t&&(D.TgZ(0,"div",0),D.NdJ("click",function(){return i.onClickBackdrop()}),D.ALo(1,"async"),D.qZA(),D.TgZ(2,"div",1),D._UZ(3,"div",null,2),D.TgZ(5,"div",3),D.YNc(6,ia,2,0,"button",4),D.YNc(7,hM,2,0,"button",4),D.qZA()()),2&t&&(D.Udp("height",D.lcZ(1,6,i.winHeight$),"px"),D.Q6J("@maskTrigger",i.animationState),D.xp6(2),D.Q6J("@dialogTrigger",i.animationState),D.xp6(4),D.Q6J("ngIf",i.isShowOk),D.xp6(1),D.Q6J("ngIf",i.isShowCancel))},dependencies:[Ui.O5,Ui.Ov],styles:[".appDialogBackdrop[_ngcontent-%COMP%]{position:absolute;top:0px;width:100%;background-color:#000;opacity:.5;z-index:10000}.appDialogWindow[_ngcontent-%COMP%]{position:fixed;z-index:100001;border-radius:5%;padding:20px;top:50%;left:50%;transform:translateY(-50%) translate(-50%);background-color:#fff;box-shadow:0 0 10px 10px #0003}.appDialogButton[_ngcontent-%COMP%]{padding:.7rem 1.5rem;margin:.5rem;box-shadow:0 0 10px 2px #0000001a;border-radius:5%;cursor:pointer;background-color:#5283ff;border-style:none;transition:transform .1s ease-in-out}.appDialogButton[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.appDialogControls[_ngcontent-%COMP%]{display:flex;justify-content:center}"],data:{animation:[q("maskTrigger",[je(":enter",[H({opacity:0}),X("300ms ease-in-out",H({opacity:"*"}))]),je("* => closing",[X("300ms ease-in-out",H({opacity:0}))])]),q("dialogTrigger",[je(":enter",[H({opacity:0}),X("300ms ease-in-out",H({opacity:"*"}))]),je("* => closing",[H({opacity:"*"}),X("300ms ease-in-out",H({opacity:0}))])])]}}),l})();var dM=U(7272),fM=U(5032),mM=U(9718);function Og(l,e){return e?t=>(0,dM.z)(e.pipe((0,Vf.q)(1),function pM(){return(0,kl.e)((l,e)=>{l.subscribe((0,x_.x)(e,fM.Z))})}()),t.pipe(Og(l))):(0,rM.z)((t,i)=>l(t,i).pipe((0,Vf.q)(1),(0,mM.h)(t)))}let Fg=(()=>{class l{constructor(){}ensureUnmodal(){this.modalSubscription&&(this.modalSubscription.unsubscribe(),delete this.modalSubscription)}showModal(t,i){const s=this.dialogHost.viewContainerRef;s.clear();const u=s.createComponent(QS).instance;return i&&(u.isShowCancel=!i.isHideCancel,u.isShowOk=!i.isHideOk),this.ensureUnmodal(),this.modalSubscription=u.closed.pipe(function eE(l,e=Rg){const t=Gf(l,e);return Og(()=>t)}(200)).subscribe(()=>{this.closeModal()}),u.ref.createComponent(t).instance}closeModal(){this.dialogHost.viewContainerRef.clear(),this.ensureUnmodal()}}return l.\u0275fac=function(t){return new(t||l)},l.\u0275prov=D.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),gM=(()=>{class l{constructor(t,i){this.viewContainerRef=t,this.dialog=i,this.dialog.dialogHost=this}}return l.\u0275fac=function(t){return new(t||l)(D.Y36(D.s_b),D.Y36(Fg))},l.\u0275dir=D.lG2({type:l,selectors:[["","appDialogHosting",""]]}),l})(),I_=(()=>{class l{constructor(t,i,s){this.router=t,this.renderer2=i,this.document=s,this.destroy$=new Os.x}ngOnDestroy(){this.destroy$.next()}initializeScript(){(0,Dn.eM)("Initializing Google Analytics");const t=this.renderer2.createElement("script");t.crossorigin="anonymous",t.src=`https://www.googletagmanager.com/gtag/js?id=${Dn.NZ.GA_CODE}`,t.async=!0,this.renderer2.appendChild(this.document.head,t);const i=this.renderer2.createElement("script");i.text="\nwindow.dataLayer = window.dataLayer || [];\nfunction gtag(){dataLayer.push(arguments);}\ngtag('js', new Date());\n",this.renderer2.appendChild(this.document.body,i),(0,b_.T)((0,Rr.of)(this.router.url),this.router.events.pipe((0,Ag.h)(s=>s instanceof Mr.sj&&s instanceof Mr.m2),(0,Xi.U)(s=>s.url),(0,Xi.U)(s=>s.replace(/#.*$/,"")),w_())).pipe((0,io.R)(this.destroy$)).subscribe({next:s=>this.maybeSendGtag(s),error:s=>(0,Dn.wb)("gtag subscription",s),complete:()=>(0,Dn.wb)("Never COMPLETE gtag!")})}ngOnInit(){Dn.NZ.GA_CODE&&""!==Dn.NZ.GA_CODE&&this.initializeScript()}maybeSendGtag(t){(0,Dn.eM)(`Google Analytics maybe send resource ${t}`,gtag),gtag&&((0,Dn.eM)(`Sending resource ${t} to Google Analytics`),gtag("config",Dn.NZ.GA_CODE,{page_path:t}))}}return l.\u0275fac=function(t){return new(t||l)(D.Y36(Mr.F0),D.Y36(D.Qsj),D.Y36(Ui.K0))},l.\u0275cmp=D.Xpm({type:l,selectors:[["google-analytics-loader"]],decls:0,vars:0,template:function(t,i){}}),l})();const tE=["ins"],$f=new D.OlP("AdsenseConfig");let R_=(()=>{class l{constructor(t,i){this.config=t,this.platform=i,this.adRegion="page-"+Math.floor(1e4*Math.random())+1,this.className=""}ngOnInit(){var t,i,s,a,u,h,p,m,v,_,M,E,A;const T=this.config;this.adClient=null!==(t=this.adClient)&&void 0!==t?t:T.adClient,this.adSlot=null!==(i=this.adSlot)&&void 0!==i?i:T.adSlot,this.adFormat=null!==(a=null!==(s=this.adFormat)&&void 0!==s?s:T.adFormat)&&void 0!==a?a:"auto",this.display=null!==(h=null!==(u=this.display)&&void 0!==u?u:T.display)&&void 0!==h?h:"block",this.width=null!==(p=this.width)&&void 0!==p?p:T.width,this.height=null!==(m=this.height)&&void 0!==m?m:T.height,this.layout=null!==(v=this.layout)&&void 0!==v?v:T.layout,this.layoutKey=null!==(_=this.layoutKey)&&void 0!==_?_:T.layoutKey,this.pageLevelAds=null!==(M=this.pageLevelAds)&&void 0!==M?M:T.pageLevelAds,this.adtest=null!==(E=this.adtest)&&void 0!==E?E:T.adtest,this.fullWidthResponsive=null!==(A=this.fullWidthResponsive)&&void 0!==A?A:T.fullWidthResponsive}ngOnDestroy(){const t=this.ins.nativeElement.querySelector("iframe");t&&t.contentWindow&&(t.src="about:blank",t.remove())}ngAfterViewInit(){(0,Ui.NF)(this.platform)&&this.push()}push(){const t={};if(this.pageLevelAds&&(t.google_ad_client=this.adClient,t.enable_page_level_ads=!0),window)try{(window.adsbygoogle=window.adsbygoogle||[]).push(t)}catch(i){}}}return l.\u0275fac=function(t){return new(t||l)(D.Y36($f),D.Y36(D.Lbi))},l.\u0275cmp=D.Xpm({type:l,selectors:[["ng2-adsense"],["ng-adsense"]],viewQuery:function(t,i){if(1&t&&D.Gf(tE,7,D.SBq),2&t){let s;D.iGM(s=D.CRH())&&(i.ins=s.first)}},inputs:{adClient:"adClient",adSlot:"adSlot",adFormat:"adFormat",adRegion:"adRegion",display:"display",width:"width",height:"height",layout:"layout",layoutKey:"layoutKey",pageLevelAds:"pageLevelAds",adtest:"adtest",fullWidthResponsive:"fullWidthResponsive",className:"className"},decls:2,vars:17,consts:[["ins",""]],template:function(t,i){1&t&&D._UZ(0,"ins",null,0),2&t&&(D.Gre("adsbygoogle ",i.className,""),D.Udp("display",i.display)("width",i.width,"px")("height",i.height,"px"),D.uIk("data-ad-client",i.adClient)("data-ad-slot",i.adSlot)("data-ad-format",i.adFormat)("data-ad-region",i.adRegion)("data-layout",i.layout)("data-adtest",i.adtest)("data-layout-key",i.layoutKey)("data-full-width-responsive",i.fullWidthResponsive))},encapsulation:2,changeDetection:0}),l})(),P_=(()=>{class l{static forRoot(t={}){return{ngModule:l,providers:[{provide:$f,useValue:t}]}}}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=D.oAB({type:l}),l.\u0275inj=D.cJS({imports:[Ui.ez]}),l})(),yM=(()=>{class l{constructor(){this.VERSION=Dn.NZ.VERSION,this.AppName=Dn.NZ.appName}ngOnInit(){}}return l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=D.Xpm({type:l,selectors:[["app-version"]],decls:23,vars:2,consts:[["href","https://mhayashi1120.net/terms","target","_blank"],["href","about.html","target","_blank"]],template:function(t,i){1&t&&(D.TgZ(0,"table")(1,"tr")(2,"td"),D._uU(3,"Name"),D.qZA(),D.TgZ(4,"td"),D._uU(5),D.qZA()(),D.TgZ(6,"tr")(7,"td"),D._uU(8,"Version"),D.qZA(),D.TgZ(9,"td"),D._uU(10),D.qZA()(),D.TgZ(11,"tr")(12,"td"),D._uU(13,"Terms"),D.qZA(),D.TgZ(14,"td")(15,"a",0),D._uU(16,"[Open]"),D.qZA()()(),D.TgZ(17,"tr")(18,"td"),D._uU(19,"About"),D.qZA(),D.TgZ(20,"td")(21,"a",1),D._uU(22,"[Open]"),D.qZA()()()()),2&t&&(D.xp6(5),D.Oqu(i.AppName),D.xp6(5),D.Oqu(i.VERSION))},styles:["table[_ngcontent-%COMP%]{border-spacing:20px}"]}),l})();function L_(l,e){1&l&&(D.TgZ(0,"li")(1,"a",7),D._uU(2,"Forecast"),D.qZA()())}let N_=(()=>{class l{constructor(t,i){this.http=t,this.dialog=i,this.isProduction=Dn.NZ.production,this.VERSION=Dn.NZ.VERSION,this.destroy$=new Os.x}ngOnInit(){this.version$=this.http.fetchGHJson("version.json").pipe((0,Xi.U)(t=>{const i=t;return i.releasedTime=new Date(t.releasedAt),i}))}ngOnDestroy(){this.destroy$.next()}onClickVersion(){this.dialog.showModal(yM,{isHideCancel:!0})}}return l.\u0275fac=function(t){return new(t||l)(D.Y36(Pr.O),D.Y36(Fg))},l.\u0275cmp=D.Xpm({type:l,selectors:[["app-header"]],decls:19,vars:2,consts:[[1,"appHeader"],[1,"appVersion",3,"click"],["href","/"],["routerLink",""],[4,"ngIf"],["href","https://mhayashi1120.net/privacypolicy","target","_blank"],["href","https://mhayashi1120.net/terms","target","_blank"],["routerLink","Forecast/index.htm"]],template:function(t,i){1&t&&(D.TgZ(0,"div",0)(1,"header")(2,"ul")(3,"li")(4,"span",1),D.NdJ("click",function(){return i.onClickVersion()}),D._uU(5),D.qZA()(),D.TgZ(6,"li")(7,"a",2),D._uU(8,"Top"),D.qZA()(),D.TgZ(9,"li")(10,"a",3),D._uU(11,"Map"),D.qZA()(),D.YNc(12,L_,3,0,"li",4),D.TgZ(13,"li")(14,"a",5),D._uU(15,"Policy"),D.qZA()(),D.TgZ(16,"li")(17,"a",6),D._uU(18,"Terms"),D.qZA()()()()()),2&t&&(D.xp6(5),D.Oqu(i.VERSION),D.xp6(7),D.Q6J("ngIf",!i.isProduction))},dependencies:[Ui.O5,Mr.yS],styles:[".appVersion[_ngcontent-%COMP%]{color:#ddd;cursor:pointer}div.appHeader[_ngcontent-%COMP%]{display:block;position:sticky;top:0px;width:100%;height:3rem;background:#5283ff;box-shadow:0 5px 5px #0000001a;z-index:10000}ul[_ngcontent-%COMP%]{margin:0;padding:.5rem}li[_ngcontent-%COMP%]{display:inline;margin:.5rem}a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{color:#fff}"]}),l})();function jf(l,e){1&l&&(D.TgZ(0,"div"),D._UZ(1,"ng-adsense",2),D.qZA()),2&l&&(D.Udp("width",100,"%"),D.xp6(1),D.Q6J("height",100))}let qf=(()=>{class l{constructor(t){this.router=t,this.isAdActive=Dn.NZ.production,this.isDeveloper=!Dn.NZ.production,this.destroy$=new Os.x}ngOnInit(){}ngOnDestroy(){this.destroy$.next()}}return l.\u0275fac=function(t){return new(t||l)(D.Y36(Mr.F0))},l.\u0275cmp=D.Xpm({type:l,selectors:[["app-root"]],decls:5,vars:1,consts:[[3,"width",4,"ngIf"],["appDialogHosting",""],["className","ad-responsive",3,"height"]],template:function(t,i){1&t&&(D._UZ(0,"app-header")(1,"router-outlet"),D.YNc(2,jf,2,3,"div",0),D._UZ(3,"google-analytics-loader"),D.GkF(4,1)),2&t&&(D.xp6(2),D.Q6J("ngIf",i.isAdActive))},dependencies:[Ui.O5,gM,I_,R_,Mr.lC,N_]}),l})(),O_=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=D.oAB({type:l}),l.\u0275inj=D.cJS({imports:[Ui.ez]}),l})(),vM=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=D.oAB({type:l}),l.\u0275inj=D.cJS({imports:[Ui.ez]}),l})(),F_=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=D.oAB({type:l,bootstrap:[qf]}),l.\u0275inj=D.cJS({imports:[R.b2,Za,Zl.JF,O_,vM,P_.forRoot(Dn.NZ.adsenseConfig),A_,da]}),l})();Dn.NZ.production&&(0,D.G48)(),R.q6().bootstrapModule(F_).catch(l=>console.error(l))},5682:function(pt,Ne){var D;void 0!==(D=function(){"use strict";function we(Z,V,oe){this.low=0|Z,this.high=0|V,this.unsigned=!!oe}function fe(Z){return!0===(Z&&Z.__isLong__)}Object.defineProperty(we.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),we.isLong=fe;var se={},q={};function X(Z,V){var oe,_e,He;return V?(He=0<=(Z>>>=0)&&Z<256)&&(_e=q[Z])?_e:(oe=$(Z,(0|Z)<0?-1:0,!0),He&&(q[Z]=oe),oe):(He=-128<=(Z|=0)&&Z<128)&&(_e=se[Z])?_e:(oe=$(Z,Z<0?-1:0,!1),He&&(se[Z]=oe),oe)}function ee(Z,V){if(isNaN(Z)||!isFinite(Z))return V?ze:Je;if(V){if(Z<0)return ze;if(Z>=Mt)return st}else{if(Z<=-De)return et;if(Z+1>=De)return dt}return Z<0?ee(-Z,V).neg():$(Z%ke|0,Z/ke|0,V)}function $(Z,V,oe){return new we(Z,V,oe)}we.fromInt=X,we.fromNumber=ee,we.fromBits=$;var H=Math.pow;function Q(Z,V,oe){if(0===Z.length)throw Error("empty string");if("NaN"===Z||"Infinity"===Z||"+Infinity"===Z||"-Infinity"===Z)return Je;if("number"==typeof V?(oe=V,V=!1):V=!!V,(oe=oe||10)<2||36<oe)throw RangeError("radix");var _e;if((_e=Z.indexOf("-"))>0)throw Error("interior hyphen");if(0===_e)return Q(Z.substring(1),V,oe).neg();for(var He=ee(H(oe,8)),Fe=Je,xt=0;xt<Z.length;xt+=8){var Ut=Math.min(8,Z.length-xt),Rt=parseInt(Z.substring(xt,xt+Ut),oe);if(Ut<8){var Ke=ee(H(oe,Ut));Fe=Fe.mul(Ke).add(ee(Rt))}else Fe=(Fe=Fe.mul(He)).add(ee(Rt))}return Fe.unsigned=V,Fe}function ie(Z){return Z instanceof we?Z:"number"==typeof Z?ee(Z):"string"==typeof Z?Q(Z):$(Z.low,Z.high,Z.unsigned)}we.fromString=Q,we.fromValue=ie;var ke=4294967296,Mt=ke*ke,De=Mt/2,yt=X(1<<24),Je=X(0);we.ZERO=Je;var ze=X(0,!0);we.UZERO=ze;var le=X(1);we.ONE=le;var pe=X(1,!0);we.UONE=pe;var Ge=X(-1);we.NEG_ONE=Ge;var dt=$(-1,2147483647,!1);we.MAX_VALUE=dt;var st=$(-1,-1,!0);we.MAX_UNSIGNED_VALUE=st;var et=$(0,-2147483648,!1);we.MIN_VALUE=et;var Pe=we.prototype;return Pe.toInt=function(){return this.unsigned?this.low>>>0:this.low},Pe.toNumber=function(){return this.unsigned?(this.high>>>0)*ke+(this.low>>>0):this.high*ke+(this.low>>>0)},Pe.toString=function(V){if((V=V||10)<2||36<V)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(et)){var oe=ee(V),_e=this.div(oe),He=_e.mul(oe).sub(this);return _e.toString(V)+He.toInt().toString(V)}return"-"+this.neg().toString(V)}for(var Fe=ee(H(V,6),this.unsigned),xt=this,Ut="";;){var Rt=xt.div(Fe),Yt=(xt.sub(Rt.mul(Fe)).toInt()>>>0).toString(V);if((xt=Rt).isZero())return Yt+Ut;for(;Yt.length<6;)Yt="0"+Yt;Ut=""+Yt+Ut}},Pe.getHighBits=function(){return this.high},Pe.getHighBitsUnsigned=function(){return this.high>>>0},Pe.getLowBits=function(){return this.low},Pe.getLowBitsUnsigned=function(){return this.low>>>0},Pe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(et)?64:this.neg().getNumBitsAbs();for(var V=0!=this.high?this.high:this.low,oe=31;oe>0&&0==(V&1<<oe);oe--);return 0!=this.high?oe+33:oe+1},Pe.isZero=function(){return 0===this.high&&0===this.low},Pe.isNegative=function(){return!this.unsigned&&this.high<0},Pe.isPositive=function(){return this.unsigned||this.high>=0},Pe.isOdd=function(){return 1==(1&this.low)},Pe.isEven=function(){return 0==(1&this.low)},Pe.equals=function(V){return fe(V)||(V=ie(V)),(this.unsigned===V.unsigned||this.high>>>31!=1||V.high>>>31!=1)&&this.high===V.high&&this.low===V.low},Pe.eq=Pe.equals,Pe.notEquals=function(V){return!this.eq(V)},Pe.neq=Pe.notEquals,Pe.lessThan=function(V){return this.comp(V)<0},Pe.lt=Pe.lessThan,Pe.lessThanOrEqual=function(V){return this.comp(V)<=0},Pe.lte=Pe.lessThanOrEqual,Pe.greaterThan=function(V){return this.comp(V)>0},Pe.gt=Pe.greaterThan,Pe.greaterThanOrEqual=function(V){return this.comp(V)>=0},Pe.gte=Pe.greaterThanOrEqual,Pe.compare=function(V){if(fe(V)||(V=ie(V)),this.eq(V))return 0;var oe=this.isNegative(),_e=V.isNegative();return oe&&!_e?-1:!oe&&_e?1:this.unsigned?V.high>>>0>this.high>>>0||V.high===this.high&&V.low>>>0>this.low>>>0?-1:1:this.sub(V).isNegative()?-1:1},Pe.comp=Pe.compare,Pe.negate=function(){return!this.unsigned&&this.eq(et)?et:this.not().add(le)},Pe.neg=Pe.negate,Pe.add=function(V){fe(V)||(V=ie(V));var Yt=0,jt=0,ln=0,Kt=0;return ln+=(Kt+=(65535&this.low)+(65535&V.low))>>>16,jt+=(ln+=(this.low>>>16)+(V.low>>>16))>>>16,Yt+=(jt+=(65535&this.high)+(65535&V.high))>>>16,Yt+=(this.high>>>16)+(V.high>>>16),$((ln&=65535)<<16|(Kt&=65535),(Yt&=65535)<<16|(jt&=65535),this.unsigned)},Pe.subtract=function(V){return fe(V)||(V=ie(V)),this.add(V.neg())},Pe.sub=Pe.subtract,Pe.multiply=function(V){if(this.isZero()||(fe(V)||(V=ie(V)),V.isZero()))return Je;if(this.eq(et))return V.isOdd()?et:Je;if(V.eq(et))return this.isOdd()?et:Je;if(this.isNegative())return V.isNegative()?this.neg().mul(V.neg()):this.neg().mul(V).neg();if(V.isNegative())return this.mul(V.neg()).neg();if(this.lt(yt)&&V.lt(yt))return ee(this.toNumber()*V.toNumber(),this.unsigned);var _e=65535&this.high,He=this.low>>>16,Fe=65535&this.low,Ut=65535&V.high,Rt=V.low>>>16,Ke=65535&V.low,Yt=0,jt=0,ln=0,Kt=0;return ln+=(Kt+=Fe*Ke)>>>16,jt+=(ln+=He*Ke)>>>16,ln&=65535,jt+=(ln+=Fe*Rt)>>>16,Yt+=(jt+=_e*Ke)>>>16,jt&=65535,Yt+=(jt+=He*Rt)>>>16,jt&=65535,Yt+=(jt+=Fe*Ut)>>>16,Yt+=(this.high>>>16)*Ke+_e*Rt+He*Ut+Fe*(V.high>>>16),$((ln&=65535)<<16|(Kt&=65535),(Yt&=65535)<<16|(jt&=65535),this.unsigned)},Pe.mul=Pe.multiply,Pe.divide=function(V){if(fe(V)||(V=ie(V)),V.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?ze:Je;var oe,_e,He;if(this.unsigned){if(V.unsigned||(V=V.toUnsigned()),V.gt(this))return ze;if(V.gt(this.shru(1)))return pe;He=ze}else{if(this.eq(et))return V.eq(le)||V.eq(Ge)?et:V.eq(et)?le:(oe=this.shr(1).div(V).shl(1)).eq(Je)?V.isNegative()?le:Ge:(_e=this.sub(V.mul(oe)),He=oe.add(_e.div(V)));if(V.eq(et))return this.unsigned?ze:Je;if(this.isNegative())return V.isNegative()?this.neg().div(V.neg()):this.neg().div(V).neg();if(V.isNegative())return this.div(V.neg()).neg();He=Je}for(_e=this;_e.gte(V);){oe=Math.max(1,Math.floor(_e.toNumber()/V.toNumber()));for(var xt=Math.ceil(Math.log(oe)/Math.LN2),Ut=xt<=48?1:H(2,xt-48),Rt=ee(oe),Ke=Rt.mul(V);Ke.isNegative()||Ke.gt(_e);)Ke=(Rt=ee(oe-=Ut,this.unsigned)).mul(V);Rt.isZero()&&(Rt=le),He=He.add(Rt),_e=_e.sub(Ke)}return He},Pe.div=Pe.divide,Pe.modulo=function(V){return fe(V)||(V=ie(V)),this.sub(this.div(V).mul(V))},Pe.mod=Pe.modulo,Pe.not=function(){return $(~this.low,~this.high,this.unsigned)},Pe.and=function(V){return fe(V)||(V=ie(V)),$(this.low&V.low,this.high&V.high,this.unsigned)},Pe.or=function(V){return fe(V)||(V=ie(V)),$(this.low|V.low,this.high|V.high,this.unsigned)},Pe.xor=function(V){return fe(V)||(V=ie(V)),$(this.low^V.low,this.high^V.high,this.unsigned)},Pe.shiftLeft=function(V){return fe(V)&&(V=V.toInt()),0==(V&=63)?this:V<32?$(this.low<<V,this.high<<V|this.low>>>32-V,this.unsigned):$(0,this.low<<V-32,this.unsigned)},Pe.shl=Pe.shiftLeft,Pe.shiftRight=function(V){return fe(V)&&(V=V.toInt()),0==(V&=63)?this:V<32?$(this.low>>>V|this.high<<32-V,this.high>>V,this.unsigned):$(this.high>>V-32,this.high>=0?0:-1,this.unsigned)},Pe.shr=Pe.shiftRight,Pe.shiftRightUnsigned=function(V){if(fe(V)&&(V=V.toInt()),0==(V&=63))return this;var oe=this.high;return V<32?$(this.low>>>V|oe<<32-V,oe>>>V,this.unsigned):$(32===V?oe:oe>>>V-32,0,this.unsigned)},Pe.shru=Pe.shiftRightUnsigned,Pe.toSigned=function(){return this.unsigned?$(this.low,this.high,!1):this},Pe.toUnsigned=function(){return this.unsigned?this:$(this.low,this.high,!0)},Pe.toBytes=function(Z){return Z?this.toBytesLE():this.toBytesBE()},Pe.toBytesLE=function(){var Z=this.high,V=this.low;return[255&V,V>>>8&255,V>>>16&255,V>>>24&255,255&Z,Z>>>8&255,Z>>>16&255,Z>>>24&255]},Pe.toBytesBE=function(){var Z=this.high,V=this.low;return[Z>>>24&255,Z>>>16&255,Z>>>8&255,255&Z,V>>>24&255,V>>>16&255,V>>>8&255,255&V]},we}.apply(Ne,[]))&&(pt.exports=D)},7073:(pt,Ne,U)=>{"use strict";const R=U(7245),D=Symbol("max"),we=Symbol("length"),fe=Symbol("lengthCalculator"),se=Symbol("allowStale"),q=Symbol("maxAge"),X=Symbol("dispose"),ee=Symbol("noDisposeOnSet"),$=Symbol("lruList"),H=Symbol("cache"),Q=Symbol("updateAgeOnGet"),ie=()=>1,qe=(ze,le,pe)=>{const Ge=ze[H].get(le);if(Ge){const dt=Ge.value;if(ke(ze,dt)){if(De(ze,Ge),!ze[se])return}else pe&&(ze[Q]&&(Ge.value.now=Date.now()),ze[$].unshiftNode(Ge));return dt.value}},ke=(ze,le)=>{if(!le||!le.maxAge&&!ze[q])return!1;const pe=Date.now()-le.now;return le.maxAge?pe>le.maxAge:ze[q]&&pe>ze[q]},Mt=ze=>{if(ze[we]>ze[D])for(let le=ze[$].tail;ze[we]>ze[D]&&null!==le;){const pe=le.prev;De(ze,le),le=pe}},De=(ze,le)=>{if(le){const pe=le.value;ze[X]&&ze[X](pe.key,pe.value),ze[we]-=pe.length,ze[H].delete(pe.key),ze[$].removeNode(le)}};class yt{constructor(le,pe,Ge,dt,st){this.key=le,this.value=pe,this.length=Ge,this.now=dt,this.maxAge=st||0}}const Je=(ze,le,pe,Ge)=>{let dt=pe.value;ke(ze,dt)&&(De(ze,pe),ze[se]||(dt=void 0)),dt&&le.call(Ge,dt.value,dt.key,ze)};pt.exports=class je{constructor(le){if("number"==typeof le&&(le={max:le}),le||(le={}),le.max&&("number"!=typeof le.max||le.max<0))throw new TypeError("max must be a non-negative number");this[D]=le.max||1/0;const Ge=le.length||ie;if(this[fe]="function"!=typeof Ge?ie:Ge,this[se]=le.stale||!1,le.maxAge&&"number"!=typeof le.maxAge)throw new TypeError("maxAge must be a number");this[q]=le.maxAge||0,this[X]=le.dispose,this[ee]=le.noDisposeOnSet||!1,this[Q]=le.updateAgeOnGet||!1,this.reset()}set max(le){if("number"!=typeof le||le<0)throw new TypeError("max must be a non-negative number");this[D]=le||1/0,Mt(this)}get max(){return this[D]}set allowStale(le){this[se]=!!le}get allowStale(){return this[se]}set maxAge(le){if("number"!=typeof le)throw new TypeError("maxAge must be a non-negative number");this[q]=le,Mt(this)}get maxAge(){return this[q]}set lengthCalculator(le){"function"!=typeof le&&(le=ie),le!==this[fe]&&(this[fe]=le,this[we]=0,this[$].forEach(pe=>{pe.length=this[fe](pe.value,pe.key),this[we]+=pe.length})),Mt(this)}get lengthCalculator(){return this[fe]}get length(){return this[we]}get itemCount(){return this[$].length}rforEach(le,pe){pe=pe||this;for(let Ge=this[$].tail;null!==Ge;){const dt=Ge.prev;Je(this,le,Ge,pe),Ge=dt}}forEach(le,pe){pe=pe||this;for(let Ge=this[$].head;null!==Ge;){const dt=Ge.next;Je(this,le,Ge,pe),Ge=dt}}keys(){return this[$].toArray().map(le=>le.key)}values(){return this[$].toArray().map(le=>le.value)}reset(){this[X]&&this[$]&&this[$].length&&this[$].forEach(le=>this[X](le.key,le.value)),this[H]=new Map,this[$]=new R,this[we]=0}dump(){return this[$].map(le=>!ke(this,le)&&{k:le.key,v:le.value,e:le.now+(le.maxAge||0)}).toArray().filter(le=>le)}dumpLru(){return this[$]}set(le,pe,Ge){if((Ge=Ge||this[q])&&"number"!=typeof Ge)throw new TypeError("maxAge must be a number");const dt=Ge?Date.now():0,st=this[fe](pe,le);if(this[H].has(le)){if(st>this[D])return De(this,this[H].get(le)),!1;const Z=this[H].get(le).value;return this[X]&&(this[ee]||this[X](le,Z.value)),Z.now=dt,Z.maxAge=Ge,Z.value=pe,this[we]+=st-Z.length,Z.length=st,this.get(le),Mt(this),!0}const et=new yt(le,pe,st,dt,Ge);return et.length>this[D]?(this[X]&&this[X](le,pe),!1):(this[we]+=et.length,this[$].unshift(et),this[H].set(le,this[$].head),Mt(this),!0)}has(le){if(!this[H].has(le))return!1;const pe=this[H].get(le).value;return!ke(this,pe)}get(le){return qe(this,le,!0)}peek(le){return qe(this,le,!1)}pop(){const le=this[$].tail;return le?(De(this,le),le.value):null}del(le){De(this,this[H].get(le))}load(le){this.reset();const pe=Date.now();for(let Ge=le.length-1;Ge>=0;Ge--){const dt=le[Ge],st=dt.e||0;if(0===st)this.set(dt.k,dt.v);else{const et=st-pe;et>0&&this.set(dt.k,dt.v,et)}}}prune(){this[H].forEach((le,pe)=>qe(this,pe,!1))}}},2858:(pt,Ne)=>{"use strict";var U=Object.prototype.hasOwnProperty;function D(q){try{return decodeURIComponent(q.replace(/\+/g," "))}catch(X){return null}}function we(q){try{return encodeURIComponent(q)}catch(X){return null}}Ne.stringify=function se(q,X){X=X||"";var $,H,ee=[];for(H in"string"!=typeof X&&(X="?"),q)if(U.call(q,H)){if(!($=q[H])&&(null==$||isNaN($))&&($=""),H=we(H),$=we($),null===H||null===$)continue;ee.push(H+"="+$)}return ee.length?X+ee.join("&"):""},Ne.parse=function fe(q){for(var $,X=/([^=?#&]+)=?([^&]*)/g,ee={};$=X.exec(q);){var H=D($[1]),Q=D($[2]);null===H||null===Q||H in ee||(ee[H]=Q)}return ee}},8237:pt=>{"use strict";pt.exports=function(U,R){if(R=R.split(":")[0],!(U=+U))return!1;switch(R){case"http":case"ws":return 80!==U;case"https":case"wss":return 443!==U;case"ftp":return 21!==U;case"gopher":return 70!==U;case"file":return!1}return 0!==U}},9751:(pt,Ne,U)=>{"use strict";U.d(Ne,{y:()=>ee});var R=U(930),D=U(727),we=U(8822),fe=U(9635),se=U(2416),q=U(576),X=U(2806);let ee=(()=>{class ie{constructor(qe){qe&&(this._subscribe=qe)}lift(qe){const ke=new ie;return ke.source=this,ke.operator=qe,ke}subscribe(qe,ke,Mt){const De=function Q(ie){return ie&&ie instanceof R.Lv||function H(ie){return ie&&(0,q.m)(ie.next)&&(0,q.m)(ie.error)&&(0,q.m)(ie.complete)}(ie)&&(0,D.Nn)(ie)}(qe)?qe:new R.Hp(qe,ke,Mt);return(0,X.x)(()=>{const{operator:yt,source:Je}=this;De.add(yt?yt.call(De,Je):Je?this._subscribe(De):this._trySubscribe(De))}),De}_trySubscribe(qe){try{return this._subscribe(qe)}catch(ke){qe.error(ke)}}forEach(qe,ke){return new(ke=$(ke))((Mt,De)=>{const yt=new R.Hp({next:Je=>{try{qe(Je)}catch(ze){De(ze),yt.unsubscribe()}},error:De,complete:Mt});this.subscribe(yt)})}_subscribe(qe){var ke;return null===(ke=this.source)||void 0===ke?void 0:ke.subscribe(qe)}[we.L](){return this}pipe(...qe){return(0,fe.U)(qe)(this)}toPromise(qe){return new(qe=$(qe))((ke,Mt)=>{let De;this.subscribe(yt=>De=yt,yt=>Mt(yt),()=>ke(De))})}}return ie.create=je=>new ie(je),ie})();function $(ie){var je;return null!==(je=null!=ie?ie:se.v.Promise)&&void 0!==je?je:Promise}},4707:(pt,Ne,U)=>{"use strict";U.d(Ne,{t:()=>we});var R=U(7579),D=U(6063);class we extends R.x{constructor(se=1/0,q=1/0,X=D.l){super(),this._bufferSize=se,this._windowTime=q,this._timestampProvider=X,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=q===1/0,this._bufferSize=Math.max(1,se),this._windowTime=Math.max(1,q)}next(se){const{isStopped:q,_buffer:X,_infiniteTimeWindow:ee,_timestampProvider:$,_windowTime:H}=this;q||(X.push(se),!ee&&X.push($.now()+H)),this._trimBuffer(),super.next(se)}_subscribe(se){this._throwIfClosed(),this._trimBuffer();const q=this._innerSubscribe(se),{_infiniteTimeWindow:X,_buffer:ee}=this,$=ee.slice();for(let H=0;H<$.length&&!se.closed;H+=X?1:2)se.next($[H]);return this._checkFinalizedStatuses(se),q}_trimBuffer(){const{_bufferSize:se,_timestampProvider:q,_buffer:X,_infiniteTimeWindow:ee}=this,$=(ee?1:2)*se;if(se<1/0&&$<X.length&&X.splice(0,X.length-$),!ee){const H=q.now();let Q=0;for(let ie=1;ie<X.length&&X[ie]<=H;ie+=2)Q=ie;Q&&X.splice(0,Q+1)}}}},7579:(pt,Ne,U)=>{"use strict";U.d(Ne,{x:()=>X});var R=U(9751),D=U(727);const fe=(0,U(3888).d)($=>function(){$(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=U(8737),q=U(2806);let X=(()=>{class $ extends R.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Q){const ie=new ee(this,this);return ie.operator=Q,ie}_throwIfClosed(){if(this.closed)throw new fe}next(Q){(0,q.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(Q)}})}error(Q){(0,q.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Q;const{observers:ie}=this;for(;ie.length;)ie.shift().error(Q)}})}complete(){(0,q.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Q}=this;for(;Q.length;)Q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Q;return(null===(Q=this.observers)||void 0===Q?void 0:Q.length)>0}_trySubscribe(Q){return this._throwIfClosed(),super._trySubscribe(Q)}_subscribe(Q){return this._throwIfClosed(),this._checkFinalizedStatuses(Q),this._innerSubscribe(Q)}_innerSubscribe(Q){const{hasError:ie,isStopped:je,observers:qe}=this;return ie||je?D.Lc:(this.currentObservers=null,qe.push(Q),new D.w0(()=>{this.currentObservers=null,(0,se.P)(qe,Q)}))}_checkFinalizedStatuses(Q){const{hasError:ie,thrownError:je,isStopped:qe}=this;ie?Q.error(je):qe&&Q.complete()}asObservable(){const Q=new R.y;return Q.source=this,Q}}return $.create=(H,Q)=>new ee(H,Q),$})();class ee extends X{constructor(H,Q){super(),this.destination=H,this.source=Q}next(H){var Q,ie;null===(ie=null===(Q=this.destination)||void 0===Q?void 0:Q.next)||void 0===ie||ie.call(Q,H)}error(H){var Q,ie;null===(ie=null===(Q=this.destination)||void 0===Q?void 0:Q.error)||void 0===ie||ie.call(Q,H)}complete(){var H,Q;null===(Q=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===Q||Q.call(H)}_subscribe(H){var Q,ie;return null!==(ie=null===(Q=this.source)||void 0===Q?void 0:Q.subscribe(H))&&void 0!==ie?ie:D.Lc}}},930:(pt,Ne,U)=>{"use strict";U.d(Ne,{Hp:()=>Mt,Lv:()=>ie});var R=U(576),D=U(727),we=U(2416),fe=U(7849),se=U(5032);const q=$("C",void 0,void 0);function $(le,pe,Ge){return{kind:le,value:pe,error:Ge}}var H=U(3410),Q=U(2806);class ie extends D.w0{constructor(pe){super(),this.isStopped=!1,pe?(this.destination=pe,(0,D.Nn)(pe)&&pe.add(this)):this.destination=ze}static create(pe,Ge,dt){return new Mt(pe,Ge,dt)}next(pe){this.isStopped?Je(function ee(le){return $("N",le,void 0)}(pe),this):this._next(pe)}error(pe){this.isStopped?Je(function X(le){return $("E",void 0,le)}(pe),this):(this.isStopped=!0,this._error(pe))}complete(){this.isStopped?Je(q,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(pe){this.destination.next(pe)}_error(pe){try{this.destination.error(pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function qe(le,pe){return je.call(le,pe)}class ke{constructor(pe){this.partialObserver=pe}next(pe){const{partialObserver:Ge}=this;if(Ge.next)try{Ge.next(pe)}catch(dt){De(dt)}}error(pe){const{partialObserver:Ge}=this;if(Ge.error)try{Ge.error(pe)}catch(dt){De(dt)}else De(pe)}complete(){const{partialObserver:pe}=this;if(pe.complete)try{pe.complete()}catch(Ge){De(Ge)}}}class Mt extends ie{constructor(pe,Ge,dt){let st;if(super(),(0,R.m)(pe)||!pe)st={next:null!=pe?pe:void 0,error:null!=Ge?Ge:void 0,complete:null!=dt?dt:void 0};else{let et;this&&we.v.useDeprecatedNextContext?(et=Object.create(pe),et.unsubscribe=()=>this.unsubscribe(),st={next:pe.next&&qe(pe.next,et),error:pe.error&&qe(pe.error,et),complete:pe.complete&&qe(pe.complete,et)}):st=pe}this.destination=new ke(st)}}function De(le){we.v.useDeprecatedSynchronousErrorHandling?(0,Q.O)(le):(0,fe.h)(le)}function Je(le,pe){const{onStoppedNotification:Ge}=we.v;Ge&&H.z.setTimeout(()=>Ge(le,pe))}const ze={closed:!0,next:se.Z,error:function yt(le){throw le},complete:se.Z}},727:(pt,Ne,U)=>{"use strict";U.d(Ne,{Lc:()=>q,w0:()=>se,Nn:()=>X});var R=U(576);const we=(0,U(3888).d)($=>function(Q){$(this),this.message=Q?`${Q.length} errors occurred during unsubscription:\n${Q.map((ie,je)=>`${je+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Q});var fe=U(8737);class se{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:Q}=this;if(Q)if(this._parentage=null,Array.isArray(Q))for(const qe of Q)qe.remove(this);else Q.remove(this);const{initialTeardown:ie}=this;if((0,R.m)(ie))try{ie()}catch(qe){H=qe instanceof we?qe.errors:[qe]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const qe of je)try{ee(qe)}catch(ke){H=null!=H?H:[],ke instanceof we?H=[...H,...ke.errors]:H.push(ke)}}if(H)throw new we(H)}}add(H){var Q;if(H&&H!==this)if(this.closed)ee(H);else{if(H instanceof se){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(Q=this._finalizers)&&void 0!==Q?Q:[]).push(H)}}_hasParent(H){const{_parentage:Q}=this;return Q===H||Array.isArray(Q)&&Q.includes(H)}_addParent(H){const{_parentage:Q}=this;this._parentage=Array.isArray(Q)?(Q.push(H),Q):Q?[Q,H]:H}_removeParent(H){const{_parentage:Q}=this;Q===H?this._parentage=null:Array.isArray(Q)&&(0,fe.P)(Q,H)}remove(H){const{_finalizers:Q}=this;Q&&(0,fe.P)(Q,H),H instanceof se&&H._removeParent(this)}}se.EMPTY=(()=>{const $=new se;return $.closed=!0,$})();const q=se.EMPTY;function X($){return $ instanceof se||$&&"closed"in $&&(0,R.m)($.remove)&&(0,R.m)($.add)&&(0,R.m)($.unsubscribe)}function ee($){(0,R.m)($)?$():$.unsubscribe()}},2416:(pt,Ne,U)=>{"use strict";U.d(Ne,{v:()=>R});const R={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5121:(pt,Ne,U)=>{"use strict";U.d(Ne,{a:()=>yt});var R=U(9751);const{isArray:D}=Array,{getPrototypeOf:we,prototype:fe,keys:se}=Object;var ee=U(2076),$=U(4671),H=U(4004);const{isArray:Q}=Array;var qe=U(3269),Mt=U(5403),De=U(9672);function yt(...le){const pe=(0,qe.yG)(le),Ge=(0,qe.jO)(le),{args:dt,keys:st}=function q(le){if(1===le.length){const pe=le[0];if(D(pe))return{args:pe,keys:null};if(function X(le){return le&&"object"==typeof le&&we(le)===fe}(pe)){const Ge=se(pe);return{args:Ge.map(dt=>pe[dt]),keys:Ge}}}return{args:le,keys:null}}(le);if(0===dt.length)return(0,ee.D)([],pe);const et=new R.y(function Je(le,pe,Ge=$.y){return dt=>{ze(pe,()=>{const{length:st}=le,et=new Array(st);let Pe=st,Z=st;for(let V=0;V<st;V++)ze(pe,()=>{const oe=(0,ee.D)(le[V],pe);let _e=!1;oe.subscribe((0,Mt.x)(dt,He=>{et[V]=He,_e||(_e=!0,Z--),Z||dt.next(Ge(et.slice()))},()=>{--Pe||dt.complete()}))},dt)},dt)}}(dt,pe,st?Pe=>function ke(le,pe){return le.reduce((Ge,dt,st)=>(Ge[dt]=pe[st],Ge),{})}(st,Pe):$.y));return Ge?et.pipe(function je(le){return(0,H.U)(pe=>function ie(le,pe){return Q(pe)?le(...pe):le(pe)}(le,pe))}(Ge)):et}function ze(le,pe,Ge){le?(0,De.f)(Ge,le,pe):pe()}},7272:(pt,Ne,U)=>{"use strict";U.d(Ne,{z:()=>se});var R=U(8189),we=U(3269),fe=U(2076);function se(...q){return function D(){return(0,R.J)(1)}()((0,fe.D)(q,(0,we.yG)(q)))}},515:(pt,Ne,U)=>{"use strict";U.d(Ne,{E:()=>D});const D=new(U(9751).y)(se=>se.complete())},2076:(pt,Ne,U)=>{"use strict";U.d(Ne,{D:()=>dt});var R=U(8421),D=U(9672),we=U(4482),fe=U(5403);function se(st,et=0){return(0,we.e)((Pe,Z)=>{Pe.subscribe((0,fe.x)(Z,V=>(0,D.f)(Z,st,()=>Z.next(V),et),()=>(0,D.f)(Z,st,()=>Z.complete(),et),V=>(0,D.f)(Z,st,()=>Z.error(V),et)))})}function q(st,et=0){return(0,we.e)((Pe,Z)=>{Z.add(st.schedule(()=>Pe.subscribe(Z),et))})}var $=U(9751),Q=U(2202),ie=U(576);function qe(st,et){if(!st)throw new Error("Iterable cannot be null");return new $.y(Pe=>{(0,D.f)(Pe,et,()=>{const Z=st[Symbol.asyncIterator]();(0,D.f)(Pe,et,()=>{Z.next().then(V=>{V.done?Pe.complete():Pe.next(V.value)})},0,!0)})})}var ke=U(3670),Mt=U(8239),De=U(1144),yt=U(6495),Je=U(2206),ze=U(4532),le=U(3260);function dt(st,et){return et?function Ge(st,et){if(null!=st){if((0,ke.c)(st))return function X(st,et){return(0,R.Xf)(st).pipe(q(et),se(et))}(st,et);if((0,De.z)(st))return function H(st,et){return new $.y(Pe=>{let Z=0;return et.schedule(function(){Z===st.length?Pe.complete():(Pe.next(st[Z++]),Pe.closed||this.schedule())})})}(st,et);if((0,Mt.t)(st))return function ee(st,et){return(0,R.Xf)(st).pipe(q(et),se(et))}(st,et);if((0,Je.D)(st))return qe(st,et);if((0,yt.T)(st))return function je(st,et){return new $.y(Pe=>{let Z;return(0,D.f)(Pe,et,()=>{Z=st[Q.h](),(0,D.f)(Pe,et,()=>{let V,oe;try{({value:V,done:oe}=Z.next())}catch(_e){return void Pe.error(_e)}oe?Pe.complete():Pe.next(V)},0,!0)}),()=>(0,ie.m)(null==Z?void 0:Z.return)&&Z.return()})}(st,et);if((0,le.L)(st))return function pe(st,et){return qe((0,le.Q)(st),et)}(st,et)}throw(0,ze.z)(st)}(st,et):(0,R.Xf)(st)}},8421:(pt,Ne,U)=>{"use strict";U.d(Ne,{Xf:()=>je});var R=U(655),D=U(1144),we=U(8239),fe=U(9751),se=U(3670),q=U(2206),X=U(4532),ee=U(6495),$=U(3260),H=U(576),Q=U(7849),ie=U(8822);function je(le){if(le instanceof fe.y)return le;if(null!=le){if((0,se.c)(le))return function qe(le){return new fe.y(pe=>{const Ge=le[ie.L]();if((0,H.m)(Ge.subscribe))return Ge.subscribe(pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(le);if((0,D.z)(le))return function ke(le){return new fe.y(pe=>{for(let Ge=0;Ge<le.length&&!pe.closed;Ge++)pe.next(le[Ge]);pe.complete()})}(le);if((0,we.t)(le))return function Mt(le){return new fe.y(pe=>{le.then(Ge=>{pe.closed||(pe.next(Ge),pe.complete())},Ge=>pe.error(Ge)).then(null,Q.h)})}(le);if((0,q.D)(le))return yt(le);if((0,ee.T)(le))return function De(le){return new fe.y(pe=>{for(const Ge of le)if(pe.next(Ge),pe.closed)return;pe.complete()})}(le);if((0,$.L)(le))return function Je(le){return yt((0,$.Q)(le))}(le)}throw(0,X.z)(le)}function yt(le){return new fe.y(pe=>{(function ze(le,pe){var Ge,dt,st,et;return(0,R.mG)(this,void 0,void 0,function*(){try{for(Ge=(0,R.KL)(le);!(dt=yield Ge.next()).done;)if(pe.next(dt.value),pe.closed)return}catch(Pe){st={error:Pe}}finally{try{dt&&!dt.done&&(et=Ge.return)&&(yield et.call(Ge))}finally{if(st)throw st.error}}pe.complete()})})(le,pe).catch(Ge=>pe.error(Ge))})}},6451:(pt,Ne,U)=>{"use strict";U.d(Ne,{T:()=>q});var R=U(8189),D=U(8421),we=U(515),fe=U(3269),se=U(2076);function q(...X){const ee=(0,fe.yG)(X),$=(0,fe._6)(X,1/0),H=X;return H.length?1===H.length?(0,D.Xf)(H[0]):(0,R.J)($)((0,se.D)(H,ee)):we.E}},9646:(pt,Ne,U)=>{"use strict";U.d(Ne,{of:()=>we});var R=U(3269),D=U(2076);function we(...fe){const se=(0,R.yG)(fe);return(0,D.D)(fe,se)}},5403:(pt,Ne,U)=>{"use strict";U.d(Ne,{x:()=>D});var R=U(930);function D(fe,se,q,X,ee){return new we(fe,se,q,X,ee)}class we extends R.Lv{constructor(se,q,X,ee,$,H){super(se),this.onFinalize=$,this.shouldUnsubscribe=H,this._next=q?function(Q){try{q(Q)}catch(ie){se.error(ie)}}:super._next,this._error=ee?function(Q){try{ee(Q)}catch(ie){se.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=X?function(){try{X()}catch(Q){se.error(Q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:q}=this;super.unsubscribe(),!q&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},262:(pt,Ne,U)=>{"use strict";U.d(Ne,{K:()=>fe});var R=U(8421),D=U(5403),we=U(4482);function fe(se){return(0,we.e)((q,X)=>{let H,ee=null,$=!1;ee=q.subscribe((0,D.x)(X,void 0,void 0,Q=>{H=(0,R.Xf)(se(Q,fe(se)(q))),ee?(ee.unsubscribe(),ee=null,H.subscribe(X)):$=!0})),$&&(ee.unsubscribe(),ee=null,H.subscribe(X))})}},4351:(pt,Ne,U)=>{"use strict";U.d(Ne,{b:()=>we});var R=U(6099),D=U(576);function we(fe,se){return(0,D.m)(se)?(0,R.z)(fe,se,1):(0,R.z)(fe,1)}},9300:(pt,Ne,U)=>{"use strict";U.d(Ne,{h:()=>we});var R=U(4482),D=U(5403);function we(fe,se){return(0,R.e)((q,X)=>{let ee=0;q.subscribe((0,D.x)(X,$=>fe.call(se,$,ee++)&&X.next($)))})}},8746:(pt,Ne,U)=>{"use strict";U.d(Ne,{x:()=>D});var R=U(4482);function D(we){return(0,R.e)((fe,se)=>{try{fe.subscribe(se)}finally{se.add(we)}})}},4004:(pt,Ne,U)=>{"use strict";U.d(Ne,{U:()=>we});var R=U(4482),D=U(5403);function we(fe,se){return(0,R.e)((q,X)=>{let ee=0;q.subscribe((0,D.x)(X,$=>{X.next(fe.call(se,$,ee++))}))})}},9718:(pt,Ne,U)=>{"use strict";U.d(Ne,{h:()=>D});var R=U(4004);function D(we){return(0,R.U)(()=>we)}},8189:(pt,Ne,U)=>{"use strict";U.d(Ne,{J:()=>we});var R=U(6099),D=U(4671);function we(fe=1/0){return(0,R.z)(D.y,fe)}},2733:(pt,Ne,U)=>{"use strict";U.d(Ne,{p:()=>fe});var R=U(8421),D=U(9672),we=U(5403);function fe(se,q,X,ee,$,H,Q,ie){const je=[];let qe=0,ke=0,Mt=!1;const De=()=>{Mt&&!je.length&&!qe&&q.complete()},yt=ze=>qe<ee?Je(ze):je.push(ze),Je=ze=>{H&&q.next(ze),qe++;let le=!1;(0,R.Xf)(X(ze,ke++)).subscribe((0,we.x)(q,pe=>{null==$||$(pe),H?yt(pe):q.next(pe)},()=>{le=!0},void 0,()=>{if(le)try{for(qe--;je.length&&qe<ee;){const pe=je.shift();Q?(0,D.f)(q,Q,()=>Je(pe)):Je(pe)}De()}catch(pe){q.error(pe)}}))};return se.subscribe((0,we.x)(q,yt,()=>{Mt=!0,De()})),()=>{null==ie||ie()}}},6099:(pt,Ne,U)=>{"use strict";U.d(Ne,{z:()=>q});var R=U(4004),D=U(8421),we=U(4482),fe=U(2733),se=U(576);function q(X,ee,$=1/0){return(0,se.m)(ee)?q((H,Q)=>(0,R.U)((ie,je)=>ee(H,ie,Q,je))((0,D.Xf)(X(H,Q))),$):("number"==typeof ee&&($=ee),(0,we.e)((H,Q)=>(0,fe.p)(H,Q,X,$)))}},3099:(pt,Ne,U)=>{"use strict";U.d(Ne,{B:()=>se});var R=U(8421),D=U(7579),we=U(930),fe=U(4482);function se(X={}){const{connector:ee=(()=>new D.x),resetOnError:$=!0,resetOnComplete:H=!0,resetOnRefCountZero:Q=!0}=X;return ie=>{let je,qe,ke,Mt=0,De=!1,yt=!1;const Je=()=>{null==qe||qe.unsubscribe(),qe=void 0},ze=()=>{Je(),je=ke=void 0,De=yt=!1},le=()=>{const pe=je;ze(),null==pe||pe.unsubscribe()};return(0,fe.e)((pe,Ge)=>{Mt++,!yt&&!De&&Je();const dt=ke=null!=ke?ke:ee();Ge.add(()=>{Mt--,0===Mt&&!yt&&!De&&(qe=q(le,Q))}),dt.subscribe(Ge),!je&&Mt>0&&(je=new we.Hp({next:st=>dt.next(st),error:st=>{yt=!0,Je(),qe=q(ze,$,st),dt.error(st)},complete:()=>{De=!0,Je(),qe=q(ze,H),dt.complete()}}),(0,R.Xf)(pe).subscribe(je))})(ie)}}function q(X,ee,...$){if(!0===ee)return void X();if(!1===ee)return;const H=new we.Hp({next:()=>{H.unsubscribe(),X()}});return ee(...$).subscribe(H)}},4782:(pt,Ne,U)=>{"use strict";U.d(Ne,{d:()=>we});var R=U(4707),D=U(3099);function we(fe,se,q){let X,ee=!1;return fe&&"object"==typeof fe?({bufferSize:X=1/0,windowTime:se=1/0,refCount:ee=!1,scheduler:q}=fe):X=null!=fe?fe:1/0,(0,D.B)({connector:()=>new R.t(X,se,q),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ee})}},3900:(pt,Ne,U)=>{"use strict";U.d(Ne,{w:()=>fe});var R=U(8421),D=U(4482),we=U(5403);function fe(se,q){return(0,D.e)((X,ee)=>{let $=null,H=0,Q=!1;const ie=()=>Q&&!$&&ee.complete();X.subscribe((0,we.x)(ee,je=>{null==$||$.unsubscribe();let qe=0;const ke=H++;(0,R.Xf)(se(je,ke)).subscribe($=(0,we.x)(ee,Mt=>ee.next(q?q(je,Mt,ke,qe++):Mt),()=>{$=null,ie()}))},()=>{Q=!0,ie()}))})}},5698:(pt,Ne,U)=>{"use strict";U.d(Ne,{q:()=>fe});var R=U(515),D=U(4482),we=U(5403);function fe(se){return se<=0?()=>R.E:(0,D.e)((q,X)=>{let ee=0;q.subscribe((0,we.x)(X,$=>{++ee<=se&&(X.next($),se<=ee&&X.complete())}))})}},2722:(pt,Ne,U)=>{"use strict";U.d(Ne,{R:()=>se});var R=U(4482),D=U(5403),we=U(8421),fe=U(5032);function se(q){return(0,R.e)((X,ee)=>{(0,we.Xf)(q).subscribe((0,D.x)(ee,()=>ee.complete(),fe.Z)),!ee.closed&&X.subscribe(ee)})}},8505:(pt,Ne,U)=>{"use strict";U.d(Ne,{b:()=>se});var R=U(576),D=U(4482),we=U(5403),fe=U(4671);function se(q,X,ee){const $=(0,R.m)(q)||X||ee?{next:q,error:X,complete:ee}:q;return $?(0,D.e)((H,Q)=>{var ie;null===(ie=$.subscribe)||void 0===ie||ie.call($);let je=!0;H.subscribe((0,we.x)(Q,qe=>{var ke;null===(ke=$.next)||void 0===ke||ke.call($,qe),Q.next(qe)},()=>{var qe;je=!1,null===(qe=$.complete)||void 0===qe||qe.call($),Q.complete()},qe=>{var ke;je=!1,null===(ke=$.error)||void 0===ke||ke.call($,qe),Q.error(qe)},()=>{var qe,ke;je&&(null===(qe=$.unsubscribe)||void 0===qe||qe.call($)),null===(ke=$.finalize)||void 0===ke||ke.call($)}))}):fe.y}},6063:(pt,Ne,U)=>{"use strict";U.d(Ne,{l:()=>R});const R={now:()=>(R.delegate||Date).now(),delegate:void 0}},3410:(pt,Ne,U)=>{"use strict";U.d(Ne,{z:()=>R});const R={setTimeout(D,we,...fe){const{delegate:se}=R;return null!=se&&se.setTimeout?se.setTimeout(D,we,...fe):setTimeout(D,we,...fe)},clearTimeout(D){const{delegate:we}=R;return((null==we?void 0:we.clearTimeout)||clearTimeout)(D)},delegate:void 0}},2202:(pt,Ne,U)=>{"use strict";U.d(Ne,{h:()=>D});const D=function R(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,Ne,U)=>{"use strict";U.d(Ne,{L:()=>R});const R="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(pt,Ne,U)=>{"use strict";U.d(Ne,{_6:()=>q,jO:()=>fe,yG:()=>se});var R=U(576),D=U(3532);function we(X){return X[X.length-1]}function fe(X){return(0,R.m)(we(X))?X.pop():void 0}function se(X){return(0,D.K)(we(X))?X.pop():void 0}function q(X,ee){return"number"==typeof we(X)?X.pop():ee}},8737:(pt,Ne,U)=>{"use strict";function R(D,we){if(D){const fe=D.indexOf(we);0<=fe&&D.splice(fe,1)}}U.d(Ne,{P:()=>R})},3888:(pt,Ne,U)=>{"use strict";function R(D){const fe=D(se=>{Error.call(se),se.stack=(new Error).stack});return fe.prototype=Object.create(Error.prototype),fe.prototype.constructor=fe,fe}U.d(Ne,{d:()=>R})},2806:(pt,Ne,U)=>{"use strict";U.d(Ne,{O:()=>fe,x:()=>we});var R=U(2416);let D=null;function we(se){if(R.v.useDeprecatedSynchronousErrorHandling){const q=!D;if(q&&(D={errorThrown:!1,error:null}),se(),q){const{errorThrown:X,error:ee}=D;if(D=null,X)throw ee}}else se()}function fe(se){R.v.useDeprecatedSynchronousErrorHandling&&D&&(D.errorThrown=!0,D.error=se)}},9672:(pt,Ne,U)=>{"use strict";function R(D,we,fe,se=0,q=!1){const X=we.schedule(function(){fe(),q?D.add(this.schedule(null,se)):this.unsubscribe()},se);if(D.add(X),!q)return X}U.d(Ne,{f:()=>R})},4671:(pt,Ne,U)=>{"use strict";function R(D){return D}U.d(Ne,{y:()=>R})},1144:(pt,Ne,U)=>{"use strict";U.d(Ne,{z:()=>R});const R=D=>D&&"number"==typeof D.length&&"function"!=typeof D},2206:(pt,Ne,U)=>{"use strict";U.d(Ne,{D:()=>D});var R=U(576);function D(we){return Symbol.asyncIterator&&(0,R.m)(null==we?void 0:we[Symbol.asyncIterator])}},576:(pt,Ne,U)=>{"use strict";function R(D){return"function"==typeof D}U.d(Ne,{m:()=>R})},3670:(pt,Ne,U)=>{"use strict";U.d(Ne,{c:()=>we});var R=U(8822),D=U(576);function we(fe){return(0,D.m)(fe[R.L])}},6495:(pt,Ne,U)=>{"use strict";U.d(Ne,{T:()=>we});var R=U(2202),D=U(576);function we(fe){return(0,D.m)(null==fe?void 0:fe[R.h])}},8239:(pt,Ne,U)=>{"use strict";U.d(Ne,{t:()=>D});var R=U(576);function D(we){return(0,R.m)(null==we?void 0:we.then)}},3260:(pt,Ne,U)=>{"use strict";U.d(Ne,{L:()=>fe,Q:()=>we});var R=U(655),D=U(576);function we(se){return(0,R.FC)(this,arguments,function*(){const X=se.getReader();try{for(;;){const{value:ee,done:$}=yield(0,R.qq)(X.read());if($)return yield(0,R.qq)(void 0);yield yield(0,R.qq)(ee)}}finally{X.releaseLock()}})}function fe(se){return(0,D.m)(null==se?void 0:se.getReader)}},3532:(pt,Ne,U)=>{"use strict";U.d(Ne,{K:()=>D});var R=U(576);function D(we){return we&&(0,R.m)(we.schedule)}},4482:(pt,Ne,U)=>{"use strict";U.d(Ne,{A:()=>D,e:()=>we});var R=U(576);function D(fe){return(0,R.m)(null==fe?void 0:fe.lift)}function we(fe){return se=>{if(D(se))return se.lift(function(q){try{return fe(q,this)}catch(X){this.error(X)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(pt,Ne,U)=>{"use strict";function R(){}U.d(Ne,{Z:()=>R})},9635:(pt,Ne,U)=>{"use strict";U.d(Ne,{U:()=>we,z:()=>D});var R=U(4671);function D(...fe){return we(fe)}function we(fe){return 0===fe.length?R.y:1===fe.length?fe[0]:function(q){return fe.reduce((X,ee)=>ee(X),q)}}},7849:(pt,Ne,U)=>{"use strict";U.d(Ne,{h:()=>we});var R=U(2416),D=U(3410);function we(fe){D.z.setTimeout(()=>{const{onUnhandledError:se}=R.v;if(!se)throw fe;se(fe)})}},4532:(pt,Ne,U)=>{"use strict";function R(D){return new TypeError(`You provided ${null!==D&&"object"==typeof D?"an invalid object":`'${D}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Ne,{z:()=>R})},7441:(pt,Ne,U)=>{!function(R){"use strict";var D=R.S2={L:{}};D.L.LatLng=function($,H,Q){var ie=parseFloat($,10),je=parseFloat(H,10);if(isNaN(ie)||isNaN(je))throw new Error("Invalid LatLng object: ("+$+", "+H+")");return!0!==Q&&(ie=Math.max(Math.min(ie,90),-90),je=(je+180)%360+(je<-180||180===je?180:-180)),{lat:ie,lng:je}},D.L.LatLng.DEG_TO_RAD=Math.PI/180,D.L.LatLng.RAD_TO_DEG=180/Math.PI,D.LatLngToXYZ=function($){var H=D.L.LatLng.DEG_TO_RAD,Q=$.lat*H,ie=$.lng*H,je=Math.cos(Q);return[Math.cos(ie)*je,Math.sin(ie)*je,Math.sin(Q)]},D.XYZToLatLng=function($){var H=D.L.LatLng.RAD_TO_DEG,Q=Math.atan2($[2],Math.sqrt($[0]*$[0]+$[1]*$[1])),ie=Math.atan2($[1],$[0]);return D.L.LatLng(Q*H,ie*H)},D.XYZToFaceUV=function($){var H=function($){var H=[Math.abs($[0]),Math.abs($[1]),Math.abs($[2])];return H[0]>H[1]?H[0]>H[2]?0:2:H[1]>H[2]?1:2}($);$[H]<0&&(H+=3);var Q=function($,H){var Q,ie;switch($){case 0:Q=H[1]/H[0],ie=H[2]/H[0];break;case 1:Q=-H[0]/H[1],ie=H[2]/H[1];break;case 2:Q=-H[0]/H[2],ie=-H[1]/H[2];break;case 3:Q=H[2]/H[0],ie=H[1]/H[0];break;case 4:Q=H[2]/H[1],ie=-H[0]/H[1];break;case 5:Q=-H[1]/H[2],ie=-H[0]/H[2];break;default:throw{error:"Invalid face"}}return[Q,ie]}(H,$);return[H,Q]},D.FaceUVToXYZ=function($,H){var Q=H[0],ie=H[1];switch($){case 0:return[1,Q,ie];case 1:return[-Q,1,ie];case 2:return[-Q,-ie,1];case 3:return[-1,-ie,-Q];case 4:return[ie,-1,-Q];case 5:return[ie,Q,-1];default:throw{error:"Invalid face"}}};var se=function($){return $>=.5?1/3*(4*$*$-1):1/3*(1-4*(1-$)*(1-$))};D.STToUV=function($){return[se($[0]),se($[1])]};var q=function($){return $>=0?.5*Math.sqrt(1+3*$):1-.5*Math.sqrt(1-3*$)};D.UVToST=function($){return[q($[0]),q($[1])]},D.STToIJ=function($,H){var Q=1<<H,ie=function(je){var qe=Math.floor(je*Q);return Math.max(0,Math.min(Q-1,qe))};return[ie($[0]),ie($[1])]},D.IJToST=function($,H,Q){var ie=1<<H;return[($[0]+Q[0])/ie,($[1]+Q[1])/ie]};var X=function($,H,Q,ie){if(0==ie){1==Q&&(H.x=$-1-H.x,H.y=$-1-H.y);var ke=H.x;H.x=H.y,H.y=ke}},ee=function($,H,Q,ie){var je={a:[[0,"d"],[1,"a"],[3,"b"],[2,"a"]],b:[[2,"b"],[1,"b"],[3,"a"],[0,"c"]],c:[[2,"c"],[3,"d"],[1,"c"],[0,"b"]],d:[[0,"a"],[3,"c"],[1,"d"],[2,"d"]]};"number"!=typeof ie&&console.warn(new Error("called pointToHilbertQuadList without face value, defaulting to '0'").stack);for(var qe=ie%2?"d":"a",ke=[],Mt=Q-1;Mt>=0;Mt--){var De=1<<Mt,ze=je[qe][2*($&De?1:0)+(H&De?1:0)];ke.push(ze[0]),qe=ze[1]}return ke};D.S2Cell=function(){},D.S2Cell.FromHilbertQuadKey=function($){var ke,Mt,De,yt,Je,ze,H=$.split("/"),Q=parseInt(H[0]),ie=H[1],je=ie.length,qe={x:0,y:0};for(ke=je-1;ke>=0;ke--)Mt=je-ke,yt=0,Je=0,"1"===(De=ie[ke])?Je=1:"2"===De?(yt=1,Je=1):"3"===De&&(yt=1),ze=Math.pow(2,Mt-1),X(ze,qe,yt,Je),qe.x+=ze*yt,qe.y+=ze*Je;if(Q%2==1){var le=qe.x;qe.x=qe.y,qe.y=le}return D.S2Cell.FromFaceIJ(parseInt(Q),[qe.x,qe.y],Mt)},D.S2Cell.FromLatLng=function($,H){if(!$.lat&&0!==$.lat||!$.lng&&0!==$.lng)throw new Error("Pass { lat: lat, lng: lng } to S2.S2Cell.FromLatLng");var Q=D.LatLngToXYZ($),ie=D.XYZToFaceUV(Q),je=D.UVToST(ie[1]),qe=D.STToIJ(je,H);return D.S2Cell.FromFaceIJ(ie[0],qe,H)},D.S2Cell.FromFaceIJ=function($,H,Q){var ie=new D.S2Cell;return ie.face=$,ie.ij=H,ie.level=Q,ie},D.S2Cell.prototype.toString=function(){return"F"+this.face+"ij["+this.ij[0]+","+this.ij[1]+"]@"+this.level},D.S2Cell.prototype.getLatLng=function(){var $=D.IJToST(this.ij,this.level,[.5,.5]),H=D.STToUV($),Q=D.FaceUVToXYZ(this.face,H);return D.XYZToLatLng(Q)},D.S2Cell.prototype.getCornerLatLngs=function(){for(var $=[],H=[[0,0],[0,1],[1,1],[1,0]],Q=0;Q<4;Q++){var ie=D.IJToST(this.ij,this.level,H[Q]),je=D.STToUV(ie),qe=D.FaceUVToXYZ(this.face,je);$.push(D.XYZToLatLng(qe))}return $},D.S2Cell.prototype.getFaceAndQuads=function(){var $=ee(this.ij[0],this.ij[1],this.level,this.face);return[this.face,$]},D.S2Cell.prototype.toHilbertQuadkey=function(){var $=ee(this.ij[0],this.ij[1],this.level,this.face);return this.face.toString(10)+"/"+$.join("")},D.latLngToNeighborKeys=D.S2Cell.latLngToNeighborKeys=function($,H,Q){return D.S2Cell.FromLatLng({lat:$,lng:H},Q).getNeighbors().map(function(ie){return ie.toHilbertQuadkey()})},D.S2Cell.prototype.getNeighbors=function(){var $=function(qe,ke,Mt){var De=1<<Mt;if(ke[0]>=0&&ke[1]>=0&&ke[0]<De&&ke[1]<De)return D.S2Cell.FromFaceIJ(qe,ke,Mt);var yt=D.IJToST(ke,Mt,[.5,.5]),Je=D.STToUV(yt),ze=D.FaceUVToXYZ(qe,Je),le=D.XYZToFaceUV(ze);return qe=le[0],yt=D.UVToST(Je=le[1]),ke=D.STToIJ(yt,Mt),D.S2Cell.FromFaceIJ(qe,ke,Mt)},H=this.face,Q=this.ij[0],ie=this.ij[1],je=this.level;return[$(H,[Q-1,ie],je),$(H,[Q,ie-1],je),$(H,[Q+1,ie],je),$(H,[Q,ie+1],je)]},D.FACE_BITS=3,D.MAX_LEVEL=30,D.POS_BITS=2*D.MAX_LEVEL+1,D.facePosLevelToId=D.S2Cell.facePosLevelToId=D.fromFacePosLevel=function($,H,Q){var je,qe,ke,ie=R.dcodeIO&&R.dcodeIO.Long||U(5682);for(Q||(Q=H.length),H.length>Q&&(H=H.substr(0,Q)),je=ie.fromString($.toString(10),!0,10).toString(2);je.length<D.FACE_BITS;)je="0"+je;for(qe=ie.fromString(H,!0,4).toString(2);qe.length<2*Q;)qe="0"+qe;for(ke=je+qe,ke+="1";ke.length<D.FACE_BITS+D.POS_BITS;)ke+="0";return ie.fromString(ke,!0,2).toString(10)},D.keyToId=D.S2Cell.keyToId=D.toId=D.toCellId=D.fromKey=function($){var H=$.split("/");return D.fromFacePosLevel(H[0],H[1],H[1].length)},D.idToKey=D.S2Cell.idToKey=D.S2Cell.toKey=D.toKey=D.fromId=D.fromCellId=D.S2Cell.toHilbertQuadkey=D.toHilbertQuadkey=function($){for(var H=R.dcodeIO&&R.dcodeIO.Long||U(5682),Q=H.fromString($,!0,10).toString(2);Q.length<D.FACE_BITS+D.POS_BITS;)Q="0"+Q;for(var ie=Q.lastIndexOf("1"),je=Q.substring(0,3),qe=Q.substring(3,ie),ke=qe.length/2,Mt=H.fromString(je,!0,2).toString(10),De=H.fromString(qe,!0,2).toString(4);De.length<ke;)De="0"+De;return Mt+"/"+De},D.keyToLatLng=D.S2Cell.keyToLatLng=function($){return D.S2Cell.FromHilbertQuadKey($).getLatLng()},D.idToLatLng=D.S2Cell.idToLatLng=function($){var H=D.idToKey($);return D.keyToLatLng(H)},D.S2Cell.latLngToKey=D.latLngToKey=D.latLngToQuadkey=function($,H,Q){if(isNaN(Q)||Q<1||Q>30)throw new Error("'level' is not a number between 1 and 30 (but it should be)");return D.S2Cell.FromLatLng({lat:$,lng:H},Q).toHilbertQuadkey()},D.stepKey=function($,H){var De,Q=R.dcodeIO&&R.dcodeIO.Long||U(5682),ie=$.split("/"),je=ie[0],ke=ie[1].length,Mt=Q.fromString(ie[1],!0,4);H>0?De=Mt.add(Math.abs(H)):H<0&&(De=Mt.subtract(Math.abs(H)));var yt=De.toString(4);for("0"===yt&&console.warning(new Error("face/position wrapping is not yet supported"));yt.length<ke;)yt="0"+yt;return je+"/"+yt},D.S2Cell.prevKey=D.prevKey=function($){return D.stepKey($,-1)},D.S2Cell.nextKey=D.nextKey=function($){return D.stepKey($,1)}}(pt.exports)},508:(pt,Ne,U)=>{const R=Symbol("SemVer ANY");class D{static get ANY(){return R}constructor(Q,ie){if(ie=we(ie),Q instanceof D){if(Q.loose===!!ie.loose)return Q;Q=Q.value}X("comparator",Q,ie),this.options=ie,this.loose=!!ie.loose,this.parse(Q),this.value=this.semver===R?"":this.operator+this.semver.version,X("comp",this)}parse(Q){const je=Q.match(this.options.loose?fe[se.COMPARATORLOOSE]:fe[se.COMPARATOR]);if(!je)throw new TypeError(`Invalid comparator: ${Q}`);this.operator=void 0!==je[1]?je[1]:"","="===this.operator&&(this.operator=""),this.semver=je[2]?new ee(je[2],this.options.loose):R}toString(){return this.value}test(Q){if(X("Comparator.test",Q,this.options.loose),this.semver===R||Q===R)return!0;if("string"==typeof Q)try{Q=new ee(Q,this.options)}catch(ie){return!1}return q(Q,this.operator,this.semver,this.options)}intersects(Q,ie){if(!(Q instanceof D))throw new TypeError("a Comparator is required");if((!ie||"object"!=typeof ie)&&(ie={loose:!!ie,includePrerelease:!1}),""===this.operator)return""===this.value||new $(Q.value,ie).test(this.value);if(""===Q.operator)return""===Q.value||new $(this.value,ie).test(Q.semver);const je=!(">="!==this.operator&&">"!==this.operator||">="!==Q.operator&&">"!==Q.operator),qe=!("<="!==this.operator&&"<"!==this.operator||"<="!==Q.operator&&"<"!==Q.operator),ke=this.semver.version===Q.semver.version,Mt=!(">="!==this.operator&&"<="!==this.operator||">="!==Q.operator&&"<="!==Q.operator),De=q(this.semver,"<",Q.semver,ie)&&(">="===this.operator||">"===this.operator)&&("<="===Q.operator||"<"===Q.operator),yt=q(this.semver,">",Q.semver,ie)&&("<="===this.operator||"<"===this.operator)&&(">="===Q.operator||">"===Q.operator);return je||qe||ke&&Mt||De||yt}}pt.exports=D;const we=U(471),{re:fe,t:se}=U(1338),q=U(8127),X=U(6070),ee=U(1839),$=U(8611)},8611:(pt,Ne,U)=>{class R{constructor(V,oe){if(oe=fe(oe),V instanceof R)return V.loose===!!oe.loose&&V.includePrerelease===!!oe.includePrerelease?V:new R(V.raw,oe);if(V instanceof se)return this.raw=V.value,this.set=[[V]],this.format(),this;if(this.options=oe,this.loose=!!oe.loose,this.includePrerelease=!!oe.includePrerelease,this.raw=V,this.set=V.split("||").map(_e=>this.parseRange(_e.trim())).filter(_e=>_e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${V}`);if(this.set.length>1){const _e=this.set[0];if(this.set=this.set.filter(He=>!je(He[0])),0===this.set.length)this.set=[_e];else if(this.set.length>1)for(const He of this.set)if(1===He.length&&qe(He[0])){this.set=[He];break}}this.format()}format(){return this.range=this.set.map(V=>V.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(V){V=V.trim();const _e=`parseRange:${Object.keys(this.options).join(",")}:${V}`,He=we.get(_e);if(He)return He;const Fe=this.options.loose;V=V.replace(Fe?ee[$.HYPHENRANGELOOSE]:ee[$.HYPHENRANGE],et(this.options.includePrerelease)),q("hyphen replace",V),V=V.replace(ee[$.COMPARATORTRIM],H),q("comparator trim",V);let Ut=(V=(V=(V=V.replace(ee[$.TILDETRIM],Q)).replace(ee[$.CARETTRIM],ie)).split(/\s+/).join(" ")).split(" ").map(jt=>Mt(jt,this.options)).join(" ").split(/\s+/).map(jt=>st(jt,this.options));Fe&&(Ut=Ut.filter(jt=>(q("loose invalid filter",jt,this.options),!!jt.match(ee[$.COMPARATORLOOSE])))),q("range list",Ut);const Rt=new Map,Ke=Ut.map(jt=>new se(jt,this.options));for(const jt of Ke){if(je(jt))return[jt];Rt.set(jt.value,jt)}Rt.size>1&&Rt.has("")&&Rt.delete("");const Yt=[...Rt.values()];return we.set(_e,Yt),Yt}intersects(V,oe){if(!(V instanceof R))throw new TypeError("a Range is required");return this.set.some(_e=>ke(_e,oe)&&V.set.some(He=>ke(He,oe)&&_e.every(Fe=>He.every(xt=>Fe.intersects(xt,oe)))))}test(V){if(!V)return!1;if("string"==typeof V)try{V=new X(V,this.options)}catch(oe){return!1}for(let oe=0;oe<this.set.length;oe++)if(Pe(this.set[oe],V,this.options))return!0;return!1}}pt.exports=R;const we=new(U(7073))({max:1e3}),fe=U(471),se=U(508),q=U(6070),X=U(1839),{re:ee,t:$,comparatorTrimReplace:H,tildeTrimReplace:Q,caretTrimReplace:ie}=U(1338),je=Z=>"<0.0.0-0"===Z.value,qe=Z=>""===Z.value,ke=(Z,V)=>{let oe=!0;const _e=Z.slice();let He=_e.pop();for(;oe&&_e.length;)oe=_e.every(Fe=>He.intersects(Fe,V)),He=_e.pop();return oe},Mt=(Z,V)=>(q("comp",Z,V),Z=ze(Z,V),q("caret",Z),Z=yt(Z,V),q("tildes",Z),Z=pe(Z,V),q("xrange",Z),Z=dt(Z,V),q("stars",Z),Z),De=Z=>!Z||"x"===Z.toLowerCase()||"*"===Z,yt=(Z,V)=>Z.trim().split(/\s+/).map(oe=>Je(oe,V)).join(" "),Je=(Z,V)=>Z.replace(V.loose?ee[$.TILDELOOSE]:ee[$.TILDE],(_e,He,Fe,xt,Ut)=>{let Rt;return q("tilde",Z,_e,He,Fe,xt,Ut),De(He)?Rt="":De(Fe)?Rt=`>=${He}.0.0 <${+He+1}.0.0-0`:De(xt)?Rt=`>=${He}.${Fe}.0 <${He}.${+Fe+1}.0-0`:Ut?(q("replaceTilde pr",Ut),Rt=`>=${He}.${Fe}.${xt}-${Ut} <${He}.${+Fe+1}.0-0`):Rt=`>=${He}.${Fe}.${xt} <${He}.${+Fe+1}.0-0`,q("tilde return",Rt),Rt}),ze=(Z,V)=>Z.trim().split(/\s+/).map(oe=>le(oe,V)).join(" "),le=(Z,V)=>{q("caret",Z,V);const _e=V.includePrerelease?"-0":"";return Z.replace(V.loose?ee[$.CARETLOOSE]:ee[$.CARET],(He,Fe,xt,Ut,Rt)=>{let Ke;return q("caret",Z,He,Fe,xt,Ut,Rt),De(Fe)?Ke="":De(xt)?Ke=`>=${Fe}.0.0${_e} <${+Fe+1}.0.0-0`:De(Ut)?Ke="0"===Fe?`>=${Fe}.${xt}.0${_e} <${Fe}.${+xt+1}.0-0`:`>=${Fe}.${xt}.0${_e} <${+Fe+1}.0.0-0`:Rt?(q("replaceCaret pr",Rt),Ke="0"===Fe?"0"===xt?`>=${Fe}.${xt}.${Ut}-${Rt} <${Fe}.${xt}.${+Ut+1}-0`:`>=${Fe}.${xt}.${Ut}-${Rt} <${Fe}.${+xt+1}.0-0`:`>=${Fe}.${xt}.${Ut}-${Rt} <${+Fe+1}.0.0-0`):(q("no pr"),Ke="0"===Fe?"0"===xt?`>=${Fe}.${xt}.${Ut}${_e} <${Fe}.${xt}.${+Ut+1}-0`:`>=${Fe}.${xt}.${Ut}${_e} <${Fe}.${+xt+1}.0-0`:`>=${Fe}.${xt}.${Ut} <${+Fe+1}.0.0-0`),q("caret return",Ke),Ke})},pe=(Z,V)=>(q("replaceXRanges",Z,V),Z.split(/\s+/).map(oe=>Ge(oe,V)).join(" ")),Ge=(Z,V)=>(Z=Z.trim()).replace(V.loose?ee[$.XRANGELOOSE]:ee[$.XRANGE],(_e,He,Fe,xt,Ut,Rt)=>{q("xRange",Z,_e,He,Fe,xt,Ut,Rt);const Ke=De(Fe),Yt=Ke||De(xt),jt=Yt||De(Ut);return"="===He&&jt&&(He=""),Rt=V.includePrerelease?"-0":"",Ke?_e=">"===He||"<"===He?"<0.0.0-0":"*":He&&jt?(Yt&&(xt=0),Ut=0,">"===He?(He=">=",Yt?(Fe=+Fe+1,xt=0,Ut=0):(xt=+xt+1,Ut=0)):"<="===He&&(He="<",Yt?Fe=+Fe+1:xt=+xt+1),"<"===He&&(Rt="-0"),_e=`${He+Fe}.${xt}.${Ut}${Rt}`):Yt?_e=`>=${Fe}.0.0${Rt} <${+Fe+1}.0.0-0`:jt&&(_e=`>=${Fe}.${xt}.0${Rt} <${Fe}.${+xt+1}.0-0`),q("xRange return",_e),_e}),dt=(Z,V)=>(q("replaceStars",Z,V),Z.trim().replace(ee[$.STAR],"")),st=(Z,V)=>(q("replaceGTE0",Z,V),Z.trim().replace(ee[V.includePrerelease?$.GTE0PRE:$.GTE0],"")),et=Z=>(V,oe,_e,He,Fe,xt,Ut,Rt,Ke,Yt,jt,ln,Kt)=>`${oe=De(_e)?"":De(He)?`>=${_e}.0.0${Z?"-0":""}`:De(Fe)?`>=${_e}.${He}.0${Z?"-0":""}`:xt?`>=${oe}`:`>=${oe}${Z?"-0":""}`} ${Rt=De(Ke)?"":De(Yt)?`<${+Ke+1}.0.0-0`:De(jt)?`<${Ke}.${+Yt+1}.0-0`:ln?`<=${Ke}.${Yt}.${jt}-${ln}`:Z?`<${Ke}.${Yt}.${+jt+1}-0`:`<=${Rt}`}`.trim(),Pe=(Z,V,oe)=>{for(let _e=0;_e<Z.length;_e++)if(!Z[_e].test(V))return!1;if(V.prerelease.length&&!oe.includePrerelease){for(let _e=0;_e<Z.length;_e++)if(q(Z[_e].semver),Z[_e].semver!==se.ANY&&Z[_e].semver.prerelease.length>0){const He=Z[_e].semver;if(He.major===V.major&&He.minor===V.minor&&He.patch===V.patch)return!0}return!1}return!0}},1839:(pt,Ne,U)=>{const R=U(6070),{MAX_LENGTH:D,MAX_SAFE_INTEGER:we}=U(1696),{re:fe,t:se}=U(1338),q=U(471),{compareIdentifiers:X}=U(7165);class ee{constructor(H,Q){if(Q=q(Q),H instanceof ee){if(H.loose===!!Q.loose&&H.includePrerelease===!!Q.includePrerelease)return H;H=H.version}else if("string"!=typeof H)throw new TypeError(`Invalid Version: ${H}`);if(H.length>D)throw new TypeError(`version is longer than ${D} characters`);R("SemVer",H,Q),this.options=Q,this.loose=!!Q.loose,this.includePrerelease=!!Q.includePrerelease;const ie=H.trim().match(Q.loose?fe[se.LOOSE]:fe[se.FULL]);if(!ie)throw new TypeError(`Invalid Version: ${H}`);if(this.raw=H,this.major=+ie[1],this.minor=+ie[2],this.patch=+ie[3],this.major>we||this.major<0)throw new TypeError("Invalid major version");if(this.minor>we||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>we||this.patch<0)throw new TypeError("Invalid patch version");this.prerelease=ie[4]?ie[4].split(".").map(je=>{if(/^[0-9]+$/.test(je)){const qe=+je;if(qe>=0&&qe<we)return qe}return je}):[],this.build=ie[5]?ie[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(H){if(R("SemVer.compare",this.version,this.options,H),!(H instanceof ee)){if("string"==typeof H&&H===this.version)return 0;H=new ee(H,this.options)}return H.version===this.version?0:this.compareMain(H)||this.comparePre(H)}compareMain(H){return H instanceof ee||(H=new ee(H,this.options)),X(this.major,H.major)||X(this.minor,H.minor)||X(this.patch,H.patch)}comparePre(H){if(H instanceof ee||(H=new ee(H,this.options)),this.prerelease.length&&!H.prerelease.length)return-1;if(!this.prerelease.length&&H.prerelease.length)return 1;if(!this.prerelease.length&&!H.prerelease.length)return 0;let Q=0;do{const ie=this.prerelease[Q],je=H.prerelease[Q];if(R("prerelease compare",Q,ie,je),void 0===ie&&void 0===je)return 0;if(void 0===je)return 1;if(void 0===ie)return-1;if(ie!==je)return X(ie,je)}while(++Q)}compareBuild(H){H instanceof ee||(H=new ee(H,this.options));let Q=0;do{const ie=this.build[Q],je=H.build[Q];if(R("prerelease compare",Q,ie,je),void 0===ie&&void 0===je)return 0;if(void 0===je)return 1;if(void 0===ie)return-1;if(ie!==je)return X(ie,je)}while(++Q)}inc(H,Q){switch(H){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",Q);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",Q);break;case"prepatch":this.prerelease.length=0,this.inc("patch",Q),this.inc("pre",Q);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",Q),this.inc("pre",Q);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let ie=this.prerelease.length;for(;--ie>=0;)"number"==typeof this.prerelease[ie]&&(this.prerelease[ie]++,ie=-2);-1===ie&&this.prerelease.push(0)}Q&&(0===X(this.prerelease[0],Q)?isNaN(this.prerelease[1])&&(this.prerelease=[Q,0]):this.prerelease=[Q,0]);break;default:throw new Error(`invalid increment argument: ${H}`)}return this.format(),this.raw=this.version,this}}pt.exports=ee},8127:(pt,Ne,U)=>{const R=U(5097),D=U(2046),we=U(7283),fe=U(5844),se=U(845),q=U(477);pt.exports=(ee,$,H,Q)=>{switch($){case"===":return"object"==typeof ee&&(ee=ee.version),"object"==typeof H&&(H=H.version),ee===H;case"!==":return"object"==typeof ee&&(ee=ee.version),"object"==typeof H&&(H=H.version),ee!==H;case"":case"=":case"==":return R(ee,H,Q);case"!=":return D(ee,H,Q);case">":return we(ee,H,Q);case">=":return fe(ee,H,Q);case"<":return se(ee,H,Q);case"<=":return q(ee,H,Q);default:throw new TypeError(`Invalid operator: ${$}`)}}},5522:(pt,Ne,U)=>{const R=U(1839);pt.exports=(we,fe,se)=>new R(we,se).compare(new R(fe,se))},5097:(pt,Ne,U)=>{const R=U(5522);pt.exports=(we,fe,se)=>0===R(we,fe,se)},7283:(pt,Ne,U)=>{const R=U(5522);pt.exports=(we,fe,se)=>R(we,fe,se)>0},5844:(pt,Ne,U)=>{const R=U(5522);pt.exports=(we,fe,se)=>R(we,fe,se)>=0},845:(pt,Ne,U)=>{const R=U(5522);pt.exports=(we,fe,se)=>R(we,fe,se)<0},477:(pt,Ne,U)=>{const R=U(5522);pt.exports=(we,fe,se)=>R(we,fe,se)<=0},2046:(pt,Ne,U)=>{const R=U(5522);pt.exports=(we,fe,se)=>0!==R(we,fe,se)},2866:(pt,Ne,U)=>{const R=U(8611);pt.exports=(we,fe,se)=>{try{fe=new R(fe,se)}catch(q){return!1}return fe.test(we)}},1696:pt=>{pt.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}},6070:pt=>{const Ne="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...U)=>console.error("SEMVER",...U):()=>{};pt.exports=Ne},7165:pt=>{const Ne=/^[0-9]+$/,U=(D,we)=>{const fe=Ne.test(D),se=Ne.test(we);return fe&&se&&(D=+D,we=+we),D===we?0:fe&&!se?-1:se&&!fe?1:D<we?-1:1};pt.exports={compareIdentifiers:U,rcompareIdentifiers:(D,we)=>U(we,D)}},471:pt=>{const Ne=["includePrerelease","loose","rtl"];pt.exports=R=>R?"object"!=typeof R?{loose:!0}:Ne.filter(D=>R[D]).reduce((D,we)=>(D[we]=!0,D),{}):{}},1338:(pt,Ne,U)=>{const{MAX_SAFE_COMPONENT_LENGTH:R}=U(1696),D=U(6070),we=(Ne=pt.exports={}).re=[],fe=Ne.src=[],se=Ne.t={};let q=0;const X=(ee,$,H)=>{const Q=q++;D(ee,Q,$),se[ee]=Q,fe[Q]=$,we[Q]=new RegExp($,H?"g":void 0)};X("NUMERICIDENTIFIER","0|[1-9]\\d*"),X("NUMERICIDENTIFIERLOOSE","[0-9]+"),X("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),X("MAINVERSION",`(${fe[se.NUMERICIDENTIFIER]})\\.(${fe[se.NUMERICIDENTIFIER]})\\.(${fe[se.NUMERICIDENTIFIER]})`),X("MAINVERSIONLOOSE",`(${fe[se.NUMERICIDENTIFIERLOOSE]})\\.(${fe[se.NUMERICIDENTIFIERLOOSE]})\\.(${fe[se.NUMERICIDENTIFIERLOOSE]})`),X("PRERELEASEIDENTIFIER",`(?:${fe[se.NUMERICIDENTIFIER]}|${fe[se.NONNUMERICIDENTIFIER]})`),X("PRERELEASEIDENTIFIERLOOSE",`(?:${fe[se.NUMERICIDENTIFIERLOOSE]}|${fe[se.NONNUMERICIDENTIFIER]})`),X("PRERELEASE",`(?:-(${fe[se.PRERELEASEIDENTIFIER]}(?:\\.${fe[se.PRERELEASEIDENTIFIER]})*))`),X("PRERELEASELOOSE",`(?:-?(${fe[se.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${fe[se.PRERELEASEIDENTIFIERLOOSE]})*))`),X("BUILDIDENTIFIER","[0-9A-Za-z-]+"),X("BUILD",`(?:\\+(${fe[se.BUILDIDENTIFIER]}(?:\\.${fe[se.BUILDIDENTIFIER]})*))`),X("FULLPLAIN",`v?${fe[se.MAINVERSION]}${fe[se.PRERELEASE]}?${fe[se.BUILD]}?`),X("FULL",`^${fe[se.FULLPLAIN]}$`),X("LOOSEPLAIN",`[v=\\s]*${fe[se.MAINVERSIONLOOSE]}${fe[se.PRERELEASELOOSE]}?${fe[se.BUILD]}?`),X("LOOSE",`^${fe[se.LOOSEPLAIN]}$`),X("GTLT","((?:<|>)?=?)"),X("XRANGEIDENTIFIERLOOSE",`${fe[se.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),X("XRANGEIDENTIFIER",`${fe[se.NUMERICIDENTIFIER]}|x|X|\\*`),X("XRANGEPLAIN",`[v=\\s]*(${fe[se.XRANGEIDENTIFIER]})(?:\\.(${fe[se.XRANGEIDENTIFIER]})(?:\\.(${fe[se.XRANGEIDENTIFIER]})(?:${fe[se.PRERELEASE]})?${fe[se.BUILD]}?)?)?`),X("XRANGEPLAINLOOSE",`[v=\\s]*(${fe[se.XRANGEIDENTIFIERLOOSE]})(?:\\.(${fe[se.XRANGEIDENTIFIERLOOSE]})(?:\\.(${fe[se.XRANGEIDENTIFIERLOOSE]})(?:${fe[se.PRERELEASELOOSE]})?${fe[se.BUILD]}?)?)?`),X("XRANGE",`^${fe[se.GTLT]}\\s*${fe[se.XRANGEPLAIN]}$`),X("XRANGELOOSE",`^${fe[se.GTLT]}\\s*${fe[se.XRANGEPLAINLOOSE]}$`),X("COERCE",`(^|[^\\d])(\\d{1,${R}})(?:\\.(\\d{1,${R}}))?(?:\\.(\\d{1,${R}}))?(?:$|[^\\d])`),X("COERCERTL",fe[se.COERCE],!0),X("LONETILDE","(?:~>?)"),X("TILDETRIM",`(\\s*)${fe[se.LONETILDE]}\\s+`,!0),Ne.tildeTrimReplace="$1~",X("TILDE",`^${fe[se.LONETILDE]}${fe[se.XRANGEPLAIN]}$`),X("TILDELOOSE",`^${fe[se.LONETILDE]}${fe[se.XRANGEPLAINLOOSE]}$`),X("LONECARET","(?:\\^)"),X("CARETTRIM",`(\\s*)${fe[se.LONECARET]}\\s+`,!0),Ne.caretTrimReplace="$1^",X("CARET",`^${fe[se.LONECARET]}${fe[se.XRANGEPLAIN]}$`),X("CARETLOOSE",`^${fe[se.LONECARET]}${fe[se.XRANGEPLAINLOOSE]}$`),X("COMPARATORLOOSE",`^${fe[se.GTLT]}\\s*(${fe[se.LOOSEPLAIN]})$|^$`),X("COMPARATOR",`^${fe[se.GTLT]}\\s*(${fe[se.FULLPLAIN]})$|^$`),X("COMPARATORTRIM",`(\\s*)${fe[se.GTLT]}\\s*(${fe[se.LOOSEPLAIN]}|${fe[se.XRANGEPLAIN]})`,!0),Ne.comparatorTrimReplace="$1$2$3",X("HYPHENRANGE",`^\\s*(${fe[se.XRANGEPLAIN]})\\s+-\\s+(${fe[se.XRANGEPLAIN]})\\s*$`),X("HYPHENRANGELOOSE",`^\\s*(${fe[se.XRANGEPLAINLOOSE]})\\s+-\\s+(${fe[se.XRANGEPLAINLOOSE]})\\s*$`),X("STAR","(<|>)?=?\\s*\\*"),X("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),X("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},7629:(pt,Ne,U)=>{"use strict";var R=U(8237),D=U(2858),we=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,fe=/[\n\r\t]/g,se=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,q=/:\d+$/,X=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,ee=/^[a-zA-Z]:/;function $(Je){return(Je||"").toString().replace(we,"")}var H=[["#","hash"],["?","query"],function(ze,le){return je(le.protocol)?ze.replace(/\\/g,"/"):ze},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Q={hash:1,query:1};function ie(Je){var ze;ze="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var dt,pe={},Ge=typeof(Je=Je||ze.location||{});if("blob:"===Je.protocol)pe=new Mt(unescape(Je.pathname),{});else if("string"===Ge)for(dt in pe=new Mt(Je,{}),Q)delete pe[dt];else if("object"===Ge){for(dt in Je)dt in Q||(pe[dt]=Je[dt]);void 0===pe.slashes&&(pe.slashes=se.test(Je.href))}return pe}function je(Je){return"file:"===Je||"ftp:"===Je||"http:"===Je||"https:"===Je||"ws:"===Je||"wss:"===Je}function qe(Je,ze){Je=(Je=$(Je)).replace(fe,""),ze=ze||{};var et,le=X.exec(Je),pe=le[1]?le[1].toLowerCase():"",Ge=!!le[2],dt=!!le[3],st=0;return Ge?dt?(et=le[2]+le[3]+le[4],st=le[2].length+le[3].length):(et=le[2]+le[4],st=le[2].length):dt?(et=le[3]+le[4],st=le[3].length):et=le[4],"file:"===pe?st>=2&&(et=et.slice(2)):je(pe)?et=le[4]:pe?Ge&&(et=et.slice(2)):st>=2&&je(ze.protocol)&&(et=le[4]),{protocol:pe,slashes:Ge||je(pe),slashesCount:st,rest:et}}function Mt(Je,ze,le){if(Je=(Je=$(Je)).replace(fe,""),!(this instanceof Mt))return new Mt(Je,ze,le);var pe,Ge,dt,st,et,Pe,Z=H.slice(),V=typeof ze,oe=this,_e=0;for("object"!==V&&"string"!==V&&(le=ze,ze=null),le&&"function"!=typeof le&&(le=D.parse),pe=!(Ge=qe(Je||"",ze=ie(ze))).protocol&&!Ge.slashes,oe.slashes=Ge.slashes||pe&&ze.slashes,oe.protocol=Ge.protocol||ze.protocol||"",Je=Ge.rest,("file:"===Ge.protocol&&(2!==Ge.slashesCount||ee.test(Je))||!Ge.slashes&&(Ge.protocol||Ge.slashesCount<2||!je(oe.protocol)))&&(Z[3]=[/(.*)/,"pathname"]);_e<Z.length;_e++)"function"!=typeof(st=Z[_e])?(Pe=st[1],(dt=st[0])!=dt?oe[Pe]=Je:"string"==typeof dt?~(et="@"===dt?Je.lastIndexOf(dt):Je.indexOf(dt))&&("number"==typeof st[2]?(oe[Pe]=Je.slice(0,et),Je=Je.slice(et+st[2])):(oe[Pe]=Je.slice(et),Je=Je.slice(0,et))):(et=dt.exec(Je))&&(oe[Pe]=et[1],Je=Je.slice(0,et.index)),oe[Pe]=oe[Pe]||pe&&st[3]&&ze[Pe]||"",st[4]&&(oe[Pe]=oe[Pe].toLowerCase())):Je=st(Je,oe);le&&(oe.query=le(oe.query)),pe&&ze.slashes&&"/"!==oe.pathname.charAt(0)&&(""!==oe.pathname||""!==ze.pathname)&&(oe.pathname=function ke(Je,ze){if(""===Je)return ze;for(var le=(ze||"/").split("/").slice(0,-1).concat(Je.split("/")),pe=le.length,Ge=le[pe-1],dt=!1,st=0;pe--;)"."===le[pe]?le.splice(pe,1):".."===le[pe]?(le.splice(pe,1),st++):st&&(0===pe&&(dt=!0),le.splice(pe,1),st--);return dt&&le.unshift(""),("."===Ge||".."===Ge)&&le.push(""),le.join("/")}(oe.pathname,ze.pathname)),"/"!==oe.pathname.charAt(0)&&je(oe.protocol)&&(oe.pathname="/"+oe.pathname),R(oe.port,oe.protocol)||(oe.host=oe.hostname,oe.port=""),oe.username=oe.password="",oe.auth&&(~(et=oe.auth.indexOf(":"))?(oe.username=oe.auth.slice(0,et),oe.username=encodeURIComponent(decodeURIComponent(oe.username)),oe.password=oe.auth.slice(et+1),oe.password=encodeURIComponent(decodeURIComponent(oe.password))):oe.username=encodeURIComponent(decodeURIComponent(oe.auth)),oe.auth=oe.password?oe.username+":"+oe.password:oe.username),oe.origin="file:"!==oe.protocol&&je(oe.protocol)&&oe.host?oe.protocol+"//"+oe.host:"null",oe.href=oe.toString()}Mt.prototype={set:function De(Je,ze,le){var pe=this;switch(Je){case"query":"string"==typeof ze&&ze.length&&(ze=(le||D.parse)(ze)),pe[Je]=ze;break;case"port":pe[Je]=ze,R(ze,pe.protocol)?ze&&(pe.host=pe.hostname+":"+ze):(pe.host=pe.hostname,pe[Je]="");break;case"hostname":pe[Je]=ze,pe.port&&(ze+=":"+pe.port),pe.host=ze;break;case"host":pe[Je]=ze,q.test(ze)?(ze=ze.split(":"),pe.port=ze.pop(),pe.hostname=ze.join(":")):(pe.hostname=ze,pe.port="");break;case"protocol":pe.protocol=ze.toLowerCase(),pe.slashes=!le;break;case"pathname":case"hash":if(ze){var Ge="pathname"===Je?"/":"#";pe[Je]=ze.charAt(0)!==Ge?Ge+ze:ze}else pe[Je]=ze;break;case"username":case"password":pe[Je]=encodeURIComponent(ze);break;case"auth":var dt=ze.indexOf(":");~dt?(pe.username=ze.slice(0,dt),pe.username=encodeURIComponent(decodeURIComponent(pe.username)),pe.password=ze.slice(dt+1),pe.password=encodeURIComponent(decodeURIComponent(pe.password))):pe.username=encodeURIComponent(decodeURIComponent(ze))}for(var st=0;st<H.length;st++){var et=H[st];et[4]&&(pe[et[1]]=pe[et[1]].toLowerCase())}return pe.auth=pe.password?pe.username+":"+pe.password:pe.username,pe.origin="file:"!==pe.protocol&&je(pe.protocol)&&pe.host?pe.protocol+"//"+pe.host:"null",pe.href=pe.toString(),pe},toString:function yt(Je){(!Je||"function"!=typeof Je)&&(Je=D.stringify);var ze,le=this,pe=le.host,Ge=le.protocol;Ge&&":"!==Ge.charAt(Ge.length-1)&&(Ge+=":");var dt=Ge+(le.protocol&&le.slashes||je(le.protocol)?"//":"");return le.username?(dt+=le.username,le.password&&(dt+=":"+le.password),dt+="@"):le.password?(dt+=":"+le.password,dt+="@"):"file:"!==le.protocol&&je(le.protocol)&&!pe&&"/"!==le.pathname&&(dt+="@"),(":"===pe[pe.length-1]||q.test(le.hostname)&&!le.port)&&(pe+=":"),dt+=pe+le.pathname,(ze="object"==typeof le.query?Je(le.query):le.query)&&(dt+="?"!==ze.charAt(0)?"?"+ze:ze),le.hash&&(dt+=le.hash),dt}},Mt.extractProtocol=qe,Mt.location=ie,Mt.trimLeft=$,Mt.qs=D,pt.exports=Mt},2626:pt=>{"use strict";pt.exports=function(Ne){Ne.prototype[Symbol.iterator]=function*(){for(let U=this.head;U;U=U.next)yield U.value}}},7245:(pt,Ne,U)=>{"use strict";function R(q){var X=this;if(X instanceof R||(X=new R),X.tail=null,X.head=null,X.length=0,q&&"function"==typeof q.forEach)q.forEach(function(H){X.push(H)});else if(arguments.length>0)for(var ee=0,$=arguments.length;ee<$;ee++)X.push(arguments[ee]);return X}function D(q,X,ee){var $=X===q.head?new se(ee,null,X,q):new se(ee,X,X.next,q);return null===$.next&&(q.tail=$),null===$.prev&&(q.head=$),q.length++,$}function we(q,X){q.tail=new se(X,q.tail,null,q),q.head||(q.head=q.tail),q.length++}function fe(q,X){q.head=new se(X,null,q.head,q),q.tail||(q.tail=q.head),q.length++}function se(q,X,ee,$){if(!(this instanceof se))return new se(q,X,ee,$);this.list=$,this.value=q,X?(X.next=this,this.prev=X):this.prev=null,ee?(ee.prev=this,this.next=ee):this.next=null}pt.exports=R,R.Node=se,R.create=R,R.prototype.removeNode=function(q){if(q.list!==this)throw new Error("removing node which does not belong to this list");var X=q.next,ee=q.prev;return X&&(X.prev=ee),ee&&(ee.next=X),q===this.head&&(this.head=X),q===this.tail&&(this.tail=ee),q.list.length--,q.next=null,q.prev=null,q.list=null,X},R.prototype.unshiftNode=function(q){if(q!==this.head){q.list&&q.list.removeNode(q);var X=this.head;q.list=this,q.next=X,X&&(X.prev=q),this.head=q,this.tail||(this.tail=q),this.length++}},R.prototype.pushNode=function(q){if(q!==this.tail){q.list&&q.list.removeNode(q);var X=this.tail;q.list=this,q.prev=X,X&&(X.next=q),this.tail=q,this.head||(this.head=q),this.length++}},R.prototype.push=function(){for(var q=0,X=arguments.length;q<X;q++)we(this,arguments[q]);return this.length},R.prototype.unshift=function(){for(var q=0,X=arguments.length;q<X;q++)fe(this,arguments[q]);return this.length},R.prototype.pop=function(){if(this.tail){var q=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,q}},R.prototype.shift=function(){if(this.head){var q=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,q}},R.prototype.forEach=function(q,X){X=X||this;for(var ee=this.head,$=0;null!==ee;$++)q.call(X,ee.value,$,this),ee=ee.next},R.prototype.forEachReverse=function(q,X){X=X||this;for(var ee=this.tail,$=this.length-1;null!==ee;$--)q.call(X,ee.value,$,this),ee=ee.prev},R.prototype.get=function(q){for(var X=0,ee=this.head;null!==ee&&X<q;X++)ee=ee.next;if(X===q&&null!==ee)return ee.value},R.prototype.getReverse=function(q){for(var X=0,ee=this.tail;null!==ee&&X<q;X++)ee=ee.prev;if(X===q&&null!==ee)return ee.value},R.prototype.map=function(q,X){X=X||this;for(var ee=new R,$=this.head;null!==$;)ee.push(q.call(X,$.value,this)),$=$.next;return ee},R.prototype.mapReverse=function(q,X){X=X||this;for(var ee=new R,$=this.tail;null!==$;)ee.push(q.call(X,$.value,this)),$=$.prev;return ee},R.prototype.reduce=function(q,X){var ee,$=this.head;if(arguments.length>1)ee=X;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");$=this.head.next,ee=this.head.value}for(var H=0;null!==$;H++)ee=q(ee,$.value,H),$=$.next;return ee},R.prototype.reduceReverse=function(q,X){var ee,$=this.tail;if(arguments.length>1)ee=X;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");$=this.tail.prev,ee=this.tail.value}for(var H=this.length-1;null!==$;H--)ee=q(ee,$.value,H),$=$.prev;return ee},R.prototype.toArray=function(){for(var q=new Array(this.length),X=0,ee=this.head;null!==ee;X++)q[X]=ee.value,ee=ee.next;return q},R.prototype.toArrayReverse=function(){for(var q=new Array(this.length),X=0,ee=this.tail;null!==ee;X++)q[X]=ee.value,ee=ee.prev;return q},R.prototype.slice=function(q,X){(X=X||this.length)<0&&(X+=this.length),(q=q||0)<0&&(q+=this.length);var ee=new R;if(X<q||X<0)return ee;q<0&&(q=0),X>this.length&&(X=this.length);for(var $=0,H=this.head;null!==H&&$<q;$++)H=H.next;for(;null!==H&&$<X;$++,H=H.next)ee.push(H.value);return ee},R.prototype.sliceReverse=function(q,X){(X=X||this.length)<0&&(X+=this.length),(q=q||0)<0&&(q+=this.length);var ee=new R;if(X<q||X<0)return ee;q<0&&(q=0),X>this.length&&(X=this.length);for(var $=this.length,H=this.tail;null!==H&&$>X;$--)H=H.prev;for(;null!==H&&$>q;$--,H=H.prev)ee.push(H.value);return ee},R.prototype.splice=function(q,X,...ee){q>this.length&&(q=this.length-1),q<0&&(q=this.length+q);for(var $=0,H=this.head;null!==H&&$<q;$++)H=H.next;var Q=[];for($=0;H&&$<X;$++)Q.push(H.value),H=this.removeNode(H);for(null===H&&(H=this.tail),H!==this.head&&H!==this.tail&&(H=H.prev),$=0;$<ee.length;$++)H=D(this,H,ee[$]);return Q},R.prototype.reverse=function(){for(var q=this.head,X=this.tail,ee=q;null!==ee;ee=ee.prev){var $=ee.prev;ee.prev=ee.next,ee.next=$}return this.head=X,this.tail=q,this};try{U(2626)(R)}catch(q){}},655:(pt,Ne,U)=>{"use strict";function ee(Z,V,oe,_e){return new(oe||(oe=Promise))(function(Fe,xt){function Ut(Yt){try{Ke(_e.next(Yt))}catch(jt){xt(jt)}}function Rt(Yt){try{Ke(_e.throw(Yt))}catch(jt){xt(jt)}}function Ke(Yt){Yt.done?Fe(Yt.value):function He(Fe){return Fe instanceof oe?Fe:new oe(function(xt){xt(Fe)})}(Yt.value).then(Ut,Rt)}Ke((_e=_e.apply(Z,V||[])).next())})}function De(Z){return this instanceof De?(this.v=Z,this):new De(Z)}function yt(Z,V,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,_e=oe.apply(Z,V||[]),Fe=[];return He={},xt("next"),xt("throw"),xt("return"),He[Symbol.asyncIterator]=function(){return this},He;function xt(ln){_e[ln]&&(He[ln]=function(Kt){return new Promise(function(Ai,di){Fe.push([ln,Kt,Ai,di])>1||Ut(ln,Kt)})})}function Ut(ln,Kt){try{!function Rt(ln){ln.value instanceof De?Promise.resolve(ln.value.v).then(Ke,Yt):jt(Fe[0][2],ln)}(_e[ln](Kt))}catch(Ai){jt(Fe[0][3],Ai)}}function Ke(ln){Ut("next",ln)}function Yt(ln){Ut("throw",ln)}function jt(ln,Kt){ln(Kt),Fe.shift(),Fe.length&&Ut(Fe[0][0],Fe[0][1])}}function ze(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,V=Z[Symbol.asyncIterator];return V?V.call(Z):(Z=function ie(Z){var V="function"==typeof Symbol&&Symbol.iterator,oe=V&&Z[V],_e=0;if(oe)return oe.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&_e>=Z.length&&(Z=void 0),{value:Z&&Z[_e++],done:!Z}}};throw new TypeError(V?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),oe={},_e("next"),_e("throw"),_e("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function _e(Fe){oe[Fe]=Z[Fe]&&function(xt){return new Promise(function(Ut,Rt){!function He(Fe,xt,Ut,Rt){Promise.resolve(Rt).then(function(Ke){Fe({value:Ke,done:Ut})},xt)}(Ut,Rt,(xt=Z[Fe](xt)).done,xt.value)})}}}U.d(Ne,{FC:()=>yt,KL:()=>ze,mG:()=>ee,qq:()=>De})},9808:(pt,Ne,U)=>{"use strict";U.d(Ne,{Do:()=>ze,EM:()=>jl,HT:()=>se,JF:()=>Hs,K0:()=>X,Mx:()=>ji,NF:()=>la,O5:()=>No,Ov:()=>su,S$:()=>De,V_:()=>H,Ye:()=>le,b0:()=>Je,bD:()=>$l,ez:()=>ws,q:()=>we,uU:()=>qi,w_:()=>q});var R=U(5e3);let D=null;function we(){return D}function se(N){D||(D=N)}class q{}const X=new R.OlP("DocumentToken");let ee=(()=>{class N{historyGo(O){throw new Error("Not implemented")}}return N.\u0275fac=function(O){return new(O||N)},N.\u0275prov=R.Yz7({token:N,factory:function(){return function $(){return(0,R.LFG)(Q)}()},providedIn:"platform"}),N})();const H=new R.OlP("Location Initialized");let Q=(()=>{class N extends ee{constructor(O){super(),this._doc=O,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return we().getBaseHref(this._doc)}onPopState(O){const J=we().getGlobalEventTarget(this._doc,"window");return J.addEventListener("popstate",O,!1),()=>J.removeEventListener("popstate",O)}onHashChange(O){const J=we().getGlobalEventTarget(this._doc,"window");return J.addEventListener("hashchange",O,!1),()=>J.removeEventListener("hashchange",O)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(O){this.location.pathname=O}pushState(O,J,xe){ie()?this._history.pushState(O,J,xe):this.location.hash=xe}replaceState(O,J,xe){ie()?this._history.replaceState(O,J,xe):this.location.hash=xe}forward(){this._history.forward()}back(){this._history.back()}historyGo(O=0){this._history.go(O)}getState(){return this._history.state}}return N.\u0275fac=function(O){return new(O||N)(R.LFG(X))},N.\u0275prov=R.Yz7({token:N,factory:function(){return function je(){return new Q((0,R.LFG)(X))}()},providedIn:"platform"}),N})();function ie(){return!!window.history.pushState}function qe(N,K){if(0==N.length)return K;if(0==K.length)return N;let O=0;return N.endsWith("/")&&O++,K.startsWith("/")&&O++,2==O?N+K.substring(1):1==O?N+K:N+"/"+K}function ke(N){const K=N.match(/#|\?|$/),O=K&&K.index||N.length;return N.slice(0,O-("/"===N[O-1]?1:0))+N.slice(O)}function Mt(N){return N&&"?"!==N[0]?"?"+N:N}let De=(()=>{class N{historyGo(O){throw new Error("Not implemented")}}return N.\u0275fac=function(O){return new(O||N)},N.\u0275prov=R.Yz7({token:N,factory:function(){return(0,R.f3M)(Je)},providedIn:"root"}),N})();const yt=new R.OlP("appBaseHref");let Je=(()=>{class N extends De{constructor(O,J){var xe,Qe,at;super(),this._platformLocation=O,this._removeListenerFns=[],this._baseHref=null!==(at=null!==(xe=null!=J?J:this._platformLocation.getBaseHrefFromDOM())&&void 0!==xe?xe:null===(Qe=(0,R.f3M)(X).location)||void 0===Qe?void 0:Qe.origin)&&void 0!==at?at:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(O){this._removeListenerFns.push(this._platformLocation.onPopState(O),this._platformLocation.onHashChange(O))}getBaseHref(){return this._baseHref}prepareExternalUrl(O){return qe(this._baseHref,O)}path(O=!1){const J=this._platformLocation.pathname+Mt(this._platformLocation.search),xe=this._platformLocation.hash;return xe&&O?`${J}${xe}`:J}pushState(O,J,xe,Qe){const at=this.prepareExternalUrl(xe+Mt(Qe));this._platformLocation.pushState(O,J,at)}replaceState(O,J,xe,Qe){const at=this.prepareExternalUrl(xe+Mt(Qe));this._platformLocation.replaceState(O,J,at)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(O=0){var J,xe;null===(xe=(J=this._platformLocation).historyGo)||void 0===xe||xe.call(J,O)}}return N.\u0275fac=function(O){return new(O||N)(R.LFG(ee),R.LFG(yt,8))},N.\u0275prov=R.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})(),ze=(()=>{class N extends De{constructor(O,J){super(),this._platformLocation=O,this._baseHref="",this._removeListenerFns=[],null!=J&&(this._baseHref=J)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(O){this._removeListenerFns.push(this._platformLocation.onPopState(O),this._platformLocation.onHashChange(O))}getBaseHref(){return this._baseHref}path(O=!1){let J=this._platformLocation.hash;return null==J&&(J="#"),J.length>0?J.substring(1):J}prepareExternalUrl(O){const J=qe(this._baseHref,O);return J.length>0?"#"+J:J}pushState(O,J,xe,Qe){let at=this.prepareExternalUrl(xe+Mt(Qe));0==at.length&&(at=this._platformLocation.pathname),this._platformLocation.pushState(O,J,at)}replaceState(O,J,xe,Qe){let at=this.prepareExternalUrl(xe+Mt(Qe));0==at.length&&(at=this._platformLocation.pathname),this._platformLocation.replaceState(O,J,at)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(O=0){var J,xe;null===(xe=(J=this._platformLocation).historyGo)||void 0===xe||xe.call(J,O)}}return N.\u0275fac=function(O){return new(O||N)(R.LFG(ee),R.LFG(yt,8))},N.\u0275prov=R.Yz7({token:N,factory:N.\u0275fac}),N})(),le=(()=>{class N{constructor(O){this._subject=new R.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=O;const J=this._locationStrategy.getBaseHref();this._baseHref=ke(dt(J)),this._locationStrategy.onPopState(xe=>{this._subject.emit({url:this.path(!0),pop:!0,state:xe.state,type:xe.type})})}ngOnDestroy(){var O;null===(O=this._urlChangeSubscription)||void 0===O||O.unsubscribe(),this._urlChangeListeners=[]}path(O=!1){return this.normalize(this._locationStrategy.path(O))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(O,J=""){return this.path()==this.normalize(O+Mt(J))}normalize(O){return N.stripTrailingSlash(function Ge(N,K){return N&&K.startsWith(N)?K.substring(N.length):K}(this._baseHref,dt(O)))}prepareExternalUrl(O){return O&&"/"!==O[0]&&(O="/"+O),this._locationStrategy.prepareExternalUrl(O)}go(O,J="",xe=null){this._locationStrategy.pushState(xe,"",O,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(O+Mt(J)),xe)}replaceState(O,J="",xe=null){this._locationStrategy.replaceState(xe,"",O,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(O+Mt(J)),xe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(O=0){var J,xe;null===(xe=(J=this._locationStrategy).historyGo)||void 0===xe||xe.call(J,O)}onUrlChange(O){return this._urlChangeListeners.push(O),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(J=>{this._notifyUrlChangeListeners(J.url,J.state)})),()=>{var J;const xe=this._urlChangeListeners.indexOf(O);this._urlChangeListeners.splice(xe,1),0===this._urlChangeListeners.length&&(null===(J=this._urlChangeSubscription)||void 0===J||J.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(O="",J){this._urlChangeListeners.forEach(xe=>xe(O,J))}subscribe(O,J,xe){return this._subject.subscribe({next:O,error:J,complete:xe})}}return N.normalizeQueryParams=Mt,N.joinWithSlash=qe,N.stripTrailingSlash=ke,N.\u0275fac=function(O){return new(O||N)(R.LFG(De))},N.\u0275prov=R.Yz7({token:N,factory:function(){return function pe(){return new le((0,R.LFG)(De))}()},providedIn:"root"}),N})();function dt(N){return N.replace(/\/index.html$/,"")}var Z=(()=>((Z=Z||{})[Z.Format=0]="Format",Z[Z.Standalone=1]="Standalone",Z))(),V=(()=>((V=V||{})[V.Narrow=0]="Narrow",V[V.Abbreviated=1]="Abbreviated",V[V.Wide=2]="Wide",V[V.Short=3]="Short",V))(),oe=(()=>((oe=oe||{})[oe.Short=0]="Short",oe[oe.Medium=1]="Medium",oe[oe.Long=2]="Long",oe[oe.Full=3]="Full",oe))(),_e=(()=>((_e=_e||{})[_e.Decimal=0]="Decimal",_e[_e.Group=1]="Group",_e[_e.List=2]="List",_e[_e.PercentSign=3]="PercentSign",_e[_e.PlusSign=4]="PlusSign",_e[_e.MinusSign=5]="MinusSign",_e[_e.Exponential=6]="Exponential",_e[_e.SuperscriptingExponent=7]="SuperscriptingExponent",_e[_e.PerMille=8]="PerMille",_e[_e.Infinity=9]="Infinity",_e[_e.NaN=10]="NaN",_e[_e.TimeSeparator=11]="TimeSeparator",_e[_e.CurrencyDecimal=12]="CurrencyDecimal",_e[_e.CurrencyGroup=13]="CurrencyGroup",_e))();function ln(N,K){return fi((0,R.cg1)(N)[R.wAp.DateFormat],K)}function Kt(N,K){return fi((0,R.cg1)(N)[R.wAp.TimeFormat],K)}function Ai(N,K){return fi((0,R.cg1)(N)[R.wAp.DateTimeFormat],K)}function di(N,K){const O=(0,R.cg1)(N),J=O[R.wAp.NumberSymbols][K];if(void 0===J){if(K===_e.CurrencyDecimal)return O[R.wAp.NumberSymbols][_e.Decimal];if(K===_e.CurrencyGroup)return O[R.wAp.NumberSymbols][_e.Group]}return J}function Nr(N){if(!N[R.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${N[R.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function fi(N,K){for(let O=K;O>-1;O--)if(void 0!==N[O])return N[O];throw new Error("Locale data API: locale data undefined")}function fs(N){const[K,O]=N.split(":");return{hours:+K,minutes:+O}}const tr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ii={},ft=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var be=(()=>((be=be||{})[be.Short=0]="Short",be[be.ShortGMT=1]="ShortGMT",be[be.Long=2]="Long",be[be.Extended=3]="Extended",be))(),me=(()=>((me=me||{})[me.FullYear=0]="FullYear",me[me.Month=1]="Month",me[me.Date=2]="Date",me[me.Hours=3]="Hours",me[me.Minutes=4]="Minutes",me[me.Seconds=5]="Seconds",me[me.FractionalSeconds=6]="FractionalSeconds",me[me.Day=7]="Day",me))(),Ue=(()=>((Ue=Ue||{})[Ue.DayPeriods=0]="DayPeriods",Ue[Ue.Days=1]="Days",Ue[Ue.Months=2]="Months",Ue[Ue.Eras=3]="Eras",Ue))();function Et(N,K,O,J){let xe=function bi(N){if(Ri(N))return N;if("number"==typeof N&&!isNaN(N))return new Date(N);if("string"==typeof N){if(N=N.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(N)){const[xe,Qe=1,at=1]=N.split("-").map(wt=>+wt);return sn(xe,Qe-1,at)}const O=parseFloat(N);if(!isNaN(N-O))return new Date(O);let J;if(J=N.match(tr))return function ki(N){const K=new Date(0);let O=0,J=0;const xe=N[8]?K.setUTCFullYear:K.setFullYear,Qe=N[8]?K.setUTCHours:K.setHours;N[9]&&(O=Number(N[9]+N[10]),J=Number(N[9]+N[11])),xe.call(K,Number(N[1]),Number(N[2])-1,Number(N[3]));const at=Number(N[4]||0)-O,wt=Number(N[5]||0)-J,$n=Number(N[6]||0),Pn=Math.floor(1e3*parseFloat("0."+(N[7]||0)));return Qe.call(K,at,wt,$n,Pn),K}(J)}const K=new Date(N);if(!Ri(K))throw new Error(`Unable to convert "${N}" into a date`);return K}(N);K=dn(O,K)||K;let wt,at=[];for(;K;){if(wt=ft.exec(K),!wt){at.push(K);break}{at=at.concat(wt.slice(1));const Xn=at.pop();if(!Xn)break;K=Xn}}let $n=xe.getTimezoneOffset();J&&($n=Bs(J,$n),xe=function Bn(N,K,O){const J=O?-1:1,xe=N.getTimezoneOffset();return function ps(N,K){return(N=new Date(N.getTime())).setMinutes(N.getMinutes()+K),N}(N,J*(Bs(K,xe)-xe))}(xe,J,!0));let Pn="";return at.forEach(Xn=>{const Ln=function Ul(N){if(ts[N])return ts[N];let K;switch(N){case"G":case"GG":case"GGG":K=hn(Ue.Eras,V.Abbreviated);break;case"GGGG":K=hn(Ue.Eras,V.Wide);break;case"GGGGG":K=hn(Ue.Eras,V.Narrow);break;case"y":K=Vt(me.FullYear,1,0,!1,!0);break;case"yy":K=Vt(me.FullYear,2,0,!0,!0);break;case"yyy":K=Vt(me.FullYear,3,0,!1,!0);break;case"yyyy":K=Vt(me.FullYear,4,0,!1,!0);break;case"Y":K=xr(1);break;case"YY":K=xr(2,!0);break;case"YYY":K=xr(3);break;case"YYYY":K=xr(4);break;case"M":case"L":K=Vt(me.Month,1,1);break;case"MM":case"LL":K=Vt(me.Month,2,1);break;case"MMM":K=hn(Ue.Months,V.Abbreviated);break;case"MMMM":K=hn(Ue.Months,V.Wide);break;case"MMMMM":K=hn(Ue.Months,V.Narrow);break;case"LLL":K=hn(Ue.Months,V.Abbreviated,Z.Standalone);break;case"LLLL":K=hn(Ue.Months,V.Wide,Z.Standalone);break;case"LLLLL":K=hn(Ue.Months,V.Narrow,Z.Standalone);break;case"w":K=Br(1);break;case"ww":K=Br(2);break;case"W":K=Br(1,!0);break;case"d":K=Vt(me.Date,1);break;case"dd":K=Vt(me.Date,2);break;case"c":case"cc":K=Vt(me.Day,1);break;case"ccc":K=hn(Ue.Days,V.Abbreviated,Z.Standalone);break;case"cccc":K=hn(Ue.Days,V.Wide,Z.Standalone);break;case"ccccc":K=hn(Ue.Days,V.Narrow,Z.Standalone);break;case"cccccc":K=hn(Ue.Days,V.Short,Z.Standalone);break;case"E":case"EE":case"EEE":K=hn(Ue.Days,V.Abbreviated);break;case"EEEE":K=hn(Ue.Days,V.Wide);break;case"EEEEE":K=hn(Ue.Days,V.Narrow);break;case"EEEEEE":K=hn(Ue.Days,V.Short);break;case"a":case"aa":case"aaa":K=hn(Ue.DayPeriods,V.Abbreviated);break;case"aaaa":K=hn(Ue.DayPeriods,V.Wide);break;case"aaaaa":K=hn(Ue.DayPeriods,V.Narrow);break;case"b":case"bb":case"bbb":K=hn(Ue.DayPeriods,V.Abbreviated,Z.Standalone,!0);break;case"bbbb":K=hn(Ue.DayPeriods,V.Wide,Z.Standalone,!0);break;case"bbbbb":K=hn(Ue.DayPeriods,V.Narrow,Z.Standalone,!0);break;case"B":case"BB":case"BBB":K=hn(Ue.DayPeriods,V.Abbreviated,Z.Format,!0);break;case"BBBB":K=hn(Ue.DayPeriods,V.Wide,Z.Format,!0);break;case"BBBBB":K=hn(Ue.DayPeriods,V.Narrow,Z.Format,!0);break;case"h":K=Vt(me.Hours,1,-12);break;case"hh":K=Vt(me.Hours,2,-12);break;case"H":K=Vt(me.Hours,1);break;case"HH":K=Vt(me.Hours,2);break;case"m":K=Vt(me.Minutes,1);break;case"mm":K=Vt(me.Minutes,2);break;case"s":K=Vt(me.Seconds,1);break;case"ss":K=Vt(me.Seconds,2);break;case"S":K=Vt(me.FractionalSeconds,1);break;case"SS":K=Vt(me.FractionalSeconds,2);break;case"SSS":K=Vt(me.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":K=Yn(be.Short);break;case"ZZZZZ":K=Yn(be.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":K=Yn(be.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":K=Yn(be.Long);break;default:return null}return ts[N]=K,K}(Xn);Pn+=Ln?Ln(xe,O,$n):"''"===Xn?"'":Xn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Pn}function sn(N,K,O){const J=new Date(0);return J.setFullYear(N,K,O),J.setHours(0,0,0),J}function dn(N,K){const O=function Fe(N){return(0,R.cg1)(N)[R.wAp.LocaleId]}(N);if(Ii[O]=Ii[O]||{},Ii[O][K])return Ii[O][K];let J="";switch(K){case"shortDate":J=ln(N,oe.Short);break;case"mediumDate":J=ln(N,oe.Medium);break;case"longDate":J=ln(N,oe.Long);break;case"fullDate":J=ln(N,oe.Full);break;case"shortTime":J=Kt(N,oe.Short);break;case"mediumTime":J=Kt(N,oe.Medium);break;case"longTime":J=Kt(N,oe.Long);break;case"fullTime":J=Kt(N,oe.Full);break;case"short":const xe=dn(N,"shortTime"),Qe=dn(N,"shortDate");J=kt(Ai(N,oe.Short),[xe,Qe]);break;case"medium":const at=dn(N,"mediumTime"),wt=dn(N,"mediumDate");J=kt(Ai(N,oe.Medium),[at,wt]);break;case"long":const $n=dn(N,"longTime"),Pn=dn(N,"longDate");J=kt(Ai(N,oe.Long),[$n,Pn]);break;case"full":const Xn=dn(N,"fullTime"),Ln=dn(N,"fullDate");J=kt(Ai(N,oe.Full),[Xn,Ln])}return J&&(Ii[O][K]=J),J}function kt(N,K){return K&&(N=N.replace(/\{([^}]+)}/g,function(O,J){return null!=K&&J in K?K[J]:O})),N}function rn(N,K,O="-",J,xe){let Qe="";(N<0||xe&&N<=0)&&(xe?N=1-N:(N=-N,Qe=O));let at=String(N);for(;at.length<K;)at="0"+at;return J&&(at=at.slice(at.length-K)),Qe+at}function Vt(N,K,O=0,J=!1,xe=!1){return function(Qe,at){let wt=function Fi(N,K){switch(N){case me.FullYear:return K.getFullYear();case me.Month:return K.getMonth();case me.Date:return K.getDate();case me.Hours:return K.getHours();case me.Minutes:return K.getMinutes();case me.Seconds:return K.getSeconds();case me.FractionalSeconds:return K.getMilliseconds();case me.Day:return K.getDay();default:throw new Error(`Unknown DateType value "${N}".`)}}(N,Qe);if((O>0||wt>-O)&&(wt+=O),N===me.Hours)0===wt&&-12===O&&(wt=12);else if(N===me.FractionalSeconds)return function Vn(N,K){return rn(N,3).substring(0,K)}(wt,K);const $n=di(at,_e.MinusSign);return rn(wt,K,$n,J,xe)}}function hn(N,K,O=Z.Format,J=!1){return function(xe,Qe){return function xn(N,K,O,J,xe,Qe){switch(O){case Ue.Months:return function Rt(N,K,O){const J=(0,R.cg1)(N),Qe=fi([J[R.wAp.MonthsFormat],J[R.wAp.MonthsStandalone]],K);return fi(Qe,O)}(K,xe,J)[N.getMonth()];case Ue.Days:return function Ut(N,K,O){const J=(0,R.cg1)(N),Qe=fi([J[R.wAp.DaysFormat],J[R.wAp.DaysStandalone]],K);return fi(Qe,O)}(K,xe,J)[N.getDay()];case Ue.DayPeriods:const at=N.getHours(),wt=N.getMinutes();if(Qe){const Pn=function ks(N){const K=(0,R.cg1)(N);return Nr(K),(K[R.wAp.ExtraData][2]||[]).map(J=>"string"==typeof J?fs(J):[fs(J[0]),fs(J[1])])}(K),Xn=function Wi(N,K,O){const J=(0,R.cg1)(N);Nr(J);const Qe=fi([J[R.wAp.ExtraData][0],J[R.wAp.ExtraData][1]],K)||[];return fi(Qe,O)||[]}(K,xe,J),Ln=Pn.findIndex(Bi=>{if(Array.isArray(Bi)){const[Rn,Di]=Bi,hr=at>=Rn.hours&&wt>=Rn.minutes,ot=at<Di.hours||at===Di.hours&&wt<Di.minutes;if(Rn.hours<Di.hours){if(hr&&ot)return!0}else if(hr||ot)return!0}else if(Bi.hours===at&&Bi.minutes===wt)return!0;return!1});if(-1!==Ln)return Xn[Ln]}return function xt(N,K,O){const J=(0,R.cg1)(N),Qe=fi([J[R.wAp.DayPeriodsFormat],J[R.wAp.DayPeriodsStandalone]],K);return fi(Qe,O)}(K,xe,J)[at<12?0:1];case Ue.Eras:return function Ke(N,K){return fi((0,R.cg1)(N)[R.wAp.Eras],K)}(K,J)[N.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${O}`)}}(xe,Qe,N,K,O,J)}}function Yn(N){return function(K,O,J){const xe=-1*J,Qe=di(O,_e.MinusSign),at=xe>0?Math.floor(xe/60):Math.ceil(xe/60);switch(N){case be.Short:return(xe>=0?"+":"")+rn(at,2,Qe)+rn(Math.abs(xe%60),2,Qe);case be.ShortGMT:return"GMT"+(xe>=0?"+":"")+rn(at,1,Qe);case be.Long:return"GMT"+(xe>=0?"+":"")+rn(at,2,Qe)+":"+rn(Math.abs(xe%60),2,Qe);case be.Extended:return 0===J?"Z":(xe>=0?"+":"")+rn(at,2,Qe)+":"+rn(Math.abs(xe%60),2,Qe);default:throw new Error(`Unknown zone width "${N}"`)}}}function kr(N){return sn(N.getFullYear(),N.getMonth(),N.getDate()+(4-N.getDay()))}function Br(N,K=!1){return function(O,J){let xe;if(K){const Qe=new Date(O.getFullYear(),O.getMonth(),1).getDay()-1,at=O.getDate();xe=1+Math.floor((at+Qe)/7)}else{const Qe=kr(O),at=function wi(N){const K=sn(N,0,1).getDay();return sn(N,0,1+(K<=4?4:11)-K)}(Qe.getFullYear()),wt=Qe.getTime()-at.getTime();xe=1+Math.round(wt/6048e5)}return rn(xe,N,di(J,_e.MinusSign))}}function xr(N,K=!1){return function(O,J){return rn(kr(O).getFullYear(),N,di(J,_e.MinusSign),K)}}const ts={};function Bs(N,K){N=N.replace(/:/g,"");const O=Date.parse("Jan 01, 1970 00:00:00 "+N)/6e4;return isNaN(O)?K:O}function Ri(N){return N instanceof Date&&!isNaN(N.valueOf())}function ji(N,K){K=encodeURIComponent(K);for(const O of N.split(";")){const J=O.indexOf("="),[xe,Qe]=-1==J?[O,""]:[O.slice(0,J),O.slice(J+1)];if(xe.trim()===K)return decodeURIComponent(Qe)}return null}let No=(()=>{class N{constructor(O,J){this._viewContainer=O,this._context=new Ei,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=J}set ngIf(O){this._context.$implicit=this._context.ngIf=O,this._updateView()}set ngIfThen(O){nr("ngIfThen",O),this._thenTemplateRef=O,this._thenViewRef=null,this._updateView()}set ngIfElse(O){nr("ngIfElse",O),this._elseTemplateRef=O,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(O,J){return!0}}return N.\u0275fac=function(O){return new(O||N)(R.Y36(R.s_b),R.Y36(R.Rgc))},N.\u0275dir=R.lG2({type:N,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),N})();class Ei{constructor(){this.$implicit=null,this.ngIf=null}}function nr(N,K){if(K&&!K.createEmbeddedView)throw new Error(`${N} must be a TemplateRef, but received '${(0,R.AaK)(K)}'.`)}function wr(N,K){return new R.vHH(2100,!1)}class iu{createSubscription(K,O){return K.subscribe({next:O,error:J=>{throw J}})}dispose(K){K.unsubscribe()}}class jh{createSubscription(K,O){return K.then(O,J=>{throw J})}dispose(K){}}const zl=new jh,ru=new iu;let su=(()=>{class N{constructor(O){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=O}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(O){return this._obj?O!==this._obj?(this._dispose(),this.transform(O)):this._latestValue:(O&&this._subscribe(O),this._latestValue)}_subscribe(O){this._obj=O,this._strategy=this._selectStrategy(O),this._subscription=this._strategy.createSubscription(O,J=>this._updateLatestValue(O,J))}_selectStrategy(O){if((0,R.QGY)(O))return zl;if((0,R.F4k)(O))return ru;throw wr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(O,J){O===this._obj&&(this._latestValue=J,this._ref.markForCheck())}}return N.\u0275fac=function(O){return new(O||N)(R.Y36(R.sBO,16))},N.\u0275pipe=R.Yjl({name:"async",type:N,pure:!1,standalone:!0}),N})();const Gl=new R.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let qi=(()=>{class N{constructor(O,J){this.locale=O,this.defaultTimezone=J}transform(O,J="mediumDate",xe,Qe){var at;if(null==O||""===O||O!=O)return null;try{return Et(O,J,Qe||this.locale,null!==(at=null!=xe?xe:this.defaultTimezone)&&void 0!==at?at:void 0)}catch(wt){throw wr()}}}return N.\u0275fac=function(O){return new(O||N)(R.Y36(R.soG,16),R.Y36(Gl,24))},N.\u0275pipe=R.Yjl({name:"date",type:N,pure:!0,standalone:!0}),N})(),ws=(()=>{class N{}return N.\u0275fac=function(O){return new(O||N)},N.\u0275mod=R.oAB({type:N}),N.\u0275inj=R.cJS({}),N})();const $l="browser";function la(N){return N===$l}let jl=(()=>{class N{}return N.\u0275prov=(0,R.Yz7)({token:N,providedIn:"root",factory:()=>new fo((0,R.LFG)(X),window)}),N})();class fo{constructor(K,O){this.document=K,this.window=O,this.offset=()=>[0,0]}setOffset(K){this.offset=Array.isArray(K)?()=>K:K}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(K){this.supportsScrolling()&&this.window.scrollTo(K[0],K[1])}scrollToAnchor(K){if(!this.supportsScrolling())return;const O=function hu(N,K){const O=N.getElementById(K)||N.getElementsByName(K)[0];if(O)return O;if("function"==typeof N.createTreeWalker&&N.body&&(N.body.createShadowRoot||N.body.attachShadow)){const J=N.createTreeWalker(N.body,NodeFilter.SHOW_ELEMENT);let xe=J.currentNode;for(;xe;){const Qe=xe.shadowRoot;if(Qe){const at=Qe.getElementById(K)||Qe.querySelector(`[name="${K}"]`);if(at)return at}xe=J.nextNode()}}return null}(this.document,K);O&&(this.scrollToElement(O),O.focus())}setHistoryScrollRestoration(K){if(this.supportScrollRestoration()){const O=this.window.history;O&&O.scrollRestoration&&(O.scrollRestoration=K)}}scrollToElement(K){const O=K.getBoundingClientRect(),J=O.left+this.window.pageXOffset,xe=O.top+this.window.pageYOffset,Qe=this.offset();this.window.scrollTo(J-Qe[0],xe-Qe[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const K=rr(this.window.history)||rr(Object.getPrototypeOf(this.window.history));return!(!K||!K.writable&&!K.set)}catch(K){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(K){return!1}}}function rr(N){return Object.getOwnPropertyDescriptor(N,"scrollRestoration")}class Hs{}},520:(pt,Ne,U)=>{"use strict";U.d(Ne,{JF:()=>Or,eN:()=>Fe});var R=U(9808),D=U(5e3),we=U(9646),fe=U(9751),se=U(4351),q=U(9300),X=U(4004);class ee{}class ${}class H{constructor(be){this.normalizedNames=new Map,this.lazyUpdate=null,be?this.lazyInit="string"==typeof be?()=>{this.headers=new Map,be.split("\n").forEach(me=>{const Ue=me.indexOf(":");if(Ue>0){const Et=me.slice(0,Ue),sn=Et.toLowerCase(),dn=me.slice(Ue+1).trim();this.maybeSetNormalizedName(Et,sn),this.headers.has(sn)?this.headers.get(sn).push(dn):this.headers.set(sn,[dn])}})}:()=>{this.headers=new Map,Object.keys(be).forEach(me=>{let Ue=be[me];const Et=me.toLowerCase();"string"==typeof Ue&&(Ue=[Ue]),Ue.length>0&&(this.headers.set(Et,Ue),this.maybeSetNormalizedName(me,Et))})}:this.headers=new Map}has(be){return this.init(),this.headers.has(be.toLowerCase())}get(be){this.init();const me=this.headers.get(be.toLowerCase());return me&&me.length>0?me[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(be){return this.init(),this.headers.get(be.toLowerCase())||null}append(be,me){return this.clone({name:be,value:me,op:"a"})}set(be,me){return this.clone({name:be,value:me,op:"s"})}delete(be,me){return this.clone({name:be,value:me,op:"d"})}maybeSetNormalizedName(be,me){this.normalizedNames.has(me)||this.normalizedNames.set(me,be)}init(){this.lazyInit&&(this.lazyInit instanceof H?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(be=>this.applyUpdate(be)),this.lazyUpdate=null))}copyFrom(be){be.init(),Array.from(be.headers.keys()).forEach(me=>{this.headers.set(me,be.headers.get(me)),this.normalizedNames.set(me,be.normalizedNames.get(me))})}clone(be){const me=new H;return me.lazyInit=this.lazyInit&&this.lazyInit instanceof H?this.lazyInit:this,me.lazyUpdate=(this.lazyUpdate||[]).concat([be]),me}applyUpdate(be){const me=be.name.toLowerCase();switch(be.op){case"a":case"s":let Ue=be.value;if("string"==typeof Ue&&(Ue=[Ue]),0===Ue.length)return;this.maybeSetNormalizedName(be.name,me);const Et=("a"===be.op?this.headers.get(me):void 0)||[];Et.push(...Ue),this.headers.set(me,Et);break;case"d":const sn=be.value;if(sn){let dn=this.headers.get(me);if(!dn)return;dn=dn.filter(kt=>-1===sn.indexOf(kt)),0===dn.length?(this.headers.delete(me),this.normalizedNames.delete(me)):this.headers.set(me,dn)}else this.headers.delete(me),this.normalizedNames.delete(me)}}forEach(be){this.init(),Array.from(this.normalizedNames.keys()).forEach(me=>be(this.normalizedNames.get(me),this.headers.get(me)))}}class ie{encodeKey(be){return Mt(be)}encodeValue(be){return Mt(be)}decodeKey(be){return decodeURIComponent(be)}decodeValue(be){return decodeURIComponent(be)}}const qe=/%(\d[a-f0-9])/gi,ke={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Mt(ft){return encodeURIComponent(ft).replace(qe,(be,me)=>{var Ue;return null!==(Ue=ke[me])&&void 0!==Ue?Ue:be})}function De(ft){return`${ft}`}class yt{constructor(be={}){if(this.updates=null,this.cloneFrom=null,this.encoder=be.encoder||new ie,be.fromString){if(be.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function je(ft,be){const me=new Map;return ft.length>0&&ft.replace(/^\?/,"").split("&").forEach(Et=>{const sn=Et.indexOf("="),[dn,kt]=-1==sn?[be.decodeKey(Et),""]:[be.decodeKey(Et.slice(0,sn)),be.decodeValue(Et.slice(sn+1))],rn=me.get(dn)||[];rn.push(kt),me.set(dn,rn)}),me}(be.fromString,this.encoder)}else be.fromObject?(this.map=new Map,Object.keys(be.fromObject).forEach(me=>{const Ue=be.fromObject[me],Et=Array.isArray(Ue)?Ue.map(De):[De(Ue)];this.map.set(me,Et)})):this.map=null}has(be){return this.init(),this.map.has(be)}get(be){this.init();const me=this.map.get(be);return me?me[0]:null}getAll(be){return this.init(),this.map.get(be)||null}keys(){return this.init(),Array.from(this.map.keys())}append(be,me){return this.clone({param:be,value:me,op:"a"})}appendAll(be){const me=[];return Object.keys(be).forEach(Ue=>{const Et=be[Ue];Array.isArray(Et)?Et.forEach(sn=>{me.push({param:Ue,value:sn,op:"a"})}):me.push({param:Ue,value:Et,op:"a"})}),this.clone(me)}set(be,me){return this.clone({param:be,value:me,op:"s"})}delete(be,me){return this.clone({param:be,value:me,op:"d"})}toString(){return this.init(),this.keys().map(be=>{const me=this.encoder.encodeKey(be);return this.map.get(be).map(Ue=>me+"="+this.encoder.encodeValue(Ue)).join("&")}).filter(be=>""!==be).join("&")}clone(be){const me=new yt({encoder:this.encoder});return me.cloneFrom=this.cloneFrom||this,me.updates=(this.updates||[]).concat(be),me}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(be=>this.map.set(be,this.cloneFrom.map.get(be))),this.updates.forEach(be=>{switch(be.op){case"a":case"s":const me=("a"===be.op?this.map.get(be.param):void 0)||[];me.push(De(be.value)),this.map.set(be.param,me);break;case"d":if(void 0===be.value){this.map.delete(be.param);break}{let Ue=this.map.get(be.param)||[];const Et=Ue.indexOf(De(be.value));-1!==Et&&Ue.splice(Et,1),Ue.length>0?this.map.set(be.param,Ue):this.map.delete(be.param)}}}),this.cloneFrom=this.updates=null)}}class ze{constructor(){this.map=new Map}set(be,me){return this.map.set(be,me),this}get(be){return this.map.has(be)||this.map.set(be,be.defaultValue()),this.map.get(be)}delete(be){return this.map.delete(be),this}has(be){return this.map.has(be)}keys(){return this.map.keys()}}function pe(ft){return"undefined"!=typeof ArrayBuffer&&ft instanceof ArrayBuffer}function Ge(ft){return"undefined"!=typeof Blob&&ft instanceof Blob}function dt(ft){return"undefined"!=typeof FormData&&ft instanceof FormData}class et{constructor(be,me,Ue,Et){let sn;if(this.url=me,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=be.toUpperCase(),function le(ft){switch(ft){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Et?(this.body=void 0!==Ue?Ue:null,sn=Et):sn=Ue,sn&&(this.reportProgress=!!sn.reportProgress,this.withCredentials=!!sn.withCredentials,sn.responseType&&(this.responseType=sn.responseType),sn.headers&&(this.headers=sn.headers),sn.context&&(this.context=sn.context),sn.params&&(this.params=sn.params)),this.headers||(this.headers=new H),this.context||(this.context=new ze),this.params){const dn=this.params.toString();if(0===dn.length)this.urlWithParams=me;else{const kt=me.indexOf("?");this.urlWithParams=me+(-1===kt?"?":kt<me.length-1?"&":"")+dn}}else this.params=new yt,this.urlWithParams=me}serializeBody(){return null===this.body?null:pe(this.body)||Ge(this.body)||dt(this.body)||function st(ft){return"undefined"!=typeof URLSearchParams&&ft instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof yt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||dt(this.body)?null:Ge(this.body)?this.body.type||null:pe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof yt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(be={}){var me;const Ue=be.method||this.method,Et=be.url||this.url,sn=be.responseType||this.responseType,dn=void 0!==be.body?be.body:this.body,kt=void 0!==be.withCredentials?be.withCredentials:this.withCredentials,rn=void 0!==be.reportProgress?be.reportProgress:this.reportProgress;let Vn=be.headers||this.headers,Vt=be.params||this.params;const Fi=null!==(me=be.context)&&void 0!==me?me:this.context;return void 0!==be.setHeaders&&(Vn=Object.keys(be.setHeaders).reduce((hn,xn)=>hn.set(xn,be.setHeaders[xn]),Vn)),be.setParams&&(Vt=Object.keys(be.setParams).reduce((hn,xn)=>hn.set(xn,be.setParams[xn]),Vt)),new et(Ue,Et,dn,{params:Vt,headers:Vn,context:Fi,reportProgress:rn,responseType:sn,withCredentials:kt})}}var Pe=(()=>((Pe=Pe||{})[Pe.Sent=0]="Sent",Pe[Pe.UploadProgress=1]="UploadProgress",Pe[Pe.ResponseHeader=2]="ResponseHeader",Pe[Pe.DownloadProgress=3]="DownloadProgress",Pe[Pe.Response=4]="Response",Pe[Pe.User=5]="User",Pe))();class Z{constructor(be,me=200,Ue="OK"){this.headers=be.headers||new H,this.status=void 0!==be.status?be.status:me,this.statusText=be.statusText||Ue,this.url=be.url||null,this.ok=this.status>=200&&this.status<300}}class V extends Z{constructor(be={}){super(be),this.type=Pe.ResponseHeader}clone(be={}){return new V({headers:be.headers||this.headers,status:void 0!==be.status?be.status:this.status,statusText:be.statusText||this.statusText,url:be.url||this.url||void 0})}}class oe extends Z{constructor(be={}){super(be),this.type=Pe.Response,this.body=void 0!==be.body?be.body:null}clone(be={}){return new oe({body:void 0!==be.body?be.body:this.body,headers:be.headers||this.headers,status:void 0!==be.status?be.status:this.status,statusText:be.statusText||this.statusText,url:be.url||this.url||void 0})}}class _e extends Z{constructor(be){super(be,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${be.url||"(unknown url)"}`:`Http failure response for ${be.url||"(unknown url)"}: ${be.status} ${be.statusText}`,this.error=be.error||null}}function He(ft,be){return{body:be,headers:ft.headers,context:ft.context,observe:ft.observe,params:ft.params,reportProgress:ft.reportProgress,responseType:ft.responseType,withCredentials:ft.withCredentials}}let Fe=(()=>{class ft{constructor(me){this.handler=me}request(me,Ue,Et={}){let sn;if(me instanceof et)sn=me;else{let rn,Vn;rn=Et.headers instanceof H?Et.headers:new H(Et.headers),Et.params&&(Vn=Et.params instanceof yt?Et.params:new yt({fromObject:Et.params})),sn=new et(me,Ue,void 0!==Et.body?Et.body:null,{headers:rn,context:Et.context,params:Vn,reportProgress:Et.reportProgress,responseType:Et.responseType||"json",withCredentials:Et.withCredentials})}const dn=(0,we.of)(sn).pipe((0,se.b)(rn=>this.handler.handle(rn)));if(me instanceof et||"events"===Et.observe)return dn;const kt=dn.pipe((0,q.h)(rn=>rn instanceof oe));switch(Et.observe||"body"){case"body":switch(sn.responseType){case"arraybuffer":return kt.pipe((0,X.U)(rn=>{if(null!==rn.body&&!(rn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return rn.body}));case"blob":return kt.pipe((0,X.U)(rn=>{if(null!==rn.body&&!(rn.body instanceof Blob))throw new Error("Response is not a Blob.");return rn.body}));case"text":return kt.pipe((0,X.U)(rn=>{if(null!==rn.body&&"string"!=typeof rn.body)throw new Error("Response is not a string.");return rn.body}));default:return kt.pipe((0,X.U)(rn=>rn.body))}case"response":return kt;default:throw new Error(`Unreachable: unhandled observe type ${Et.observe}}`)}}delete(me,Ue={}){return this.request("DELETE",me,Ue)}get(me,Ue={}){return this.request("GET",me,Ue)}head(me,Ue={}){return this.request("HEAD",me,Ue)}jsonp(me,Ue){return this.request("JSONP",me,{params:(new yt).append(Ue,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(me,Ue={}){return this.request("OPTIONS",me,Ue)}patch(me,Ue,Et={}){return this.request("PATCH",me,He(Et,Ue))}post(me,Ue,Et={}){return this.request("POST",me,He(Et,Ue))}put(me,Ue,Et={}){return this.request("PUT",me,He(Et,Ue))}}return ft.\u0275fac=function(me){return new(me||ft)(D.LFG(ee))},ft.\u0275prov=D.Yz7({token:ft,factory:ft.\u0275fac}),ft})();class xt{constructor(be,me){this.next=be,this.interceptor=me}handle(be){return this.interceptor.intercept(be,this.next)}}const Ut=new D.OlP("HTTP_INTERCEPTORS");let Rt=(()=>{class ft{intercept(me,Ue){return Ue.handle(me)}}return ft.\u0275fac=function(me){return new(me||ft)},ft.\u0275prov=D.Yz7({token:ft,factory:ft.\u0275fac}),ft})();const so=/^\)\]\}',?\n/;let oo=(()=>{class ft{constructor(me){this.xhrFactory=me}handle(me){if("JSONP"===me.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new fe.y(Ue=>{const Et=this.xhrFactory.build();if(Et.open(me.method,me.urlWithParams),me.withCredentials&&(Et.withCredentials=!0),me.headers.forEach((xn,Yn)=>Et.setRequestHeader(xn,Yn.join(","))),me.headers.has("Accept")||Et.setRequestHeader("Accept","application/json, text/plain, */*"),!me.headers.has("Content-Type")){const xn=me.detectContentTypeHeader();null!==xn&&Et.setRequestHeader("Content-Type",xn)}if(me.responseType){const xn=me.responseType.toLowerCase();Et.responseType="json"!==xn?xn:"text"}const sn=me.serializeBody();let dn=null;const kt=()=>{if(null!==dn)return dn;const xn=Et.statusText||"OK",Yn=new H(Et.getAllResponseHeaders()),gi=function _n(ft){return"responseURL"in ft&&ft.responseURL?ft.responseURL:/^X-Request-URL:/m.test(ft.getAllResponseHeaders())?ft.getResponseHeader("X-Request-URL"):null}(Et)||me.url;return dn=new V({headers:Yn,status:Et.status,statusText:xn,url:gi}),dn},rn=()=>{let{headers:xn,status:Yn,statusText:gi,url:Fr}=kt(),wi=null;204!==Yn&&(wi=void 0===Et.response?Et.responseText:Et.response),0===Yn&&(Yn=wi?200:0);let kr=Yn>=200&&Yn<300;if("json"===me.responseType&&"string"==typeof wi){const Br=wi;wi=wi.replace(so,"");try{wi=""!==wi?JSON.parse(wi):null}catch(xr){wi=Br,kr&&(kr=!1,wi={error:xr,text:wi})}}kr?(Ue.next(new oe({body:wi,headers:xn,status:Yn,statusText:gi,url:Fr||void 0})),Ue.complete()):Ue.error(new _e({error:wi,headers:xn,status:Yn,statusText:gi,url:Fr||void 0}))},Vn=xn=>{const{url:Yn}=kt(),gi=new _e({error:xn,status:Et.status||0,statusText:Et.statusText||"Unknown Error",url:Yn||void 0});Ue.error(gi)};let Vt=!1;const Fi=xn=>{Vt||(Ue.next(kt()),Vt=!0);let Yn={type:Pe.DownloadProgress,loaded:xn.loaded};xn.lengthComputable&&(Yn.total=xn.total),"text"===me.responseType&&!!Et.responseText&&(Yn.partialText=Et.responseText),Ue.next(Yn)},hn=xn=>{let Yn={type:Pe.UploadProgress,loaded:xn.loaded};xn.lengthComputable&&(Yn.total=xn.total),Ue.next(Yn)};return Et.addEventListener("load",rn),Et.addEventListener("error",Vn),Et.addEventListener("timeout",Vn),Et.addEventListener("abort",Vn),me.reportProgress&&(Et.addEventListener("progress",Fi),null!==sn&&Et.upload&&Et.upload.addEventListener("progress",hn)),Et.send(sn),Ue.next({type:Pe.Sent}),()=>{Et.removeEventListener("error",Vn),Et.removeEventListener("abort",Vn),Et.removeEventListener("load",rn),Et.removeEventListener("timeout",Vn),me.reportProgress&&(Et.removeEventListener("progress",Fi),null!==sn&&Et.upload&&Et.upload.removeEventListener("progress",hn)),Et.readyState!==Et.DONE&&Et.abort()}})}}return ft.\u0275fac=function(me){return new(me||ft)(D.LFG(R.JF))},ft.\u0275prov=D.Yz7({token:ft,factory:ft.\u0275fac}),ft})();const Gi=new D.OlP("XSRF_COOKIE_NAME"),Nr=new D.OlP("XSRF_HEADER_NAME");class ks{}let Wi=(()=>{class ft{constructor(me,Ue,Et){this.doc=me,this.platform=Ue,this.cookieName=Et,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const me=this.doc.cookie||"";return me!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,R.Mx)(me,this.cookieName),this.lastCookieString=me),this.lastToken}}return ft.\u0275fac=function(me){return new(me||ft)(D.LFG(R.K0),D.LFG(D.Lbi),D.LFG(Gi))},ft.\u0275prov=D.Yz7({token:ft,factory:ft.\u0275fac}),ft})(),nn=(()=>{class ft{constructor(me,Ue){this.tokenService=me,this.headerName=Ue}intercept(me,Ue){const Et=me.url.toLowerCase();if("GET"===me.method||"HEAD"===me.method||Et.startsWith("http://")||Et.startsWith("https://"))return Ue.handle(me);const sn=this.tokenService.getToken();return null!==sn&&!me.headers.has(this.headerName)&&(me=me.clone({headers:me.headers.set(this.headerName,sn)})),Ue.handle(me)}}return ft.\u0275fac=function(me){return new(me||ft)(D.LFG(ks),D.LFG(Nr))},ft.\u0275prov=D.Yz7({token:ft,factory:ft.\u0275fac}),ft})(),fi=(()=>{class ft{constructor(me,Ue){this.backend=me,this.injector=Ue,this.chain=null}handle(me){if(null===this.chain){const Ue=this.injector.get(Ut,[]);this.chain=Ue.reduceRight((Et,sn)=>new xt(Et,sn),this.backend)}return this.chain.handle(me)}}return ft.\u0275fac=function(me){return new(me||ft)(D.LFG($),D.LFG(D.zs3))},ft.\u0275prov=D.Yz7({token:ft,factory:ft.\u0275fac}),ft})(),ii=(()=>{class ft{static disable(){return{ngModule:ft,providers:[{provide:nn,useClass:Rt}]}}static withOptions(me={}){return{ngModule:ft,providers:[me.cookieName?{provide:Gi,useValue:me.cookieName}:[],me.headerName?{provide:Nr,useValue:me.headerName}:[]]}}}return ft.\u0275fac=function(me){return new(me||ft)},ft.\u0275mod=D.oAB({type:ft}),ft.\u0275inj=D.cJS({providers:[nn,{provide:Ut,useExisting:nn,multi:!0},{provide:ks,useClass:Wi},{provide:Gi,useValue:"XSRF-TOKEN"},{provide:Nr,useValue:"X-XSRF-TOKEN"}]}),ft})(),Or=(()=>{class ft{}return ft.\u0275fac=function(me){return new(me||ft)},ft.\u0275mod=D.oAB({type:ft}),ft.\u0275inj=D.cJS({providers:[Fe,{provide:ee,useClass:fi},oo,{provide:$,useExisting:oo}],imports:[ii.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),ft})()},5e3:(pt,Ne,U)=>{"use strict";U.d(Ne,{$8M:()=>Eu,$Z:()=>Xy,AFp:()=>y_,ALo:()=>qv,AaK:()=>ee,BQk:()=>ef,CHM:()=>Hr,CRH:()=>Ub,CZH:()=>kl,CqO:()=>F0,D6c:()=>Wt,EJc:()=>Rg,EpF:()=>N0,F4k:()=>O0,FYo:()=>Zr,FiY:()=>Ru,G48:()=>t,Gf:()=>n_,GfV:()=>yl,GkF:()=>Nm,Gre:()=>Uc,JOm:()=>gr,Jf7:()=>Id,KtG:()=>rs,LFG:()=>si,LSH:()=>pl,Lbi:()=>Jb,Lck:()=>Cf,MMx:()=>Xc,NdJ:()=>Fm,OlP:()=>Zn,Oqu:()=>Xm,PXZ:()=>fM,Q6J:()=>fh,QGY:()=>Om,QP$:()=>ta,QbO:()=>Qb,Qsj:()=>ue,R0b:()=>Pr,RDi:()=>ay,Rgc:()=>no,SBq:()=>dc,Sil:()=>w_,Suo:()=>ai,TTD:()=>ho,TgZ:()=>Qd,Udp:()=>Pa,XFs:()=>nn,Xpm:()=>gi,Xts:()=>Ep,Y36:()=>Ec,YKP:()=>pg,YNc:()=>Rm,Yjl:()=>ps,Yz7:()=>Kt,ZZ4:()=>ht,_UZ:()=>Lm,_Vd:()=>Ys,_c5:()=>Ft,_uU:()=>Km,aQg:()=>Jt,c2e:()=>eM,cJS:()=>di,cg1:()=>sg,dDg:()=>cM,dqk:()=>Ue,eFA:()=>Fg,eoX:()=>T_,f3M:()=>sc,g9A:()=>__,h0i:()=>to,hGG:()=>tn,hij:()=>bh,iGM:()=>t_,ifc:()=>me,ip1:()=>g_,kL8:()=>yv,lG2:()=>Bs,lcZ:()=>Yv,lqb:()=>as,lri:()=>D_,oAB:()=>xr,oxw:()=>km,qLn:()=>Ds,qZA:()=>ph,rWj:()=>C_,sBO:()=>u,sIi:()=>ch,s_b:()=>Bh,soG:()=>Uf,tb:()=>Gh,tp0:()=>js,uIk:()=>Tm,vHH:()=>ke,vpe:()=>Qo,wAp:()=>un,xi3:()=>vg,xp6:()=>ky,ynx:()=>mh,z2F:()=>jf,zSh:()=>Er,zs3:()=>Dl});var R=U(7579),D=U(727),we=U(9751),fe=U(6451),se=U(3099);function q(n){for(let r in n)if(n[r]===q)return r;throw Error("Could not find renamed property on target object.")}function ee(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ee).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function $(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const H=q({__forward_ref__:q});function Q(n){return n.__forward_ref__=Q,n.toString=function(){return ee(this())},n}function ie(n){return function je(n){return"function"==typeof n&&n.hasOwnProperty(H)&&n.__forward_ref__===Q}(n)?n():n}class ke extends Error{constructor(r,o){super(function Mt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,o)),this.code=r}}function De(n){return"string"==typeof n?n:null==n?"":String(n)}function pe(n,r){throw new ke(-201,!1)}function Rt(n,r){null==n&&function Ke(n,r,o,c){throw new Error(`ASSERTION ERROR: ${n}`+(null==c?"":` [Expected=> ${o} ${c} ${r} <=Actual]`))}(r,n,null,"!=")}function Kt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function di(n){return{providers:n.providers||[],imports:n.imports||[]}}function Lr(n){return Fs(n,Gi)||Fs(n,ks)}function Fs(n,r){return n.hasOwnProperty(r)?n[r]:null}function oo(n){return n&&(n.hasOwnProperty(Nr)||n.hasOwnProperty(Wi))?n[Nr]:null}const Gi=q({\u0275prov:q}),Nr=q({\u0275inj:q}),ks=q({ngInjectableDef:q}),Wi=q({ngInjectorDef:q});var nn=(()=>((nn=nn||{})[nn.Default=0]="Default",nn[nn.Host=1]="Host",nn[nn.Self=2]="Self",nn[nn.SkipSelf=4]="SkipSelf",nn[nn.Optional=8]="Optional",nn))();let fi;function $i(n){const r=fi;return fi=n,r}function ii(n,r,o){const c=Lr(n);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:o&nn.Optional?null:void 0!==r?r:void pe(ee(n))}function tr(n){return{toString:n}.toString()}var Ii=(()=>((Ii=Ii||{})[Ii.OnPush=0]="OnPush",Ii[Ii.Default=1]="Default",Ii))(),me=(()=>{return(n=me||(me={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",me;var n})();const Ue=(()=>"undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self)(),dn={},kt=[],rn=q({\u0275cmp:q}),Vn=q({\u0275dir:q}),Vt=q({\u0275pipe:q}),Fi=q({\u0275mod:q}),hn=q({\u0275fac:q}),xn=q({__NG_ELEMENT_ID__:q});let Yn=0;function gi(n){return tr(()=>{const o=!0===n.standalone,c={},d={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ii.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||kt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||me.Emulated,id:"c"+Yn++,styles:n.styles||kt,_:null,setInput:null,schemas:n.schemas||null,tView:null},f=n.dependencies,g=n.features;return d.inputs=Ul(n.inputs,c),d.outputs=Ul(n.outputs),g&&g.forEach(S=>S(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(wi).filter(kr):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(ki).filter(kr):null,d})}function wi(n){return Bn(n)||bi(n)}function kr(n){return null!==n}const Br={};function xr(n){return tr(()=>{const r={type:n.type,bootstrap:n.bootstrap||kt,declarations:n.declarations||kt,imports:n.imports||kt,exports:n.exports||kt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Br[n.id]=n.type),r})}function Ul(n,r){if(null==n)return dn;const o={};for(const c in n)if(n.hasOwnProperty(c)){let d=n[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),o[d]=c,r&&(r[d]=f)}return o}const Bs=gi;function ps(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Bn(n){return n[rn]||null}function bi(n){return n[Vn]||null}function ki(n){return n[Vt]||null}function Ri(n,r){const o=n[Fi]||null;if(!o&&!0===r)throw new Error(`Type ${ee(n)} does not have '\u0275mod' property.`);return o}function Ei(n){return Array.isArray(n)&&"object"==typeof n[1]}function nr(n){return Array.isArray(n)&&!0===n[1]}function Zi(n){return 0!=(8&n.flags)}function vs(n){return 2==(2&n.flags)}function zr(n){return 1==(1&n.flags)}function ir(n){return null!==n.template}function oa(n){return 0!=(256&n[2])}function _s(n,r){return n.hasOwnProperty(hn)?n[hn]:null}class Wl{constructor(r,o,c){this.previousValue=r,this.currentValue=o,this.firstChange=c}isFirstChange(){return this.firstChange}}function ho(){return Oo}function Oo(n){return n.type.prototype.ngOnChanges&&(n.setInput=Us),Ga}function Ga(){const n=Vs(this),r=null==n?void 0:n.current;if(r){const o=n.previous;if(o===dn)n.previous=r;else for(let c in r)o[c]=r[c];n.current=null,this.ngOnChanges(r)}}function Us(n,r,o,c){const d=Vs(n)||function Kh(n,r){return n[xs]=r}(n,{previous:dn,current:null}),f=d.current||(d.current={}),g=d.previous,S=this.declaredInputs[o],x=g[S];f[S]=new Wl(x&&x.currentValue,r,g===dn),n[c]=r}ho.ngInherit=!0;const xs="__ngSimpleChanges__";function Vs(n){return n[xs]||null}function ci(n){for(;Array.isArray(n);)n=n[0];return n}function fo(n,r){return ci(r[n])}function rr(n,r){return ci(r[n.index])}function Wa(n,r){return n.data[r]}function Hs(n,r){return n[r]}function N(n,r){const o=r[n];return Ei(o)?o:o[0]}function K(n){return 4==(4&n[2])}function O(n){return 64==(64&n[2])}function xe(n,r){return null==r?null:n[r]}function Qe(n){n[18]=0}function at(n,r){n[5]+=r;let o=n,c=n[3];for(;null!==c&&(1===r&&1===o[5]||-1===r&&0===o[5]);)c[5]+=r,o=c,c=c[3]}const wt={lFrame:Ya(null),bindingsEnabled:!0};function Rn(){return wt.bindingsEnabled}function ot(){return wt.lFrame.lView}function En(){return wt.lFrame.tView}function Hr(n){return wt.lFrame.contextLView=n,n[8]}function rs(n){return wt.lFrame.contextLView=null,n}function ui(){let n=$a();for(;null!==n&&64===n.type;)n=n.parent;return n}function $a(){return wt.lFrame.currentTNode}function dr(n,r){const o=wt.lFrame;o.currentTNode=n,o.isParent=r}function ql(){return wt.lFrame.isParent}function Yl(){wt.lFrame.isParent=!1}function fr(){const n=wt.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function $r(){return wt.lFrame.bindingIndex++}function jr(n){const r=wt.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function du(n,r){const o=wt.lFrame;o.bindingIndex=o.bindingRootIndex=n,Xl(r)}function Xl(n){wt.lFrame.currentDirectiveIndex=n}function Ui(){return wt.lFrame.currentQueryIndex}function pu(n){wt.lFrame.currentQueryIndex=n}function Zh(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Jh(n,r,o){if(o&nn.SkipSelf){let d=r,f=n;for(;!(d=d.parent,null!==d||o&nn.Host||(d=Zh(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;r=d,n=f}const c=wt.lFrame=ua();return c.currentTNode=r,c.lView=n,!0}function ca(n){const r=ua(),o=n[1];wt.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function ua(){const n=wt.lFrame,r=null===n?null:n.child;return null===r?Ya(n):r}function Ya(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Ka(){const n=wt.lFrame;return wt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const mu=Ka;function gu(){const n=Ka();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Vi(){return wt.lFrame.selectedIndex}function Gs(n){wt.lFrame.selectedIndex=n}function hi(){const n=wt.lFrame;return Wa(n.tView,n.selectedIndex)}function vu(n,r){for(let o=r.directiveStart,c=r.directiveEnd;o<c;o++){const f=n.data[o].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:S,ngAfterViewInit:x,ngAfterViewChecked:P,ngOnDestroy:F}=f;g&&(n.contentHooks||(n.contentHooks=[])).push(-o,g),S&&((n.contentHooks||(n.contentHooks=[])).push(o,S),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,S)),x&&(n.viewHooks||(n.viewHooks=[])).push(-o,x),P&&((n.viewHooks||(n.viewHooks=[])).push(o,P),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,P)),null!=F&&(n.destroyHooks||(n.destroyHooks=[])).push(o,F)}}function Zl(n,r,o){da(n,r,3,o)}function Mr(n,r,o,c){(3&n[2])===o&&da(n,r,o,c)}function Dn(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function da(n,r,o,c){const f=null!=c?c:-1,g=r.length-1;let S=0;for(let x=void 0!==c?65535&n[18]:0;x<g;x++)if("number"==typeof r[x+1]){if(S=r[x],null!=c&&S>=c)break}else r[x]<0&&(n[18]+=65536),(S<f||-1==f)&&(Qh(n,o,r,x),n[18]=(4294901760&n[18])+x+2),x++}function Qh(n,r,o,c){const d=o[c]<0,f=o[c+1],S=n[d?-o[c]:o[c]];if(d){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{f.call(S)}finally{}}}else try{f.call(S)}finally{}}class Ja{constructor(r,o,c){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=c}}function el(n,r,o){let c=0;for(;c<o.length;){const d=o[c];if("number"==typeof d){if(0!==d)break;c++;const f=o[c++],g=o[c++],S=o[c++];n.setAttribute(r,g,S,f)}else{const f=d,g=o[++c];xu(f)?n.setProperty(r,f,g):n.setAttribute(r,f,g),c++}}return c}function _u(n){return 3===n||4===n||6===n}function xu(n){return 64===n.charCodeAt(0)}function wu(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let c=0;c<r.length;c++){const d=r[c];"number"==typeof d?o=d:0===o||bu(n,o,d,null,-1===o||2===o?r[++c]:null)}}return n}function bu(n,r,o,c,d){let f=0,g=n.length;if(-1===r)g=-1;else for(;f<n.length;){const S=n[f++];if("number"==typeof S){if(S===r){g=-1;break}if(S>r){g=f-1;break}}}for(;f<n.length;){const S=n[f];if("number"==typeof S)break;if(S===o){if(null===c)return void(null!==d&&(n[f+1]=d));if(c===n[f+1])return void(n[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==g&&(n.splice(g,0,r),f=g+1),n.splice(f++,0,o),null!==c&&n.splice(f++,0,c),null!==d&&n.splice(f++,0,d)}function rd(n){return-1!==n}function ko(n){return 32767&n}function Bo(n,r){let o=function Gg(n){return n>>16}(n),c=r;for(;o>0;)c=c[15],o--;return c}let sd=!0;function fa(n){const r=sd;return sd=n,r}let ip=0;const Ms={};function tc(n,r){const o=nc(n,r);if(-1!==o)return o;const c=r[1];c.firstCreatePass&&(n.injectorIndex=r.length,Yi(c.data,n),Yi(r,null),Yi(c.blueprint,null));const d=po(n,r),f=n.injectorIndex;if(rd(d)){const g=ko(d),S=Bo(d,r),x=S[1].data;for(let P=0;P<8;P++)r[f+P]=S[g+P]|x[g+P]}return r[f+8]=d,f}function Yi(n,r){n.push(0,0,0,0,0,0,0,0,r)}function nc(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function po(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,c=null,d=r;for(;null!==d;){if(c=ic(d),null===c)return-1;if(o++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|o<<16}return-1}function tl(n,r,o){!function rp(n,r,o){let c;"string"==typeof o?c=o.charCodeAt(0)||0:o.hasOwnProperty(xn)&&(c=o[xn]),null==c&&(c=o[xn]=ip++);const d=255&c;r.data[n+(d>>5)]|=1<<d}(n,r,o)}function ld(n,r,o){if(o&nn.Optional)return n;pe()}function pa(n,r,o,c){if(o&nn.Optional&&void 0===c&&(c=null),0==(o&(nn.Self|nn.Host))){const d=n[9],f=$i(void 0);try{return d?d.get(r,c,o&nn.Optional):ii(r,c,o&nn.Optional)}finally{$i(f)}}return ld(c,0,o)}function cd(n,r,o,c=nn.Default,d){if(null!==n){if(1024&r[2]){const g=function ga(n,r,o,c,d){let f=n,g=r;for(;null!==f&&null!==g&&1024&g[2]&&!(256&g[2]);){const S=sp(f,g,o,c|nn.Self,Ms);if(S!==Ms)return S;let x=f.parent;if(!x){const P=g[21];if(P){const F=P.get(o,Ms,c);if(F!==Ms)return F}x=ic(g),g=g[15]}f=x}return d}(n,r,o,c,Ms);if(g!==Ms)return g}const f=sp(n,r,o,c,Ms);if(f!==Ms)return f}return pa(r,o,c,d)}function sp(n,r,o,c,d){const f=function ma(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(xn)?n[xn]:void 0;return"number"==typeof r?r>=0?255&r:Mu:r}(o);if("function"==typeof f){if(!Jh(r,n,c))return c&nn.Host?ld(d,0,c):pa(r,o,c,d);try{const g=f(c);if(null!=g||c&nn.Optional)return g;pe()}finally{mu()}}else if("number"==typeof f){let g=null,S=nc(n,r),x=-1,P=c&nn.Host?r[16][6]:null;for((-1===S||c&nn.SkipSelf)&&(x=-1===S?po(n,r):r[S+8],-1!==x&&qr(c,!1)?(g=r[1],S=ko(x),r=Bo(x,r)):S=-1);-1!==S;){const F=r[1];if(vi(f,S,F.data)){const Y=$g(S,r,o,g,c,P);if(Y!==Ms)return Y}x=r[S+8],-1!==x&&qr(c,r[1].data[S+8]===P)&&vi(f,S,r)?(g=F,S=ko(x),r=Bo(x,r)):S=-1}}return d}function $g(n,r,o,c,d,f){const g=r[1],S=g.data[n+8],F=nl(S,g,o,null==c?vs(S)&&sd:c!=g&&0!=(3&S.type),d&nn.Host&&f===S);return null!==F?il(r,g,F,S):Ms}function nl(n,r,o,c,d){const f=n.providerIndexes,g=r.data,S=1048575&f,x=n.directiveStart,F=f>>20,ce=d?S+F:n.directiveEnd;for(let Ee=c?S:S+F;Ee<ce;Ee++){const Xe=g[Ee];if(Ee<x&&o===Xe||Ee>=x&&Xe.type===o)return Ee}if(d){const Ee=g[x];if(Ee&&ir(Ee)&&Ee.type===o)return x}return null}function il(n,r,o,c){let d=n[o];const f=r.data;if(function ed(n){return n instanceof Ja}(d)){const g=d;g.resolving&&function Je(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new ke(-200,`Circular dependency in DI detected for ${n}${o}`)}(function yt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():De(n)}(f[o]));const S=fa(g.canSeeViewProviders);g.resolving=!0;const x=g.injectImpl?$i(g.injectImpl):null;Jh(n,c,nn.Default);try{d=n[o]=g.factory(void 0,f,n,c),r.firstCreatePass&&o>=c.directiveStart&&function zg(n,r,o){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=r.type.prototype;if(c){const g=Oo(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,g),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,g)}d&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,d),f&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,f),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,f))}(o,f[o],r)}finally{null!==x&&$i(x),fa(S),g.resolving=!1,mu()}}return d}function vi(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function qr(n,r){return!(n&nn.Self||n&nn.Host&&r)}class Yr{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,c){return cd(this._tNode,this._lView,r,c,o)}}function Mu(){return new Yr(ui(),ot())}function ic(n){const r=n[1],o=r.type;return 2===o?r.declTNode:1===o?n[6]:null}function Eu(n){return function Wg(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const c=o.length;let d=0;for(;d<c;){const f=o[d];if(_u(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof o[d];)d++;else{if(f===r)return o[d+1];d+=2}}}return null}(ui(),n)}const Uo="__parameters__";function va(n,r,o){return tr(()=>{const c=function Es(n){return function(...o){if(n){const c=n(...o);for(const d in c)this[d]=c[d]}}}(r);function d(...f){if(this instanceof d)return c.apply(this,f),this;const g=new d(...f);return S.annotation=g,S;function S(x,P,F){const Y=x.hasOwnProperty(Uo)?x[Uo]:Object.defineProperty(x,Uo,{value:[]})[Uo];for(;Y.length<=F;)Y.push(null);return(Y[F]=Y[F]||[]).push(g),x}}return o&&(d.prototype=Object.create(o.prototype)),d.prototype.ngMetadataName=n,d.annotationCls=d,d})}class Zn{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Kt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Sr(n,r){void 0===r&&(r=n);for(let o=0;o<n.length;o++){let c=n[o];Array.isArray(c)?(r===n&&(r=n.slice(0,o)),Sr(c,r)):r!==n&&r.push(c)}return r}function Ws(n,r){n.forEach(o=>Array.isArray(o)?Ws(o,r):r(o))}function rl(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function Tu(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function ge(n,r,o){let c=Ct(n,r);return c>=0?n[1|c]=o:(c=~c,function C(n,r,o,c){let d=n.length;if(d==r)n.push(o,c);else if(1===d)n.push(c,n[0]),n[0]=o;else{for(d--,n.push(n[d-1],n[d]);d>r;)n[d]=n[d-2],d--;n[r]=o,n[r+1]=c}}(n,c,r,o)),c}function Ae(n,r){const o=Ct(n,r);if(o>=0)return n[1|o]}function Ct(n,r){return function Ht(n,r,o){let c=0,d=n.length>>o;for(;d!==c;){const f=c+(d-c>>1),g=n[f<<o];if(r===g)return f<<o;g>r?d=f:c=f+1}return~(d<<o)}(n,r,1)}const ri={},fd="__NG_DI_FLAG__",cp="ngTempTokenPath",bM=/\n/gm,Qg="__source";let Au;function ol(n){const r=Au;return Au=n,r}function k_(n,r=nn.Default){if(void 0===Au)throw new ke(-203,!1);return null===Au?ii(n,void 0,r):Au.get(n,r&nn.Optional?null:void 0,r)}function si(n,r=nn.Default){return(function fs(){return fi}()||k_)(ie(n),r)}function sc(n,r=nn.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),si(n,r)}function up(n){const r=[];for(let o=0;o<n.length;o++){const c=ie(n[o]);if(Array.isArray(c)){if(0===c.length)throw new ke(900,!1);let d,f=nn.Default;for(let g=0;g<c.length;g++){const S=c[g],x=oc(S);"number"==typeof x?-1===x?d=S.token:f|=x:d=S}r.push(si(d,f))}else r.push(si(c))}return r}function Iu(n,r){return n[fd]=r,n.prototype[fd]=r,n}function oc(n){return n[fd]}const Ru=Iu(va("Optional"),8),js=Iu(va("SkipSelf"),4);let md;function ay(n){md=n}class cl{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ul(n){return n instanceof cl?n.changingThisBreaksApplicationSecurity:n}const xp=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,AM=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Un=(()=>((Un=Un||{})[Un.NONE=0]="NONE",Un[Un.HTML=1]="HTML",Un[Un.STYLE=2]="STYLE",Un[Un.SCRIPT=3]="SCRIPT",Un[Un.URL=4]="URL",Un[Un.RESOURCE_URL=5]="RESOURCE_URL",Un))();function pl(n){const r=function Vu(){const n=ot();return n&&n[12]}();return r?r.sanitize(Un.URL,n)||"":function xd(n,r){const o=function hl(n){return n instanceof cl&&n.getTypeName()||null}(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}(n,"URL")?ul(n):function wp(n){return(n=String(n)).match(xp)||n.match(AM)?n:"unsafe:"+n}(De(n))}const Ep=new Zn("ENVIRONMENT_INITIALIZER"),py=new Zn("INJECTOR",-1),my=new Zn("INJECTOR_DEF_TYPES");class gy{get(r,o=ri){if(o===ri){const c=new Error(`NullInjectorError: No provider for ${ee(r)}!`);throw c.name="NullInjectorError",c}return o}}function tx(...n){return{\u0275providers:yy(0,n)}}function yy(n,...r){const o=[],c=new Set;let d;return Ws(r,f=>{const g=f;zu(g,o,[],c)&&(d||(d=[]),d.push(g))}),void 0!==d&&vy(d,o),o}function vy(n,r){for(let o=0;o<n.length;o++){const{providers:d}=n[o];Ws(d,f=>{r.push(f)})}}function zu(n,r,o,c){if(!(n=ie(n)))return!1;let d=null,f=oo(n);const g=!f&&Bn(n);if(f||g){if(g&&!g.standalone)return!1;d=n}else{const x=n.ngModule;if(f=oo(x),!f)return!1;d=x}const S=c.has(d);if(g){if(S)return!1;if(c.add(d),g.dependencies){const x="function"==typeof g.dependencies?g.dependencies():g.dependencies;for(const P of x)zu(P,r,o,c)}}else{if(!f)return!1;{if(null!=f.imports&&!S){let P;c.add(d);try{Ws(f.imports,F=>{zu(F,r,o,c)&&(P||(P=[]),P.push(F))})}finally{}void 0!==P&&vy(P,r)}if(!S){const P=_s(d)||(()=>new d);r.push({provide:d,useFactory:P,deps:kt},{provide:my,useValue:d,multi:!0},{provide:Ep,useValue:()=>si(d),multi:!0})}const x=f.providers;null==x||S||Ws(x,F=>{r.push(F)})}}return d!==n&&void 0!==n.providers}const bd=q({provide:String,useValue:q});function Dp(n){return null!==n&&"object"==typeof n&&bd in n}function hc(n){return"function"==typeof n}const Er=new Zn("Set Injector scope."),Hu={},ix={};let wa;function ba(){return void 0===wa&&(wa=new gy),wa}class as{}class Gu extends as{constructor(r,o,c,d){super(),this.parent=o,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ma(r,g=>this.processProvider(g)),this.records.set(py,mr(void 0,this)),d.has("environment")&&this.records.set(as,mr(void 0,this));const f=this.records.get(Er);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(my.multi,kt,nn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const o=ol(this),c=$i(void 0);try{return r()}finally{ol(o),$i(c)}}get(r,o=ri,c=nn.Default){this.assertNotDestroyed();const d=ol(this),f=$i(void 0);try{if(!(c&nn.SkipSelf)){let S=this.records.get(r);if(void 0===S){const x=function Sd(n){return"function"==typeof n||"object"==typeof n&&n instanceof Zn}(r)&&Lr(r);S=x&&this.injectableDefInScope(x)?mr(Wu(r),Hu):null,this.records.set(r,S)}if(null!=S)return this.hydrate(r,S)}return(c&nn.Self?ba():this.parent).get(r,o=c&nn.Optional&&o===ri?null:o)}catch(g){if("NullInjectorError"===g.name){if((g[cp]=g[cp]||[]).unshift(ee(r)),d)throw g;return function B_(n,r,o,c){const d=n[cp];throw r[Qg]&&d.unshift(r[Qg]),n.message=function U_(n,r,o,c=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let d=ee(r);if(Array.isArray(r))d=r.map(ee).join(" -> ");else if("object"==typeof r){let f=[];for(let g in r)if(r.hasOwnProperty(g)){let S=r[g];f.push(g+":"+("string"==typeof S?JSON.stringify(S):ee(S)))}d=`{${f.join(", ")}}`}return`${o}${c?"("+c+")":""}[${d}]: ${n.replace(bM,"\n  ")}`}("\n"+n.message,d,o,c),n.ngTokenPath=d,n[cp]=null,n}(g,r,"R3InjectorError",this.source)}throw g}finally{$i(f),ol(d)}}resolveInjectorInitializers(){const r=ol(this),o=$i(void 0);try{const c=this.get(Ep.multi,kt,nn.Self);for(const d of c)d()}finally{ol(r),$i(o)}}toString(){const r=[],o=this.records;for(const c of o.keys())r.push(ee(c));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processProvider(r){let o=hc(r=ie(r))?r:ie(r&&r.provide);const c=function wy(n){return Dp(n)?mr(void 0,n.useValue):mr(function zi(n,r,o){let c;if(hc(n)){const d=ie(n);return _s(d)||Wu(d)}if(Dp(n))c=()=>ie(n.useValue);else if(function xy(n){return!(!n||!n.useFactory)}(n))c=()=>n.useFactory(...up(n.deps||[]));else if(function _y(n){return!(!n||!n.useExisting)}(n))c=()=>si(ie(n.useExisting));else{const d=ie(n&&(n.useClass||n.provide));if(!function Md(n){return!!n.deps}(n))return _s(d)||Wu(d);c=()=>new d(...up(n.deps))}return c}(n),Hu)}(r);if(hc(r)||!0!==r.multi)this.records.get(o);else{let d=this.records.get(o);d||(d=mr(void 0,Hu,!0),d.factory=()=>up(d.multi),this.records.set(o,d)),o=r,d.multi.push(r)}this.records.set(o,c)}hydrate(r,o){return o.value===Hu&&(o.value=ix,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Cp(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=ie(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Wu(n){const r=Lr(n),o=null!==r?r.factory:_s(n);if(null!==o)return o;if(n instanceof Zn)throw new ke(204,!1);if(n instanceof Function)return function qs(n){const r=n.length;if(r>0)throw function b(n,r){const o=[];for(let c=0;c<n;c++)o.push(r);return o}(r,"?"),new ke(204,!1);const o=function so(n){const r=n&&(n[Gi]||n[ks]);if(r){const o=function _n(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new ke(204,!1)}function mr(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function qt(n){return!!n.\u0275providers}function Ma(n,r){for(const o of n)Array.isArray(o)?Ma(o,r):qt(o)?Ma(o.\u0275providers,r):r(o)}class ml{}class Jn{resolveComponentFactory(r){throw function Tp(n){const r=Error(`No component factory found for ${ee(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Ys=(()=>{class n{}return n.NULL=new Jn,n})();function Ap(){return $u(ui(),ot())}function $u(n,r){return new dc(rr(n,r))}let dc=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=Ap,n})();function FM(n){return n instanceof dc?n.nativeElement:n}class Zr{}let ue=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Ip(){const n=ot(),o=N(ui().index,n);return(Ei(o)?o:n)[11]}(),n})(),Sy=(()=>{class n{}return n.\u0275prov=Kt({token:n,providedIn:"root",factory:()=>null}),n})();class yl{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Wo=new yl("14.1.1"),$o={};function gc(n){return n.ngOriginalError}class Ds{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&gc(r);for(;o&&gc(o);)o=gc(o);return o||null}}const Bp=new Map;let Ea=0;const Da="__ngContext__";function pi(n,r){Ei(r)?(n[Da]=r[20],function ls(n){Bp.set(n[20],n)}(r)):n[Da]=r}function Ca(n){const r=n[Da];return"number"==typeof r?function Up(n){return Bp.get(n)||null}(r):r||null}function xl(n){const r=Ca(n);return r?Ei(r)?r:r.lView:null}const jo=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ue))();function Id(n){return n.ownerDocument.defaultView}function vo(n){return n instanceof Function?n():n}var gr=(()=>((gr=gr||{})[gr.Important=1]="Important",gr[gr.DashCase=2]="DashCase",gr))();function _c(n,r){return undefined(n,r)}function Rd(n){const r=n[3];return nr(r)?r[3]:r}function Iy(n){return ux(n[13])}function Pd(n){return ux(n[4])}function ux(n){for(;null!==n&&!nr(n);)n=n[4];return n}function Xu(n,r,o,c,d){if(null!=c){let f,g=!1;nr(c)?f=c:Ei(c)&&(g=!0,c=c[0]);const S=ci(c);0===n&&null!==o?null==d?Qu(r,o,S):bo(r,o,S,d||null,!0):1===n&&null!==o?bo(r,o,S,d||null,!0):2===n?function Ny(n,r,o){const c=wc(n,r);c&&function Od(n,r,o,c){n.removeChild(r,o,c)}(n,c,r,o)}(r,S,g):3===n&&r.destroyNode(S),null!=f&&function bc(n,r,o,c,d){const f=o[7];f!==ci(o)&&Xu(r,n,c,f,d);for(let S=10;S<o.length;S++){const x=o[S];bl(x[1],x,n,r,c,f)}}(r,n,f,o,d)}}function Ta(n,r,o){return n.createElement(r,o)}function Ld(n,r){const o=n[9],c=o.indexOf(r),d=r[3];512&r[2]&&(r[2]&=-513,at(d,-1)),o.splice(c,1)}function xo(n,r){if(n.length<=10)return;const o=10+r,c=n[o];if(c){const d=c[17];null!==d&&d!==n&&Ld(d,c),r>0&&(n[o-1][4]=c[4]);const f=Tu(n,10+r);!function us(n,r){bl(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(c[1],c);const g=f[19];null!==g&&g.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Yo(n,r){if(!(128&r[2])){const o=r[11];o.destroyNode&&bl(n,r,o,3,null,null),function Nn(n){let r=n[13];if(!r)return wo(n[1],n);for(;r;){let o=null;if(Ei(r))o=r[13];else{const c=r[10];c&&(o=c)}if(!o){for(;r&&!r[4]&&r!==n;)Ei(r)&&wo(r[1],r),r=r[3];null===r&&(r=n),Ei(r)&&wo(r[1],r),o=r&&r[4]}r=o}}(r)}}function wo(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Zp(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let c=0;c<o.length;c+=2){const d=r[o[c]];if(!(d instanceof Ja)){const f=o[c+1];if(Array.isArray(f))for(let g=0;g<f.length;g+=2){const S=d[f[g]],x=f[g+1];try{x.call(S)}finally{}}else try{f.call(d)}finally{}}}}(n,r),function Xp(n,r){const o=n.cleanup,c=r[7];let d=-1;if(null!==o)for(let f=0;f<o.length-1;f+=2)if("string"==typeof o[f]){const g=o[f+1],S="function"==typeof g?g(r):ci(r[g]),x=c[d=o[f+2]],P=o[f+3];"boolean"==typeof P?S.removeEventListener(o[f],x,P):P>=0?c[d=P]():c[d=-P].unsubscribe(),f+=2}else{const g=c[d=o[f+1]];o[f].call(g)}if(null!==c){for(let f=d+1;f<c.length;f++)(0,c[f])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const o=r[17];if(null!==o&&nr(r[3])){o!==r[3]&&Ld(o,r);const c=r[19];null!==c&&c.detachView(n)}!function Dy(n){Bp.delete(n[20])}(r)}}function Nd(n,r,o){return function Ju(n,r,o){let c=r;for(;null!==c&&40&c.type;)c=(r=c).parent;if(null===c)return o[0];if(2&c.flags){const d=n.data[c.directiveStart].encapsulation;if(d===me.None||d===me.Emulated)return null}return rr(c,o)}(n,r.parent,o)}function bo(n,r,o,c,d){n.insertBefore(r,o,c,d)}function Qu(n,r,o){n.appendChild(r,o)}function eh(n,r,o,c,d){null!==c?bo(n,r,o,c,d):Qu(n,r,o)}function wc(n,r){return n.parentNode(r)}let th=function Py(n,r,o){return 40&n.type?rr(n,o):null};function Ki(n,r,o,c){const d=Nd(n,c,r),f=r[11],S=function Dr(n,r,o){return th(n,r,o)}(c.parent||r[6],c,r);if(null!=d)if(Array.isArray(o))for(let x=0;x<o.length;x++)eh(f,d,o[x],S,!1);else eh(f,d,o,S,!1)}function kd(n,r){if(null!==r){const o=r.type;if(3&o)return rr(r,n);if(4&o)return Qp(-1,n[r.index]);if(8&o){const c=r.child;if(null!==c)return kd(n,c);{const d=n[r.index];return nr(d)?Qp(-1,d):ci(d)}}if(32&o)return _c(r,n)()||ci(n[r.index]);{const c=Ly(n,r);return null!==c?Array.isArray(c)?c[0]:kd(Rd(n[16]),c):kd(n,r.next)}}return null}function Ly(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Qp(n,r){const o=10+n+1;if(o<r.length){const c=r[o],d=c[1].firstChild;if(null!==d)return kd(c,d)}return r[7]}function So(n,r,o,c,d,f,g){for(;null!=o;){const S=c[o.index],x=o.type;if(g&&0===r&&(S&&pi(ci(S),c),o.flags|=4),64!=(64&o.flags))if(8&x)So(n,r,o.child,c,d,f,!1),Xu(r,n,d,S,f);else if(32&x){const P=_c(o,c);let F;for(;F=P();)Xu(r,n,d,F,f);Xu(r,n,d,S,f)}else 16&x?Ml(n,r,c,o,d,f):Xu(r,n,d,S,f);o=g?o.projectionNext:o.next}}function bl(n,r,o,c,d,f){So(o,c,n.firstChild,r,d,f,!1)}function Ml(n,r,o,c,d,f){const g=o[16],x=g[6].projection[c.projection];if(Array.isArray(x))for(let P=0;P<x.length;P++)Xu(r,n,d,x[P],f);else So(n,r,x,g[3],d,f,!0)}function nh(n,r,o){n.setAttribute(r,"style",o)}function em(n,r,o){""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o)}function Bd(n,r,o){let c=n.length;for(;;){const d=n.indexOf(r,o);if(-1===d)return d;if(0===d||n.charCodeAt(d-1)<=32){const f=r.length;if(d+f===c||n.charCodeAt(d+f)<=32)return d}o=d+1}}const Oy="ng-template";function Sl(n,r,o){let c=0;for(;c<n.length;){let d=n[c++];if(o&&"class"===d){if(d=n[c],-1!==Bd(d.toLowerCase(),r,0))return!0}else if(1===d){for(;c<n.length&&"string"==typeof(d=n[c++]);)if(d.toLowerCase()===r)return!0;return!1}}return!1}function El(n){return 4===n.type&&n.value!==Oy}function Ud(n,r,o){return r===(4!==n.type||o?n.value:Oy)}function tm(n,r,o){let c=4;const d=n.attrs||[],f=function px(n){for(let r=0;r<n.length;r++)if(_u(n[r]))return r;return n.length}(d);let g=!1;for(let S=0;S<r.length;S++){const x=r[S];if("number"!=typeof x){if(!g)if(4&c){if(c=2|1&c,""!==x&&!Ud(n,x,o)||""===x&&1===r.length){if(Ts(c))return!1;g=!0}}else{const P=8&c?x:r[++S];if(8&c&&null!==n.attrs){if(!Sl(n.attrs,P,o)){if(Ts(c))return!1;g=!0}continue}const Y=dx(8&c?"class":x,d,El(n),o);if(-1===Y){if(Ts(c))return!1;g=!0;continue}if(""!==P){let ce;ce=Y>f?"":d[Y+1].toLowerCase();const Ee=8&c?ce:null;if(Ee&&-1!==Bd(Ee,P,0)||2&c&&P!==ce){if(Ts(c))return!1;g=!0}}}}else{if(!g&&!Ts(c)&&!Ts(x))return!1;if(g&&Ts(x))continue;g=!1,c=x|1&c}}return Ts(c)||g}function Ts(n){return 0==(1&n)}function dx(n,r,o,c){if(null===r)return-1;let d=0;if(c||!o){let f=!1;for(;d<r.length;){const g=r[d];if(g===n)return d;if(3===g||6===g)f=!0;else{if(1===g||2===g){let S=r[++d];for(;"string"==typeof S;)S=r[++d];continue}if(4===g)break;if(0===g){d+=4;continue}}d+=f?1:2}return-1}return function mx(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const c=n[o];if("number"==typeof c)return-1;if(c===r)return o;o++}return-1}(r,n)}function Mc(n,r,o=!1){for(let c=0;c<r.length;c++)if(tm(n,r[c],o))return!0;return!1}function Fy(n,r){return n?":not("+r.trim()+")":r}function yx(n){let r=n[0],o=1,c=2,d="",f=!1;for(;o<n.length;){let g=n[o];if("string"==typeof g)if(2&c){const S=n[++o];d+="["+g+(S.length>0?'="'+S+'"':"")+"]"}else 8&c?d+="."+g:4&c&&(d+=" "+g);else""!==d&&!Ts(g)&&(r+=Fy(f,d),d=""),c=g,f=f||!Ts(c);o++}return""!==d&&(r+=Fy(f,d)),r}const wn={};function ky(n){By(En(),ot(),Vi()+n,!1)}function By(n,r,o,c){if(!c)if(3==(3&r[2])){const f=n.preOrderCheckHooks;null!==f&&Zl(r,f,o)}else{const f=n.preOrderHooks;null!==f&&Mr(r,f,0,o)}Gs(o)}function Hy(n,r=null,o=null,c){const d=Gy(n,r,o,c);return d.resolveInjectorInitializers(),d}function Gy(n,r=null,o=null,c,d=new Set){const f=[o||kt,tx(n)];return c=c||("object"==typeof n?void 0:ee(n)),new Gu(f,r||ba(),c||null,d)}let Dl=(()=>{class n{static create(o,c){var d;if(Array.isArray(o))return Hy({name:""},c,o,"");{const f=null!==(d=o.name)&&void 0!==d?d:"";return Hy({name:f},o.parent,o.providers,f)}}}return n.THROW_IF_NOT_FOUND=ri,n.NULL=new gy,n.\u0275prov=Kt({token:n,providedIn:"any",factory:()=>si(py)}),n.__NG_ELEMENT_ID__=-1,n})();function Ec(n,r=nn.Default){const o=ot();return null===o?si(n,r):cd(ui(),o,ie(n),r)}function Xy(){throw new Error("invalid")}function zd(n,r){return n<<17|r<<2}function Qs(n){return n>>17&32767}function om(n){return 2|n}function Ko(n){return(131068&n)>>2}function am(n,r){return-131069&n|r<<2}function lm(n){return 1|n}function Yx(n,r){const o=n.contentQueries;if(null!==o)for(let c=0;c<o.length;c+=2){const d=o[c],f=o[c+1];if(-1!==f){const g=n.data[f];pu(d),g.contentQueries(2,r[f],f)}}}function gm(n,r,o,c,d,f,g,S,x,P,F){const Y=r.blueprint.slice();return Y[0]=d,Y[2]=76|c,(null!==F||n&&1024&n[2])&&(Y[2]|=1024),Qe(Y),Y[3]=Y[15]=n,Y[8]=o,Y[10]=g||n&&n[10],Y[11]=S||n&&n[11],Y[12]=x||n&&n[12]||null,Y[9]=P||n&&n[9]||null,Y[6]=f,Y[20]=function Ad(){return Ea++}(),Y[21]=F,Y[16]=2==r.type?n[16]:Y,Y}function ih(n,r,o,c,d){let f=n.data[r];if(null===f)f=function l0(n,r,o,c,d){const f=$a(),g=ql(),x=n.data[r]=function mS(n,r,o,c,d,f){return{type:o,index:c,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?f:f&&f.parent,o,r,c,d);return null===n.firstChild&&(n.firstChild=x),null!==f&&(g?null==f.child&&null!==x.parent&&(f.child=x):null===f.next&&(f.next=x)),x}(n,r,o,c,d),function Jf(){return wt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=o,f.value=c,f.attrs=d;const g=function Gr(){const n=wt.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();f.injectorIndex=null===g?-1:g.injectorIndex}return dr(f,!0),f}function rh(n,r,o,c){if(0===o)return-1;const d=r.length;for(let f=0;f<o;f++)r.push(c),n.blueprint.push(c),n.data.push(null);return d}function ym(n,r,o){ca(r);try{const c=n.viewQuery;null!==c&&wm(1,c,o);const d=n.template;null!==d&&Kx(n,r,d,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Yx(n,r),n.staticViewQueries&&wm(2,n.viewQuery,o);const f=n.components;null!==f&&function hS(n,r){for(let o=0;o<r.length;o++)_0(n,r[o])}(r,f)}catch(c){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),c}finally{r[2]&=-5,gu()}}function Wd(n,r,o,c){const d=r[2];if(128!=(128&d)){ca(r);try{Qe(r),function qa(n){return wt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Kx(n,r,o,2,c);const g=3==(3&d);if(g){const P=n.preOrderCheckHooks;null!==P&&Zl(r,P,null)}else{const P=n.preOrderHooks;null!==P&&Mr(r,P,0,null),Dn(r,0)}if(function qd(n){for(let r=Iy(n);null!==r;r=Pd(r)){if(!r[2])continue;const o=r[9];for(let c=0;c<o.length;c++){const d=o[c],f=d[3];0==(512&d[2])&&at(f,1),d[2]|=512}}}(r),function v0(n){for(let r=Iy(n);null!==r;r=Pd(r))for(let o=10;o<r.length;o++){const c=r[o],d=c[1];O(c)&&Wd(d,c,d.template,c[8])}}(r),null!==n.contentQueries&&Yx(n,r),g){const P=n.contentCheckHooks;null!==P&&Zl(r,P)}else{const P=n.contentHooks;null!==P&&Mr(r,P,1),Dn(r,1)}!function cS(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let c=0;c<o.length;c++){const d=o[c];if(d<0)Gs(~d);else{const f=d,g=o[++c],S=o[++c];du(g,f),S(2,r[f])}}}finally{Gs(-1)}}(n,r);const S=n.components;null!==S&&function uS(n,r){for(let o=0;o<r.length;o++)aw(n,r[o])}(r,S);const x=n.viewQuery;if(null!==x&&wm(2,x,c),g){const P=n.viewCheckHooks;null!==P&&Zl(r,P)}else{const P=n.viewHooks;null!==P&&Mr(r,P,2),Dn(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,at(r[3],-1))}finally{gu()}}}function dS(n,r,o,c){const d=r[10],g=K(r);try{!g&&d.begin&&d.begin(),g&&ym(n,r,c),Wd(n,r,o,c)}finally{!g&&d.end&&d.end()}}function Kx(n,r,o,c,d){const f=Vi(),g=2&c;try{Gs(-1),g&&r.length>22&&By(n,r,22,!1),o(c,d)}finally{Gs(f)}}function Xx(n,r,o){if(Zi(r)){const d=r.directiveEnd;for(let f=r.directiveStart;f<d;f++){const g=n.data[f];g.contentQueries&&g.contentQueries(1,o[f],f)}}}function c0(n,r,o){!Rn()||(function iw(n,r,o,c){const d=o.directiveStart,f=o.directiveEnd;n.firstCreatePass||tc(o,r),pi(c,r);const g=o.initialInputs;for(let S=d;S<f;S++){const x=n.data[S],P=ir(x);P&&m0(r,o,x);const F=il(r,n,S,o);pi(F,r),null!==g&&Cc(0,S-d,F,x,0,g),P&&(N(o.index,r)[8]=F)}}(n,r,o,rr(o,r)),128==(128&o.flags)&&function rw(n,r,o){const c=o.directiveStart,d=o.directiveEnd,f=o.index,g=function Qf(){return wt.lFrame.currentDirectiveIndex}();try{Gs(f);for(let S=c;S<d;S++){const x=n.data[S],P=r[S];Xl(S),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&f0(x,P)}}finally{Gs(-1),Xl(g)}}(n,r,o))}function u0(n,r,o=rr){const c=r.localNames;if(null!==c){let d=r.index+1;for(let f=0;f<c.length;f+=2){const g=c[f+1],S=-1===g?o(r,n):n[g];n[d++]=S}}}function Zx(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=h0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function h0(n,r,o,c,d,f,g,S,x,P){const F=22+c,Y=F+d,ce=function fS(n,r){const o=[];for(let c=0;c<r;c++)o.push(c<n?null:wn);return o}(F,Y),Ee="function"==typeof P?P():P;return ce[1]={type:n,blueprint:ce,template:o,queries:null,viewQuery:S,declTNode:r,data:ce.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:Y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:x,consts:Ee,incompleteFirstPass:!1}}function Jx(n,r,o,c){const d=bm(r);null===o?d.push(c):(d.push(o),n.firstCreatePass&&Mm(n).push(c,d.length-1))}function Qx(n,r,o){for(let c in n)if(n.hasOwnProperty(c)){const d=n[c];(o=null===o?{}:o).hasOwnProperty(c)?o[c].push(r,d):o[c]=[r,d]}return o}function ew(n,r){const c=r.directiveEnd,d=n.data,f=r.attrs,g=[];let S=null,x=null;for(let P=r.directiveStart;P<c;P++){const F=d[P],Y=F.inputs,ce=null===f||El(r)?null:g0(Y,f);g.push(ce),S=Qx(Y,P,S),x=Qx(F.outputs,P,x)}null!==S&&(S.hasOwnProperty("class")&&(r.flags|=16),S.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=g,r.inputs=S,r.outputs=x}function tw(n,r){const o=N(r,n);16&o[2]||(o[2]|=32)}function Is(n,r,o,c){let d=!1;if(Rn()){const f=function sw(n,r,o){const c=n.directiveRegistry;let d=null;if(c)for(let f=0;f<c.length;f++){const g=c[f];Mc(o,g.selectors,!1)&&(d||(d=[]),tl(tc(o,r),n,g.type),ir(g)?($d(n,o),d.unshift(g)):d.push(g))}return d}(n,r,o),g=null===c?null:{"":-1};if(null!==f){d=!0,Ia(o,n.data.length,f.length);for(let F=0;F<f.length;F++){const Y=f[F];Y.providersResolver&&Y.providersResolver(Y)}let S=!1,x=!1,P=rh(n,r,f.length,null);for(let F=0;F<f.length;F++){const Y=f[F];o.mergedAttrs=wu(o.mergedAttrs,Y.hostAttrs),jd(n,o,r,P,Y),p0(P,Y,g),null!==Y.contentQueries&&(o.flags|=8),(null!==Y.hostBindings||null!==Y.hostAttrs||0!==Y.hostVars)&&(o.flags|=128);const ce=Y.type.prototype;!S&&(ce.ngOnChanges||ce.ngOnInit||ce.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),S=!0),!x&&(ce.ngOnChanges||ce.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),x=!0),P++}ew(n,o)}g&&function Dc(n,r,o){if(r){const c=n.localNames=[];for(let d=0;d<r.length;d+=2){const f=o[r[d+1]];if(null==f)throw new ke(-301,!1);c.push(r[d],f)}}}(o,c,g)}return o.mergedAttrs=wu(o.mergedAttrs,o.attrs),d}function d0(n,r,o,c,d,f){const g=f.hostBindings;if(g){let S=n.hostBindingOpCodes;null===S&&(S=n.hostBindingOpCodes=[]);const x=~r.index;(function nw(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(S)!=x&&S.push(x),S.push(c,d,g)}}function f0(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function $d(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function p0(n,r,o){if(o){if(r.exportAs)for(let c=0;c<r.exportAs.length;c++)o[r.exportAs[c]]=n;ir(r)&&(o[""]=n)}}function Ia(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}function jd(n,r,o,c,d){n.data[c]=d;const f=d.factory||(d.factory=_s(d.type)),g=new Ja(f,ir(d),Ec);n.blueprint[c]=g,o[c]=g,d0(n,r,0,c,rh(n,o,d.hostVars,wn),d)}function m0(n,r,o){const c=rr(r,n),d=Zx(o),f=n[10],g=Kd(n,gm(n,d,null,o.onPush?32:16,c,r,f,f.createRenderer(c,o),null,null,null));n[r.index]=g}function Rs(n,r,o,c,d,f){const g=rr(n,r);!function Xo(n,r,o,c,d,f,g){if(null==f)n.removeAttribute(r,d,o);else{const S=null==g?De(f):g(f,c||"",d);n.setAttribute(r,d,S,o)}}(r[11],g,f,n.value,o,c,d)}function Cc(n,r,o,c,d,f){const g=f[r];if(null!==g){const S=c.setInput;for(let x=0;x<g.length;){const P=g[x++],F=g[x++],Y=g[x++];null!==S?c.setInput(o,Y,P,F):o[F]=Y}}}function g0(n,r){let o=null,c=0;for(;c<r.length;){const d=r[c];if(0!==d)if(5!==d){if("number"==typeof d)break;n.hasOwnProperty(d)&&(null===o&&(o=[]),o.push(d,n[d],r[c+1])),c+=2}else c+=2;else c+=4}return o}function y0(n,r,o,c){return new Array(n,!0,!1,r,null,0,c,o,null,null)}function aw(n,r){const o=N(r,n);if(O(o)){const c=o[1];48&o[2]?Wd(c,o,c.template,o[8]):o[5]>0&&Yd(o)}}function Yd(n){for(let c=Iy(n);null!==c;c=Pd(c))for(let d=10;d<c.length;d++){const f=c[d];if(512&f[2]){const g=f[1];Wd(g,f,g.template,f[8])}else f[5]>0&&Yd(f)}const o=n[1].components;if(null!==o)for(let c=0;c<o.length;c++){const d=N(o[c],n);O(d)&&d[5]>0&&Yd(d)}}function _0(n,r){const o=N(r,n),c=o[1];(function vm(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(c,o),ym(c,o,o[8])}function Kd(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function _m(n){for(;n;){n[2]|=32;const r=Rd(n);if(oa(n)&&!r)return n;n=r}return null}function w0(n){!function x0(n){for(let r=0;r<n.components.length;r++){const o=n.components[r],c=xl(o);if(null!==c){const d=c[1];dS(d,c,d.template,o)}}}(n[8])}function wm(n,r,o){pu(0),r(n,o)}const M0=(()=>Promise.resolve(null))();function bm(n){return n[7]||(n[7]=[])}function Mm(n){return n.cleanup||(n.cleanup=[])}function Em(n,r){const o=n[9],c=o?o.get(Ds,null):null;c&&c.handleError(r)}function Xd(n,r,o,c,d){for(let f=0;f<o.length;){const g=o[f++],S=o[f++],x=r[g],P=n.data[g];null!==P.setInput?P.setInput(x,d,c,S):x[S]=d}}function sh(n,r,o){let c=o?n.styles:null,d=o?n.classes:null,f=0;if(null!==r)for(let g=0;g<r.length;g++){const S=r[g];"number"==typeof S?f=S:1==f?d=$(d,S):2==f&&(c=$(c,S+": "+r[++g]+";"))}o?n.styles=c:n.stylesWithoutHost=c,o?n.classes=d:n.classesWithoutHost=d}function oh(n,r,o,c,d=!1){for(;null!==o;){const f=r[o.index];if(null!==f&&c.push(ci(f)),nr(f))for(let S=10;S<f.length;S++){const x=f[S],P=x[1].firstChild;null!==P&&oh(x[1],x,P,c)}const g=o.type;if(8&g)oh(n,r,o.child,c);else if(32&g){const S=_c(o,r);let x;for(;x=S();)c.push(x)}else if(16&g){const S=Ly(r,o);if(Array.isArray(S))c.push(...S);else{const x=Rd(r[16]);oh(x[1],x,S,c,!0)}}o=d?o.projectionNext:o.next}return c}class Do{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return oh(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(nr(r)){const o=r[8],c=o?o.indexOf(this):-1;c>-1&&(xo(r,c),Tu(o,c))}this._attachedToViewContainer=!1}Yo(this._lView[1],this._lView)}onDestroy(r){Jx(this._lView[1],this._lView,null,r)}markForCheck(){_m(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function xm(n,r,o){const c=r[10];c.begin&&c.begin();try{Wd(n,r,n.template,o)}catch(d){throw Em(r,d),d}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Qi(n,r){bl(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ke(902,!1);this._appRef=r}}class Cr extends Do{constructor(r){super(r),this._view=r}detectChanges(){w0(this._view)}checkNoChanges(){}get context(){return null}}class ar extends Ys{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=Bn(r);return new lh(o,this.ngModule)}}function ah(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class uw{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,c){const d=this.injector.get(r,$o,c);return d!==$o||o===$o?d:this.parentInjector.get(r,o,c)}}class lh extends ml{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function vx(n){return n.map(yx).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return ah(this.componentDef.inputs)}get outputs(){return ah(this.componentDef.outputs)}create(r,o,c,d){let f=(d=d||this.ngModule)instanceof as?d:null==d?void 0:d.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const g=f?new uw(r,f):r,S=g.get(Zr,null);if(null===S)throw new ke(407,!1);const x=g.get(Sy,null),P=S.createRenderer(null,this.componentDef),F=this.componentDef.selectors[0][0]||"div",Y=c?function pS(n,r,o){return n.selectRootElement(r,o===me.ShadowDom)}(P,c,this.componentDef.encapsulation):Ta(S.createRenderer(null,this.componentDef),F,function cw(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(F)),ce=this.componentDef.onPush?288:272,Ee=function mw(n,r){return{components:[],scheduler:n||jo,clean:M0,playerHandler:r||null,flags:0}}(),Xe=h0(0,null,null,1,0,null,null,null,null,null),ct=gm(null,Xe,Ee,ce,null,null,S,P,x,g,null);let Lt,It;ca(ct);try{const Qt=function fw(n,r,o,c,d,f){const g=o[1];o[22]=n;const x=ih(g,22,2,"#host",null),P=x.mergedAttrs=r.hostAttrs;null!==P&&(sh(x,P,!0),null!==n&&(el(d,n,P),null!==x.classes&&em(d,n,x.classes),null!==x.styles&&nh(d,n,x.styles)));const F=c.createRenderer(n,r),Y=gm(o,Zx(r),null,r.onPush?32:16,o[22],x,c,F,f||null,null,null);return g.firstCreatePass&&(tl(tc(x,o),g,r.type),$d(g,x),Ia(x,o.length,1)),Kd(o,Y),o[22]=Y}(Y,this.componentDef,ct,S,P);if(Y)if(c)el(P,Y,["ng-version",Wo.full]);else{const{attrs:ut,classes:an}=function _x(n){const r=[],o=[];let c=1,d=2;for(;c<n.length;){let f=n[c];if("string"==typeof f)2===d?""!==f&&r.push(f,n[++c]):8===d&&o.push(f);else{if(!Ts(d))break;d=f}c++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);ut&&el(P,Y,ut),an&&an.length>0&&em(P,Y,an.join(" "))}if(It=Wa(Xe,22),void 0!==o){const ut=It.projection=[];for(let an=0;an<this.ngContentSelectors.length;an++){const Cn=o[an];ut.push(null!=Cn?Array.from(Cn):null)}}Lt=function pw(n,r,o,c,d){const f=o[1],g=function Gt(n,r,o){const c=ui();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),jd(n,c,r,rh(n,r,1,null),o),ew(n,c));const d=il(r,n,c.directiveStart,c);pi(d,r);const f=rr(c,r);return f&&pi(f,r),d}(f,o,r);if(c.components.push(g),n[8]=g,null!==d)for(const x of d)x(g,r);if(r.contentQueries){const x=ui();r.contentQueries(1,g,x.directiveStart)}const S=ui();return!f.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Gs(S.index),d0(o[1],S,0,S.directiveStart,S.directiveEnd,r),f0(r,g)),g}(Qt,this.componentDef,ct,Ee,[gw]),ym(Xe,ct,null)}finally{gu()}return new dw(this.componentType,Lt,$u(It,ct),ct,It)}}class dw extends class by{}{constructor(r,o,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=o,this.hostView=this.changeDetectorRef=new Cr(d),this.componentType=r}setInput(r,o){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[r])){const f=this._rootLView;Xd(f[1],f,d,r,o),tw(f,this._tNode.index)}}get injector(){return new Yr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function gw(){const n=ui();vu(ot()[1],n)}let Zd=null;function Tl(){if(!Zd){const n=Ue.Symbol;if(n&&n.iterator)Zd=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const c=r[o];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Zd=c)}}}return Zd}function ch(n){return!!Cm(n)&&(Array.isArray(n)||!(n instanceof Map)&&Tl()in n)}function Cm(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Co(n,r,o){return n[r]=o}function vr(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function Tm(n,r,o,c){const d=ot();return vr(d,$r(),r)&&(En(),Rs(hi(),d,n,r,o,c)),Tm}function Ac(n,r,o,c){return vr(n,$r(),o)?r+De(o)+c:wn}function Rm(n,r,o,c,d,f,g,S){const x=ot(),P=En(),F=n+22,Y=P.firstCreatePass?function dh(n,r,o,c,d,f,g,S,x){const P=r.consts,F=ih(r,n,4,g||null,xe(P,S));Is(r,o,F,xe(P,x)),vu(r,F);const Y=F.tViews=h0(2,F,c,d,f,r.directiveRegistry,r.pipeRegistry,null,r.schemas,P);return null!==r.queries&&(r.queries.template(r,F),Y.queries=r.queries.embeddedTView(F)),F}(F,P,x,r,o,c,d,f,g):P.data[F];dr(Y,!1);const ce=x[11].createComment("");Ki(P,x,ce,Y),pi(ce,x),Kd(x,x[F]=y0(ce,x,ce,Y)),zr(Y)&&c0(P,x,Y),null!=g&&u0(x,Y,S)}function fh(n,r,o){const c=ot();return vr(c,$r(),r)&&function As(n,r,o,c,d,f,g,S){const x=rr(r,o);let F,P=r.inputs;!S&&null!=P&&(F=P[c])?(Xd(n,o,F,c,d),vs(r)&&tw(o,r.index)):3&r.type&&(c=function gS(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(c),d=null!=g?g(d,r.value||"",c):d,f.setProperty(x,c,d))}(En(),hi(),c,n,r,c[11],o,!1),fh}function Pm(n,r,o,c,d){const g=d?"class":"style";Xd(n,o,r.inputs[g],g,c)}function Qd(n,r,o,c){const d=ot(),f=En(),g=22+n,S=d[11],x=d[g]=Ta(S,r,function np(){return wt.lFrame.currentNamespace}()),P=f.firstCreatePass?function Iw(n,r,o,c,d,f,g){const S=r.consts,P=ih(r,n,2,d,xe(S,f));return Is(r,o,P,xe(S,g)),null!==P.attrs&&sh(P,P.attrs,!1),null!==P.mergedAttrs&&sh(P,P.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,P),P}(g,f,d,0,r,o,c):f.data[g];dr(P,!0);const F=P.mergedAttrs;null!==F&&el(S,x,F);const Y=P.classes;null!==Y&&em(S,x,Y);const ce=P.styles;return null!==ce&&nh(S,x,ce),64!=(64&P.flags)&&Ki(f,d,x,P),0===function Xn(){return wt.lFrame.elementDepthCount}()&&pi(x,d),function Ln(){wt.lFrame.elementDepthCount++}(),zr(P)&&(c0(f,d,P),Xx(f,P,d)),null!==c&&u0(d,P),Qd}function ph(){let n=ui();ql()?Yl():(n=n.parent,dr(n,!1));const r=n;!function Bi(){wt.lFrame.elementDepthCount--}();const o=En();return o.firstCreatePass&&(vu(o,n),Zi(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function td(n){return 0!=(16&n.flags)}(r)&&Pm(o,r,ot(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function nd(n){return 0!=(32&n.flags)}(r)&&Pm(o,r,ot(),r.stylesWithoutHost,!1),ph}function Lm(n,r,o,c){return Qd(n,r,o,c),ph(),Lm}function mh(n,r,o){const c=ot(),d=En(),f=n+22,g=d.firstCreatePass?function L0(n,r,o,c,d){const f=r.consts,g=xe(f,c),S=ih(r,n,8,"ng-container",g);return null!==g&&sh(S,g,!0),Is(r,o,S,xe(f,d)),null!==r.queries&&r.queries.elementStart(r,S),S}(f,d,c,r,o):d.data[f];dr(g,!0);const S=c[f]=c[11].createComment("");return Ki(d,c,S,g),pi(S,c),zr(g)&&(c0(d,c,g),Xx(d,g,c)),null!=o&&u0(c,g),mh}function ef(){let n=ui();const r=En();return ql()?Yl():(n=n.parent,dr(n,!1)),r.firstCreatePass&&(vu(r,n),Zi(n)&&r.queries.elementEnd(n)),ef}function Nm(n,r,o){return mh(n,r,o),ef(),Nm}function N0(){return ot()}function Om(n){return!!n&&"function"==typeof n.then}function O0(n){return!!n&&"function"==typeof n.subscribe}const F0=O0;function Fm(n,r,o,c){const d=ot(),f=En(),g=ui();return function B0(n,r,o,c,d,f,g,S){const x=zr(c),F=n.firstCreatePass&&Mm(n),Y=r[8],ce=bm(r);let Ee=!0;if(3&c.type||S){const Lt=rr(c,r),It=S?S(Lt):Lt,Qt=ce.length,ut=S?Cn=>S(ci(Cn[c.index])):c.index;let an=null;if(!S&&x&&(an=function Rw(n,r,o,c){const d=n.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const g=d[f];if(g===o&&d[f+1]===c){const S=r[7],x=d[f+2];return S.length>x?S[x]:null}"string"==typeof g&&(f+=2)}return null}(n,r,d,c.index)),null!==an)(an.__ngLastListenerFn__||an).__ngNextListenerFn__=f,an.__ngLastListenerFn__=f,Ee=!1;else{f=V0(c,r,Y,f,!1);const Cn=o.listen(It,d,f);ce.push(f,Cn),F&&F.push(d,ut,Qt,Qt+1)}}else f=V0(c,r,Y,f,!1);const Xe=c.outputs;let ct;if(Ee&&null!==Xe&&(ct=Xe[d])){const Lt=ct.length;if(Lt)for(let It=0;It<Lt;It+=2){const li=r[ct[It]][ct[It+1]].subscribe(f),Bl=ce.length;ce.push(f,li),F&&F.push(d,c.index,Bl,-(Bl+1))}}}(f,d,d[11],g,n,r,0,c),Fm}function U0(n,r,o,c){try{return!1!==o(c)}catch(d){return Em(n,d),!1}}function V0(n,r,o,c,d){return function f(g){if(g===Function)return c;_m(2&n.flags?N(n.index,r):r);let x=U0(r,0,c,g),P=f.__ngNextListenerFn__;for(;P;)x=U0(r,0,P,g)&&x,P=P.__ngNextListenerFn__;return d&&!1===x&&(g.preventDefault(),g.returnValue=!1),x}}function km(n=1){return function ep(n){return(wt.lFrame.contextLView=function tp(n,r){for(;n>0;)r=r[15],n--;return r}(n,wt.lFrame.contextLView))[8]}(n)}function Y0(n,r,o,c,d){const f=n[o+1],g=null===r;let S=c?Qs(f):Ko(f),x=!1;for(;0!==S&&(!1===x||g);){const F=n[S+1];Fw(n[S],r)&&(x=!0,n[S+1]=c?lm(F):om(F)),S=c?Qs(F):Ko(F)}x&&(n[o+1]=c?om(f):lm(f))}function Fw(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Ct(n,r)>=0}const _i={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function K0(n){return n.substring(_i.key,_i.keyEnd)}function X0(n,r){const o=_i.textEnd;return o===r?-1:(r=_i.keyEnd=function Uw(n,r,o){for(;r<o&&n.charCodeAt(r)>32;)r++;return r}(n,_i.key=r,o),Oc(n,r,o))}function Oc(n,r,o){for(;r<o&&n.charCodeAt(r)<=32;)r++;return r}function Pa(n,r,o){return function _r(n,r,o,c){const d=ot(),f=En(),g=jr(2);f.firstUpdatePass&&yh(f,n,g,c),r!==wn&&vr(d,g,r)&&nv(f,f.data[Vi()],d,d[11],n,d[g+1]=function iv(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=ee(ul(n)))),n}(r,o),c,g)}(n,r,o,!1),Pa}function Ar(n,r){for(let o=function kw(n){return function J0(n){_i.key=0,_i.keyEnd=0,_i.value=0,_i.valueEnd=0,_i.textEnd=n.length}(n),X0(n,Oc(n,0,_i.textEnd))}(r);o>=0;o=X0(r,o))ge(n,K0(r),!0)}function jm(n,r){return r>=n.expandoStartIndex}function yh(n,r,o,c){const d=n.data;if(null===d[o+1]){const f=d[Vi()],g=jm(n,o);rv(f,c)&&null===r&&!g&&(r=!1),r=function vh(n,r,o,c){const d=function fu(n){const r=wt.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let f=c?r.residualClasses:r.residualStyles;if(null===d)0===(c?r.classBindings:r.styleBindings)&&(o=_h(o=rf(null,n,r,o,c),r.attrs,c),f=null);else{const g=r.directiveStylingLast;if(-1===g||n[g]!==d)if(o=rf(d,n,r,o,c),null===f){let x=function nf(n,r,o){const c=o?r.classBindings:r.styleBindings;if(0!==Ko(c))return n[Qs(c)]}(n,r,c);void 0!==x&&Array.isArray(x)&&(x=rf(null,n,r,x[1],c),x=_h(x,r.attrs,c),function ev(n,r,o,c){n[Qs(o?r.classBindings:r.styleBindings)]=c}(n,r,c,x))}else f=function qm(n,r,o){let c;const d=r.directiveEnd;for(let f=1+r.directiveStylingLast;f<d;f++)c=_h(c,n[f].hostAttrs,o);return _h(c,r.attrs,o)}(n,r,c)}return void 0!==f&&(c?r.residualClasses=f:r.residualStyles=f),o}(d,f,r,c),function Nw(n,r,o,c,d,f){let g=f?r.classBindings:r.styleBindings,S=Qs(g),x=Ko(g);n[c]=o;let F,P=!1;if(Array.isArray(o)){const Y=o;F=Y[1],(null===F||Ct(Y,F)>0)&&(P=!0)}else F=o;if(d)if(0!==x){const ce=Qs(n[S+1]);n[c+1]=zd(ce,S),0!==ce&&(n[ce+1]=am(n[ce+1],c)),n[S+1]=function Bx(n,r){return 131071&n|r<<17}(n[S+1],c)}else n[c+1]=zd(S,0),0!==S&&(n[S+1]=am(n[S+1],c)),S=c;else n[c+1]=zd(x,0),0===S?S=c:n[x+1]=am(n[x+1],c),x=c;P&&(n[c+1]=om(n[c+1])),Y0(n,F,c,!0),Y0(n,F,c,!1),function Ow(n,r,o,c,d){const f=d?n.residualClasses:n.residualStyles;null!=f&&"string"==typeof r&&Ct(f,r)>=0&&(o[c+1]=lm(o[c+1]))}(r,F,n,c,f),g=zd(S,x),f?r.classBindings=g:r.styleBindings=g}(d,f,r,o,g,c)}}function rf(n,r,o,c,d){let f=null;const g=o.directiveEnd;let S=o.directiveStylingLast;for(-1===S?S=o.directiveStart:S++;S<g&&(f=r[S],c=_h(c,f.hostAttrs,d),f!==n);)S++;return null!==n&&(o.directiveStylingLast=S),c}function _h(n,r,o){const c=o?1:2;let d=-1;if(null!==r)for(let f=0;f<r.length;f++){const g=r[f];"number"==typeof g?d=g:d===c&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ge(n,g,!!o||r[++f]))}return void 0===n?null:n}function nv(n,r,o,c,d,f,g,S){if(!(3&r.type))return;const x=n.data,P=x[S+1];wh(function Qy(n){return 1==(1&n)}(P)?Ym(x,r,o,d,Ko(P),g):void 0)||(wh(f)||function Jy(n){return 2==(2&n)}(P)&&(f=Ym(x,null,o,d,S,g)),function hx(n,r,o,c,d){if(r)d?n.addClass(o,c):n.removeClass(o,c);else{let f=-1===c.indexOf("-")?void 0:gr.DashCase;null==d?n.removeStyle(o,c,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=gr.Important),n.setStyle(o,c,d,f))}}(c,g,fo(Vi(),o),d,f))}function Ym(n,r,o,c,d,f){const g=null===r;let S;for(;d>0;){const x=n[d],P=Array.isArray(x),F=P?x[1]:x,Y=null===F;let ce=o[d+1];ce===wn&&(ce=Y?kt:void 0);let Ee=Y?Ae(ce,c):F===c?ce:void 0;if(P&&!wh(Ee)&&(Ee=Ae(x,c)),wh(Ee)&&(S=Ee,g))return S;const Xe=n[d+1];d=g?Qs(Xe):Ko(Xe)}if(null!==r){let x=f?r.residualClasses:r.residualStyles;null!=x&&(S=Ae(x,c))}return S}function wh(n){return void 0!==n}function rv(n,r){return 0!=(n.flags&(r?16:32))}function Km(n,r=""){const o=ot(),c=En(),d=n+22,f=c.firstCreatePass?ih(c,d,1,r,null):c.data[d],g=o[d]=function Yp(n,r){return n.createText(r)}(o[11],r);Ki(c,o,g,f),dr(f,!1)}function Xm(n){return bh("",n,""),Xm}function bh(n,r,o){const c=ot(),d=Ac(c,n,r,o);return d!==wn&&function Eo(n,r,o){const c=fo(r,n);!function cs(n,r,o){n.setValue(r,o)}(n[11],c,o)}(c,Vi(),d),bh}function Uc(n,r,o){!function Ir(n,r,o,c){const d=En(),f=jr(2);d.firstUpdatePass&&yh(d,null,f,c);const g=ot();if(o!==wn&&vr(g,f,o)){const S=d.data[Vi()];if(rv(S,c)&&!jm(d,f)){let x=c?S.classesWithoutHost:S.stylesWithoutHost;null!==x&&(o=$(x,o||"")),Pm(d,S,g,o,c)}else!function tv(n,r,o,c,d,f,g,S){d===wn&&(d=kt);let x=0,P=0,F=0<d.length?d[0]:null,Y=0<f.length?f[0]:null;for(;null!==F||null!==Y;){const ce=x<d.length?d[x+1]:void 0,Ee=P<f.length?f[P+1]:void 0;let ct,Xe=null;F===Y?(x+=2,P+=2,ce!==Ee&&(Xe=Y,ct=Ee)):null===Y||null!==F&&F<Y?(x+=2,Xe=F):(P+=2,Xe=Y,ct=Ee),null!==Xe&&nv(n,r,o,c,Xe,ct,g,S),F=x<d.length?d[x]:null,Y=P<f.length?f[P]:null}}(d,S,g,g[11],g[f+1],g[f+1]=function sf(n,r,o){if(null==o||""===o)return kt;const c=[],d=ul(o);if(Array.isArray(d))for(let f=0;f<d.length;f++)n(c,d[f],!0);else if("object"==typeof d)for(const f in d)d.hasOwnProperty(f)&&n(c,f,d[f]);else"string"==typeof d&&r(c,d);return c}(n,r,o),c,f)}}(ge,Ar,Ac(ot(),n,r,o),!0)}const Zo=void 0;var rg=["en",[["a","p"],["AM","PM"],Zo],[["AM","PM"],Zo,Zo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zo,"{1} 'at' {0}",Zo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ig(n){const o=Math.floor(Math.abs(n)),c=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===c?1:5}];let Vc={};function sg(n){const r=function jw(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=zc(r);if(o)return o;const c=r.split("-")[0];if(o=zc(c),o)return o;if("en"===c)return rg;throw new ke(701,!1)}function yv(n){return sg(n)[un.PluralCase]}function zc(n){return n in Vc||(Vc[n]=Ue.ng&&Ue.ng.common&&Ue.ng.common.locales&&Ue.ng.common.locales[n]),Vc[n]}var un=(()=>((un=un||{})[un.LocaleId=0]="LocaleId",un[un.DayPeriodsFormat=1]="DayPeriodsFormat",un[un.DayPeriodsStandalone=2]="DayPeriodsStandalone",un[un.DaysFormat=3]="DaysFormat",un[un.DaysStandalone=4]="DaysStandalone",un[un.MonthsFormat=5]="MonthsFormat",un[un.MonthsStandalone=6]="MonthsStandalone",un[un.Eras=7]="Eras",un[un.FirstDayOfWeek=8]="FirstDayOfWeek",un[un.WeekendRange=9]="WeekendRange",un[un.DateFormat=10]="DateFormat",un[un.TimeFormat=11]="TimeFormat",un[un.DateTimeFormat=12]="DateTimeFormat",un[un.NumberSymbols=13]="NumberSymbols",un[un.NumberFormats=14]="NumberFormats",un[un.CurrencyCode=15]="CurrencyCode",un[un.CurrencySymbol=16]="CurrencySymbol",un[un.CurrencyName=17]="CurrencyName",un[un.Currencies=18]="Currencies",un[un.Directionality=19]="Directionality",un[un.PluralCase=20]="PluralCase",un[un.ExtraData=21]="ExtraData",un))();const Rl="en-US";let og=Rl;class to{}class pg{}function Cf(n,r){return new Kc(n,null!=r?r:null)}class Kc extends to{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ar(this);const c=Ri(r);this._bootstrapComponents=vo(c.bootstrap),this._r3Injector=Gy(r,o,[{provide:to,useValue:this},{provide:Ys,useValue:this.componentFactoryResolver}],ee(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class ka extends pg{constructor(r){super(),this.moduleType=r}create(r){return new Kc(this.moduleType,r)}}class Tf extends to{constructor(r,o,c){super(),this.componentFactoryResolver=new ar(this),this.instance=null;const d=new Gu([...r,{provide:to,useValue:this},{provide:Ys,useValue:this.componentFactoryResolver}],o||ba(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function Xc(n,r,o=null){return new Tf(n,r,o).injector}function kh(n,r){const o=n[r];return o===wn?void 0:o}function $v(n,r,o,c,d,f,g){const S=r+o;return function Al(n,r,o,c){const d=vr(n,r,o);return vr(n,r+1,c)||d}(n,S,d,f)?Co(n,S+2,g?c.call(g,d,f):c(d,f)):kh(n,S+2)}function qv(n,r){const o=En();let c;const d=n+22;o.firstCreatePass?(c=function Ab(n,r){if(r)for(let o=r.length-1;o>=0;o--){const c=r[o];if(n===c.name)return c}}(r,o.pipeRegistry),o.data[d]=c,c.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(d,c.onDestroy)):c=o.data[d];const f=c.factory||(c.factory=_s(c.type)),g=$i(Ec);try{const S=fa(!1),x=f();return fa(S),function P0(n,r,o,c){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),r[o]=c}(o,ot(),d,x),x}finally{$i(g)}}function Yv(n,r,o){const c=n+22,d=ot(),f=Hs(d,c);return Zc(d,c)?function Wv(n,r,o,c,d,f){const g=r+o;return vr(n,g,d)?Co(n,g+1,f?c.call(f,d):c(d)):kh(n,g+1)}(d,fr(),r,f.transform,o,f):f.transform(o)}function vg(n,r,o,c){const d=n+22,f=ot(),g=Hs(f,d);return Zc(f,d)?$v(f,fr(),r,g.transform,o,c,g):g.transform(o,c)}function Zc(n,r){return n[1].data[r].pure}function Xv(n){return r=>{setTimeout(n,void 0,r)}}const Qo=class kS extends R.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,c){var d,f,g;let S=r,x=o||(()=>null),P=c;if(r&&"object"==typeof r){const Y=r;S=null===(d=Y.next)||void 0===d?void 0:d.bind(Y),x=null===(f=Y.error)||void 0===f?void 0:f.bind(Y),P=null===(g=Y.complete)||void 0===g?void 0:g.bind(Y)}this.__isAsync&&(x=Xv(x),S&&(S=Xv(S)),P&&(P=Xv(P)));const F=super.subscribe({next:S,error:x,complete:P});return r instanceof D.w0&&r.add(F),F}};function Zv(){return this._results[Tl()]()}class Rf{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Tl(),c=Rf.prototype;c[o]||(c[o]=Zv)}get changes(){return this._changes||(this._changes=new Qo)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const c=this;c.dirty=!1;const d=Sr(r);(this._changesDetected=!function Cu(n,r,o){if(n.length!==r.length)return!1;for(let c=0;c<n.length;c++){let d=n[c],f=r[c];if(o&&(d=o(d),f=o(f)),f!==d)return!1}return!0}(c._results,d,o))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let no=(()=>{class n{}return n.__NG_ELEMENT_ID__=Jv,n})();const BS=no,Ib=class extends BS{constructor(r,o,c){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=c}createEmbeddedView(r,o){const c=this._declarationTContainer.tViews,d=gm(this._declarationLView,c,r,16,null,c.declTNode,null,null,null,null,o||null);d[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(d[19]=g.createEmbeddedView(c)),ym(c,d,r),new Do(d)}};function Jv(){return Io(ui(),ot())}function Io(n,r){return 4&n.type?new Ib(r,n,$u(n,r)):null}let Bh=(()=>{class n{}return n.__NG_ELEMENT_ID__=Rb,n})();function Rb(){return _g(ui(),ot())}const Nl=Bh,Pb=class extends Nl{constructor(r,o,c){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=c}get element(){return $u(this._hostTNode,this._hostLView)}get injector(){return new Yr(this._hostTNode,this._hostLView)}get parentInjector(){const r=po(this._hostTNode,this._hostLView);if(rd(r)){const o=Bo(r,this._hostLView),c=ko(r);return new Yr(o[1].data[c+8],o)}return new Yr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=Lb(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const g=r.createEmbeddedView(o||{},f);return this.insert(g,d),g}createComponent(r,o,c,d,f){const g=r&&!function mo(n){return"function"==typeof n}(r);let S;if(g)S=o;else{const Y=o||{};S=Y.index,c=Y.injector,d=Y.projectableNodes,f=Y.environmentInjector||Y.ngModuleRef}const x=g?r:new lh(Bn(r)),P=c||this.parentInjector;if(!f&&null==x.ngModule){const ce=(g?P:this.parentInjector).get(as,null);ce&&(f=ce)}const F=x.create(P,d,void 0,f);return this.insert(F.hostView,S),F}insert(r,o){const c=r._lView,d=c[1];if(function J(n){return nr(n[3])}(c)){const F=this.indexOf(r);if(-1!==F)this.detach(F);else{const Y=c[3],ce=new Pb(Y,Y[6],Y[3]);ce.detach(ce.indexOf(r))}}const f=this._adjustIndex(o),g=this._lContainer;!function Ry(n,r,o,c){const d=10+c,f=o.length;c>0&&(o[d-1][4]=r),c<f-10?(r[4]=o[d],rl(o,10+c,r)):(o.push(r),r[4]=null),r[3]=o;const g=r[17];null!==g&&o!==g&&function xc(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(g,r);const S=r[19];null!==S&&S.insertView(n),r[2]|=64}(d,c,g,f);const S=Qp(f,g),x=c[11],P=wc(x,g[7]);return null!==P&&function Zu(n,r,o,c,d,f){c[0]=d,c[6]=r,bl(n,c,o,1,d,f)}(d,g[6],x,c,P,S),r.attachToViewContainerRef(),rl(ea(g),f,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=Lb(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),c=xo(this._lContainer,o);c&&(Tu(ea(this._lContainer),o),Yo(c[1],c))}detach(r){const o=this._adjustIndex(r,-1),c=xo(this._lContainer,o);return c&&null!=Tu(ea(this._lContainer),o)?new Do(c):null}_adjustIndex(r,o=0){return null==r?this.length+o:r}};function Lb(n){return n[8]}function ea(n){return n[8]||(n[8]=[])}function _g(n,r){let o;const c=r[n.index];if(nr(c))o=c;else{let d;if(8&n.type)d=ci(c);else{const f=r[11];d=f.createComment("");const g=rr(n,r);bo(f,wc(f,g),d,function Fd(n,r){return n.nextSibling(r)}(f,g),!1)}r[n.index]=o=y0(c,r,d,n),Kd(r,o)}return new Pb(o,n,r)}class Qv{constructor(r){this.queryList=r,this.matches=null}clone(){return new Qv(this.queryList)}setDirty(){this.queryList.setDirty()}}class xg{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const c=null!==r.contentQueries?r.contentQueries[0]:o.length,d=[];for(let f=0;f<c;f++){const g=o.getByIndex(f);d.push(this.queries[g.indexInDeclarationView].clone())}return new xg(d)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==s_(r,o).matches&&this.queries[o].setDirty()}}class Pf{constructor(r,o,c=null){this.predicate=r,this.flags=o,this.read=c}}class wg{constructor(r=[]){this.queries=r}elementStart(r,o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let c=0;c<this.length;c++){const d=null!==o?o.length:0,f=this.getByIndex(c).embeddedTView(r,d);f&&(f.indexInDeclarationView=c,null!==o?o.push(f):o=[f])}return null!==o?new wg(o):null}template(r,o){for(let c=0;c<this.queries.length;c++)this.queries[c].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Uh{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new Uh(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let c=r.parent;for(;null!==c&&8&c.type&&c.index!==o;)c=c.parent;return o===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(r,o,Ob(o,f)),this.matchTNodeWithReadOption(r,o,nl(o,r,f,!1,!1))}else c===no?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,nl(o,r,c,!1,!1))}matchTNodeWithReadOption(r,o,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===dc||d===Bh||d===no&&4&o.type)this.addMatch(o.index,-2);else{const f=nl(o,r,d,!1,!1);null!==f&&this.addMatch(o.index,f)}else this.addMatch(o.index,c)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function Ob(n,r){const o=n.localNames;if(null!==o)for(let c=0;c<o.length;c+=2)if(o[c]===r)return o[c+1];return null}function kb(n,r,o,c){return-1===o?function Fb(n,r){return 11&n.type?$u(n,r):4&n.type?Io(n,r):null}(r,n):-2===o?function Bb(n,r,o){return o===dc?$u(r,n):o===no?Io(r,n):o===Bh?_g(r,n):void 0}(n,r,c):il(n,n[1],o,r)}function e_(n,r,o,c){const d=r[19].queries[c];if(null===d.matches){const f=n.data,g=o.matches,S=[];for(let x=0;x<g.length;x+=2){const P=g[x];S.push(P<0?null:kb(r,f[P],g[x+1],o.metadata.read))}d.matches=S}return d.matches}function bg(n,r,o,c){const d=n.queries.getByIndex(o),f=d.matches;if(null!==f){const g=e_(n,r,d,o);for(let S=0;S<f.length;S+=2){const x=f[S];if(x>0)c.push(g[S/2]);else{const P=f[S+1],F=r[-x];for(let Y=10;Y<F.length;Y++){const ce=F[Y];ce[17]===ce[3]&&bg(ce[1],ce,P,c)}if(null!==F[9]){const Y=F[9];for(let ce=0;ce<Y.length;ce++){const Ee=Y[ce];bg(Ee[1],Ee,P,c)}}}}}return c}function t_(n){const r=ot(),o=En(),c=Ui();pu(c+1);const d=s_(o,c);if(n.dirty&&K(r)===(2==(2&d.metadata.flags))){if(null===d.matches)n.reset([]);else{const f=d.crossesNgTemplate?bg(o,r,c,[]):e_(o,r,d,c);n.reset(f,FM),n.notifyOnChanges()}return!0}return!1}function n_(n,r,o){const c=En();c.firstCreatePass&&(zb(c,new Pf(n,r,o),-1),2==(2&r)&&(c.staticViewQueries=!0)),i_(c,ot(),r)}function ai(n,r,o,c){const d=En();if(d.firstCreatePass){const f=ui();zb(d,new Pf(r,o,c),f.index),function r_(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(d,n),2==(2&o)&&(d.staticContentQueries=!0)}i_(d,ot(),o)}function Ub(){return function Vb(n,r){return n[19].queries[r].queryList}(ot(),Ui())}function i_(n,r,o){const c=new Rf(4==(4&o));Jx(n,r,c,c.destroy),null===r[19]&&(r[19]=new xg),r[19].queries.push(new Qv(c))}function zb(n,r,o){null===n.queries&&(n.queries=new wg),n.queries.track(new Uh(r,o))}function s_(n,r){return n.queries.getByIndex(r)}function ta(n){const r=Bn(n)||bi(n)||ki(n);return null!==r&&r.standalone}function io(...n){}const g_=new Zn("Application Initializer");let kl=(()=>{class n{constructor(o){this.appInits=o,this.resolve=io,this.reject=io,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const o=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(Om(f))o.push(f);else if(F0(f)){const g=new Promise((S,x)=>{f.subscribe({complete:S,error:x})});o.push(g)}}Promise.all(o).then(()=>{c()}).catch(d=>{this.reject(d)}),0===o.length&&c(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(si(g_,8))},n.\u0275prov=Kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const y_=new Zn("AppId",{providedIn:"root",factory:function v_(){return`${Ig()}${Ig()}${Ig()}`}});function Ig(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const __=new Zn("Platform Initializer"),Jb=new Zn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Gh=new Zn("appBootstrapListener"),Qb=new Zn("AnimationModuleType");let eM=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Uf=new Zn("LocaleId",{providedIn:"root",factory:()=>sc(Uf,nn.Optional|nn.SkipSelf)||function Wh(){return"undefined"!=typeof $localize&&$localize.locale||Rl}()}),Rg=new Zn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class nM{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let w_=(()=>{class n{compileModuleSync(o){return new ka(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const c=this.compileModuleSync(o),f=vo(Ri(o).declarations).reduce((g,S)=>{const x=Bn(S);return x&&g.push(new lh(x)),g},[]);return new nM(c,f)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const M_=(()=>Promise.resolve(0))();function zf(n){"undefined"==typeof Zone?M_.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Pr{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qo(!1),this.onMicrotaskEmpty=new Qo(!1),this.onStable=new Qo(!1),this.onError=new Qo(!1),"undefined"==typeof Zone)throw new ke(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&o,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Pg(){let n=Ue.requestAnimationFrame,r=Ue.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const c=r[Zone.__symbol__("OriginalDelegate")];c&&(r=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function aM(n){const r=()=>{!function oM(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ue,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Gf(n),n.isCheckStableRunning=!0,Lg(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Gf(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,c,d,f,g,S)=>{try{return S_(n),o.invokeTask(d,f,g,S)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&r(),E_(n)}},onInvoke:(o,c,d,f,g,S,x)=>{try{return S_(n),o.invoke(d,f,g,S,x)}finally{n.shouldCoalesceRunChangeDetection&&r(),E_(n)}},onHasTask:(o,c,d,f)=>{o.hasTask(d,f),c===d&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,Gf(n),Lg(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:(o,c,d,f)=>(o.handleError(d,f),n.runOutsideAngular(()=>n.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Pr.isInAngularZone())throw new ke(909,!1)}static assertNotInAngularZone(){if(Pr.isInAngularZone())throw new ke(909,!1)}run(r,o,c){return this._inner.run(r,o,c)}runTask(r,o,c,d){const f=this._inner,g=f.scheduleEventTask("NgZoneEvent: "+d,r,Hf,io,io);try{return f.runTask(g,o,c)}finally{f.cancelTask(g)}}runGuarded(r,o,c){return this._inner.runGuarded(r,o,c)}runOutsideAngular(r){return this._outer.run(r)}}const Hf={};function Lg(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Gf(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function S_(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function E_(n){n._nesting--,Lg(n)}class lM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qo,this.onMicrotaskEmpty=new Qo,this.onStable=new Qo,this.onError=new Qo}run(r,o,c){return r.apply(o,c)}runGuarded(r,o,c){return r.apply(o,c)}runOutsideAngular(r){return r()}runTask(r,o,c,d){return r.apply(o,c)}}const D_=new Zn(""),C_=new Zn("");let Wf,cM=(()=>{class n{constructor(o,c,d){this._ngZone=o,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Wf||(function uM(n){Wf=n}(d),d.addToWindow(c)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Pr.assertNotInAngularZone(),zf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())zf(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(o)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==f),o(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:o,timeoutId:f,updateCb:d})}whenStable(o,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,c,d){return[]}}return n.\u0275fac=function(o){return new(o||n)(si(Pr),si(T_),si(C_))},n.\u0275prov=Kt({token:n,factory:n.\u0275fac}),n})(),T_=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,c){this._applications.set(o,c)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,c=!0){var d;return null!==(d=null==Wf?void 0:Wf.findTestabilityInTree(this,o,c))&&void 0!==d?d:null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Ro=null;const A_=new Zn("AllowMultipleToken"),Ng=new Zn("PlatformDestroyListeners");class fM{constructor(r,o){this.name=r,this.token=o}}function Fg(n,r,o=[]){const c=`Platform: ${r}`,d=new Zn(c);return(f=[])=>{let g=$f();if(!g||g.injector.get(A_,!1)){const S=[...o,...f,{provide:d,useValue:!0}];n?n(S):function pM(n){if(Ro&&!Ro.get(A_,!1))throw new ke(400,!1);Ro=n;const r=n.get(R_);(function Og(n){const r=n.get(__,null);r&&r.forEach(o=>o())})(n)}(function I_(n=[],r){return Dl.create({name:r,providers:[{provide:Er,useValue:"platform"},{provide:Ng,useValue:new Set([()=>Ro=null])},...n]})}(S,c))}return function gM(n){const r=$f();if(!r)throw new ke(401,!1);return r}()}}function $f(){var n;return null!==(n=null==Ro?void 0:Ro.get(R_))&&void 0!==n?n:null}let R_=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,c){const d=function yM(n,r){let o;return o="noop"===n?new lM:("zone.js"===n?void 0:n)||new Pr(r),o}(null==c?void 0:c.ngZone,function P_(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:Pr,useValue:d}];return d.run(()=>{const g=Dl.create({providers:f,parent:this.injector,name:o.moduleType.name}),S=o.create(g),x=S.injector.get(Ds,null);if(!x)throw new ke(402,!1);return d.runOutsideAngular(()=>{const P=d.onError.subscribe({next:F=>{x.handleError(F)}});S.onDestroy(()=>{qf(this._modules,S),P.unsubscribe()})}),function L_(n,r,o){try{const c=o();return Om(c)?c.catch(d=>{throw r.runOutsideAngular(()=>n.handleError(d)),d}):c}catch(c){throw r.runOutsideAngular(()=>n.handleError(c)),c}}(x,d,()=>{const P=S.injector.get(kl);return P.runInitializers(),P.donePromise.then(()=>(function mf(n){Rt(n,"Expected localeId to be defined"),"string"==typeof n&&(og=n.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Uf,Rl)||Rl),this._moduleDoBootstrap(S),S))})})}bootstrapModule(o,c=[]){const d=N_({},c);return function hM(n,r,o){const c=new ka(o);return Promise.resolve(c)}(0,0,o).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(o){const c=o.injector.get(jf);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!o.instance.ngDoBootstrap)throw new ke(403,!1);o.instance.ngDoBootstrap(c)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const o=this._injector.get(Ng,null);o&&(o.forEach(c=>c()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(si(Dl))},n.\u0275prov=Kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function N_(n,r){return Array.isArray(r)?r.reduce(N_,n):Object.assign(Object.assign({},n),r)}let jf=(()=>{class n{constructor(o,c,d){this._zone=o,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new we.y(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),g=new we.y(S=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Pr.assertNotInAngularZone(),zf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{Pr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{x.unsubscribe(),P.unsubscribe()}});this.isStable=(0,fe.T)(f,g.pipe((0,se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,c){const d=o instanceof ml;if(!this._injector.get(kl).done)throw!d&&ta(o),new ke(405,false);let g;g=d?o:this._injector.get(Ys).resolveComponentFactory(o),this.componentTypes.push(g.componentType);const S=function dM(n){return n.isBoundToModule}(g)?void 0:this._injector.get(to),P=g.create(Dl.NULL,[],c||g.selector,S),F=P.location.nativeElement,Y=P.injector.get(D_,null);return null==Y||Y.registerApplication(F),P.onDestroy(()=>{this.detachView(P.hostView),qf(this.components,P),null==Y||Y.unregisterApplication(F)}),this._loadComponent(P),P}tick(){if(this._runningTick)throw new ke(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const c=o;this._views.push(c),c.attachToAppRef(this)}detachView(o){const c=o;qf(this._views,c),c.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(Gh,[]).concat(this._bootstrapListeners).forEach(d=>d(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>qf(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new ke(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(si(Pr),si(as),si(Ds))},n.\u0275prov=Kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qf(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}let F_=!0;function t(){F_=!1}let u=(()=>{class n{}return n.__NG_ELEMENT_ID__=h,n})();function h(n){return function p(n,r,o){if(vs(n)&&!o){const c=N(n.index,r);return new Do(c,c)}return 47&n.type?new Do(r[16],r):null}(ui(),ot(),16==(16&n))}class lt{constructor(){}supports(r){return ch(r)}create(r){return new Be(r)}}const Te=(n,r)=>r;class Be{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||Te}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,c=this._removalsHead,d=0,f=null;for(;o||c;){const g=!c||o&&o.currentIndex<Dt(c,d,f)?o:c,S=Dt(g,d,f),x=g.currentIndex;if(g===c)d--,c=c._nextRemoved;else if(o=o._next,null==g.previousIndex)d++;else{f||(f=[]);const P=S-d,F=x-d;if(P!=F){for(let ce=0;ce<P;ce++){const Ee=ce<f.length?f[ce]:f[ce]=0,Xe=Ee+ce;F<=Xe&&Xe<P&&(f[ce]=Ee+1)}f[g.previousIndex]=F-P}}S!==x&&r(g,S,x)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!ch(r))throw new ke(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let d,f,g,o=this._itHead,c=!1;if(Array.isArray(r)){this.length=r.length;for(let S=0;S<this.length;S++)f=r[S],g=this._trackByFn(S,f),null!==o&&Object.is(o.trackById,g)?(c&&(o=this._verifyReinsertion(o,f,g,S)),Object.is(o.item,f)||this._addIdentityChange(o,f)):(o=this._mismatch(o,f,g,S),c=!0),o=o._next}else d=0,function Ew(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[Tl()]();let c;for(;!(c=o.next()).done;)r(c.value)}}(r,S=>{g=this._trackByFn(d,S),null!==o&&Object.is(o.trackById,g)?(c&&(o=this._verifyReinsertion(o,S,g,d)),Object.is(o.item,S)||this._addIdentityChange(o,S)):(o=this._mismatch(o,S,g,d),c=!0),o=o._next,d++}),this.length=d;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,c,d){let f;return null===r?f=this._itTail:(f=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,f,d)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,f,d)):r=this._addAfter(new Ve(o,c),f,d),r}_verifyReinsertion(r,o,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?r=this._reinsertAfter(f,r._prev,d):r.currentIndex!=d&&(r.currentIndex=d,this._addToMoves(r,d)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const d=r._prevRemoved,f=r._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(r,o,c),this._addToMoves(r,c),r}_moveAfter(r,o,c){return this._unlink(r),this._insertAfter(r,o,c),this._addToMoves(r,c),r}_addAfter(r,o,c){return this._insertAfter(r,o,c),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,c){const d=null===o?this._itHead:o._next;return r._next=d,r._prev=o,null===d?this._itTail=r:d._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new Ye),this._linkedRecords.put(r),r.currentIndex=c,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,c=r._next;return null===o?this._itHead=c:o._next=c,null===c?this._itTail=o:c._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ye),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class Ve{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ie{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===o||o<=c.currentIndex)&&Object.is(c.trackById,r))return c;return null}remove(r){const o=r._prevDup,c=r._nextDup;return null===o?this._head=c:o._nextDup=c,null===c?this._tail=o:c._prevDup=o,null===this._head}}class Ye{constructor(){this.map=new Map}put(r){const o=r.trackById;let c=this.map.get(o);c||(c=new Ie,this.map.set(o,c)),c.add(r)}get(r,o){const d=this.map.get(r);return d?d.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Dt(n,r,o){const c=n.previousIndex;if(null===c)return c;let d=0;return o&&c<o.length&&(d=o[c]),c+r+d}class mt{constructor(){}supports(r){return r instanceof Map||Cm(r)}create(){return new Pt}}class Pt{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||Cm(r)))throw new ke(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(c,d)=>{if(o&&o.key===d)this._maybeAddToChanges(o,c),this._appendAfter=o,o=o._next;else{const f=this._getOrCreateRecordForKey(d,c);o=this._insertBeforeOrAppend(o,f)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let c=o;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const c=r._prev;return o._next=r,o._prev=c,r._prev=o,c&&(c._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const d=this._records.get(r);this._maybeAddToChanges(d,o);const f=d._prev,g=d._next;return f&&(f._next=g),g&&(g._prev=f),d._next=null,d._prev=null,d}const c=new Ot(r);return this._records.set(r,c),c.currentValue=o,this._addToAdditions(c),c}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(c=>o(r[c],c))}}class Ot{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fn(){return new ht([new lt])}let ht=(()=>{class n{constructor(o){this.factories=o}static create(o,c){if(null!=c){const d=c.factories.slice();o=o.concat(d)}return new n(o)}static extend(o){return{provide:n,useFactory:c=>n.create(o,c||fn()),deps:[[n,new js,new Ru]]}}find(o){const c=this.factories.find(d=>d.supports(o));if(null!=c)return c;throw new ke(901,!1)}}return n.\u0275prov=Kt({token:n,providedIn:"root",factory:fn}),n})();function en(){return new Jt([new mt])}let Jt=(()=>{class n{constructor(o){this.factories=o}static create(o,c){if(c){const d=c.factories.slice();o=o.concat(d)}return new n(o)}static extend(o){return{provide:n,useFactory:c=>n.create(o,c||en()),deps:[[n,new js,new Ru]]}}find(o){const c=this.factories.find(d=>d.supports(o));if(c)return c;throw new ke(901,!1)}}return n.\u0275prov=Kt({token:n,providedIn:"root",factory:en}),n})();const Ft=Fg(null,"core",[]);let tn=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(si(jf))},n.\u0275mod=xr({type:n}),n.\u0275inj=di({}),n})();function Wt(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},2313:(pt,Ne,U)=>{"use strict";U.d(Ne,{Dx:()=>be,b2:()=>ii,q6:()=>nn,se:()=>_e});var R=U(9808),D=U(5e3);class we extends R.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fe extends we{static makeCurrent(){(0,R.HT)(new fe)}onAndCancel(Se,de,We){return Se.addEventListener(de,We,!1),()=>{Se.removeEventListener(de,We,!1)}}dispatchEvent(Se,de){Se.dispatchEvent(de)}remove(Se){Se.parentNode&&Se.parentNode.removeChild(Se)}createElement(Se,de){return(de=de||this.getDefaultDocument()).createElement(Se)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Se){return Se.nodeType===Node.ELEMENT_NODE}isShadowRoot(Se){return Se instanceof DocumentFragment}getGlobalEventTarget(Se,de){return"window"===de?window:"document"===de?Se:"body"===de?Se.body:null}getBaseHref(Se){const de=function q(){return se=se||document.querySelector("base"),se?se.getAttribute("href"):null}();return null==de?null:function ee(Oe){X=X||document.createElement("a"),X.setAttribute("href",Oe);const Se=X.pathname;return"/"===Se.charAt(0)?Se:`/${Se}`}(de)}resetBaseElement(){se=null}getUserAgent(){return window.navigator.userAgent}getCookie(Se){return(0,R.Mx)(document.cookie,Se)}}let X,se=null;const $=new D.OlP("TRANSITION_ID"),Q=[{provide:D.ip1,useFactory:function H(Oe,Se,de){return()=>{de.get(D.CZH).donePromise.then(()=>{const We=(0,R.q)(),rt=Se.querySelectorAll(`style[ng-transition="${Oe}"]`);for(let nt=0;nt<rt.length;nt++)We.remove(rt[nt])})}},deps:[$,R.K0,D.zs3],multi:!0}];let je=(()=>{class Oe{build(){return new XMLHttpRequest}}return Oe.\u0275fac=function(de){return new(de||Oe)},Oe.\u0275prov=D.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();const qe=new D.OlP("EventManagerPlugins");let ke=(()=>{class Oe{constructor(de,We){this._zone=We,this._eventNameToPlugin=new Map,de.forEach(rt=>rt.manager=this),this._plugins=de.slice().reverse()}addEventListener(de,We,rt){return this._findPluginFor(We).addEventListener(de,We,rt)}addGlobalEventListener(de,We,rt){return this._findPluginFor(We).addGlobalEventListener(de,We,rt)}getZone(){return this._zone}_findPluginFor(de){const We=this._eventNameToPlugin.get(de);if(We)return We;const rt=this._plugins;for(let nt=0;nt<rt.length;nt++){const Nt=rt[nt];if(Nt.supports(de))return this._eventNameToPlugin.set(de,Nt),Nt}throw new Error(`No event manager plugin found for event ${de}`)}}return Oe.\u0275fac=function(de){return new(de||Oe)(D.LFG(qe),D.LFG(D.R0b))},Oe.\u0275prov=D.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();class Mt{constructor(Se){this._doc=Se}addGlobalEventListener(Se,de,We){const rt=(0,R.q)().getGlobalEventTarget(this._doc,Se);if(!rt)throw new Error(`Unsupported event target ${rt} for event ${de}`);return this.addEventListener(rt,de,We)}}let De=(()=>{class Oe{constructor(){this._stylesSet=new Set}addStyles(de){const We=new Set;de.forEach(rt=>{this._stylesSet.has(rt)||(this._stylesSet.add(rt),We.add(rt))}),this.onStylesAdded(We)}onStylesAdded(de){}getAllStyles(){return Array.from(this._stylesSet)}}return Oe.\u0275fac=function(de){return new(de||Oe)},Oe.\u0275prov=D.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})(),yt=(()=>{class Oe extends De{constructor(de){super(),this._doc=de,this._hostNodes=new Map,this._hostNodes.set(de.head,[])}_addStylesToHost(de,We,rt){de.forEach(nt=>{const Nt=this._doc.createElement("style");Nt.textContent=nt,rt.push(We.appendChild(Nt))})}addHost(de){const We=[];this._addStylesToHost(this._stylesSet,de,We),this._hostNodes.set(de,We)}removeHost(de){const We=this._hostNodes.get(de);We&&We.forEach(Je),this._hostNodes.delete(de)}onStylesAdded(de){this._hostNodes.forEach((We,rt)=>{this._addStylesToHost(de,rt,We)})}ngOnDestroy(){this._hostNodes.forEach(de=>de.forEach(Je))}}return Oe.\u0275fac=function(de){return new(de||Oe)(D.LFG(R.K0))},Oe.\u0275prov=D.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();function Je(Oe){(0,R.q)().remove(Oe)}const ze={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},le=/%COMP%/g;function Z(Oe,Se,de){for(let We=0;We<Se.length;We++){let rt=Se[We];Array.isArray(rt)?Z(Oe,rt,de):(rt=rt.replace(le,Oe),de.push(rt))}return de}function V(Oe){return Se=>{if("__ngUnwrap__"===Se)return Oe;!1===Oe(Se)&&(Se.preventDefault(),Se.returnValue=!1)}}let _e=(()=>{class Oe{constructor(de,We,rt){this.eventManager=de,this.sharedStylesHost=We,this.appId=rt,this.rendererByCompId=new Map,this.defaultRenderer=new He(de)}createRenderer(de,We){if(!de||!We)return this.defaultRenderer;switch(We.encapsulation){case D.ifc.Emulated:{let rt=this.rendererByCompId.get(We.id);return rt||(rt=new Rt(this.eventManager,this.sharedStylesHost,We,this.appId),this.rendererByCompId.set(We.id,rt)),rt.applyToHost(de),rt}case 1:case D.ifc.ShadowDom:return new Ke(this.eventManager,this.sharedStylesHost,de,We);default:if(!this.rendererByCompId.has(We.id)){const rt=Z(We.id,We.styles,[]);this.sharedStylesHost.addStyles(rt),this.rendererByCompId.set(We.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Oe.\u0275fac=function(de){return new(de||Oe)(D.LFG(ke),D.LFG(yt),D.LFG(D.AFp))},Oe.\u0275prov=D.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();class He{constructor(Se){this.eventManager=Se,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Se,de){return de?document.createElementNS(ze[de]||de,Se):document.createElement(Se)}createComment(Se){return document.createComment(Se)}createText(Se){return document.createTextNode(Se)}appendChild(Se,de){(Ut(Se)?Se.content:Se).appendChild(de)}insertBefore(Se,de,We){Se&&(Ut(Se)?Se.content:Se).insertBefore(de,We)}removeChild(Se,de){Se&&Se.removeChild(de)}selectRootElement(Se,de){let We="string"==typeof Se?document.querySelector(Se):Se;if(!We)throw new Error(`The selector "${Se}" did not match any elements`);return de||(We.textContent=""),We}parentNode(Se){return Se.parentNode}nextSibling(Se){return Se.nextSibling}setAttribute(Se,de,We,rt){if(rt){de=rt+":"+de;const nt=ze[rt];nt?Se.setAttributeNS(nt,de,We):Se.setAttribute(de,We)}else Se.setAttribute(de,We)}removeAttribute(Se,de,We){if(We){const rt=ze[We];rt?Se.removeAttributeNS(rt,de):Se.removeAttribute(`${We}:${de}`)}else Se.removeAttribute(de)}addClass(Se,de){Se.classList.add(de)}removeClass(Se,de){Se.classList.remove(de)}setStyle(Se,de,We,rt){rt&(D.JOm.DashCase|D.JOm.Important)?Se.style.setProperty(de,We,rt&D.JOm.Important?"important":""):Se.style[de]=We}removeStyle(Se,de,We){We&D.JOm.DashCase?Se.style.removeProperty(de):Se.style[de]=""}setProperty(Se,de,We){Se[de]=We}setValue(Se,de){Se.nodeValue=de}listen(Se,de,We){return"string"==typeof Se?this.eventManager.addGlobalEventListener(Se,de,V(We)):this.eventManager.addEventListener(Se,de,V(We))}}function Ut(Oe){return"TEMPLATE"===Oe.tagName&&void 0!==Oe.content}class Rt extends He{constructor(Se,de,We,rt){super(Se),this.component=We;const nt=Z(rt+"-"+We.id,We.styles,[]);de.addStyles(nt),this.contentAttr=function et(Oe){return"_ngcontent-%COMP%".replace(le,Oe)}(rt+"-"+We.id),this.hostAttr=function Pe(Oe){return"_nghost-%COMP%".replace(le,Oe)}(rt+"-"+We.id)}applyToHost(Se){super.setAttribute(Se,this.hostAttr,"")}createElement(Se,de){const We=super.createElement(Se,de);return super.setAttribute(We,this.contentAttr,""),We}}class Ke extends He{constructor(Se,de,We,rt){super(Se),this.sharedStylesHost=de,this.hostEl=We,this.shadowRoot=We.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const nt=Z(rt.id,rt.styles,[]);for(let Nt=0;Nt<nt.length;Nt++){const pn=document.createElement("style");pn.textContent=nt[Nt],this.shadowRoot.appendChild(pn)}}nodeOrShadowRoot(Se){return Se===this.hostEl?this.shadowRoot:Se}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Se,de){return super.appendChild(this.nodeOrShadowRoot(Se),de)}insertBefore(Se,de,We){return super.insertBefore(this.nodeOrShadowRoot(Se),de,We)}removeChild(Se,de){return super.removeChild(this.nodeOrShadowRoot(Se),de)}parentNode(Se){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Se)))}}let Yt=(()=>{class Oe extends Mt{constructor(de){super(de)}supports(de){return!0}addEventListener(de,We,rt){return de.addEventListener(We,rt,!1),()=>this.removeEventListener(de,We,rt)}removeEventListener(de,We,rt){return de.removeEventListener(We,rt)}}return Oe.\u0275fac=function(de){return new(de||Oe)(D.LFG(R.K0))},Oe.\u0275prov=D.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();const jt=["alt","control","meta","shift"],Kt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ai={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},di={alt:Oe=>Oe.altKey,control:Oe=>Oe.ctrlKey,meta:Oe=>Oe.metaKey,shift:Oe=>Oe.shiftKey};let Lr=(()=>{class Oe extends Mt{constructor(de){super(de)}supports(de){return null!=Oe.parseEventName(de)}addEventListener(de,We,rt){const nt=Oe.parseEventName(We),Nt=Oe.eventCallback(nt.fullKey,rt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,R.q)().onAndCancel(de,nt.domEventName,Nt))}static parseEventName(de){const We=de.toLowerCase().split("."),rt=We.shift();if(0===We.length||"keydown"!==rt&&"keyup"!==rt)return null;const nt=Oe._normalizeKey(We.pop());let Nt="";if(jt.forEach(Gn=>{const Ur=We.indexOf(Gn);Ur>-1&&(We.splice(Ur,1),Nt+=Gn+".")}),Nt+=nt,0!=We.length||0===nt.length)return null;const pn={};return pn.domEventName=rt,pn.fullKey=Nt,pn}static getEventFullKey(de){let We="",rt=function Fs(Oe){let Se=Oe.key;if(null==Se){if(Se=Oe.keyIdentifier,null==Se)return"Unidentified";Se.startsWith("U+")&&(Se=String.fromCharCode(parseInt(Se.substring(2),16)),3===Oe.location&&Ai.hasOwnProperty(Se)&&(Se=Ai[Se]))}return Kt[Se]||Se}(de);return rt=rt.toLowerCase()," "===rt?rt="space":"."===rt&&(rt="dot"),jt.forEach(nt=>{nt!=rt&&(0,di[nt])(de)&&(We+=nt+".")}),We+=rt,We}static eventCallback(de,We,rt){return nt=>{Oe.getEventFullKey(nt)===de&&rt.runGuarded(()=>We(nt))}}static _normalizeKey(de){return"esc"===de?"escape":de}}return Oe.\u0275fac=function(de){return new(de||Oe)(D.LFG(R.K0))},Oe.\u0275prov=D.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();const nn=(0,D.eFA)(D._c5,"browser",[{provide:D.Lbi,useValue:R.bD},{provide:D.g9A,useValue:function Gi(){fe.makeCurrent()},multi:!0},{provide:R.K0,useFactory:function ks(){return(0,D.RDi)(document),document},deps:[]}]),fi=new D.OlP(""),fs=[{provide:D.rWj,useClass:class ie{addToWindow(Se){D.dqk.getAngularTestability=(We,rt=!0)=>{const nt=Se.findTestabilityInTree(We,rt);if(null==nt)throw new Error("Could not find testability for element.");return nt},D.dqk.getAllAngularTestabilities=()=>Se.getAllTestabilities(),D.dqk.getAllAngularRootElements=()=>Se.getAllRootElements(),D.dqk.frameworkStabilizers||(D.dqk.frameworkStabilizers=[]),D.dqk.frameworkStabilizers.push(We=>{const rt=D.dqk.getAllAngularTestabilities();let nt=rt.length,Nt=!1;const pn=function(Gn){Nt=Nt||Gn,nt--,0==nt&&We(Nt)};rt.forEach(function(Gn){Gn.whenStable(pn)})})}findTestabilityInTree(Se,de,We){if(null==de)return null;const rt=Se.getTestability(de);return null!=rt?rt:We?(0,R.q)().isShadowRoot(de)?this.findTestabilityInTree(Se,de.host,!0):this.findTestabilityInTree(Se,de.parentElement,!0):null}},deps:[]},{provide:D.lri,useClass:D.dDg,deps:[D.R0b,D.eoX,D.rWj]},{provide:D.dDg,useClass:D.dDg,deps:[D.R0b,D.eoX,D.rWj]}],$i=[{provide:D.zSh,useValue:"root"},{provide:D.qLn,useFactory:function Nr(){return new D.qLn},deps:[]},{provide:qe,useClass:Yt,multi:!0,deps:[R.K0,D.R0b,D.Lbi]},{provide:qe,useClass:Lr,multi:!0,deps:[R.K0]},{provide:_e,useClass:_e,deps:[ke,yt,D.AFp]},{provide:D.FYo,useExisting:_e},{provide:De,useExisting:yt},{provide:yt,useClass:yt,deps:[R.K0]},{provide:ke,useClass:ke,deps:[qe,D.R0b]},{provide:R.JF,useClass:je,deps:[]},[]];let ii=(()=>{class Oe{constructor(de){}static withServerTransition(de){return{ngModule:Oe,providers:[{provide:D.AFp,useValue:de.appId},{provide:$,useExisting:D.AFp},Q]}}}return Oe.\u0275fac=function(de){return new(de||Oe)(D.LFG(fi,12))},Oe.\u0275mod=D.oAB({type:Oe}),Oe.\u0275inj=D.cJS({providers:[...$i,...fs],imports:[R.ez,D.hGG]}),Oe})(),be=(()=>{class Oe{constructor(de){this._doc=de}getTitle(){return this._doc.title}setTitle(de){this._doc.title=de||""}}return Oe.\u0275fac=function(de){return new(de||Oe)(D.LFG(R.K0))},Oe.\u0275prov=D.Yz7({token:Oe,factory:function(de){let We=null;return We=de?new de:function ft(){return new be((0,D.LFG)(R.K0))}(),We},providedIn:"root"}),Oe})();"undefined"!=typeof window&&window},3338:(pt,Ne,U)=>{"use strict";U.d(Ne,{gz:()=>uo,m2:()=>zr,F0:()=>vi,sj:()=>Zi,yS:()=>Su,Bz:()=>op,lC:()=>fo});var R=U(5e3),D=U(7579);class we extends D.x{constructor(w){super(),this._value=w}get value(){return this.getValue()}_subscribe(w){const y=super._subscribe(w);return!y.closed&&w.next(this._value),y}getValue(){const{hasError:w,thrownError:y,_value:C}=this;if(w)throw y;return this._throwIfClosed(),C}next(w){super.next(this._value=w)}}var fe=U(9751),se=U(8421);function q(b){return new fe.y(w=>{(0,se.Xf)(b()).subscribe(w)})}var X=U(576);function ee(b,w){const y=(0,X.m)(b)?b:()=>b,C=L=>L.error(y());return new fe.y(w?L=>w.schedule(C,0,L):C)}const H=(0,U(3888).d)(b=>function(){b(this),this.name="EmptyError",this.message="no elements in sequence"});var Q=U(727),ie=U(4482),je=U(5403);function qe(){return(0,ie.e)((b,w)=>{let y=null;b._refCount++;const C=(0,je.x)(w,void 0,void 0,void 0,()=>{if(!b||b._refCount<=0||0<--b._refCount)return void(y=null);const L=b._connection,W=y;y=null,L&&(!W||L===W)&&L.unsubscribe(),w.unsubscribe()});b.subscribe(C),C.closed||(y=b.connect())})}class ke extends fe.y{constructor(w,y){super(),this.source=w,this.subjectFactory=y,this._subject=null,this._refCount=0,this._connection=null,(0,ie.A)(w)&&(this.lift=w.lift)}_subscribe(w){return this.getSubject().subscribe(w)}getSubject(){const w=this._subject;return(!w||w.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:w}=this;this._subject=this._connection=null,null==w||w.unsubscribe()}connect(){let w=this._connection;if(!w){w=this._connection=new Q.w0;const y=this.getSubject();w.add(this.source.subscribe((0,je.x)(y,void 0,()=>{this._teardown(),y.complete()},C=>{this._teardown(),y.error(C)},()=>this._teardown()))),w.closed&&(this._connection=null,w=Q.w0.EMPTY)}return w}refCount(){return qe()(this)}}var Mt=U(2076),De=U(9646),yt=U(5121),Je=U(7272),ze=U(9635),le=U(515),pe=U(9808),Ge=U(3269),st=U(9300),et=U(5698);function Pe(b){return(0,ie.e)((w,y)=>{let C=!1;w.subscribe((0,je.x)(y,L=>{C=!0,y.next(L)},()=>{C||y.next(b),y.complete()}))})}function Z(b=V){return(0,ie.e)((w,y)=>{let C=!1;w.subscribe((0,je.x)(y,L=>{C=!0,y.next(L)},()=>C?y.complete():y.error(b())))})}function V(){return new H}var oe=U(4671);function _e(b,w){const y=arguments.length>=2;return C=>C.pipe(b?(0,st.h)((L,W)=>b(L,W,C)):oe.y,(0,et.q)(1),y?Pe(w):Z(()=>new H))}function He(b,w,y,C,L){return(W,re)=>{let ge=y,Ae=w,Ct=0;W.subscribe((0,je.x)(re,Xt=>{const Ht=Ct++;Ae=ge?b(Ae,Xt,Ht):(ge=!0,Xt),C&&re.next(Ae)},L&&(()=>{ge&&re.next(Ae),re.complete()})))}}function Fe(b,w){return(0,ie.e)(He(b,w,arguments.length>=2,!0))}function xt(b){return b<=0?()=>le.E:(0,ie.e)((w,y)=>{let C=[];w.subscribe((0,je.x)(y,L=>{C.push(L),b<C.length&&C.shift()},()=>{for(const L of C)y.next(L);y.complete()},void 0,()=>{C=null}))})}function Ut(b,w){const y=arguments.length>=2;return C=>C.pipe(b?(0,st.h)((L,W)=>b(L,W,C)):oe.y,xt(1),y?Pe(w):Z(()=>new H))}var Ke=U(4004),Yt=U(3900),jt=U(6099),ln=U(4351),Kt=U(8505),Ai=U(262),di=U(9718),Lr=U(8746),Fs=U(8189),so=U(2313);const _n="primary";class oo{constructor(w){this.params=w||{}}has(w){return Object.prototype.hasOwnProperty.call(this.params,w)}get(w){if(this.has(w)){const y=this.params[w];return Array.isArray(y)?y[0]:y}return null}getAll(w){if(this.has(w)){const y=this.params[w];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function Gi(b){return new oo(b)}function Nr(b,w,y){const C=y.path.split("/");if(C.length>b.length||"full"===y.pathMatch&&(w.hasChildren()||C.length<b.length))return null;const L={};for(let W=0;W<C.length;W++){const re=C[W],ge=b[W];if(re.startsWith(":"))L[re.substring(1)]=ge;else if(re!==ge.path)return null}return{consumed:b.slice(0,C.length),posParams:L}}function Wi(b,w){const y=b?Object.keys(b):void 0,C=w?Object.keys(w):void 0;if(!y||!C||y.length!=C.length)return!1;let L;for(let W=0;W<y.length;W++)if(L=y[W],!nn(b[L],w[L]))return!1;return!0}function nn(b,w){if(Array.isArray(b)&&Array.isArray(w)){if(b.length!==w.length)return!1;const y=[...b].sort(),C=[...w].sort();return y.every((L,W)=>C[W]===L)}return b===w}function fi(b){return Array.prototype.concat.apply([],b)}function fs(b){return b.length>0?b[b.length-1]:null}function ii(b,w){for(const y in b)b.hasOwnProperty(y)&&w(b[y],y)}function Or(b){return(0,R.CqO)(b)?b:(0,R.QGY)(b)?(0,Mt.D)(Promise.resolve(b)):(0,De.of)(b)}const ft={exact:function Et(b,w,y){if(!xn(b.segments,w.segments)||!rn(b.segments,w.segments,y)||b.numberOfChildren!==w.numberOfChildren)return!1;for(const C in w.children)if(!b.children[C]||!Et(b.children[C],w.children[C],y))return!1;return!0},subset:dn},be={exact:function Ue(b,w){return Wi(b,w)},subset:function sn(b,w){return Object.keys(w).length<=Object.keys(b).length&&Object.keys(w).every(y=>nn(b[y],w[y]))},ignored:()=>!0};function me(b,w,y){return ft[y.paths](b.root,w.root,y.matrixParams)&&be[y.queryParams](b.queryParams,w.queryParams)&&!("exact"===y.fragment&&b.fragment!==w.fragment)}function dn(b,w,y){return kt(b,w,w.segments,y)}function kt(b,w,y,C){if(b.segments.length>y.length){const L=b.segments.slice(0,y.length);return!(!xn(L,y)||w.hasChildren()||!rn(L,y,C))}if(b.segments.length===y.length){if(!xn(b.segments,y)||!rn(b.segments,y,C))return!1;for(const L in w.children)if(!b.children[L]||!dn(b.children[L],w.children[L],C))return!1;return!0}{const L=y.slice(0,b.segments.length),W=y.slice(b.segments.length);return!!(xn(b.segments,L)&&rn(b.segments,L,C)&&b.children[_n])&&kt(b.children[_n],w,W,C)}}function rn(b,w,y){return w.every((C,L)=>be[y](b[L].parameters,C.parameters))}class Vn{constructor(w,y,C){this.root=w,this.queryParams=y,this.fragment=C}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gi(this.queryParams)),this._queryParamMap}toString(){return wi.serialize(this)}}class Vt{constructor(w,y){this.segments=w,this.children=y,this.parent=null,ii(y,(C,L)=>C.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kr(this)}}class Fi{constructor(w,y){this.path=w,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=Gi(this.parameters)),this._parameterMap}toString(){return bi(this)}}function xn(b,w){return b.length===w.length&&b.every((y,C)=>y.path===w[C].path)}class gi{}class Fr{parse(w){const y=new We(w);return new Vn(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(w){const y=`/${Br(w.root,!0)}`,C=function Ri(b){const w=Object.keys(b).map(y=>{const C=b[y];return Array.isArray(C)?C.map(L=>`${ts(y)}=${ts(L)}`).join("&"):`${ts(y)}=${ts(C)}`}).filter(y=>!!y);return w.length?`?${w.join("&")}`:""}(w.queryParams);return`${y}${C}${"string"==typeof w.fragment?`#${function Ul(b){return encodeURI(b)}(w.fragment)}`:""}`}}const wi=new Fr;function kr(b){return b.segments.map(w=>bi(w)).join("/")}function Br(b,w){if(!b.hasChildren())return kr(b);if(w){const y=b.children[_n]?Br(b.children[_n],!1):"",C=[];return ii(b.children,(L,W)=>{W!==_n&&C.push(`${W}:${Br(L,!1)}`)}),C.length>0?`${y}(${C.join("//")})`:y}{const y=function Yn(b,w){let y=[];return ii(b.children,(C,L)=>{L===_n&&(y=y.concat(w(C,L)))}),ii(b.children,(C,L)=>{L!==_n&&(y=y.concat(w(C,L)))}),y}(b,(C,L)=>L===_n?[Br(b.children[_n],!1)]:[`${L}:${Br(C,!1)}`]);return 1===Object.keys(b.children).length&&null!=b.children[_n]?`${kr(b)}/${y[0]}`:`${kr(b)}/(${y.join("//")})`}}function xr(b){return encodeURIComponent(b).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ts(b){return xr(b).replace(/%3B/gi,";")}function Bs(b){return xr(b).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ps(b){return decodeURIComponent(b)}function Bn(b){return ps(b.replace(/\+/g,"%20"))}function bi(b){return`${Bs(b.path)}${function ki(b){return Object.keys(b).map(w=>`;${Bs(w)}=${Bs(b[w])}`).join("")}(b.parameters)}`}const ms=/^[^\/()?;=#]+/;function lr(b){const w=b.match(ms);return w?w[0]:""}const cr=/^[^=?&#]+/,Se=/^[^&#]+/;class We{constructor(w){this.url=w,this.remaining=w}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Vt([],{}):new Vt([],this.parseChildren())}parseQueryParams(){const w={};if(this.consumeOptional("?"))do{this.parseQueryParam(w)}while(this.consumeOptional("&"));return w}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const w=[];for(this.peekStartsWith("(")||w.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),w.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let C={};return this.peekStartsWith("(")&&(C=this.parseParens(!1)),(w.length>0||Object.keys(y).length>0)&&(C[_n]=new Vt(w,y)),C}parseSegment(){const w=lr(this.remaining);if(""===w&&this.peekStartsWith(";"))throw new R.vHH(4009,!1);return this.capture(w),new Fi(ps(w),this.parseMatrixParams())}parseMatrixParams(){const w={};for(;this.consumeOptional(";");)this.parseParam(w);return w}parseParam(w){const y=lr(this.remaining);if(!y)return;this.capture(y);let C="";if(this.consumeOptional("=")){const L=lr(this.remaining);L&&(C=L,this.capture(C))}w[ps(y)]=ps(C)}parseQueryParam(w){const y=function Oe(b){const w=b.match(cr);return w?w[0]:""}(this.remaining);if(!y)return;this.capture(y);let C="";if(this.consumeOptional("=")){const re=function de(b){const w=b.match(Se);return w?w[0]:""}(this.remaining);re&&(C=re,this.capture(C))}const L=Bn(y),W=Bn(C);if(w.hasOwnProperty(L)){let re=w[L];Array.isArray(re)||(re=[re],w[L]=re),re.push(W)}else w[L]=W}parseParens(w){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const C=lr(this.remaining),L=this.remaining[C.length];if("/"!==L&&")"!==L&&";"!==L)throw new R.vHH(4010,!1);let W;C.indexOf(":")>-1?(W=C.slice(0,C.indexOf(":")),this.capture(W),this.capture(":")):w&&(W=_n);const re=this.parseChildren();y[W]=1===Object.keys(re).length?re[_n]:new Vt([],re),this.consumeOptional("//")}return y}peekStartsWith(w){return this.remaining.startsWith(w)}consumeOptional(w){return!!this.peekStartsWith(w)&&(this.remaining=this.remaining.substring(w.length),!0)}capture(w){if(!this.consumeOptional(w))throw new R.vHH(4011,!1)}}function rt(b){return b.segments.length>0?new Vt([],{[_n]:b}):b}function nt(b){const w={};for(const C of Object.keys(b.children)){const W=nt(b.children[C]);(W.segments.length>0||W.hasChildren())&&(w[C]=W)}return function Nt(b){if(1===b.numberOfChildren&&b.children[_n]){const w=b.children[_n];return new Vt(b.segments.concat(w.segments),w.children)}return b}(new Vt(b.segments,w))}function pn(b){return b instanceof Vn}function ei(b,w,y,C,L){var W;if(0===y.length)return on(w.root,w.root,w.root,C,L);const ge=function ra(b){if("string"==typeof b[0]&&1===b.length&&"/"===b[0])return new ns(!0,0,b);let w=0,y=!1;const C=b.reduce((L,W,re)=>{if("object"==typeof W&&null!=W){if(W.outlets){const ge={};return ii(W.outlets,(Ae,Ct)=>{ge[Ct]="string"==typeof Ae?Ae.split("/"):Ae}),[...L,{outlets:ge}]}if(W.segmentPath)return[...L,W.segmentPath]}return"string"!=typeof W?[...L,W]:0===re?(W.split("/").forEach((ge,Ae)=>{0==Ae&&"."===ge||(0==Ae&&""===ge?y=!0:".."===ge?w++:""!=ge&&L.push(ge))}),L):[...L,W]},[]);return new ns(y,w,C)}(y);return ge.toRoot()?on(w.root,w.root,new Vt([],{}),C,L):function Ae(Xt){var Ht;const gn=function Lo(b,w,y,C){if(b.isAbsolute)return new ji(w.root,!0,0);if(-1===C)return new ji(y,y===w.root,0);return function Vr(b,w,y){let C=b,L=w,W=y;for(;W>L;){if(W-=L,C=C.parent,!C)throw new R.vHH(4005,!1);L=C.segments.length}return new ji(C,!1,L-W)}(y,C+(Mi(b.commands[0])?0:1),b.numberOfDoubleDots)}(ge,w,null===(Ht=b.snapshot)||void 0===Ht?void 0:Ht._urlSegment,Xt),zn=gn.processChildren?lo(gn.segmentGroup,gn.index,ge.commands):ys(gn.segmentGroup,gn.index,ge.commands);return on(w.root,gn.segmentGroup,zn,C,L)}(null===(W=b.snapshot)||void 0===W?void 0:W._lastPathIndex)}function Mi(b){return"object"==typeof b&&null!=b&&!b.outlets&&!b.segmentPath}function Si(b){return"object"==typeof b&&null!=b&&b.outlets}function on(b,w,y,C,L){let re,W={};C&&ii(C,(Ae,Ct)=>{W[Ct]=Array.isArray(Ae)?Ae.map(Xt=>`${Xt}`):`${Ae}`}),re=b===w?y:ao(b,w,y);const ge=rt(nt(re));return new Vn(ge,W,L)}function ao(b,w,y){const C={};return ii(b.children,(L,W)=>{C[W]=L===w?y:ao(L,w,y)}),new Vt(b.segments,C)}class ns{constructor(w,y,C){if(this.isAbsolute=w,this.numberOfDoubleDots=y,this.commands=C,w&&C.length>0&&Mi(C[0]))throw new R.vHH(4003,!1);const L=C.find(Si);if(L&&L!==fs(C))throw new R.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ji{constructor(w,y,C){this.segmentGroup=w,this.processChildren=y,this.index=C}}function ys(b,w,y){if(b||(b=new Vt([],{})),0===b.segments.length&&b.hasChildren())return lo(b,w,y);const C=function bn(b,w,y){let C=0,L=w;const W={match:!1,pathIndex:0,commandIndex:0};for(;L<b.segments.length;){if(C>=y.length)return W;const re=b.segments[L],ge=y[C];if(Si(ge))break;const Ae=`${ge}`,Ct=C<y.length-1?y[C+1]:null;if(L>0&&void 0===Ae)break;if(Ae&&Ct&&"object"==typeof Ct&&void 0===Ct.outlets){if(!nr(Ae,Ct,re))return W;C+=2}else{if(!nr(Ae,{},re))return W;C++}L++}return{match:!0,pathIndex:L,commandIndex:C}}(b,w,y),L=y.slice(C.commandIndex);if(C.match&&C.pathIndex<b.segments.length){const W=new Vt(b.segments.slice(0,C.pathIndex),{});return W.children[_n]=new Vt(b.segments.slice(C.pathIndex),b.children),lo(W,0,L)}return C.match&&0===L.length?new Vt(b.segments,{}):C.match&&!b.hasChildren()?sa(b,w,y):C.match?lo(b,0,L):sa(b,w,y)}function lo(b,w,y){if(0===y.length)return new Vt(b.segments,{});{const C=function ur(b){return Si(b[0])?b[0].outlets:{[_n]:b}}(y),L={};return ii(C,(W,re)=>{"string"==typeof W&&(W=[W]),null!==W&&(L[re]=ys(b.children[re],w,W))}),ii(b.children,(W,re)=>{void 0===C[re]&&(L[re]=W)}),new Vt(b.segments,L)}}function sa(b,w,y){const C=b.segments.slice(0,w);let L=0;for(;L<y.length;){const W=y[L];if(Si(W)){const Ae=No(W.outlets);return new Vt(C,Ae)}if(0===L&&Mi(y[0])){C.push(new Fi(b.segments[w].path,Ei(y[0]))),L++;continue}const re=Si(W)?W.outlets[_n]:`${W}`,ge=L<y.length-1?y[L+1]:null;re&&ge&&Mi(ge)?(C.push(new Fi(re,Ei(ge))),L+=2):(C.push(new Fi(re,{})),L++)}return new Vt(C,{})}function No(b){const w={};return ii(b,(y,C)=>{"string"==typeof y&&(y=[y]),null!==y&&(w[C]=sa(new Vt([],{}),0,y))}),w}function Ei(b){const w={};return ii(b,(y,C)=>w[C]=`${y}`),w}function nr(b,w,y){return b==y.path&&Wi(w,y.parameters)}class Zi{constructor(w,y){this.id=w,this.url=y}}class vs extends Zi{constructor(w,y,C="imperative",L=null){super(w,y),this.type=0,this.navigationTrigger=C,this.restoredState=L}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zr extends Zi{constructor(w,y,C){super(w,y),this.urlAfterRedirects=C,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ir extends Zi{constructor(w,y,C,L){super(w,y),this.reason=C,this.code=L,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class oa extends Zi{constructor(w,y,C,L){super(w,y),this.error=C,this.target=L,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class eu extends Zi{constructor(w,y,C,L){super(w,y),this.urlAfterRedirects=C,this.state=L,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tu extends Zi{constructor(w,y,C,L){super(w,y),this.urlAfterRedirects=C,this.state=L,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nu extends Zi{constructor(w,y,C,L,W){super(w,y),this.urlAfterRedirects=C,this.state=L,this.shouldActivate=W,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ha extends Zi{constructor(w,y,C,L){super(w,y),this.urlAfterRedirects=C,this.state=L,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vl extends Zi{constructor(w,y,C,L){super(w,y),this.urlAfterRedirects=C,this.state=L,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wr{constructor(w){this.route=w,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class iu{constructor(w){this.route=w,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class jh{constructor(w){this.snapshot=w,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zl{constructor(w){this.snapshot=w,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ru{constructor(w){this.snapshot=w,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class su{constructor(w){this.snapshot=w,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ou{constructor(w,y,C){this.routerEvent=w,this.position=y,this.anchor=C,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class au{constructor(w){this._root=w}get root(){return this._root.value}parent(w){const y=this.pathFromRoot(w);return y.length>1?y[y.length-2]:null}children(w){const y=Hl(w,this._root);return y?y.children.map(C=>C.value):[]}firstChild(w){const y=Hl(w,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(w){const y=Gl(w,this._root);return y.length<2?[]:y[y.length-2].children.map(L=>L.value).filter(L=>L!==w)}pathFromRoot(w){return Gl(w,this._root).map(y=>y.value)}}function Hl(b,w){if(b===w.value)return w;for(const y of w.children){const C=Hl(b,y);if(C)return C}return null}function Gl(b,w){if(b===w.value)return[w];for(const y of w.children){const C=Gl(b,y);if(C.length)return C.unshift(w),C}return[]}class qi{constructor(w,y){this.value=w,this.children=y}toString(){return`TreeNode(${this.value})`}}function is(b){const w={};return b&&b.children.forEach(y=>w[y.value.outlet]=y),w}class co extends au{constructor(w,y){super(w),this.snapshot=y,Ga(this,w)}toString(){return this.snapshot.toString()}}function aa(b,w){const y=function Yh(b,w){const re=new ho([],{},{},"",{},_n,w,null,b.root,-1,{});return new Oo("",new qi(re,[]))}(b,w),C=new we([new Fi("",{})]),L=new we({}),W=new we({}),re=new we({}),ge=new we(""),Ae=new uo(C,L,re,ge,W,_n,w,y.root);return Ae.snapshot=y.root,new co(new qi(Ae,[]),y)}class uo{constructor(w,y,C,L,W,re,ge,Ae){this.url=w,this.params=y,this.queryParams=C,this.fragment=L,this.data=W,this.outlet=re,this.component=ge,this._futureSnapshot=Ae}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ke.U)(w=>Gi(w)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ke.U)(w=>Gi(w)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _s(b,w="emptyOnly"){const y=b.pathFromRoot;let C=0;if("always"!==w)for(C=y.length-1;C>=1;){const L=y[C],W=y[C-1];if(L.routeConfig&&""===L.routeConfig.path)C--;else{if(W.component)break;C--}}return function Wl(b){return b.reduce((w,y)=>{var C;return{params:Object.assign(Object.assign({},w.params),y.params),data:Object.assign(Object.assign({},w.data),y.data),resolve:Object.assign(Object.assign(Object.assign(Object.assign({},y.data),w.resolve),null===(C=y.routeConfig)||void 0===C?void 0:C.data),y._resolvedData)}},{params:{},data:{},resolve:{}})}(y.slice(C))}class ho{constructor(w,y,C,L,W,re,ge,Ae,Ct,Xt,Ht,gn){this.url=w,this.params=y,this.queryParams=C,this.fragment=L,this.data=W,this.outlet=re,this.component=ge,this.routeConfig=Ae,this._urlSegment=Ct,this._lastPathIndex=Xt,this._correctedLastPathIndex=null!=gn?gn:Xt,this._resolve=Ht}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(C=>C.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Oo extends au{constructor(w,y){super(y),this.url=w,Ga(this,y)}toString(){return Us(this._root)}}function Ga(b,w){w.value._routerState=b,w.children.forEach(y=>Ga(b,y))}function Us(b){const w=b.children.length>0?` { ${b.children.map(Us).join(", ")} } `:"";return`${b.value}${w}`}function xs(b){if(b.snapshot){const w=b.snapshot,y=b._futureSnapshot;b.snapshot=y,Wi(w.queryParams,y.queryParams)||b.queryParams.next(y.queryParams),w.fragment!==y.fragment&&b.fragment.next(y.fragment),Wi(w.params,y.params)||b.params.next(y.params),function ks(b,w){if(b.length!==w.length)return!1;for(let y=0;y<b.length;++y)if(!Wi(b[y],w[y]))return!1;return!0}(w.url,y.url)||b.url.next(y.url),Wi(w.data,y.data)||b.data.next(y.data)}else b.snapshot=b._futureSnapshot,b.data.next(b._futureSnapshot.data)}function Vs(b,w){const y=Wi(b.params,w.params)&&function hn(b,w){return xn(b,w)&&b.every((y,C)=>Wi(y.parameters,w[C].parameters))}(b.url,w.url);return y&&!(!b.parent!=!w.parent)&&(!b.parent||Vs(b.parent,w.parent))}function ws(b,w,y){if(y&&b.shouldReuseRoute(w.value,y.value.snapshot)){const C=y.value;C._futureSnapshot=w.value;const L=function $l(b,w,y){return w.children.map(C=>{for(const L of y.children)if(b.shouldReuseRoute(C.value,L.value.snapshot))return ws(b,C,L);return ws(b,C)})}(b,w,y);return new qi(C,L)}{if(b.shouldAttach(w.value)){const W=b.retrieve(w.value);if(null!==W){const re=W.route;return re.value._futureSnapshot=w.value,re.children=w.children.map(ge=>ws(b,ge)),re}}const C=function br(b){return new uo(new we(b.url),new we(b.params),new we(b.queryParams),new we(b.fragment),new we(b.data),b.outlet,b.component,b)}(w.value),L=w.children.map(W=>ws(b,W));return new qi(C,L)}}const zs="ngNavigationCancelingError";function lu(b,w){const{redirectTo:y,navigationBehaviorOptions:C}=pn(w)?{redirectTo:w,navigationBehaviorOptions:void 0}:w,L=la(!1,0,w);return L.url=y,L.navigationBehaviorOptions=C,L}function la(b,w,y){const C=new Error("NavigationCancelingError: "+(b||""));return C[zs]=!0,C.cancellationCode=w,y&&(C.url=y),C}function cu(b){return uu(b)&&pn(b.url)}function uu(b){return b&&b[zs]}class ci{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Fo,this.attachRef=null}}class Fo{constructor(){this.contexts=new Map}onChildOutletCreated(w,y){const C=this.getOrCreateContext(w);C.outlet=y,this.contexts.set(w,C)}onChildOutletDestroyed(w){const y=this.getContext(w);y&&(y.outlet=null,y.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let y=this.getContext(w);return y||(y=new ci,this.contexts.set(w,y)),y}getContext(w){return this.contexts.get(w)||null}}const jl=!1;let fo=(()=>{class b{constructor(y,C,L,W,re){this.parentContexts=y,this.location=C,this.changeDetector=W,this.environmentInjector=re,this.activated=null,this._activatedRoute=null,this.activateEvents=new R.vpe,this.deactivateEvents=new R.vpe,this.attachEvents=new R.vpe,this.detachEvents=new R.vpe,this.name=L||_n,y.onChildOutletCreated(this.name,this)}ngOnDestroy(){var y;(null===(y=this.parentContexts.getContext(this.name))||void 0===y?void 0:y.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const y=this.parentContexts.getContext(this.name);y&&y.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new R.vHH(4012,jl);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new R.vHH(4012,jl);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new R.vHH(4012,jl);this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,C){this.activated=y,this._activatedRoute=C,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,C){if(this.isActivated)throw new R.vHH(4013,jl);this._activatedRoute=y;const L=this.location,re=y._futureSnapshot.component,ge=this.parentContexts.getOrCreateContext(this.name).children,Ae=new rr(y,ge,L.injector);if(C&&function hu(b){return!!b.resolveComponentFactory}(C)){const Ct=C.resolveComponentFactory(re);this.activated=L.createComponent(Ct,L.length,Ae)}else this.activated=L.createComponent(re,{index:L.length,injector:Ae,environmentInjector:null!=C?C:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return b.\u0275fac=function(y){return new(y||b)(R.Y36(Fo),R.Y36(R.s_b),R.$8M("name"),R.Y36(R.sBO),R.Y36(R.lqb))},b.\u0275dir=R.lG2({type:b,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),b})();class rr{constructor(w,y,C){this.route=w,this.childContexts=y,this.parent=C}get(w,y){return w===uo?this.route:w===Fo?this.childContexts:this.parent.get(w,y)}}let Wa=(()=>{class b{}return b.\u0275fac=function(y){return new(y||b)},b.\u0275cmp=R.Xpm({type:b,selectors:[["ng-component"]],decls:1,vars:0,template:function(y,C){1&y&&R._UZ(0,"router-outlet")},dependencies:[fo],encapsulation:2}),b})();function Hs(b,w){var y;return b.providers&&!b._injector&&(b._injector=(0,R.MMx)(b.providers,w,`Route: ${b.path}`)),null!==(y=b._injector)&&void 0!==y?y:w}function $n(b){const w=b.children&&b.children.map($n),y=w?Object.assign(Object.assign({},b),{children:w}):Object.assign({},b);return!y.component&&!y.loadComponent&&(w||y.loadChildren)&&y.outlet&&y.outlet!==_n&&(y.component=Wa),y}function Pn(b){return b.outlet||_n}function Xn(b,w){const y=b.filter(C=>Pn(C)===w);return y.push(...b.filter(C=>Pn(C)!==w)),y}function Ln(b){var w;if(!b)return null;if(null!==(w=b.routeConfig)&&void 0!==w&&w._injector)return b.routeConfig._injector;for(let y=b.parent;y;y=y.parent){const C=y.routeConfig;if(null!=C&&C._loadedInjector)return C._loadedInjector;if(null!=C&&C._injector)return C._injector}return null}class Rn{constructor(w,y,C,L){this.routeReuseStrategy=w,this.futureState=y,this.currState=C,this.forwardEvent=L}activate(w){const y=this.futureState._root,C=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,C,w),xs(this.futureState.root),this.activateChildRoutes(y,C,w)}deactivateChildRoutes(w,y,C){const L=is(y);w.children.forEach(W=>{const re=W.value.outlet;this.deactivateRoutes(W,L[re],C),delete L[re]}),ii(L,(W,re)=>{this.deactivateRouteAndItsChildren(W,C)})}deactivateRoutes(w,y,C){const L=w.value,W=y?y.value:null;if(L===W)if(L.component){const re=C.getContext(L.outlet);re&&this.deactivateChildRoutes(w,y,re.children)}else this.deactivateChildRoutes(w,y,C);else W&&this.deactivateRouteAndItsChildren(y,C)}deactivateRouteAndItsChildren(w,y){w.value.component&&this.routeReuseStrategy.shouldDetach(w.value.snapshot)?this.detachAndStoreRouteSubtree(w,y):this.deactivateRouteAndOutlet(w,y)}detachAndStoreRouteSubtree(w,y){const C=y.getContext(w.value.outlet),L=C&&w.value.component?C.children:y,W=is(w);for(const re of Object.keys(W))this.deactivateRouteAndItsChildren(W[re],L);if(C&&C.outlet){const re=C.outlet.detach(),ge=C.children.onOutletDeactivated();this.routeReuseStrategy.store(w.value.snapshot,{componentRef:re,route:w,contexts:ge})}}deactivateRouteAndOutlet(w,y){const C=y.getContext(w.value.outlet),L=C&&w.value.component?C.children:y,W=is(w);for(const re of Object.keys(W))this.deactivateRouteAndItsChildren(W[re],L);C&&C.outlet&&(C.outlet.deactivate(),C.children.onOutletDeactivated(),C.attachRef=null,C.resolver=null,C.route=null)}activateChildRoutes(w,y,C){const L=is(y);w.children.forEach(W=>{this.activateRoutes(W,L[W.value.outlet],C),this.forwardEvent(new su(W.value.snapshot))}),w.children.length&&this.forwardEvent(new zl(w.value.snapshot))}activateRoutes(w,y,C){var L;const W=w.value,re=y?y.value:null;if(xs(W),W===re)if(W.component){const ge=C.getOrCreateContext(W.outlet);this.activateChildRoutes(w,y,ge.children)}else this.activateChildRoutes(w,y,C);else if(W.component){const ge=C.getOrCreateContext(W.outlet);if(this.routeReuseStrategy.shouldAttach(W.snapshot)){const Ae=this.routeReuseStrategy.retrieve(W.snapshot);this.routeReuseStrategy.store(W.snapshot,null),ge.children.onOutletReAttached(Ae.contexts),ge.attachRef=Ae.componentRef,ge.route=Ae.route.value,ge.outlet&&ge.outlet.attach(Ae.componentRef,Ae.route.value),xs(Ae.route.value),this.activateChildRoutes(w,null,ge.children)}else{const Ae=Ln(W.snapshot),Ct=null!==(L=null==Ae?void 0:Ae.get(R._Vd))&&void 0!==L?L:null;ge.attachRef=null,ge.route=W,ge.resolver=Ct,ge.injector=Ae,ge.outlet&&ge.outlet.activateWith(W,ge.injector),this.activateChildRoutes(w,null,ge.children)}}else this.activateChildRoutes(w,null,C)}}class Di{constructor(w){this.path=w,this.route=this.path[this.path.length-1]}}class hr{constructor(w,y){this.component=w,this.route=y}}function ot(b,w,y){const C=b._root;return rs(C,w?w._root:null,y,[C.value])}function Hr(b,w,y){const C=Ln(w);return(null!=C?C:y).get(b)}function rs(b,w,y,C,L={canDeactivateChecks:[],canActivateChecks:[]}){const W=is(w);return b.children.forEach(re=>{(function ui(b,w,y,C,L={canDeactivateChecks:[],canActivateChecks:[]}){const W=b.value,re=w?w.value:null,ge=y?y.getContext(b.value.outlet):null;if(re&&W.routeConfig===re.routeConfig){const Ae=function $a(b,w,y){if("function"==typeof y)return y(b,w);switch(y){case"pathParamsChange":return!xn(b.url,w.url);case"pathParamsOrQueryParamsChange":return!xn(b.url,w.url)||!Wi(b.queryParams,w.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vs(b,w)||!Wi(b.queryParams,w.queryParams);default:return!Vs(b,w)}}(re,W,W.routeConfig.runGuardsAndResolvers);Ae?L.canActivateChecks.push(new Di(C)):(W.data=re.data,W._resolvedData=re._resolvedData),rs(b,w,W.component?ge?ge.children:null:y,C,L),Ae&&ge&&ge.outlet&&ge.outlet.isActivated&&L.canDeactivateChecks.push(new hr(ge.outlet.component,re))}else re&&Gr(w,ge,L),L.canActivateChecks.push(new Di(C)),rs(b,null,W.component?ge?ge.children:null:y,C,L)})(re,W[re.value.outlet],y,C.concat([re.value]),L),delete W[re.value.outlet]}),ii(W,(re,ge)=>Gr(re,y.getContext(ge),L)),L}function Gr(b,w,y){const C=is(b),L=b.value;ii(C,(W,re)=>{Gr(W,L.component?w?w.children.getContext(re):null:w,y)}),y.canDeactivateChecks.push(new hr(L.component&&w&&w.outlet&&w.outlet.isActivated?w.outlet.component:null,L))}function dr(b){return"function"==typeof b}const qa=Symbol("INITIAL_VALUE");function $r(){return(0,Yt.w)(b=>(0,yt.a)(b.map(w=>w.pipe((0,et.q)(1),function dt(...b){const w=(0,Ge.yG)(b);return(0,ie.e)((y,C)=>{(w?(0,Je.z)(b,y,w):(0,Je.z)(b,y)).subscribe(C)})}(qa)))).pipe((0,Ke.U)(w=>{for(const y of w)if(!0!==y){if(y===qa)return qa;if(!1===y||y instanceof Vn)return y}return!0}),(0,st.h)(w=>w!==qa),(0,et.q)(1)))}function Zh(b){return(0,ze.z)((0,Kt.b)(w=>{if(pn(w))throw lu(0,w)}),(0,Ke.U)(w=>!0===w))}const ca={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ua(b,w,y,C,L){const W=Ya(b,w,y);return W.matched?function Jh(b,w,y,C){const L=w.canMatch;if(!L||0===L.length)return(0,De.of)(!0);const W=L.map(re=>{const ge=b.get(re),Ae=function Kl(b){return b&&dr(b.canMatch)}(ge)?ge.canMatch(w,y):ge(w,y);return Or(Ae)});return(0,De.of)(W).pipe($r(),Zh())}(C=Hs(w,C),w,y).pipe((0,Ke.U)(re=>!0===re?W:Object.assign({},ca))):(0,De.of)(W)}function Ya(b,w,y){var C;if(""===w.path)return"full"===w.pathMatch&&(b.hasChildren()||y.length>0)?Object.assign({},ca):{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const W=(w.matcher||Nr)(y,b,w);if(!W)return Object.assign({},ca);const re={};ii(W.posParams,(Ae,Ct)=>{re[Ct]=Ae.path});const ge=W.consumed.length>0?Object.assign(Object.assign({},re),W.consumed[W.consumed.length-1].parameters):re;return{matched:!0,consumedSegments:W.consumed,remainingSegments:y.slice(W.consumed.length),parameters:ge,positionalParamSegments:null!==(C=W.posParams)&&void 0!==C?C:{}}}function Ka(b,w,y,C,L="corrected"){if(y.length>0&&function ep(b,w,y){return y.some(C=>Vi(b,w,C)&&Pn(C)!==_n)}(b,y,C)){const re=new Vt(w,function gu(b,w,y,C){const L={};L[_n]=C,C._sourceSegment=b,C._segmentIndexShift=w.length;for(const W of y)if(""===W.path&&Pn(W)!==_n){const re=new Vt([],{});re._sourceSegment=b,re._segmentIndexShift=w.length,L[Pn(W)]=re}return L}(b,w,C,new Vt(y,b.children)));return re._sourceSegment=b,re._segmentIndexShift=w.length,{segmentGroup:re,slicedSegments:[]}}if(0===y.length&&function tp(b,w,y){return y.some(C=>Vi(b,w,C))}(b,y,C)){const re=new Vt(b.segments,function mu(b,w,y,C,L,W){const re={};for(const ge of C)if(Vi(b,y,ge)&&!L[Pn(ge)]){const Ae=new Vt([],{});Ae._sourceSegment=b,Ae._segmentIndexShift="legacy"===W?b.segments.length:w.length,re[Pn(ge)]=Ae}return Object.assign(Object.assign({},L),re)}(b,w,y,C,b.children,L));return re._sourceSegment=b,re._segmentIndexShift=w.length,{segmentGroup:re,slicedSegments:y}}const W=new Vt(b.segments,b.children);return W._sourceSegment=b,W._segmentIndexShift=w.length,{segmentGroup:W,slicedSegments:y}}function Vi(b,w,y){return(!(b.hasChildren()||w.length>0)||"full"!==y.pathMatch)&&""===y.path}function Gs(b,w,y,C){return!!(Pn(b)===C||C!==_n&&Vi(w,y,b))&&("**"===b.path||Ya(w,b,y).matched)}function hi(b,w,y){return 0===w.length&&!b.children[y]}const Xa=!1;class ha{constructor(w){this.segmentGroup=w||null}}class yu{constructor(w){this.urlTree=w}}function Za(b){return ee(new ha(b))}function np(b){return ee(new yu(b))}class Mr{constructor(w,y,C,L,W){this.injector=w,this.configLoader=y,this.urlSerializer=C,this.urlTree=L,this.config=W,this.allowRedirects=!0}apply(){const w=Ka(this.urlTree.root,[],[],this.config).segmentGroup,y=new Vt(w.segments,w.children);return this.expandSegmentGroup(this.injector,this.config,y,_n).pipe((0,Ke.U)(W=>this.createUrlTree(nt(W),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Ai.K)(W=>{if(W instanceof yu)return this.allowRedirects=!1,this.match(W.urlTree);throw W instanceof ha?this.noMatchError(W):W}))}match(w){return this.expandSegmentGroup(this.injector,this.config,w.root,_n).pipe((0,Ke.U)(L=>this.createUrlTree(nt(L),w.queryParams,w.fragment))).pipe((0,Ai.K)(L=>{throw L instanceof ha?this.noMatchError(L):L}))}noMatchError(w){return new R.vHH(4002,Xa)}createUrlTree(w,y,C){const L=rt(w);return new Vn(L,y,C)}expandSegmentGroup(w,y,C,L){return 0===C.segments.length&&C.hasChildren()?this.expandChildren(w,y,C).pipe((0,Ke.U)(W=>new Vt([],W))):this.expandSegment(w,C,y,C.segments,L,!0)}expandChildren(w,y,C){const L=[];for(const W of Object.keys(C.children))"primary"===W?L.unshift(W):L.push(W);return(0,Mt.D)(L).pipe((0,ln.b)(W=>{const re=C.children[W],ge=Xn(y,W);return this.expandSegmentGroup(w,ge,re,W).pipe((0,Ke.U)(Ae=>({segment:Ae,outlet:W})))}),Fe((W,re)=>(W[re.outlet]=re.segment,W),{}),Ut())}expandSegment(w,y,C,L,W,re){return(0,Mt.D)(C).pipe((0,ln.b)(ge=>this.expandSegmentAgainstRoute(w,y,C,ge,L,W,re).pipe((0,Ai.K)(Ct=>{if(Ct instanceof ha)return(0,De.of)(null);throw Ct}))),_e(ge=>!!ge),(0,Ai.K)((ge,Ae)=>{if(ge instanceof H||"EmptyError"===ge.name)return hi(y,L,W)?(0,De.of)(new Vt([],{})):Za(y);throw ge}))}expandSegmentAgainstRoute(w,y,C,L,W,re,ge){return Gs(L,y,W,re)?void 0===L.redirectTo?this.matchSegmentAgainstRoute(w,y,L,W,re):ge&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(w,y,C,L,W,re):Za(y):Za(y)}expandSegmentAgainstRouteUsingRedirect(w,y,C,L,W,re){return"**"===L.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(w,C,L,re):this.expandRegularSegmentAgainstRouteUsingRedirect(w,y,C,L,W,re)}expandWildCardWithParamsAgainstRouteUsingRedirect(w,y,C,L){const W=this.applyRedirectCommands([],C.redirectTo,{});return C.redirectTo.startsWith("/")?np(W):this.lineralizeSegments(C,W).pipe((0,jt.z)(re=>{const ge=new Vt(re,{});return this.expandSegment(w,ge,y,re,L,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(w,y,C,L,W,re){const{matched:ge,consumedSegments:Ae,remainingSegments:Ct,positionalParamSegments:Xt}=Ya(y,L,W);if(!ge)return Za(y);const Ht=this.applyRedirectCommands(Ae,L.redirectTo,Xt);return L.redirectTo.startsWith("/")?np(Ht):this.lineralizeSegments(L,Ht).pipe((0,jt.z)(gn=>this.expandSegment(w,y,C,gn.concat(Ct),re,!1)))}matchSegmentAgainstRoute(w,y,C,L,W){return"**"===C.path?(w=Hs(C,w),C.loadChildren?(C._loadedRoutes?(0,De.of)({routes:C._loadedRoutes,injector:C._loadedInjector}):this.configLoader.loadChildren(w,C)).pipe((0,Ke.U)(ge=>(C._loadedRoutes=ge.routes,C._loadedInjector=ge.injector,new Vt(L,{})))):(0,De.of)(new Vt(L,{}))):ua(y,C,L,w).pipe((0,Yt.w)(({matched:re,consumedSegments:ge,remainingSegments:Ae})=>{var Ct;return re?(w=null!==(Ct=C._injector)&&void 0!==Ct?Ct:w,this.getChildConfig(w,C,L).pipe((0,jt.z)(Ht=>{var gn;const zn=null!==(gn=Ht.injector)&&void 0!==gn?gn:w,Hn=Ht.routes,{segmentGroup:sr,slicedSegments:jn}=Ka(y,ge,Ae,Hn),ss=new Vt(sr.segments,sr.children);if(0===jn.length&&ss.hasChildren())return this.expandChildren(zn,Hn,ss).pipe((0,Ke.U)(ri=>new Vt(ge,ri)));if(0===Hn.length&&0===jn.length)return(0,De.of)(new Vt(ge,{}));const go=Pn(C)===W;return this.expandSegment(zn,ss,Hn,jn,go?_n:W,!0).pipe((0,Ke.U)($s=>new Vt(ge.concat($s.segments),$s.children)))}))):Za(y)}))}getChildConfig(w,y,C){return y.children?(0,De.of)({routes:y.children,injector:w}):y.loadChildren?void 0!==y._loadedRoutes?(0,De.of)({routes:y._loadedRoutes,injector:y._loadedInjector}):function pu(b,w,y,C){const L=w.canLoad;if(void 0===L||0===L.length)return(0,De.of)(!0);const W=L.map(re=>{const ge=b.get(re),Ae=function Yl(b){return b&&dr(b.canLoad)}(ge)?ge.canLoad(w,y):ge(w,y);return Or(Ae)});return(0,De.of)(W).pipe($r(),Zh())}(w,y,C).pipe((0,jt.z)(L=>L?this.configLoader.loadChildren(w,y).pipe((0,Kt.b)(W=>{y._loadedRoutes=W.routes,y._loadedInjector=W.injector})):function vu(b){return ee(la(Xa,3))}())):(0,De.of)({routes:[],injector:w})}lineralizeSegments(w,y){let C=[],L=y.root;for(;;){if(C=C.concat(L.segments),0===L.numberOfChildren)return(0,De.of)(C);if(L.numberOfChildren>1||!L.children[_n])return ee(new R.vHH(4e3,Xa));L=L.children[_n]}}applyRedirectCommands(w,y,C){return this.applyRedirectCreateUrlTree(y,this.urlSerializer.parse(y),w,C)}applyRedirectCreateUrlTree(w,y,C,L){const W=this.createSegmentGroup(w,y.root,C,L);return new Vn(W,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(w,y){const C={};return ii(w,(L,W)=>{if("string"==typeof L&&L.startsWith(":")){const ge=L.substring(1);C[W]=y[ge]}else C[W]=L}),C}createSegmentGroup(w,y,C,L){const W=this.createSegments(w,y.segments,C,L);let re={};return ii(y.children,(ge,Ae)=>{re[Ae]=this.createSegmentGroup(w,ge,C,L)}),new Vt(W,re)}createSegments(w,y,C,L){return y.map(W=>W.path.startsWith(":")?this.findPosParam(w,W,L):this.findOrReturn(W,C))}findPosParam(w,y,C){const L=C[y.path.substring(1)];if(!L)throw new R.vHH(4001,Xa);return L}findOrReturn(w,y){let C=0;for(const L of y){if(L.path===w.path)return y.splice(C),L;C++}return w}}class Qh{}class ed{constructor(w,y,C,L,W,re,ge,Ae){this.injector=w,this.rootComponentType=y,this.config=C,this.urlTree=L,this.url=W,this.paramsInheritanceStrategy=re,this.relativeLinkResolution=ge,this.urlSerializer=Ae}recognize(){const w=Ka(this.urlTree.root,[],[],this.config.filter(y=>void 0===y.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,w,_n).pipe((0,Ke.U)(y=>{if(null===y)return null;const C=new ho([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},_n,this.rootComponentType,null,this.urlTree.root,-1,{}),L=new qi(C,y),W=new Oo(this.url,L);return this.inheritParamsAndData(W._root),W}))}inheritParamsAndData(w){const y=w.value,C=_s(y,this.paramsInheritanceStrategy);y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),w.children.forEach(L=>this.inheritParamsAndData(L))}processSegmentGroup(w,y,C,L){return 0===C.segments.length&&C.hasChildren()?this.processChildren(w,y,C):this.processSegment(w,y,C,C.segments,L)}processChildren(w,y,C){return(0,Mt.D)(Object.keys(C.children)).pipe((0,ln.b)(L=>{const W=C.children[L],re=Xn(y,L);return this.processSegmentGroup(w,re,W,L)}),Fe((L,W)=>L&&W?(L.push(...W),L):null),function Rt(b,w=!1){return(0,ie.e)((y,C)=>{let L=0;y.subscribe((0,je.x)(C,W=>{const re=b(W,L++);(re||w)&&C.next(W),!re&&C.complete()}))})}(L=>null!==L),Pe(null),Ut(),(0,Ke.U)(L=>{if(null===L)return null;const W=td(L);return function Hg(b){b.sort((w,y)=>w.value.outlet===_n?-1:y.value.outlet===_n?1:w.value.outlet.localeCompare(y.value.outlet))}(W),W}))}processSegment(w,y,C,L,W){return(0,Mt.D)(y).pipe((0,ln.b)(re=>{var ge;return this.processSegmentAgainstRoute(null!==(ge=re._injector)&&void 0!==ge?ge:w,re,C,L,W)}),_e(re=>!!re),(0,Ai.K)(re=>{if(re instanceof H)return hi(C,L,W)?(0,De.of)([]):(0,De.of)(null);throw re}))}processSegmentAgainstRoute(w,y,C,L,W){var re,ge;if(y.redirectTo||!Gs(y,C,L,W))return(0,De.of)(null);let Ae;if("**"===y.path){const Ct=L.length>0?fs(L).parameters:{},Xt=Ql(C)+L.length,Ht=new ho(L,Ct,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_u(y),Pn(y),null!==(ge=null!==(re=y.component)&&void 0!==re?re:y._loadedComponent)&&void 0!==ge?ge:null,y,id(C),Xt,xu(y),Xt);Ae=(0,De.of)({snapshot:Ht,consumedSegments:[],remainingSegments:[]})}else Ae=ua(C,y,L,w).pipe((0,Ke.U)(({matched:Ct,consumedSegments:Xt,remainingSegments:Ht,parameters:gn})=>{var zn,Hn;if(!Ct)return null;const sr=Ql(C)+Xt.length;return{snapshot:new ho(Xt,gn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_u(y),Pn(y),null!==(Hn=null!==(zn=y.component)&&void 0!==zn?zn:y._loadedComponent)&&void 0!==Hn?Hn:null,y,id(C),sr,xu(y),sr),consumedSegments:Xt,remainingSegments:Ht}}));return Ae.pipe((0,Yt.w)(Ct=>{var Xt,Ht;if(null===Ct)return(0,De.of)(null);const{snapshot:gn,consumedSegments:zn,remainingSegments:Hn}=Ct;w=null!==(Xt=y._injector)&&void 0!==Xt?Xt:w;const sr=null!==(Ht=y._loadedInjector)&&void 0!==Ht?Ht:w,jn=function Qa(b){return b.children?b.children:b.loadChildren?b._loadedRoutes:[]}(y),{segmentGroup:ss,slicedSegments:go}=Ka(C,zn,Hn,jn.filter($s=>void 0===$s.redirectTo),this.relativeLinkResolution);if(0===go.length&&ss.hasChildren())return this.processChildren(sr,jn,ss).pipe((0,Ke.U)($s=>null===$s?null:[new qi(gn,$s)]));if(0===jn.length&&0===go.length)return(0,De.of)([new qi(gn,[])]);const Vo=Pn(y)===W;return this.processSegment(sr,jn,ss,go,Vo?_n:W).pipe((0,Ke.U)($s=>null===$s?null:[new qi(gn,$s)]))}))}}function Jl(b){const w=b.value.routeConfig;return w&&""===w.path&&void 0===w.redirectTo}function td(b){const w=[],y=new Set;for(const C of b){if(!Jl(C)){w.push(C);continue}const L=w.find(W=>C.value.routeConfig===W.value.routeConfig);void 0!==L?(L.children.push(...C.children),y.add(L)):w.push(C)}for(const C of y){const L=td(C.children);w.push(new qi(C.value,L))}return w.filter(C=>!y.has(C))}function id(b){let w=b;for(;w._sourceSegment;)w=w._sourceSegment;return w}function Ql(b){var w,y;let C=b,L=null!==(w=C._segmentIndexShift)&&void 0!==w?w:0;for(;C._sourceSegment;)C=C._sourceSegment,L+=null!==(y=C._segmentIndexShift)&&void 0!==y?y:0;return L-1}function _u(b){return b.data||{}}function xu(b){return b.resolve||{}}const bu=Symbol("RouteTitle");function fa(b){return"string"==typeof b.title||null===b.title}function od(b){return(0,Yt.w)(w=>{const y=b(w);return y?(0,Mt.D)(y).pipe((0,Ke.U)(()=>w)):(0,De.of)(w)})}let ad=(()=>{class b{buildTitle(y){var C;let L,W=y.root;for(;void 0!==W;)L=null!==(C=this.getResolvedTitleForRoute(W))&&void 0!==C?C:L,W=W.children.find(re=>re.outlet===_n);return L}getResolvedTitleForRoute(y){return y.data[bu]}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=R.Yz7({token:b,factory:function(){return(0,R.f3M)(ec)},providedIn:"root"}),b})(),ec=(()=>{class b extends ad{constructor(y){super(),this.title=y}updateTitle(y){const C=this.buildTitle(y);void 0!==C&&this.title.setTitle(C)}}return b.\u0275fac=function(y){return new(y||b)(R.LFG(so.Dx))},b.\u0275prov=R.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();class ip{}class rp extends class Ms{shouldDetach(w){return!1}store(w,y){}shouldAttach(w){return!1}retrieve(w){return null}shouldReuseRoute(w,y){return w.routeConfig===y.routeConfig}}{}const Yi=new R.OlP("",{providedIn:"root",factory:()=>({})}),po=new R.OlP("ROUTES");let tl=(()=>{class b{constructor(y,C){this.injector=y,this.compiler=C,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(y){if(this.componentLoaders.get(y))return this.componentLoaders.get(y);if(y._loadedComponent)return(0,De.of)(y._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(y);const C=Or(y.loadComponent()).pipe((0,Kt.b)(W=>{this.onLoadEndListener&&this.onLoadEndListener(y),y._loadedComponent=W}),(0,Lr.x)(()=>{this.componentLoaders.delete(y)})),L=new ke(C,()=>new D.x).pipe(qe());return this.componentLoaders.set(y,L),L}loadChildren(y,C){if(this.childrenLoaders.get(C))return this.childrenLoaders.get(C);if(C._loadedRoutes)return(0,De.of)({routes:C._loadedRoutes,injector:C._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(C);const W=this.loadModuleFactoryOrRoutes(C.loadChildren).pipe((0,Ke.U)(ge=>{this.onLoadEndListener&&this.onLoadEndListener(C);let Ae,Ct,Xt=!1;Array.isArray(ge)?Ct=ge:(Ae=ge.create(y).injector,Ct=fi(Ae.get(po,[],R.XFs.Self|R.XFs.Optional)));return{routes:Ct.map($n),injector:Ae}}),(0,Lr.x)(()=>{this.childrenLoaders.delete(C)})),re=new ke(W,()=>new D.x).pipe(qe());return this.childrenLoaders.set(C,re),re}loadModuleFactoryOrRoutes(y){return Or(y()).pipe((0,jt.z)(C=>C instanceof R.YKP||Array.isArray(C)?(0,De.of)(C):(0,Mt.D)(this.compiler.compileModuleAsync(C))))}}return b.\u0275fac=function(y){return new(y||b)(R.LFG(R.zs3),R.LFG(R.Sil))},b.\u0275prov=R.Yz7({token:b,factory:b.\u0275fac}),b})();class Wg{}class ld{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,y){return w}}function cd(b){throw b}function sp(b,w,y){return w.parse("/")}const $g={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function ma(){var b,w;const y=(0,R.f3M)(gi),C=(0,R.f3M)(Fo),L=(0,R.f3M)(pe.Ye),W=(0,R.f3M)(R.zs3),re=(0,R.f3M)(R.Sil),ge=null!==(b=(0,R.f3M)(po,{optional:!0}))&&void 0!==b?b:[],Ae=null!==(w=(0,R.f3M)(Yi,{optional:!0}))&&void 0!==w?w:{},Ct=(0,R.f3M)(ec),Xt=(0,R.f3M)(ad,{optional:!0}),Ht=(0,R.f3M)(Wg,{optional:!0}),gn=(0,R.f3M)(ip,{optional:!0}),zn=new vi(null,y,C,L,W,re,fi(ge));return Ht&&(zn.urlHandlingStrategy=Ht),gn&&(zn.routeReuseStrategy=gn),zn.titleStrategy=null!=Xt?Xt:Ct,function il(b,w){b.errorHandler&&(w.errorHandler=b.errorHandler),b.malformedUriErrorHandler&&(w.malformedUriErrorHandler=b.malformedUriErrorHandler),b.onSameUrlNavigation&&(w.onSameUrlNavigation=b.onSameUrlNavigation),b.paramsInheritanceStrategy&&(w.paramsInheritanceStrategy=b.paramsInheritanceStrategy),b.relativeLinkResolution&&(w.relativeLinkResolution=b.relativeLinkResolution),b.urlUpdateStrategy&&(w.urlUpdateStrategy=b.urlUpdateStrategy),b.canceledNavigationResolution&&(w.canceledNavigationResolution=b.canceledNavigationResolution)}(Ae,zn),zn}let vi=(()=>{class b{constructor(y,C,L,W,re,ge,Ae){this.rootComponentType=y,this.urlSerializer=C,this.rootContexts=L,this.location=W,this.config=Ae,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new D.x,this.errorHandler=cd,this.malformedUriErrorHandler=sp,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,De.of)(void 0),this.urlHandlingStrategy=new ld,this.routeReuseStrategy=new rp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=re.get(tl),this.configLoader.onLoadEndListener=gn=>this.triggerEvent(new iu(gn)),this.configLoader.onLoadStartListener=gn=>this.triggerEvent(new wr(gn)),this.ngModule=re.get(R.h0i),this.console=re.get(R.c2e);const Ht=re.get(R.R0b);this.isNgZoneEnabled=Ht instanceof R.R0b&&R.R0b.isInAngularZone(),this.resetConfig(Ae),this.currentUrlTree=function Ii(){return new Vn(new Vt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=aa(this.currentUrlTree,this.rootComponentType),this.transitions=new we({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var y;return null===(y=this.location.getState())||void 0===y?void 0:y.\u0275routerPageId}setupNavigations(y){const C=this.events;return y.pipe((0,st.h)(L=>0!==L.id),(0,Ke.U)(L=>Object.assign(Object.assign({},L),{extractedUrl:this.urlHandlingStrategy.extract(L.rawUrl)})),(0,Yt.w)(L=>{let W=!1,re=!1;return(0,De.of)(L).pipe((0,Kt.b)(ge=>{this.currentNavigation={id:ge.id,initialUrl:ge.rawUrl,extractedUrl:ge.extractedUrl,trigger:ge.source,extras:ge.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Yt.w)(ge=>{const Ae=this.browserUrlTree.toString(),Ct=!this.navigated||ge.extractedUrl.toString()!==Ae||Ae!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Ct)&&this.urlHandlingStrategy.shouldProcessUrl(ge.rawUrl))return Yr(ge.source)&&(this.browserUrlTree=ge.extractedUrl),(0,De.of)(ge).pipe((0,Yt.w)(Ht=>{const gn=this.transitions.getValue();return C.next(new vs(Ht.id,this.serializeUrl(Ht.extractedUrl),Ht.source,Ht.restoredState)),gn!==this.transitions.getValue()?le.E:Promise.resolve(Ht)}),function Dn(b,w,y,C){return(0,Yt.w)(L=>function Zl(b,w,y,C,L){return new Mr(b,w,y,C,L).apply()}(b,w,y,L.extractedUrl,C).pipe((0,Ke.U)(W=>Object.assign(Object.assign({},L),{urlAfterRedirects:W}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Kt.b)(Ht=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Ht.urlAfterRedirects}),L.urlAfterRedirects=Ht.urlAfterRedirects}),function wu(b,w,y,C,L,W){return(0,jt.z)(re=>function Ja(b,w,y,C,L,W,re="emptyOnly",ge="legacy"){return new ed(b,w,y,C,L,re,ge,W).recognize().pipe((0,Yt.w)(Ae=>null===Ae?function pr(b){return new fe.y(w=>w.error(b))}(new Qh):(0,De.of)(Ae)))}(b,w,y,re.urlAfterRedirects,C.serialize(re.urlAfterRedirects),C,L,W).pipe((0,Ke.U)(ge=>Object.assign(Object.assign({},re),{targetSnapshot:ge}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Kt.b)(Ht=>{if(L.targetSnapshot=Ht.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Ht.extras.skipLocationChange){const zn=this.urlHandlingStrategy.merge(Ht.urlAfterRedirects,Ht.rawUrl);this.setBrowserUrl(zn,Ht)}this.browserUrlTree=Ht.urlAfterRedirects}const gn=new eu(Ht.id,this.serializeUrl(Ht.extractedUrl),this.serializeUrl(Ht.urlAfterRedirects),Ht.targetSnapshot);C.next(gn)}));if(Ct&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:gn,extractedUrl:zn,source:Hn,restoredState:sr,extras:jn}=ge,ss=new vs(gn,this.serializeUrl(zn),Hn,sr);C.next(ss);const go=aa(zn,this.rootComponentType).snapshot;return L=Object.assign(Object.assign({},ge),{targetSnapshot:go,urlAfterRedirects:zn,extras:Object.assign(Object.assign({},jn),{skipLocationChange:!1,replaceUrl:!1})}),(0,De.of)(L)}return this.rawUrlTree=ge.rawUrl,ge.resolve(null),le.E}),(0,Kt.b)(ge=>{const Ae=new tu(ge.id,this.serializeUrl(ge.extractedUrl),this.serializeUrl(ge.urlAfterRedirects),ge.targetSnapshot);this.triggerEvent(Ae)}),(0,Ke.U)(ge=>L=Object.assign(Object.assign({},ge),{guards:ot(ge.targetSnapshot,ge.currentSnapshot,this.rootContexts)})),function jr(b,w){return(0,jt.z)(y=>{const{targetSnapshot:C,currentSnapshot:L,guards:{canActivateChecks:W,canDeactivateChecks:re}}=y;return 0===re.length&&0===W.length?(0,De.of)(Object.assign(Object.assign({},y),{guardsResult:!0})):function Jf(b,w,y,C){return(0,Mt.D)(b).pipe((0,jt.z)(L=>function Ui(b,w,y,C,L){const W=w&&w.routeConfig?w.routeConfig.canDeactivate:null;if(!W||0===W.length)return(0,De.of)(!0);const re=W.map(ge=>{const Ae=Hr(ge,w,L);return Or(function ja(b){return b&&dr(b.canDeactivate)}(Ae)?Ae.canDeactivate(b,w,y,C):Ae(b,w,y,C)).pipe(_e())});return(0,De.of)(re).pipe($r())}(L.component,L.route,y,w,C)),_e(L=>!0!==L,!0))}(re,C,L,b).pipe((0,jt.z)(ge=>ge&&function ql(b){return"boolean"==typeof b}(ge)?function Xh(b,w,y,C){return(0,Mt.D)(w).pipe((0,ln.b)(L=>(0,Je.z)(function Qf(b,w){return null!==b&&w&&w(new jh(b)),(0,De.of)(!0)}(L.route.parent,C),function du(b,w){return null!==b&&w&&w(new ru(b)),(0,De.of)(!0)}(L.route,C),function fu(b,w,y){const C=w[w.length-1],W=w.slice(0,w.length-1).reverse().map(re=>function En(b){const w=b.routeConfig?b.routeConfig.canActivateChild:null;return w&&0!==w.length?{node:b,guards:w}:null}(re)).filter(re=>null!==re).map(re=>q(()=>{const ge=re.guards.map(Ae=>{const Ct=Hr(Ae,re.node,y);return Or(function Wr(b){return b&&dr(b.canActivateChild)}(Ct)?Ct.canActivateChild(C,b):Ct(C,b)).pipe(_e())});return(0,De.of)(ge).pipe($r())}));return(0,De.of)(W).pipe($r())}(b,L.path,y),function Xl(b,w,y){const C=w.routeConfig?w.routeConfig.canActivate:null;if(!C||0===C.length)return(0,De.of)(!0);const L=C.map(W=>q(()=>{const re=Hr(W,w,y);return Or(function Zf(b){return b&&dr(b.canActivate)}(re)?re.canActivate(w,b):re(w,b)).pipe(_e())}));return(0,De.of)(L).pipe($r())}(b,L.route,y))),_e(L=>!0!==L,!0))}(C,W,b,w):(0,De.of)(ge)),(0,Ke.U)(ge=>Object.assign(Object.assign({},y),{guardsResult:ge})))})}(this.ngModule.injector,ge=>this.triggerEvent(ge)),(0,Kt.b)(ge=>{if(L.guardsResult=ge.guardsResult,pn(ge.guardsResult))throw lu(0,ge.guardsResult);const Ae=new nu(ge.id,this.serializeUrl(ge.extractedUrl),this.serializeUrl(ge.urlAfterRedirects),ge.targetSnapshot,!!ge.guardsResult);this.triggerEvent(Ae)}),(0,st.h)(ge=>!!ge.guardsResult||(this.restoreHistory(ge),this.cancelNavigationTransition(ge,"",3),!1)),od(ge=>{if(ge.guards.canActivateChecks.length)return(0,De.of)(ge).pipe((0,Kt.b)(Ae=>{const Ct=new Ha(Ae.id,this.serializeUrl(Ae.extractedUrl),this.serializeUrl(Ae.urlAfterRedirects),Ae.targetSnapshot);this.triggerEvent(Ct)}),(0,Yt.w)(Ae=>{let Ct=!1;return(0,De.of)(Ae).pipe(function rd(b,w){return(0,jt.z)(y=>{const{targetSnapshot:C,guards:{canActivateChecks:L}}=y;if(!L.length)return(0,De.of)(y);let W=0;return(0,Mt.D)(L).pipe((0,ln.b)(re=>function ko(b,w,y,C){const L=b.routeConfig,W=b._resolve;return void 0!==(null==L?void 0:L.title)&&!fa(L)&&(W[bu]=L.title),function Gg(b,w,y,C){const L=function Bo(b){return[...Object.keys(b),...Object.getOwnPropertySymbols(b)]}(b);if(0===L.length)return(0,De.of)({});const W={};return(0,Mt.D)(L).pipe((0,jt.z)(re=>function sd(b,w,y,C){const L=Hr(b,w,C);return Or(L.resolve?L.resolve(w,y):L(w,y))}(b[re],w,y,C).pipe(_e(),(0,Kt.b)(ge=>{W[re]=ge}))),xt(1),(0,di.h)(W),(0,Ai.K)(re=>re instanceof H?le.E:ee(re)))}(W,b,w,C).pipe((0,Ke.U)(re=>(b._resolvedData=re,b.data=_s(b,y).resolve,L&&fa(L)&&(b.data[bu]=L.title),null)))}(re.route,C,b,w)),(0,Kt.b)(()=>W++),xt(1),(0,jt.z)(re=>W===L.length?(0,De.of)(y):le.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Kt.b)({next:()=>Ct=!0,complete:()=>{Ct||(this.restoreHistory(Ae),this.cancelNavigationTransition(Ae,"",2))}}))}),(0,Kt.b)(Ae=>{const Ct=new Vl(Ae.id,this.serializeUrl(Ae.extractedUrl),this.serializeUrl(Ae.urlAfterRedirects),Ae.targetSnapshot);this.triggerEvent(Ct)}))}),od(ge=>{const Ae=Ct=>{var Xt;const Ht=[];(null===(Xt=Ct.routeConfig)||void 0===Xt?void 0:Xt.loadComponent)&&!Ct.routeConfig._loadedComponent&&Ht.push(this.configLoader.loadComponent(Ct.routeConfig).pipe((0,Kt.b)(gn=>{Ct.component=gn}),(0,Ke.U)(()=>{})));for(const gn of Ct.children)Ht.push(...Ae(gn));return Ht};return(0,yt.a)(Ae(ge.targetSnapshot.root)).pipe(Pe(),(0,et.q)(1))}),od(()=>this.afterPreactivation()),(0,Ke.U)(ge=>{const Ae=function Kh(b,w,y){const C=ws(b,w._root,y?y._root:void 0);return new co(C,w)}(this.routeReuseStrategy,ge.targetSnapshot,ge.currentRouterState);return L=Object.assign(Object.assign({},ge),{targetRouterState:Ae})}),(0,Kt.b)(ge=>{this.currentUrlTree=ge.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ge.urlAfterRedirects,ge.rawUrl),this.routerState=ge.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ge.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ge),this.browserUrlTree=ge.urlAfterRedirects)}),((b,w,y)=>(0,Ke.U)(C=>(new Rn(w,C.targetRouterState,C.currentRouterState,y).activate(b),C)))(this.rootContexts,this.routeReuseStrategy,ge=>this.triggerEvent(ge)),(0,Kt.b)({next(){W=!0},complete(){W=!0}}),(0,Lr.x)(()=>{var ge;W||re||this.cancelNavigationTransition(L,"",1),(null===(ge=this.currentNavigation)||void 0===ge?void 0:ge.id)===L.id&&(this.currentNavigation=null)}),(0,Ai.K)(ge=>{var Ae;if(re=!0,uu(ge)){cu(ge)||(this.navigated=!0,this.restoreHistory(L,!0));const Ct=new ir(L.id,this.serializeUrl(L.extractedUrl),ge.message,ge.cancellationCode);if(C.next(Ct),cu(ge)){const Xt=this.urlHandlingStrategy.merge(ge.url,this.rawUrlTree),Ht={skipLocationChange:L.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Yr(L.source)};this.scheduleNavigation(Xt,"imperative",null,Ht,{resolve:L.resolve,reject:L.reject,promise:L.promise})}else L.resolve(!1)}else{this.restoreHistory(L,!0);const Ct=new oa(L.id,this.serializeUrl(L.extractedUrl),ge,null!==(Ae=L.targetSnapshot)&&void 0!==Ae?Ae:void 0);C.next(Ct);try{L.resolve(this.errorHandler(ge))}catch(Xt){L.reject(Xt)}}return le.E}))}))}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}setTransition(y){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),y))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const C="popstate"===y.type?"popstate":"hashchange";"popstate"===C&&setTimeout(()=>{var L;const W={replaceUrl:!0},re=null!==(L=y.state)&&void 0!==L&&L.navigationId?y.state:null;if(re){const Ae=Object.assign({},re);delete Ae.navigationId,delete Ae.\u0275routerPageId,0!==Object.keys(Ae).length&&(W.state=Ae)}const ge=this.parseUrl(y.url);this.scheduleNavigation(ge,C,re,W)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(y){this.events.next(y)}resetConfig(y){this.config=y.map($n),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,C={}){const{relativeTo:L,queryParams:W,fragment:re,queryParamsHandling:ge,preserveFragment:Ae}=C,Ct=L||this.routerState.root,Xt=Ae?this.currentUrlTree.fragment:re;let Ht=null;switch(ge){case"merge":Ht=Object.assign(Object.assign({},this.currentUrlTree.queryParams),W);break;case"preserve":Ht=this.currentUrlTree.queryParams;break;default:Ht=W||null}return null!==Ht&&(Ht=this.removeEmptyProps(Ht)),ei(Ct,this.currentUrlTree,y,Ht,null!=Xt?Xt:null)}navigateByUrl(y,C={skipLocationChange:!1}){const L=pn(y)?y:this.parseUrl(y),W=this.urlHandlingStrategy.merge(L,this.rawUrlTree);return this.scheduleNavigation(W,"imperative",null,C)}navigate(y,C={skipLocationChange:!1}){return function qr(b){for(let w=0;w<b.length;w++){if(null==b[w])throw new R.vHH(4008,false)}}(y),this.navigateByUrl(this.createUrlTree(y,C),C)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let C;try{C=this.urlSerializer.parse(y)}catch(L){C=this.malformedUriErrorHandler(L,this.urlSerializer,y)}return C}isActive(y,C){let L;if(L=!0===C?Object.assign({},$g):!1===C?Object.assign({},nl):C,pn(y))return me(this.currentUrlTree,y,L);const W=this.parseUrl(y);return me(this.currentUrlTree,W,L)}removeEmptyProps(y){return Object.keys(y).reduce((C,L)=>{const W=y[L];return null!=W&&(C[L]=W),C},{})}processNavigations(){this.navigations.subscribe(y=>{var C;this.navigated=!0,this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId,this.events.next(new zr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(C=this.titleStrategy)||void 0===C||C.updateTitle(this.routerState.snapshot),y.resolve(!0)},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}scheduleNavigation(y,C,L,W,re){var ge,Ae;if(this.disposed)return Promise.resolve(!1);let Ct,Xt,Ht;re?(Ct=re.resolve,Xt=re.reject,Ht=re.promise):Ht=new Promise((Hn,sr)=>{Ct=Hn,Xt=sr});const gn=++this.navigationId;let zn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(L=this.location.getState()),zn=L&&L.\u0275routerPageId?L.\u0275routerPageId:W.replaceUrl||W.skipLocationChange?null!==(ge=this.browserPageId)&&void 0!==ge?ge:0:(null!==(Ae=this.browserPageId)&&void 0!==Ae?Ae:0)+1):zn=0,this.setTransition({id:gn,targetPageId:zn,source:C,restoredState:L,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:y,extras:W,resolve:Ct,reject:Xt,promise:Ht,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ht.catch(Hn=>Promise.reject(Hn))}setBrowserUrl(y,C){const L=this.urlSerializer.serialize(y),W=Object.assign(Object.assign({},C.extras.state),this.generateNgRouterState(C.id,C.targetPageId));this.location.isCurrentPathEqualTo(L)||C.extras.replaceUrl?this.location.replaceState(L,"",W):this.location.go(L,"",W)}restoreHistory(y,C=!1){var L,W;if("computed"===this.canceledNavigationResolution){const re=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(L=this.currentNavigation)||void 0===L?void 0:L.finalUrl)||0===re?this.currentUrlTree===(null===(W=this.currentNavigation)||void 0===W?void 0:W.finalUrl)&&0===re&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(re)}else"replace"===this.canceledNavigationResolution&&(C&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(y,C,L){const W=new ir(y.id,this.serializeUrl(y.extractedUrl),C,L);this.triggerEvent(W),y.resolve(!1)}generateNgRouterState(y,C){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:C}:{navigationId:y}}}return b.\u0275fac=function(y){R.$Z()},b.\u0275prov=R.Yz7({token:b,factory:function(){return ma()},providedIn:"root"}),b})();function Yr(b){return"imperative"!==b}let Su=(()=>{class b{constructor(y,C,L){this.router=y,this.route=C,this.locationStrategy=L,this.commands=null,this.href=null,this.onChanges=new D.x,this.subscription=y.events.subscribe(W=>{W instanceof zr&&this.updateTargetUrlAndHref()})}set routerLink(y){this.commands=null!=y?Array.isArray(y)?y:[y]:null}ngOnChanges(y){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(y,C,L,W,re){if(0!==y||C||L||W||re||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const ge={skipLocationChange:(0,R.D6c)(this.skipLocationChange),replaceUrl:(0,R.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,ge),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,R.D6c)(this.preserveFragment)})}}return b.\u0275fac=function(y){return new(y||b)(R.Y36(vi),R.Y36(uo),R.Y36(pe.S$))},b.\u0275dir=R.lG2({type:b,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(y,C){1&y&&R.NdJ("click",function(W){return C.onClick(W.button,W.ctrlKey,W.shiftKey,W.altKey,W.metaKey)}),2&y&&R.uIk("target",C.target)("href",C.href,R.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[R.TTD]}),b})();class ic{}let Uo=(()=>{class b{constructor(y,C,L,W,re){this.router=y,this.injector=L,this.preloadingStrategy=W,this.loader=re}setUpPreloading(){this.subscription=this.router.events.pipe((0,st.h)(y=>y instanceof zr),(0,ln.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,C){var L,W,re;const ge=[];for(const Ae of C){Ae.providers&&!Ae._injector&&(Ae._injector=(0,R.MMx)(Ae.providers,y,`Route: ${Ae.path}`));const Ct=null!==(L=Ae._injector)&&void 0!==L?L:y,Xt=null!==(W=Ae._loadedInjector)&&void 0!==W?W:Ct;Ae.loadChildren&&!Ae._loadedRoutes&&void 0===Ae.canLoad||Ae.loadComponent&&!Ae._loadedComponent?ge.push(this.preloadConfig(Ct,Ae)):(Ae.children||Ae._loadedRoutes)&&ge.push(this.processRoutes(Xt,null!==(re=Ae.children)&&void 0!==re?re:Ae._loadedRoutes))}return(0,Mt.D)(ge).pipe((0,Fs.J)())}preloadConfig(y,C){return this.preloadingStrategy.preload(C,()=>{let L;L=C.loadChildren&&void 0===C.canLoad?this.loader.loadChildren(y,C):(0,De.of)(null);const W=L.pipe((0,jt.z)(re=>{var ge;return null===re?(0,De.of)(void 0):(C._loadedRoutes=re.routes,C._loadedInjector=re.injector,this.processRoutes(null!==(ge=re.injector)&&void 0!==ge?ge:y,re.routes))}));if(C.loadComponent&&!C._loadedComponent){const re=this.loader.loadComponent(C);return(0,Mt.D)([W,re]).pipe((0,Fs.J)())}return W})}}return b.\u0275fac=function(y){return new(y||b)(R.LFG(vi),R.LFG(R.Sil),R.LFG(R.lqb),R.LFG(ic),R.LFG(tl))},b.\u0275prov=R.Yz7({token:b,factory:b.\u0275fac}),b})();const Kr=new R.OlP("");let ud=(()=>{class b{constructor(y,C,L={}){this.router=y,this.viewportScroller=C,this.options=L,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},L.scrollPositionRestoration=L.scrollPositionRestoration||"disabled",L.anchorScrolling=L.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(y=>{y instanceof vs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof zr&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.router.parseUrl(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(y=>{y instanceof ou&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,C){this.router.triggerEvent(new ou(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,C))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return b.\u0275fac=function(y){R.$Z()},b.\u0275prov=R.Yz7({token:b,factory:b.\u0275fac}),b})();const hd=new R.OlP("ROUTER_FORROOT_GUARD"),dd=new R.OlP(""),Zn=[pe.Ye,{provide:gi,useClass:Fr},{provide:vi,useFactory:ma},Fo,{provide:uo,useFactory:function jg(b){return b.routerState.root},deps:[vi]},tl];function qg(){return new R.PXZ("Router",vi)}let op=(()=>{class b{constructor(y){}static forRoot(y,C){return{ngModule:b,providers:[Zn,[],_a(y),{provide:hd,useFactory:Xg,deps:[[vi,new R.FiY,new R.tp0]]},{provide:Yi,useValue:C||{}},null!=C&&C.useHash?{provide:pe.S$,useClass:pe.Do}:{provide:pe.S$,useClass:pe.b0},{provide:Kr,useFactory:()=>{const b=(0,R.f3M)(vi),w=(0,R.f3M)(pe.EM),y=(0,R.f3M)(Yi);return y.scrollOffset&&w.setOffset(y.scrollOffset),new ud(b,w,y)}},null!=C&&C.preloadingStrategy?rl(C.preloadingStrategy):[],{provide:R.PXZ,multi:!0,useFactory:qg},null!=C&&C.initialNavigation?Pi(C):[],[{provide:lp,useFactory:Zg},{provide:R.tb,multi:!0,useExisting:lp}]]}}static forChild(y){return{ngModule:b,providers:[_a(y)]}}}return b.\u0275fac=function(y){return new(y||b)(R.LFG(hd,8))},b.\u0275mod=R.oAB({type:b}),b.\u0275inj=R.cJS({}),b})();function Xg(b){return"guarded"}function _a(b){return[{provide:po,multi:!0,useValue:b}]}function Zg(){const b=(0,R.f3M)(R.zs3);return w=>{var y,C;const L=b.get(R.z2F);if(w!==L.components[0])return;const W=b.get(vi),re=b.get(mo);1===b.get(Cu)&&W.initialNavigation(),null===(y=b.get(dd,null,R.XFs.Optional))||void 0===y||y.setUpPreloading(),null===(C=b.get(Kr,null,R.XFs.Optional))||void 0===C||C.init(),W.resetRootComponentType(L.componentTypes[0]),re.next(),re.complete()}}const lp=new R.OlP("");function Pi(b){return["disabled"===b.initialNavigation?[{provide:R.ip1,multi:!0,useFactory:()=>{const b=(0,R.f3M)(vi);return()=>{b.setUpLocationChangeListener()}}},{provide:Cu,useValue:2}]:[],"enabledBlocking"===b.initialNavigation?[{provide:Cu,useValue:0},{provide:R.ip1,multi:!0,deps:[R.zs3],useFactory:b=>{const w=b.get(pe.V_,Promise.resolve(null));let y=!1;return()=>w.then(()=>new Promise(L=>{const W=b.get(vi),re=b.get(mo);(function C(L){b.get(vi).events.pipe((0,st.h)(re=>re instanceof zr||re instanceof ir||re instanceof oa),(0,Ke.U)(re=>re instanceof zr||re instanceof ir&&(0===re.code||1===re.code)&&null),(0,st.h)(re=>null!==re),(0,et.q)(1)).subscribe(()=>{L()})})(()=>{L(!0),y=!0}),W.afterPreactivation=()=>(L(!0),y||re.closed?(0,De.of)(void 0):re),W.initialNavigation()}))}}]:[]]}const mo=new R.OlP("",{factory:()=>new D.x}),Cu=new R.OlP("",{providedIn:"root",factory:()=>1});function rl(b){return[Uo,{provide:dd,useExisting:Uo},{provide:ic,useExisting:b}]}},5861:(pt,Ne,U)=>{"use strict";function R(we,fe,se,q,X,ee,$){try{var H=we[ee]($),Q=H.value}catch(ie){return void se(ie)}H.done?fe(Q):Promise.resolve(Q).then(q,X)}function D(we){return function(){var fe=this,se=arguments;return new Promise(function(q,X){var ee=we.apply(fe,se);function $(Q){R(ee,q,X,$,H,"next",Q)}function H(Q){R(ee,q,X,$,H,"throw",Q)}$(void 0)})}}U.d(Ne,{Z:()=>D})}},pt=>{pt(pt.s=9159)}]);